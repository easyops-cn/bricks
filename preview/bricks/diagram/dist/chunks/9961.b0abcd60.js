"use strict";(globalThis.webpackChunk_next_bricks_diagram=globalThis.webpackChunk_next_bricks_diagram||[]).push([[9961],{4932:(e,t,n)=>{n.d(t,{m:()=>R});var o=n(8769),r=n.n(o),i=n(3373),a=n.n(i),l=n(531),c=n(3033),s=n(8653),d=n(967);function u(e,t){return e.find((e=>(0,l.o6)(e)&&e.id===t))}var v=n(9978),f=n(7531);function h(e){var t,n;let{edge:i,cells:h,lineConfMap:m,active:g}=e;const{setActiveEditableLine:p}=(0,v.s)(),y=(0,o.useRef)(null),w=(0,o.useMemo)((()=>u(h,i.source)),[h,i.source]),x=(0,o.useMemo)((()=>u(h,i.target)),[h,i.target]),E=(0,o.useMemo)((()=>m.get(i)),[i,m]),k=(0,o.useMemo)((()=>{var e;return(0,l.jw)(null===(e=i.view)||void 0===e?void 0:e.type)&&h.some((e=>{var t;return(0,l.WW)(e)&&e.source===i.target&&e.target===i.source&&(0,l.jw)(null===(t=e.view)||void 0===t?void 0:t.type)}))?E.parallelGap:0}),[h,i.source,i.target,i.view,E.parallelGap]),b=(0,o.useMemo)((()=>w&&x&&null!=w.view.x&&null!=x.view.x?(0,d.V)(w.view,x.view,i.view,k):null),[i.view,k,w,x]),C=(0,o.useMemo)((()=>{const e=E.type;return(0,s.S)(b,"curve"===e?E.curveType:"curveLinear",0,1)}),[E,b]);if((0,o.useEffect)((()=>{p((e=>g?b&&w&&x?{edge:i,source:w,target:x,linePoints:b,lineType:E.type,lineCurveType:E.curveType,parallelGap:k}:null:null!=e&&e.edge&&e.edge.source===i.source&&e.edge.target===i.target?null:e))}),[g,i,E.curveType,E.type,b,p,w,x,k]),!C||!b)return null;let I,S;const L=(0,f.I)(E);for(const e of L)"start"===e.placement?I=E.$markerStartUrl:S=E.$markerEndUrl;return r().createElement(r().Fragment,null,r().createElement("path",{d:C,fill:"none",stroke:"transparent",strokeWidth:E.interactStrokeWidth}),r().createElement("path",{ref:y,className:a()("line",{dashed:E.dashed,dotted:E.dotted,[(E.dashed?"dashed":E.dotted?"dotted":"solid")+"-animation"]:E.animate.useAnimate}),style:{"--time":`${E.animate.duration??c.Be}s`,"--solid-length":null===(t=y.current)||void 0===t||null===(n=t.getTotalLength)||void 0===n?void 0:n.call(t)},d:C,fill:"none",stroke:E.strokeColor,strokeWidth:E.strokeWidth,markerStart:I,markerEnd:S}),r().createElement("path",{className:"line-active-bg",d:C,fill:"none"}))}var m=n(9592),g=n(5223),p=n(1030),y=n(9126);function w(e){let{node:t,degraded:n,degradedNodeLabel:i,defaultNodeBricks:a,onResize:l}=e;const c=function(e){const[t,n]=(0,o.useState)(e);return(0,o.useEffect)((()=>{n((t=>(0,p.isEqual)(t,e)?t:e))}),[e]),t}({node:{id:t.id,data:t.data}}),s=t.useBrick,d=(0,o.useRef)(null),u=(0,o.useMemo)((()=>{var e;return n?null:s??(null==a||null===(e=a.find((e=>(0,g.checkIfByTransform)(e,c))))||void 0===e?void 0:e.useBrick)}),[n,s,a,c]),v=(0,o.useMemo)((()=>n?String(g.__secret_internals.legacyDoTransform(c,i??"<% DATA.node.id %>")):""),[n,i,c]),f=(0,o.useCallback)((e=>{const n=d.current;n&&(n.disconnect(),d.current=null),e?setTimeout((()=>{const n=new y.A((()=>{l(t.id,[e.offsetWidth,e.offsetHeight])}));n.observe(e),d.current=n})):l(t.id,null)}),[t.id,l]),h=(0,o.useCallback)((e=>{if(e){const n=e.getBBox();l(t.id,[n.width,n.height])}else l(t.id,null)}),[t.id,l]);return u?r().createElement("foreignObject",{width:9999,height:9999,className:"node"},u&&r().createElement(m.ReactUseBrick,{useBrick:u,data:c,refCallback:f})):n?r().createElement("g",{className:"degraded",ref:h},r().createElement("circle",{cx:8,cy:8,r:8}),r().createElement("text",{x:8,y:32},v)):null}var x=n(9386),E=n(4197);function k(e,t){let{action:n,cell:o,scale:r,layout:i,layoutOptions:a,activeTarget:s,cells:d,onCellsMoving:u,onCellsMoved:v,onCellResizing:f,onCellResized:h,onSwitchActiveTarget:m}=t;if(e.stopPropagation(),"resize"!==n&&(0,E.Q)(o,s)||null==m||m((0,x.P)(o)),(0,l.WW)(o))return;const g=[],p="multi"===(null==s?void 0:s.type)&&"move"===n?d.filter((e=>(0,E.Q)(e,s))):[o];p.forEach((e=>{g.push(e),"move"===n&&(0,l.t2)(e)&&g.push(...d.filter((t=>(0,l.N)(t)&&t.containerId===e.id&&!p.includes(t))))}));const y="force"===i||"dagre"===i,w=g.filter((e=>(0,l.N)(e)&&!y||(0,l.mH)(e)));if(0===w.length)return;const k=function(e){const t=e?!0===e?{grid:!0,object:!0}:e:null,n=null!=t&&t.grid?!0===t.grid?{}:t.grid:null,o=null!=t&&t.object?!0===t.object?{}:t.object:null;return{grid:n?{size:n.size??c.gx}:null,object:o?{distance:o.distance??c.ld}:null}}(null==a?void 0:a.snap),C=[e.clientX,e.clientY],I=w.map((e=>({cell:e,position:"move"===n?[e.view.x,e.view.y]:[e.view.width,e.view.height],center:"move"!==n||(0,l.WW)(e)?null:b(e.view)}))),S=I[0].position;let L=I.map((e=>{let{position:t}=e;return t})),M=[];if("move"===n&&k.object){const e=d.filter((e=>!(0,l.WW)(e)&&!g.includes(e)));M=e.map((e=>({cell:e,center:b(e.view)})))}let z=!1;const P=(e,t)=>{const i=function(e){return[(e.clientX-C[0])/r,(e.clientY-C[1])/r]}(e);let a,c,s,d,m;if(!k.grid&&!k.object||e.altKey)a=I.map((e=>{let{position:t}=e;return[t[0]+i[0],t[1]+i[1]]})),z||(z=i[0]**2+i[1]**2>=9);else{let e=1/0,t=1/0;const n=[...i];if(k.object){const o=k.object.distance;let r,a,l,u,v=0,f=0;for(const{cell:c,center:[s,h]}of M)for(const{cell:g,center:p}of I){const[y,w]=p,x=Math.abs(y+i[0]-s),E=Math.abs(w+i[1]-h),k=E<o&&E<t;x<o&&x<e&&(e=x,n[0]=s-y,d=g,l=c,r=[s,h],v=w),k&&(t=E,n[1]=h-w,m=g,u=c,a=[s,h],f=y)}if(l&&l===u){const e=l.view.height/2,t=l.view.width/2;c=[[r[0],r[1]-e],[r[0],r[1]+e]],s=[[a[0]-t,a[1]],[a[0]+t,a[1]]]}else r&&(c=[r,[r[0],v+n[1]]]),a&&(s=[a,[f+n[0],a[1]]])}if(k.grid){const o=k.grid.size,r=[Math.round((S[0]+i[0])/o)*o,Math.round((S[1]+i[1])/o)*o],a=[r[0]-S[0],r[1]-S[1]],l=Math.abs(a[0]-i[0]),u=Math.abs(a[1]-i[1]);l<e&&(e=l,n[0]=a[0],c=void 0,d=void 0),u<t&&(t=u,n[1]=a[1],s=void 0,m=void 0)}a=I.map((e=>{let{position:t}=e;return[Math.round(t[0]+n[0]),Math.round(t[1]+n[1])]})),(a[0][0]!==L[0][0]||a[0][1]!==L[0][1])&&(L=a,z=!0)}if(z)if("move"===n){var g;const e=I.map(((e,n)=>{let{cell:o}=e;return{type:o.type,id:o.id,x:a[n][0],y:a[n][1],width:o.view.width,height:o.view.height,decorator:(0,l.mH)(o)?o.decorator:void 0,guideLines:t?void 0:[...d===o?[c]:[],...m===o?[s]:[]]}}));null===(g=t?v:u)||void 0===g||g(e)}else{var p;null===(p=t?h:f)||void 0===p||p({type:o.type,id:o.id,width:a[0][0],height:a[0][1]})}},N=e=>{P(e)},R=e=>{P(e,!0),z=!1,document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",R)};document.addEventListener("mousemove",N),document.addEventListener("mouseup",R)}function b(e){return[e.x+e.width/2,e.y+e.height/2]}function C(e){let{cell:t,transform:n,readOnly:i,layoutOptions:a,activeTarget:l,cells:c,onCellResizing:s,onCellResized:d,onSwitchActiveTarget:u}=e;const v=r().useRef(null);return(0,o.useEffect)((()=>{const e=v.current;if(!e||i)return;const o=e=>{k(e,{action:"resize",cell:t,scale:n.k,layoutOptions:a,activeTarget:l,cells:c,onCellResizing:s,onCellResized:d,onSwitchActiveTarget:u})};return e.addEventListener("mousedown",o),()=>{e.removeEventListener("mousedown",o)}}),[l,t,c,a,d,s,u,i,n.k]),r().createElement("g",{className:"decorator-area"},r().createElement("rect",{width:t.view.width,height:t.view.height,className:"area"}),!i&&r().createElement("g",{ref:v,className:"resize-handle",transform:`translate(${t.view.width-20} ${t.view.height-20})`},r().createElement("rect",{width:20,height:20}),r().createElement("path",{d:"M10 18L18 10 M15 18L18 15"})))}function I(e){let{cell:t,readOnly:n,onDecoratorTextEditing:i,onDecoratorTextChange:l}=e;const c=t.view.text??"",[s,d]=(0,o.useState)(c),[u,v]=(0,o.useState)(!1),f=(0,o.useRef)(!1),[h,m]=(0,o.useState)(!1),g=(0,o.useRef)(null),p=(0,o.useCallback)((e=>{n||(e.preventDefault(),e.stopPropagation(),v(!0))}),[n]);(0,o.useEffect)((()=>{const e=g.current;e&&e.textContent!==s&&(e.textContent=s)}),[s]),(0,o.useEffect)((()=>{var e;const n=null===(e=g.current)||void 0===e?void 0:e.parentElement;n&&(t.view.width=n.clientWidth,t.view.height=n.clientHeight)}),[s,t.id]),(0,o.useEffect)((()=>{u&&g.current&&(g.current.focus(),S(g.current)),null==i||i({id:t.id,editing:u})}),[t.id,u,i]),(0,o.useEffect)((()=>{f.current?null==i||i({id:t.id,editing:u}):f.current=!0}),[t.id,u,i]);const y=(0,o.useCallback)((e=>{n||d(e.target.textContent)}),[n]),w=(0,o.useCallback)((()=>{n||(v(!1),m(!0))}),[n]);return(0,o.useEffect)((()=>{h&&(null==l||l({id:t.id,view:{...t.view,text:s}}),m(!1))}),[t,s,l,h]),r().createElement("foreignObject",{className:"decorator-text"},r().createElement("div",{className:a()("text-container",{editing:u}),onDoubleClick:p},r().createElement("div",{className:"text",contentEditable:u,ref:g,onInput:y,onBlur:w})))}function S(e){const t=document.createRange();t.selectNodeContents(e);const n=window.getSelection();n.removeAllRanges(),n.addRange(t)}var L=n(9068);function M(e){let{cell:t,transform:n,readOnly:i,layout:c,view:s,activeTarget:d,cells:u,onCellResizing:v,onCellResized:f,onSwitchActiveTarget:h,onDecoratorTextEditing:m,onDecoratorTextChange:g}=e;const y=(0,p.get)(t.view,"text",""),w=(0,p.get)(t.view,"direction","top"),x=(0,o.useRef)(null),E=r().useRef(null),[b,C]=(0,o.useState)(!1),[I,M]=(0,o.useState)(y),[z,P]=(0,o.useState)(!1),[N,R]=(0,o.useState)(),[A,T]=(0,o.useState)({x:0,y:0,width:t.view.width,height:t.view.height}),H=(0,o.useCallback)((e=>{i||(e.preventDefault(),e.stopPropagation(),C(!0))}),[i]),Z=(0,o.useCallback)((e=>{i||M(e.target.textContent)}),[i]),D=(0,o.useCallback)((()=>{i||(C(!1),P(!0),R((0,L.uuidV4)()))}),[i]);return(0,o.useEffect)((()=>{M(y)}),[y]),(0,o.useEffect)((()=>{const e=x.current;e&&e.textContent!==I&&(e.textContent=I)}),[I]),(0,o.useEffect)((()=>{var e;const t=null===(e=x.current)||void 0===e?void 0:e.parentElement;if(t){const{clientWidth:e,clientHeight:n}=t;if(["left","right"].includes(w)){const t={width:e,height:s.height,x:"left"===w?-e:s.width,y:0};T(t)}else{const e={width:s.width,height:n,x:0,y:"top"===w?-n:s.height};T(e)}}}),[s,I,w,N]),(0,o.useEffect)((()=>{b&&x.current&&(x.current.focus(),S(x.current)),null==m||m({id:t.id,editing:b})}),[t.id,b,m]),(0,o.useEffect)((()=>{z&&(null==g||g({id:t.id,view:{...s,text:I}}),P(!1))}),[t,s,I,g,z]),(0,o.useEffect)((()=>{const e=E.current;if(!e||i)return;const o=e=>{k(e,{action:"resize",cell:t,scale:n.k,activeTarget:d,cells:u,onCellResizing:v,onCellResized:f,onSwitchActiveTarget:h})};return e.addEventListener("mousedown",o),()=>{e.removeEventListener("mousedown",o)}}),[d,t,u,f,v,h,i,n.k]),r().createElement("g",{className:"decorator-container"},r().createElement("foreignObject",A,r().createElement("div",{className:a()("text-container",{editing:b,[["left","right"].includes(w)?"vertical":"horizontal"]:!0}),onDoubleClick:H},r().createElement("div",{className:"text",contentEditable:b,ref:x,onInput:Z,onBlur:D}))),r().createElement("rect",{width:s.width,height:s.height,className:"container"}),!i&&!(0,l.OD)(c)&&r().createElement("g",{ref:E,className:"resize-handle",transform:`translate(${s.width-20} ${s.height-20})`},r().createElement("rect",{width:20,height:20}),r().createElement("path",{d:"M10 18L18 10 M15 18L18 15"})))}function z(e){let t,{cell:n,view:o,transform:i,readOnly:a,layout:l,layoutOptions:c,activeTarget:s,cells:d,onCellResizing:u,onCellResized:v,onSwitchActiveTarget:f,onDecoratorTextEditing:h,onDecoratorTextChange:m}=e;switch(n.decorator){case"container":t=M;break;case"area":t=C;break;case"text":t=I;break;default:return console.error(`Unknown decorator: ${n.decorator}`),null}return r().createElement(t,{cell:n,view:o,transform:i,readOnly:a,layout:l,layoutOptions:c,activeTarget:s,cells:d,onCellResizing:u,onCellResized:v,onSwitchActiveTarget:f,onDecoratorTextEditing:h,onDecoratorTextChange:m})}var P=n(8185);function N(e){let t=1/0,n=1/0,o=-1/0,r=-1/0;return e.forEach((e=>{const{x:i,y:a,width:l,height:c}=e.view;i<t&&(t=i),a<n&&(n=a),i+l>o&&(o=i+l),a+c>r&&(r=a+c)})),[t,o,n,r].some((e=>isFinite(e)))?{x:t-20,y:n-20,width:o-t+40,height:r-n+40}:{}}function R(e){let{layout:t,layoutOptions:n,cell:i,cells:c,degraded:s,degradedNodeLabel:d,defaultNodeBricks:u,lineConfMap:f,activeTarget:m,dragNodeToContainerActive:g,readOnly:y,transform:b,unrelatedCells:C,allowEdgeToArea:I,onCellsMoving:S,onCellsMoved:L,onCellResizing:M,onCellResized:R,onSwitchActiveTarget:A,onCellContextMenu:T,onCellClick:H,onDecoratorTextEditing:Z,onDecoratorTextChange:D,onNodeBrickResize:W,onCellMouseEnter:j,onCellMouseLeave:B}=e;const{lineEditorState:V,smartConnectLineState:O,setSmartConnectLineState:U,onConnect:G,setLineEditorState:$,onChangeEdgeView:X}=(0,v.s)(),Y=(0,o.useRef)(null),Q=(0,o.useMemo)((()=>C.some((e=>(0,P.c)(e,i)))),[i,C]),F=(0,o.useMemo)((()=>{if((0,l.t2)(i)&&(0,l.OD)(t)){const e=c.filter((e=>(0,l.N)(e)&&e.containerId===i.id)),t={...i.view,...N(e)};return i.view=t,t}return(0,l.WW)(i)?void 0:(0,p.get)(i,"view",{x:0,y:0,width:0,height:0})}),[t,i,c]);(0,o.useEffect)((()=>{const e=Y.current;if(!e)return;const o=e=>{y||(0,l.t2)(i)&&(0,l.OD)(t)?e.stopPropagation():k(e,{layout:t,layoutOptions:n,action:"move",cell:i,scale:b.k,activeTarget:m,cells:c,onCellsMoving:S,onCellsMoved:L,onSwitchActiveTarget:A})};return e.addEventListener("mousedown",o),()=>{e.removeEventListener("mousedown",o)}}),[t,n,i,m,c,L,S,A,y,b.k]),(0,o.useEffect)((()=>{const e=Y.current;if(!e||!(0,l.bo)(i,I)||!(O||V&&"control"!==V.type))return;const t=e=>{if(e.preventDefault(),e.stopPropagation(),O)O.source!==i&&(null==G||G(O.source,i,O.exitPosition,void 0)),U(null);else if(V){const{type:e,source:t,target:n,edge:{view:o}}=V,r="entry"===e;(r?n:t)===i&&(r?null==X||X(t,n,{...o,entryPosition:null}):null==X||X(t,n,{...o,exitPosition:null})),$(null)}};return e.addEventListener("mouseup",t),()=>{e.removeEventListener("mouseup",t)}}),[I,i,V,X,G,$,U,O]);const J=(0,o.useCallback)((e=>{y&&"decorator"===i.type||(e.preventDefault(),A((0,x.P)(i)),T({cell:i,clientX:e.clientX,clientY:e.clientY}))}),[i,T,A,y]),K=(0,o.useCallback)((e=>{H&&"decorator"!==i.type&&H({cell:i,clientX:e.clientX,clientY:e.clientY})}),[i,H]),_=(0,o.useCallback)((()=>{null==j||j(i)}),[i,j]),q=(0,o.useCallback)((()=>{null==B||B(i)}),[i,B]),ee=(0,E.Q)(i,m);return r().createElement("g",{className:a()("cell",{active:ee,faded:Q,"read-only":y,"container-active":g}),ref:Y,transform:"edge"===i.type||null==i.view.x?void 0:`translate(${F.x} ${F.y})`,onContextMenu:J,onClick:K,onMouseEnter:_,onMouseLeave:q},(0,l.N)(i)?r().createElement(w,{node:i,degraded:s,degradedNodeLabel:d,defaultNodeBricks:u,onResize:W}):(0,l.WW)(i)?r().createElement(h,{edge:i,cells:c,lineConfMap:f,active:ee}):(0,l.mH)(i)?r().createElement(z,{cell:i,view:F,transform:b,readOnly:y,layout:t,layoutOptions:n,activeTarget:m,cells:c,onCellResizing:M,onCellResized:R,onSwitchActiveTarget:A,onDecoratorTextEditing:Z,onDecoratorTextChange:D}):null)}},3639:(e,t,n)=>{n.d(t,{w:()=>l});var o=n(8769),r=n.n(o),i=n(3373),a=n.n(i);function l(e){let{connectLineState:t,transform:n,markerEnd:i,onConnect:l}=e;const[c,s]=(0,o.useState)(null);return(0,o.useEffect)((()=>{t&&s(t.from)}),[t]),(0,o.useEffect)((()=>{if(t){const e=e=>[(e.clientX-n.x-t.offset[0])/n.k,(e.clientY-n.y-t.offset[1])/n.k],o=t=>{s(e(t))},r=e=>{e.stopPropagation()},i=n=>{n.stopPropagation(),a(),l(t,e(n))},a=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mousedown",r,{capture:!0}),document.removeEventListener("click",i,{capture:!0}),s(null)};return document.addEventListener("mousemove",o),document.addEventListener("mousedown",r,{capture:!0}),document.addEventListener("click",i,{capture:!0}),a}}),[t,l,n]),r().createElement("path",{className:a()("connect-line",{connecting:!!t&&c&&(c[0]-t.from[0])**2+(c[1]-t.from[1])**2>25}),d:t&&c?`M${t.from.join(" ")}L${c.join(" ")}`:"",fill:"none",stroke:"gray",strokeWidth:1,markerEnd:`url(#${i})`})}},1825:(e,t,n)=>{n.d(t,{W:()=>f});var o=n(8769),r=n.n(o),i=n(3373),a=n.n(i),l=n(8653),c=n(9978),s=n(1030),d=n(967);function u(e,t){const{control:n,linePoints:o}=e,r=[],[i,a]=t,l=o[0],c=o[o.length-1];0===n.index&&r.push("ns"===n.direction?{x:l.x,y:a}:{x:i,y:l.y});for(let e=1;e<o.length-1;e++){const t=o[e];r.push(e===n.index||e===n.index+1?"ns"===n.direction?{x:t.x,y:a}:{x:i,y:t.y}:t)}return n.index===o.length-2&&r.push("ns"===n.direction?{x:c.x,y:a}:{x:i,y:c.y}),(0,d.P)(l,r,c)}var v=n(7531);function f(e){let{transform:t,options:n}=e;const[i,f]=(0,o.useState)(null),{activeEditableLine:h,hoverState:m,lineEditorState:g,setLineEditorState:p,onChangeEdgeView:y}=(0,c.s)(),w=(0,o.useRef)(!1);(0,o.useEffect)((()=>{g||setTimeout((()=>{w.current=!1}),0)}),[g]),(0,o.useEffect)((()=>{if(!g)return;w.current=!1;const{type:e,offset:n,from:o}=g,r=r=>{const i={x:(r.clientX-t.x-n[0])/t.k,y:(r.clientY-t.y-n[1])/t.k};let a=1/0;if("control"===e&&!r.altKey){const{linePoints:e,control:t}=g,n="ns"===t.direction?"y":"x",o=t[n],r=e.filter(((n,o)=>0===o||o===e.length-1||o!==t.index&&o!==t.index+1)),l=5;for(const e of r){const t=Math.abs(e[n]-i[n]);t<=l&&t<a&&(i[n]=e[n],a=t,w.current||o===i[n]||(w.current=!0))}}if(a===1/0&&!w.current){const e=(r.clientX-o[0])/t.k,n=(r.clientY-o[1])/t.k;w.current=e**2+n**2>=9}return[i.x,i.y]},i=e=>{const t=r(e);w.current&&f(t)};function a(e){if(e.preventDefault(),l(),"control"===(null==g?void 0:g.type)){const t=r(e);if(w.current){const{source:e,target:n,edge:{view:o}}=g;null==y||y(e,n,{...o,vertices:u(g,t)})}}}function l(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a),f(null),p(null)}return document.addEventListener("mousemove",i),document.addEventListener("mouseup",a),l}),[g,t,p,y]),(0,o.useEffect)((()=>{if(!h)return;const e=e=>{w.current&&(e.stopPropagation(),e.preventDefault())};return document.body.addEventListener("click",e),()=>{document.body.removeEventListener("click",e)}}),[h]);const x=(0,o.useMemo)((()=>{var e;const t=function(e,t,n){if(!e||!(t||"control"!==e.type&&void 0!==(null==n?void 0:n.activePointIndex)))return null;const{type:o,source:r,target:i,edge:{view:a}}=e,{exitPosition:l,entryPosition:c,vertices:v}=a??{},f=(0,s.pick)(a,["type","curveType"]);if("control"===o){const n=u(e,t);return(0,d.V)(r.view,i.view,{...f,exitPosition:l,entryPosition:c,vertices:n})}if(void 0!==(null==n?void 0:n.activePointIndex)){const e=n.relativePoints[n.activePointIndex];return(0,d.V)(r.view,i.view,{...f,..."entry"===o?{exitPosition:l,entryPosition:e}:{exitPosition:e,entryPosition:c},vertices:v})}const[h,m]=t;return"entry"===o?(0,d.V)(r.view,{x:h,y:m,width:0,height:0},{...f,exitPosition:l,vertices:v}):(0,d.V)({x:h,y:m,width:0,height:0},i.view,{...f,entryPosition:c,vertices:v})}(g,i,m);return(0,l.S)(t,"curve"===(null==g||null===(e=g.edge.view)||void 0===e?void 0:e.type)?g.edge.view.curveType:"curveLinear",0,1)}),[i,m,g]);let E,k;const b=(0,v.I)(n);for(const e of b)"start"===e.placement?E=n.$editingStartMarkerUrl:k=n.$editingEndMarkerUrl;return r().createElement("path",{className:a()("editing-line",{editing:!(!g||!i)}),d:x,fill:"none",stroke:n.editingStrokeColor,markerStart:E,markerEnd:k})}},9978:(e,t,n)=>{n.d(t,{H:()=>i,s:()=>a});var o=n(8769),r=n.n(o);const i=r().createContext({rootRef:{current:null},smartConnectLineState:null,unsetHoverStateTimeoutRef:{current:null},hoverState:null,activeEditableLine:null,lineEditorState:null,setLineEditorState:()=>{},setActiveEditableLine:()=>{},setHoverState:()=>{},setSmartConnectLineState:()=>{}});function a(){return r().useContext(i)}},2722:(e,t,n)=>{n.d(t,{T:()=>v});var o=n(8769),r=n.n(o),i=n(9978),a=n(4197),l=n(3033);const c="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI1cHgiIGhlaWdodD0iNXB4IiB2ZXJzaW9uPSIxLjEiPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2Utd2lkdGg9IjIiIHN0eWxlPSJzdHJva2Utb3BhY2l0eTowLjQiIHN0cm9rZT0iI2ZmZmZmZiIvPjxwYXRoIGQ9Im0gMCAwIEwgNSA1IE0gMCA1IEwgNSAwIiBzdHJva2U9IiMyOWI2ZjIiLz48L3N2Zz4=",s=5,d=8,u=s/2;function v(e){let{activeTarget:t,scale:n,disabled:c}=e;const{unsetHoverStateTimeoutRef:s,hoverState:u,setHoverState:v,smartConnectLineState:h,lineEditorState:m}=(0,i.s)(),g=(0,o.useCallback)((()=>{null!==s.current&&(clearTimeout(s.current),s.current=null)}),[s]),p=(0,o.useCallback)((()=>{g(),v((e=>void 0===(null==e?void 0:e.activePointIndex)?e:{...u,activePointIndex:void 0}))}),[u,v,g]),y=(0,o.useCallback)((()=>{s.current=setTimeout((()=>{v(null)}))}),[v,s]),w=!c&&u&&(!!h||(m?"entry"===m.type?u.cell===m.target:"exit"===m.type&&u.cell===m.source:!(0,a.Q)(u.cell,t)&&!function(e){return e&&("edge"===e.type||"multi"===e.type&&e.targets.some((e=>"edge"===e.type)))}(t))),x=l.XK,E=x/2;return r().createElement("g",{onMouseEnter:p,onMouseLeave:y},w&&r().createElement(r().Fragment,null,r().createElement("rect",{x:u.cell.view.x-E,y:u.cell.view.y-E,width:u.cell.view.width+x,height:u.cell.view.height+x,fill:"none",stroke:"transparent",strokeWidth:2*d/n,pointerEvents:"stroke"}),void 0!==u.activePointIndex&&r().createElement("circle",{cx:u.points[u.activePointIndex].x,cy:u.points[u.activePointIndex].y,r:d/n,fill:"lightgreen",fillOpacity:.5,pointerEvents:"none"}),u.points.map(((e,t)=>r().createElement(f,{key:t,index:t,point:e,scale:n,unsetActivePointIndex:p,unsetTimeout:g})))))}function f(e){let{index:t,point:n,scale:a,unsetTimeout:l,unsetActivePointIndex:v}=e;const{rootRef:f,smartConnectLineState:h,hoverState:m,setHoverState:g,setSmartConnectLineState:p,onConnect:y,lineEditorState:w,setLineEditorState:x,onChangeEdgeView:E}=(0,i.s)(),k=(0,o.useRef)(null);return(0,o.useEffect)((()=>{const e=k.current,n=o=>{"mousemove"===o.type&&(null==e||e.removeEventListener(o.type,n)),l(),g((e=>e&&e.activePointIndex!==t?{...m,activePointIndex:t}:e))};return null==e||e.addEventListener("mouseenter",n),null==e||e.addEventListener("mousemove",n),()=>{null==e||e.removeEventListener("mouseenter",n),null==e||e.removeEventListener("mousemove",n)}}),[m,t,g,l]),(0,o.useEffect)((()=>{if(w)return;const e=e=>{e.preventDefault(),e.stopPropagation();const n=f.current.getBoundingClientRect(),o=m.points[t];p({source:m.cell,from:[o.x,o.y],offset:[n.left,n.top],exitPosition:m.relativePoints[t]})},n=k.current;return null==n||n.addEventListener("mousedown",e),()=>{null==n||n.removeEventListener("mousedown",e)}}),[m,t,w,f,p]),(0,o.useEffect)((()=>{const e=e=>{if(e.preventDefault(),e.stopPropagation(),h)h.source!==(null==m?void 0:m.cell)&&(null==y||y(h.source,m.cell,h.exitPosition,m.relativePoints[m.activePointIndex])),p(null);else if(w){const e=m.relativePoints[m.activePointIndex],{type:t,source:n,target:o,edge:{view:r}}=w;"entry"===t?null==E||E(n,o,{...r,entryPosition:e}):null==E||E(n,o,{...r,exitPosition:e}),x(null)}},t=k.current;return null==t||t.addEventListener("mouseup",e),()=>{null==t||t.removeEventListener("mouseup",e)}}),[h,m,y,p,w,E,x]),r().createElement("g",{ref:k,onMouseLeave:v},r().createElement("circle",{cx:n.x,cy:n.y,r:d,fill:"transparent"}),r().createElement("image",{x:n.x-u/a,y:n.y-u/a,width:s/a,height:s/a,xlinkHref:c,preserveAspectRatio:"none"}))}},2202:(e,t,n)=>{n.d(t,{F:()=>v});var o=n(9575),r=n(8769),i=n.n(r),a=n(9978),l=n(531);const c="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjIycHgiIHZlcnNpb249IjEuMSI+PGNpcmNsZSBjeD0iMTEiIGN5PSIxMSIgcj0iNyIgc3Ryb2tlPSIjZmZmIiBmaWxsPSIjMjliNmYyIi8+PGNpcmNsZSBjeD0iMTEiIGN5PSIxMSIgcj0iMyIgc3Ryb2tlPSIjZmZmIiBmaWxsPSJ0cmFuc3BhcmVudCIvPjwvc3ZnPg==",s="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjIycHgiIHZlcnNpb249IjEuMSI+PGNpcmNsZSBjeD0iMTEiIGN5PSIxMSIgcj0iNyIgc3Ryb2tlPSIjZmZmIiBmaWxsPSIjMDFiZDIyIi8+PHBhdGggZD0ibSA4IDggTCAxNCAxNE0gOCAxNCBMIDE0IDgiIHN0cm9rZT0iI2ZmZiIvPjwvc3ZnPg==",d="data:image/svg+xml;base64,PCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxOHB4IiBoZWlnaHQ9IjE4cHgiIHZlcnNpb249IjEuMSI+PGNpcmNsZSBjeD0iOSIgY3k9IjkiIHI9IjUiIHN0cm9rZT0iI2ZmZiIgZmlsbD0iIzI5YjZmMiIvPjwvc3ZnPg==",u=22;function v(e){let{scale:t}=e;const{rootRef:n,activeEditableLine:v,setLineEditorState:f}=(0,a.s)(),h=(0,r.useRef)(null),m=(0,r.useRef)(null),g=(0,r.useRef)([]);(0,r.useEffect)((()=>{const e=h.current,t=m.current;if(!e||!t||!v)return;const o=e=>t=>{t.stopPropagation(),t.preventDefault();const o=n.current.getBoundingClientRect();f({...v,offset:[o.left,o.top],from:[t.clientX,t.clientY],type:e})},r=o("exit"),i=o("entry");return e.addEventListener("mousedown",r),t.addEventListener("mousedown",i),()=>{e.removeEventListener("mousedown",r),t.removeEventListener("mousedown",i)}}),[v,n,f]);const p=(0,r.useMemo)((()=>{var e;return v&&!(0,l.jw)(null===(e=v.edge.view)||void 0===e?void 0:e.type)?function(e){const t=[];let n=e[0],o=1;for(;o<e.length;){const r=e[o],i=n.y===r.y,a=n.x===r.x;if(!i||!a){const e=i?"ns":"ew";t.push({direction:e,index:o-1,x:(n.x+r.x)/2,y:(n.y+r.y)/2})}n=r,o++}return t}(v.linePoints):[]}),[v]);(0,r.useEffect)((()=>{if(!v)return;const e=g.current,t=p.map((e=>(e=>t=>{t.stopPropagation(),t.preventDefault();const o=n.current.getBoundingClientRect();f({...v,offset:[o.left,o.top],from:[t.clientX,t.clientY],type:"control",control:e})})(e)));return e.forEach(((e,n)=>{null==e||e.addEventListener("mousedown",t[n])})),()=>{e.forEach(((e,n)=>{null==e||e.removeEventListener("mousedown",t[n])}))}}),[v,p,n,f]);const y=(0,r.useRef)(null);if((0,r.useEffect)((()=>{const e=y.current,t=e=>{e.stopPropagation(),e.preventDefault()};return null==e||e.addEventListener("click",t),()=>{null==e||e.removeEventListener("click",t)}}),[]),!v)return null;const{linePoints:w,edge:{view:x}}=v,{exitPosition:E,entryPosition:k}=x??{},b={width:u/t,height:u/t,preserveAspectRatio:"none",cursor:"pointer",pointerEvents:"fill"},C=w[0],I=w[w.length-1],S=u/t/2;return i().createElement("g",{ref:y},i().createElement("image",(0,o.A)({ref:h},b,{x:C.x-S,y:C.y-S,xlinkHref:E?s:c})),p.map(((e,t)=>i().createElement("image",(0,o.A)({key:t,ref:e=>{g.current[t]=e}},b,{x:e.x-S,y:e.y-S,xlinkHref:d,cursor:"ns"===e.direction?"row-resize":"col-resize"})))),i().createElement("image",(0,o.A)({ref:m},b,{x:I.x-S,y:I.y-S,xlinkHref:k?s:c})))}},1103:(e,t,n)=>{n.d(t,{X:()=>u});var o=n(8769),r=n.n(o),i=n(3373),a=n.n(i),l=n(8653),c=n(9978),s=n(967),d=n(7531);function u(e){let{transform:t,lineSettings:n,options:i}=e;const[u,v]=(0,o.useState)(null),{hoverState:f,smartConnectLineState:h,setSmartConnectLineState:m}=(0,c.s)();(0,o.useEffect)((()=>{if(h)return document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),o;function e(e){v([(e.clientX-t.x-h.offset[0])/t.k,(e.clientY-t.y-h.offset[1])/t.k])}function n(e){e.preventDefault(),o()}function o(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n),v(null),m(null)}}),[m,h,t]);const g=(0,o.useMemo)((()=>{const e=function(e,t,n,o){if(!e||!t&&void 0===(null==n?void 0:n.activePointIndex))return null;const r=e.source.view;if(void 0!==(null==n?void 0:n.activePointIndex))return(0,s.V)(r,n.cell.view,{...o,exitPosition:e.exitPosition,entryPosition:n.relativePoints[n.activePointIndex]});const[i,a]=t;return(0,s.V)(r,{x:i,y:a,width:0,height:0},{...o,exitPosition:e.exitPosition})}(h,u,f,n);return(0,l.S)(e,"curve"===i.type?i.curveType:"curveLinear",0,1)}),[u,f,h,i,n]);let p,y;const w=(0,d.I)(i);for(const e of w)"start"===e.placement?p=i.$markerStartUrl:y=i.$markerEndUrl;return r().createElement("path",{className:a()("connect-line",{connecting:!(!h||!u)}),d:g,fill:"none",stroke:i.strokeColor,strokeWidth:i.strokeWidth,markerStart:p,markerEnd:y})}},3033:(e,t,n)=>{n.d(t,{Be:()=>g,CV:()=>o,HP:()=>i,Ie:()=>f,N8:()=>l,Ub:()=>m,VO:()=>v,XK:()=>E,XV:()=>h,Yt:()=>d,gx:()=>y,ld:()=>w,mF:()=>u,p6:()=>x,pC:()=>p,sS:()=>s,sz:()=>a,w1:()=>c,xc:()=>r});const o=Symbol.for("size-initialized"),r=Symbol.for("layout-initialized"),i=20,a=36,l=180,c=120,s=.5,d=2,u="gray",v=1,f=15,h=!1,m=!0,g=1,p=500,y=10,w=5,x=5,E=0},531:(e,t,n)=>{function o(e){return"node"===e.type}function r(e){return"decorator"===e.type}function i(e){return"node"===e.type}function a(e){return"edge"===e.type}function l(e){return"node"===e.type||"edge"===e.type}function c(e){return"node"===e.type||"decorator"===e.type&&"area"===e.decorator}function s(e,t){return"node"===e.type||!!t&&"decorator"===e.type&&"area"===e.decorator}function d(e){return"decorator"===e.type&&"text"===e.decorator}function u(e){return"decorator"===e.type&&"container"===e.decorator}function v(e){return!["manual",void 0].includes(e)}function f(e){return!("polyline"===e||"curve"===e)}n.d(t,{Hs:()=>d,N:()=>o,OD:()=>v,WW:()=>a,bo:()=>s,jw:()=>f,mH:()=>r,nv:()=>l,o6:()=>c,t2:()=>u,vC:()=>i})},9386:(e,t,n)=>{n.d(t,{P:()=>r});var o=n(1030);function r(e){return"edge"===e.type?(0,o.pick)(e,["type","source","target","data"]):(0,o.pick)(e,["type","id","data"])}},227:(e,t,n)=>{n.d(t,{Y:()=>r});var o=n(4197);function r(e,t,n,r){const i=[];if(t){const n=new Set;for(const o of e)"edge"===o.type&&o.source===t.source.id&&n.add(o.target);for(const t of e)switch(t.type){case"node":n.has(t.id)&&i.push(t);break;case"decorator":r&&"text"!=t.decorator&&!n.has(t.id)||i.push(t);break;default:i.push(t)}}else switch(null==n?void 0:n.type){case"multi":{const t=new Map,r=new Set,a=new Set;for(const e of n.targets)"node"===e.type&&(r.add(e.id),a.add(e.id));for(const l of e)"node"===l.type?t.set(l.id,l):"edge"===l.type?r.has(l.source)?a.add(l.target):r.has(l.target)?a.add(l.source):(0,o.Q)(l,n)||i.push(l):(0,o.Q)(l,n)||i.push(l);for(const[e,n]of t)a.has(e)||i.push(n);break}case"node":{const t=new Map,o=new Set([n.id]);for(const r of e)"node"===r.type?t.set(r.id,r):"edge"===r.type?r.source===n.id?o.add(r.target):r.target===n.id?o.add(r.source):i.push(r):i.push(r);for(const[e,n]of t)o.has(e)||i.push(n);break}case"edge":for(const t of e)("edge"===t.type?(0,o.Q)(t,n):"node"===t.type&&(t.id===n.source||t.id===n.target))||i.push(t)}return i}},5114:(e,t,n)=>{n.d(t,{a:()=>r});var o=n(4197);function r(e,t){let{cells:n,activeTarget:r}=t;const i=n.filter((e=>(0,o.Q)(e,r)));if(0!==i.length)switch(e.key||e.keyCode||e.which){case"Backspace":case 8:case"Delete":case 46:return e.preventDefault(),e.stopPropagation(),{action:"delete-cells",cells:i}}}},2219:(e,t,n)=>{function o(e,t){let{transform:n,offset:o,onLassoing:r,onLassoed:i}=t;if(e.ctrlKey||e.button)return;e.stopPropagation();const a=[e.clientX,e.clientY],l=(e.clientX-o[0]-n.x)/n.k,c=(e.clientY-o[1]-n.y)/n.k;let s=!1;const d=(e,t)=>{const o=function(e){return[(e.clientX-a[0])/n.k,(e.clientY-a[1])/n.k]}(e);if(s||(s=o[0]**2+o[1]**2>=9),s){let[e,n]=o,a=l,s=c;e<0&&(a=l+e,e=-e),n<0&&(s=c+n,n=-n),(t?i:r)({x:a,y:s,width:e,height:n})}},u=e=>{d(e)},v=e=>{d(e,!0),s=!1,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",v)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",v)}n.d(t,{F:()=>o})},1991:(e,t,n)=>{n.d(t,{_:()=>r});var o=n(531);function r(e,t,n){const r=t.filter((e=>(0,o.N)(e))),i=e.filter((e=>(0,o.t2)(e))).map((e=>e.id)),a=e.filter((e=>{const t=r.find((t=>t.id===e.id)),n=(null==t?void 0:t.containerId)&&i.includes(t.containerId);return(0,o.N)(e)&&!n}));a.forEach((e=>{const n=e.x,r=e.x+e.width,i=e.y,a=e.y+e.height,l=t.filter((e=>(0,o.t2)(e)));for(const t of l){const o=t.view.x,l=t.view.x+t.view.width,c=t.view.y,s=t.view.y+t.view.height;if(n>=o&&r<=l&&i>=c&&a<=s){e.containerCell=t;break}}}));let l=[];return l=a.filter((e=>{var t;const n=r.find((t=>t.id===e.id));return(null==n?void 0:n.containerId)!==(null===(t=e.containerCell)||void 0===t?void 0:t.id)})),l.length>0&&(null==n||n(l)),l}},3783:(e,t,n)=>{n.d(t,{C:()=>r});var o=n(531);function r(e,t){let{defaultNodeSize:n}=t;return(e??[]).map((e=>{var t,r;return!(0,o.vC)(e)||void 0!==(null===(t=e.view)||void 0===t?void 0:t.width)&&void 0!==(null===(r=e.view)||void 0===r?void 0:r.height)?e:{...e,view:{width:n[0],height:n[1],...e.view}}}))}},8185:(e,t,n)=>{function o(e,t){return e?!!t&&e.type===t.type&&("multi"===e.type?e.targets.length===t.targets.length&&e.targets.every((e=>t.targets.some((t=>o(e,t))))):"node"===e.type||"decorator"===e.type?e.id===t.id:e.source===t.source&&e.target===t.target):!t}n.d(t,{c:()=>o})},4197:(e,t,n)=>{n.d(t,{Q:()=>r});var o=n(8185);function r(e,t){return!!t&&("multi"===t.type?t.targets:[t]).some((t=>(0,o.c)(t,e)))}},908:(e,t,n)=>{n.d(t,{r:()=>r});var o=n(531);function r(e,t){let{canvasWidth:n,canvasHeight:r,scaleRange:i}=t,a=1/0,l=1/0,c=-1/0,s=-1/0,d=!0;for(const t of e)if(!(0,o.WW)(t)){d=!1;const{view:e}=t,n=e.x+e.width,o=e.y+e.height;e.x<a&&(a=e.x),n>c&&(c=n),e.y<l&&(l=e.y),o>s&&(s=o)}const u=c-a,v=s-l,f=i&&!d&&(u>n||v>r)?Math.max(Math.min(n/u,r/v,i[1]),i[0]):1;return{x:d?0:(n-u*f)/2-a*f,y:d?0:(r-v*f)/2-l*f,k:f}}},2098:(e,t,n)=>{n.d(t,{L:()=>u});var o=n(1030),r=n(3033),i=n(531),a=n(3783),l=n(908),c=n(6170),s=n(9127),d=n(8185);function u(e){let{cells:t,layout:n,previousCells:u,defaultNodeSize:v,canvasWidth:f,canvasHeight:h,scaleRange:m,transform:g,reason:p,parent:y,allowEdgeToArea:w}=e;const x="force"!==n&&"dagre"!==n,E=(0,a.C)(t,{defaultNodeSize:v}),k=[];let b=!1;const C=new Map;let I=!1;for(const e of u)(0,i.mH)(e)?I=!0:(0,i.N)(e)&&(I=!0,e[r.CV]&&C.set(e.id,e));const S=new Map;for(const e of E)if((0,i.N)(e)){S.set(e.id,e);const t=C.get(e.id);t&&(e.view.width=t.view.width,e.view.height=t.view.height,e[r.CV]=!0)}let L=!1;if("add-related-nodes"===p&&y){const e=new Set;for(const t of E)(0,i.WW)(t)&&t.source===y&&t.target!==y&&e.add(t.target);const t=S.get(y);if(void 0!==(null==t?void 0:t.view.x)&&void 0!==t.view.y){if(L=!0,x)for(const t of E)((0,i.N)(t)&&void 0===t.view.x||(0,i.N)(t)&&void 0===t.view.y)&&e.add(t.id);const n=[...e].map((e=>S.get(e))).filter(Boolean);let o;for(const e of n)void 0!==e.view.x&&void 0!==e.view.y?(!o||e.view.x>o.view.x)&&e.view.y>t.view.y&&(o=e):k.push(e);if(k.length>0&&x){let e,n;if(o)e=o.view.x+o.view.width+r.sz,n=o.view.y;else{const o=k.reduce(((e,t)=>e+t.view.width+r.sz),-r.sz);e=t.view.x-o/2+t.view.width/2,n=t.view.y+t.view.height+r.sz}for(const t of k)t.view.x=e,t.view.y=n,e+=t.view.width+r.sz}}}if(!L){let e=v[0],t=v[1];const n=[];let r=!1;for(const o of E)(0,i.N)(o)?(o.view.width>e&&(e=o.view.width),o.view.height>t&&(t=o.view.height),void 0===o.view.x||void 0===o.view.y?k.push(o):n.push(o)):(0,i.mH)(o)&&(r=!0);if(x){let e;I||(g=(0,l.r)((0,o.without)(E,...k),{canvasWidth:f,canvasHeight:h,scaleRange:m})),0===n.length||1===n.length&&!r?(k.push(...n),({getNodeView:e}=(0,s.C)({cells:E,allowEdgeToArea:w})),b=0===u.length||u.length===E.length&&u.every(((e,t)=>(0,d.c)(e,E[t])))):({getNodeView:e}=(0,c.k)({cells:E,fixedPosition:!0,allowEdgeToArea:w,center:[(f/2-g.x)/g.k,(h/2-g.y)/g.k]}));for(const t of E)if((0,i.N)(t)){const n=e(t.id);t.view.x=n.x,t.view.y=n.y}}}return{cells:E,updated:k,shouldReCenter:b}}},5748:(e,t,n)=>{n.d(t,{d:()=>a});var o=n(531),r=n(3033);function i(e,t,n){const o=e.findLastIndex(n)+1;return[...e.slice(0,o),t,...e.slice(o)]}const a=(l={cells:(e,t)=>{switch(t.type){case"drop-node":return i(e,t.payload,(e=>!("decorator"===e.type&&"text"===e.decorator)));case"drop-decorator":return"text"===t.payload.decorator?[...e,t.payload]:i(e,t.payload,(e=>"decorator"===e.type&&"area"===e.decorator));case"add-nodes":{const n=e.findLastIndex((e=>!("decorator"===e.type&&"text"===e.decorator)))+1;return[...e.slice(0,n),...t.payload,...e.slice(n)]}case"add-edge":{const n=e.findIndex((e=>"edge"===e.type&&e.source===t.payload.source&&e.target===t.payload.target));return-1===n?i(e,t.payload,(e=>"edge"===e.type||"decorator"===e.type&&"area"===e.decorator)):[...e.slice(0,n),t.payload,...e.slice(n+1)]}case"change-edge-view":{const n=e.findIndex((e=>"edge"===e.type&&e.source===t.payload.source&&e.target===t.payload.target));return-1===n?e:[...e.slice(0,n),{...e[n],view:{...e[n].view,...t.payload.view}},...e.slice(n+1)]}case"move-cells":{let n=!1;const o=e.map((e=>{const o=t.payload.find((t=>e.type===t.type&&e.id===t.id));return o?(n=!0,{...e,view:{...e.view,x:o.x,y:o.y}}):e}));return n?o:e}case"resize-cell":{const{type:n,id:o,width:r,height:i}=t.payload,a=e.findIndex((e=>e.type===n&&e.id===o));if(-1!==a){const t=e[a];return[...e.slice(0,a),{...t,view:{...t.view,width:r,height:i}},...e.slice(a+1)]}return e}case"update-cells":return t.payload;case"update-node-size":return e.map((e=>(0,o.N)(e)&&e.id===t.payload.id?{...e,[r.CV]:!0,view:t.payload.size?{...e.view,width:t.payload.size[0],height:t.payload.size[1]}:e.view}:e))}return e},layoutKey:(e,t)=>"update-node-size"===t.type?t.layoutKey:e},(e,t)=>Object.fromEntries(Object.entries(l).map((n=>{let[o,r]=n;return[o,r(e[o],t)]}))));var l},7099:(e,t,n)=>{n.d(t,{Y:()=>h});var o=n(8769),r=n.n(o),i=n(2588),a=n(6768),l=n(6308),c=n(6257),s=n(9592),d=n(9575);const u=e=>o.createElement("svg",(0,d.A)({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24"},e),o.createElement("path",{d:"M12 0a.5.5 0 0 1 .5.5v2.013a9.5 9.5 0 0 1 8.987 8.988L23.5 11.5a.5.5 0 0 1 0 1h-2.013a9.5 9.5 0 0 1-8.987 8.987V23.5a.5.5 0 0 1-1 0v-2.013A9.5 9.5 0 0 1 2.514 12.5H.5a.5.5 0 0 1 0-1h2.013A9.5 9.5 0 0 1 11.5 2.514V.5A.5.5 0 0 1 12 0M3.514 11.5H7.5a.5.5 0 0 1 0 1H3.514a8.5 8.5 0 0 0 7.987 7.986L11.5 16.5a.5.5 0 0 1 1 0v3.986a8.5 8.5 0 0 0 7.986-7.986H16.5a.5.5 0 0 1 0-1h3.986A8.5 8.5 0 0 0 12.5 3.515V7.5a.5.5 0 0 1-1 0V3.514a8.5 8.5 0 0 0-7.986 7.987zm8.486-1a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3"})),v=e=>o.createElement("svg",(0,d.A)({xmlns:"http://www.w3.org/2000/svg",width:128,height:128,className:"icon",viewBox:"0 0 1024 1024"},e),o.createElement("path",{d:"M512 76.8A435.2 435.2 0 1 0 947.2 512 435.71 435.71 0 0 0 512 76.8m0 819.2a384 384 0 1 1 384-384 384 384 0 0 1-384 384"}),o.createElement("path",{d:"M744.448 486.4h-204.8V281.6a25.6 25.6 0 1 0-51.2 0v204.8h-204.8a25.6 25.6 0 0 0 0 51.2h204.8v204.8a25.6 25.6 0 0 0 51.2 0V537.6h204.8a25.6 25.6 0 0 0 0-51.2"})),f=e=>o.createElement("svg",(0,d.A)({xmlns:"http://www.w3.org/2000/svg",width:128,height:128,className:"icon",viewBox:"0 0 1024 1024"},e),o.createElement("path",{d:"M512 76.8A435.2 435.2 0 1 0 947.2 512 435.71 435.71 0 0 0 512 76.8m0 819.2a384 384 0 1 1 384-384 384 384 0 0 1-384 384"}),o.createElement("path",{d:"M744.448 486.4H280.064a25.6 25.6 0 1 0 0 51.2h464.384a25.6 25.6 0 0 0 0-51.2"}));function h(e){let{shadowRoot:t,scale:n,scaleRange:d,onZoomChange:h,onReCenter:m}=e;const g=(0,s.useCurrentTheme)(),p=(0,o.useMemo)((()=>(0,c.VC)()),[]),y=(0,o.useRef)(null),w=100*d[0],x=100*d[1],E=100*n,k=(0,o.useMemo)((()=>({formatter:e=>`${e}%`,placement:"left",getPopupContainer:()=>y.current})),[]),b=(0,o.useCallback)((()=>{h(Math.min(E+5,x))}),[x,h,E]),C=(0,o.useCallback)((()=>{h(Math.max(E-5,w))}),[w,h,E]);return r().createElement(i.Ay,{theme:{algorithm:"dark-v2"===g?a.A.darkAlgorithm:a.A.defaultAlgorithm}},r().createElement(c.N7,{container:t,autoClear:!0,cache:p,hashPriority:"high"},r().createElement("div",{className:"zoom-bar",ref:y},r().createElement("div",{className:"center-button",onClick:m,role:"button"},r().createElement(u,null)),r().createElement("div",{className:"zoom-slider"},r().createElement("div",{className:"zoom-button",role:"button",onClick:b},r().createElement(v,null)),r().createElement(l.A,{min:w,max:x,value:E,step:5,vertical:!0,included:!1,tooltip:k,onChange:h}),r().createElement("div",{className:"zoom-button",role:"button",onClick:C},r().createElement(f,null))))))}},9127:(e,t,n)=>{n.d(t,{C:()=>c});var o=n(1030),r=n(7586),i=n.n(r),a=n(8802),l=n(531);function c(e){let{cells:t,layoutOptions:n,allowEdgeToArea:r}=e;const{nodePadding:c,...s}={nodePadding:0,rankdir:"TB",ranksep:50,edgesep:10,nodesep:50,...(0,o.pick)(n,["nodePadding","rankdir","ranksep","edgesep","nodesep","align"])},d=(0,a.D)(c);if(!t.some(l.N))return{getNodeView:()=>null,nodePaddings:d};const u=new(i().graphlib.Graph);u.setGraph(s),u.setDefaultEdgeLabel((function(){return{}}));for(const e of t)r&&(0,l.o6)(e)||(0,l.N)(e)?u.setNode(e.id,{id:e.id,width:e.view.width+d[1]+d[3],height:e.view.height+d[0]+d[2]}):(0,l.WW)(e)&&u.setEdge(e.source,e.target);return i().layout(u),{getNodeView:e=>u.node(e),nodePaddings:d}}},6170:(e,t,n)=>{n.d(t,{k:()=>v});var o=n(1030),r=n(6149),i=n(4842),a=n(1945),l=n(9418),c=n(3854),s=n(7931),d=n(531),u=n(8802);function v(e){let{cells:t,layoutOptions:n,center:v,fixedPosition:f,allowEdgeToArea:h}=e;const{nodePadding:m,collide:g}={nodePadding:0,...(0,o.pick)(n,["nodePadding"]),collide:!1!==(null==n?void 0:n.collide)&&{radiusDiff:18,strength:1,iterations:1,...!0===(null==n?void 0:n.collide)?null:null==n?void 0:n.collide}},p=(0,u.D)(m),y=[],w=[],x=new Map;for(const e of t)if(h&&(0,d.o6)(e)||(0,d.N)(e)){const t={id:e.id,width:e.view.width+p[1]+p[3],height:e.view.height+p[0]+p[2],...f?{fx:e.view.x,fy:e.view.y}:null};y.push(t),x.set(t.id,t)}else(0,d.WW)(e)&&w.push({source:e.source,target:e.target});const E=(0,r.A)(w).id((e=>e.id)),k=(0,i.A)(y).force("link",E).force("x",(0,a.A)(null==v?void 0:v[0])).force("y",(0,l.A)(null==v?void 0:v[1])).force("charge",(0,c.A)());return g&&k.force("collide",(0,s.A)().radius((e=>Math.sqrt(e.width**2+e.height**2)/2+g.radiusDiff)).strength(g.strength).iterations(g.iterations)),k.stop(),function(e){e.tick(Math.ceil(Math.log(e.alphaMin())/Math.log(1-e.alphaDecay())))}(k),{getNodeView:e=>x.get(e),nodePaddings:p}}},967:(e,t,n)=>{n.d(t,{V:()=>u,P:()=>v});var o=n(1030),r=n(8875),i=n(4059);function a(e,t){return{x:e.x+e.width/2,y:e.y+e.height/2,width:e.width+t,height:e.height+t}}var l=n(3033),c=n(3188),s=n(531);const d=["right","top","left","bottom"];function u(e,t,n,u){var p,y;const{type:w,vertices:x,exitPosition:E,entryPosition:k}=n??{};if((0,s.jw)(w))return(0,c.h)(a(e,E?l.XK:l.p6),a(t,k?l.XK:l.p6),u,n);if(null!=x&&x.length){const n=x[0],o=x[x.length-1];let r,i,a,l;if(E)r=h(e,E);else{let i;if(x.length>1?i=x[1]:k&&(i=h(t,k)),i)r=m(n,e,n.y===i.y);else{const n=o.y<t.y||o.y>t.y+t.height?"ns":"ew";({point:r,direction:a}=g(e,t,x,n))}}if(k)i=h(t,k);else{let r;if(x.length>1?r=x[x.length-2]:E&&(r=h(e,E)),r)i=m(o,t,o.y===r.y);else{const o=n.x<e.x||n.x>e.x+e.width?"ew":"ns";({point:i,direction:l}=g(t,e,x.slice().reverse(),o))}}const{x:c,y:s}=r,{x:d,y:u}=i,f=[r,...x,i],p=[...x];return n&&n.x!==c&&n.y!==s&&p.unshift("ns"===a?{x:c,y:n.y}:"ew"===a?{x:n.x,y:s}:n.x===f[2].x?{x:c,y:n.y}:{x:n.x,y:s}),o&&o.x!==d&&o.y!==u&&p.push("ns"===l?{x:d,y:o.y}:"ew"===l?{x:o.x,y:u}:o.x===f[f.length-3].x?{x:d,y:o.y}:{x:o.x,y:u}),[r,...v(r,p,i),i]}const b=E??f(t,e),C=k??f(e,t),{x:I,y:S}=h(e,b),{x:L,y:M}=h(t,C),z=(0,r.X)(),P=(null===(p=z.find((e=>e.x===b.x&&e.y===b.y)))||void 0===p?void 0:p.d)??d,N=(null===(y=z.find((e=>e.x===C.x&&e.y===C.y)))||void 0===y?void 0:y.d)??d,R=[...P],A=[...N];I<L?((0,o.pull)(R,"left"),(0,o.pull)(A,"right")):((0,o.pull)(R,"right"),(0,o.pull)(A,"left")),S<M?((0,o.pull)(R,"top"),(0,o.pull)(A,"bottom")):((0,o.pull)(R,"bottom"),(0,o.pull)(A,"top"));const T=R[0]??P[0],H=A[0]??N[0],Z="left"===T||"right"===T?b.y:b.x,D="left"===H||"right"===H?C.y:C.x;return(0,i.o)(a(e,l.XK),a(t,l.XK),T,H,Z,D)}function v(e,t,n){const o=[];let r,i=e,a=0;for(;a<t.length;){const e=t[a],l=e.x!==i.x,c=e.y!==i.y;if(l||c){const c=l?"ew":"ns";if(c!==r){const l=a===t.length-1?n:t[a+1],s=l.x!==e.x,d=l.y!==e.y;(s||d)&&c!==(s?"ew":"ns")&&(r=c,o.push(e),i=e)}}a++}return o}function f(e,t){return t.y+t.height<e.y?{x:.5,y:1}:t.y>e.y+e.height?{x:.5,y:0}:t.x<e.x?{x:1,y:.5}:{x:0,y:.5}}function h(e,t){const n=l.XK/2;return{x:e.x-n+t.x*(e.width+l.XK),y:e.y-n+t.y*(e.height+l.XK)}}function m(e,t,n){let o,r,i,a,c;if(n?(o="y",r="x",i="height",a="width"):(o="x",r="y",i="width",a="height"),t[r]+t[a]<e[r]&&(c={[o]:.5,[r]:1}),t[r]>e[r]&&(c={[o]:.5,[r]:0}),c)return h(t,c);const s=t[o]<e[o]?1:0;return{[o]:t[o]-l.XK/2+s*(t[i]+l.XK),[r]:e[r]}}function g(e,t,n,o){let r,i,a,l,c,s,d,u;"ns"===o?(a="x",l="y",c="width",s="height",d="ns",u="ew"):(a="y",l="x",c="height",s="width",d="ew",u="ns");const v=n[0];if(v[a]>=e[a]&&v[a]<=e[a]+e[c])if(v[l]>e[l]+e[s])r={[a]:v[a],[l]:e[l]+e[s]},i=d;else if(v[l]<e[l])r={[a]:v[a],[l]:e[l]},i=d;else{const o=n[1]??t;r={[a]:v[a],[l]:o[l]<v[l]?v[l]:e[l]+e[s]},i=d}else v[l]<e[l]?(r={[a]:e[a]+e[c]/2,[l]:e[l]},i=d):v[l]>e[l]+e[s]?(r={[a]:e[a]+e[c]/2,[l]:e[l]+e[s]},i=d):v[a]<e[a]?(r={[a]:e[a],[l]:v[l]},i=u):(r={[a]:e[a]+e[c],[l]:v[l]},i=u);return{point:r,direction:i}}},8875:(e,t,n)=>{n.d(t,{G:()=>a,X:()=>i});const o=[{x:0,y:0,d:["top","left"]},{x:.5,y:0,d:["top"]},{x:1,y:0,d:["top","right"]},{x:0,y:.5,d:["left"]},{x:1,y:.5,d:["right"]},{x:0,y:1,d:["bottom","left"]},{x:.5,y:1,d:["bottom"]},{x:1,y:1,d:["bottom","right"]}],r=o.map((e=>({x:e.x,y:e.y})));function i(){return o}function a(){return r}},1819:(e,t,n)=>{n.d(t,{J:()=>i});var o=n(8769),r=n(8185);function i(e){let{rootRef:t,activeTarget:n,onActiveTargetChange:i}=e;const a=n??null,[l,c]=(0,o.useState)(a);(0,o.useEffect)((()=>{c((e=>(0,r.c)(e,a)?e:a))}),[a]);const s=(0,o.useRef)(!1);return(0,o.useEffect)((()=>{s.current?i(l):s.current=!0}),[l,i]),(0,o.useEffect)((()=>{if(!l)return;const e=e=>{e.composedPath().indexOf(t.current)<=0&&c(null)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[l,t]),l}},1484:(e,t,n)=>{n.d(t,{g:()=>f});var o=n(8769),r=n(7566),i=n(9047),a=n(3033),l=n(531),c=n(908),s=n(6170),d=n(9127);const u=new Map([["center",.5],["left",0],["right",1],["top",0],["bottom",1]]);function v(e,t){if("string"==typeof e){const n=u.get(e);if(void 0!==n)return n;const o=e.match(/^(-?\d+(?:\.\d+)?)%$/);if(o)return Number(o[1])/100;console.error("Unexpected align origin %s:",t,e)}else{if("number"==typeof e)return e;console.error("Unexpected align origin %s, expected %s, received %s:",t,"string | number",typeof e,e)}return.5}function f(e){let{layout:t,layoutOptions:n,rootRef:u,cells:f,zoomable:h,zoomer:m,scaleRange:g,layoutKey:p,allowEdgeToArea:y,autoCenterWhenCellsChange:w,dispatch:x}=e;const[E,k]=(0,o.useState)("force"!==t&&"dagre"!==t),b=(0,o.useRef)(p),C=(0,o.useCallback)((()=>++b.current),[]),[I,S]=function(e){let{rootRef:t,cells:n,layoutInitialized:s,zoomable:d,zoomer:u,scaleRange:v,autoCenterWhenCellsChange:f}=e;const[h,m]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{n.some((e=>(0,l.N)(e)||(0,l.mH)(e)))&&!f||m(!1)}),[n,f]),(0,o.useEffect)((()=>{const e=t.current;if(!e||!s||h||!n.some((e=>(0,l.N)(e)||(0,l.mH)(e)))||n.some((e=>(0,l.N)(e)&&!e[a.CV])))return;const{k:o,x:f,y:g}=(0,c.r)(n,{canvasWidth:e.clientWidth,canvasHeight:e.clientHeight,scaleRange:d?v:void 0});u.transform((0,r.A)(e),new i.uV(o,f,g)),m(!0)}),[n,h,s,t,v,d,u]),[h,m]}({rootRef:u,layoutInitialized:E,cells:f,zoomable:h,zoomer:m,scaleRange:g,autoCenterWhenCellsChange:w}),L=(0,o.useRef)(null);return(0,o.useEffect)((()=>{if(f.some((e=>(0,l.N)(e)&&!e[a.CV]))||0===f.length)return;if("force"!==t&&"dagre"!==t)return void k(!0);if(b.current!==p||(e=L.current,o=f.filter(l.nv),(null==e?void 0:e.length)===o.length&&e.every(((e,t)=>e===o[t]))))return;var e,o;let r,i;({getNodeView:r,nodePaddings:i}="force"===t?(0,s.k)({cells:f,layoutOptions:n,allowEdgeToArea:y}):(0,d.C)({cells:f,layoutOptions:n,allowEdgeToArea:y}));const c=function(e){const t=e??[.5,.5];return[v(t[0],"x"),v(t[1],"y")]}(null==n?void 0:n.alignOrigin),u=f.map((e=>{if(y&&(0,l.o6)(e)||(0,l.N)(e)){const t=r(e.id);return{...e,view:{...e.view,x:t.x-t.width*c[0]+i[3],y:t.y-t.height*c[1]+i[0]},[a.xc]:!0}}return e}));L.current=u.filter(l.nv),x({type:"update-cells",payload:u}),k(!0)}),[f,x,t,p,n]),{centered:I,setCentered:S,getNextLayoutKey:C}}},7531:(e,t,n)=>{n.d(t,{I:()=>s,d:()=>c});var o=n(8769),r=n(5223),i=n(1030),a=n(531),l=n(3033);function c(e){let{cells:t,defaultEdgeLines:n,markerPrefix:c,lineConnector:v}=e;return(0,o.useMemo)((()=>{const e=[{strokeColor:l.mF,markerType:"arrow"}];let o=null;if(v){o={...u(),editingStrokeColor:"var(--palette-blue-5)",...(0,i.omitBy)(!0===v?{}:v,i.isUndefined)};const t=s(o);for(const n of t){const{placement:t,type:r}=n,i=r??"arrow",a=d({strokeColor:o.strokeColor,markerType:i},e),l=d({strokeColor:o.editingStrokeColor,markerType:i},e);"start"===t?(o.$markerStartUrl=`url(#${c}${a})`,o.$editingStartMarkerUrl=`url(#${c}${l})`):(o.$markerEndUrl=`url(#${c}${a})`,o.$editingEndMarkerUrl=`url(#${c}${l})`)}}const f=new WeakMap;for(const o of t)if((0,a.WW)(o)){var h;const t=(Array.isArray(n)?r.__secret_internals.legacyDoTransform({edge:o},n.find((e=>(0,r.checkIfByTransform)(e,{edge:o})))):null===(h=r.__secret_internals.legacyDoTransform({edge:o},n))||void 0===h?void 0:h.find((e=>(0,r.checkIfOfComputed)(e))))??{},a={...u(),...(0,i.omitBy)(t,i.isUndefined),...(0,i.omitBy)(o.view,i.isUndefined)};void 0===a.parallelGap&&(a.parallelGap=a.interactStrokeWidth);const l=s(a);for(const t of l){const{placement:n,type:o}=t,r=o??"arrow",i=d({strokeColor:a.strokeColor,markerType:r},e);"start"===n?a.$markerStartUrl=`url(#${c}${i})`:a.$markerEndUrl=`url(#${c}${i})`}f.set(o,a)}return{lineConfMap:f,lineConnectorConf:o,markers:e}}),[t,n,v,c])}function s(e){let t=[];return e.markers?t=e.markers:(e.showStartArrow&&t.push({type:"arrow",placement:"start"}),e.showEndArrow&&t.push({type:"arrow",placement:"end"})),t}function d(e,t){let n=(0,i.findIndex)(t,e);return-1===n&&(n=t.push(e)-1),n}function u(){return{type:"straight",dashed:!1,strokeColor:l.mF,strokeWidth:l.VO,interactStrokeWidth:l.Ie,showStartArrow:l.XV,showEndArrow:l.Ub,animate:{useAnimate:!1,duration:l.Be}}}},8197:(e,t,n)=>{n.d(t,{H:()=>a});var o=n(8769),r=n(531),i=n(3033);function a(e){let{cells:t,layout:n,centered:a}=e;return(0,o.useMemo)((()=>a&&t.every((e=>!(0,r.N)(e)||e[i.CV]&&("force"!==n&&"dagre"!==n||e[i.xc])))),[t,a,n])}},8091:(e,t,n)=>{n.d(t,{f:()=>l});var o=n(8769),r=n(7566),i=n(9047),a=n(3033);function l(e){let{rootRef:t,zoomable:n,scrollable:l,pannable:c,draggable:s,ctrlDraggable:d,scaleRange:u,onSwitchActiveTarget:v}=e;const[f,h]=(0,o.useState)(!1),[m,g]=(0,o.useState)({k:1,x:0,y:0}),p=(0,o.useMemo)((()=>u??[a.sS,a.Yt]),[u]),y=(0,o.useMemo)((()=>(0,i.s_)()),[]);return(0,o.useEffect)((()=>{let e=!1;y.scaleExtent(n?p:[1,1]).on("start",(()=>{e=!1,h(!0)})).on("zoom",(t=>{e=!0,g(t.transform)})).on("end",(()=>{h(!1),e||null==v||v(null)})).filter((e=>("wheel"===e.type||(d?s||e.ctrlKey:!e.ctrlKey))&&!e.button))}),[v,p,n,y,d,s]),(0,o.useEffect)((()=>{if(d){const e=e=>{e.ctrlKey&&e.preventDefault()};return document.addEventListener("contextmenu",e,!0),()=>{document.removeEventListener("contextmenu",e,!0)}}}),[d]),(0,o.useEffect)((()=>{const e=t.current;if(!e)return;const o=(0,r.A)(e),i=()=>{o.on(".zoom",null).on(".zoom.custom",null).on("wheel",null)};if(n||l||c)return(n||l)&&o.on("wheel.zoom.custom",(e=>{e.ctrlKey||(e.stopImmediatePropagation(),l&&(e.preventDefault(),y.translateBy(o,e.wheelDeltaX/5,e.wheelDeltaY/5)))})),o.call(y).on("wheel",(e=>{e.preventDefault()})).on("dblclick.zoom",null),(s||d)&&c||o.on("mousedown.zoom",null),c||o.on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),i;i()}),[d,s,c,t,l,n,y]),{grabbing:f,transform:m,zoomer:y,scaleRange:p}}},6237:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(6758),r=n.n(o),i=n(935),a=n.n(i)()(r());a.push([e.id,'.zoom-bar{position:absolute;bottom:20px;right:20px;width:40px;scale:0.8}.zoom-slider,\n.center-button{width:100%;display:flex;align-items:center;border:1px solid var(--antd-background-color-base);border-radius:var(--larger-border-radius);box-shadow:var(--connected-overlay-shadow);background-color:var(--color-fill-bg-container-4)}.zoom-slider{height:140px;padding:8px 0;flex-direction:column}[role="button"]{cursor:pointer}.center-button{justify-content:center;margin-bottom:8px;height:40px}.center-button:hover{border-color:var(--antd-btn-default-hover-border-color)}.center-button path{fill:var(--antd-link-hover-color)}.center-button:hover path{fill:var(--palette-blue-7)}.zoom-button{font-size:16px;line-height:0}.zoom-button svg{width:1em;height:1em;fill:var(--antd-link-hover-color)}.zoom-slider .ant-slider-vertical{padding-inline:5px}.zoom-slider .ant-slider-vertical .ant-slider-rail{width:2px}.zoom-slider .ant-slider-vertical .ant-slider-handle{width:6px;height:6px;inset-inline-start:3px}.zoom-slider .ant-slider .ant-slider-handle:hover::before,\n.zoom-slider .ant-slider .ant-slider-handle:focus::before,\n.zoom-slider .ant-slider .ant-slider-handle::before{width:10px;height:10px;inset-inline-start:-2px}.zoom-slider .ant-slider .ant-slider-handle:hover::after,\n.zoom-slider .ant-slider .ant-slider-handle:focus::after,\n.zoom-slider .ant-slider .ant-slider-handle::after{width:6px;height:6px;inset-block-start:0;inset-inline-start:0}',""]);const l=a.toString()},3012:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(6758),r=n.n(o),i=n(935),a=n.n(i)()(r());a.push([e.id,"*{box-sizing:border-box}:host{display:block;position:relative;overflow:hidden;--animation-dasharray:48;--stroke-dashedoffset:96;--stroke-dottedoffset:24;--dasharray:4;--dotted:1}:host,\n.root{width:100%;height:100%}:host([hidden]){display:none}.root{opacity:0}.root.ready{opacity:1}.root:focus{outline:none}@keyframes solidAnimation{to{stroke-dashoffset:0}}@keyframes dashedAnimation{0%{stroke-dashoffset:var(--stroke-dashedoffset)}to{stroke-dashoffset:0}}@keyframes dottedAnimation{0%{stroke-dashoffset:var(--stroke-dottedoffset)}to{stroke-dashoffset:0}}.solid-animation{stroke-dasharray:var(--solid-length);stroke-dashoffset:var(--solid-length);animation:solidAnimation var(--time) linear infinite}.dashed-animation{animation:dashedAnimation var(--time) linear infinite}.dotted-animation{animation:dottedAnimation var(--time) linear infinite}.decorator-area .area,\n.decorator-container .container{fill:rgba(119,141,195,0.1);stroke:none;stroke-width:0}.node,\n.decorator-text{overflow:visible}.cell.active .decorator-area .area,\n.cell.active .decorator-container .container,\n.cell:not(.read-only) .decorator-container .container:hover,\n.allowEdgeToArea .decorator-area .area:hover,\n.cell.active .line-active-bg{stroke:var(--palette-blue-5);stroke-dasharray:var(--dasharray);stroke-width:1}.container-active .decorator-container .container{stroke:var(--palette-blue-5);stroke-width:1}.cell:not(.read-only){-webkit-user-select:none;user-select:none}.resize-handle{cursor:nwse-resize;opacity:0}.resize-handle rect{fill:transparent;stroke:none}.resize-handle path{fill:none;stroke:var(--palette-gray-5);stroke-width:1.5}.cell.active .decorator-area .resize-handle,\n.decorator-area:hover .resize-handle,\n.decorator-container:hover .resize-handle{opacity:1}.connect-line{pointer-events:none}.connect-line:not(.connecting){display:none}.editing-line{pointer-events:none;stroke-dasharray:var(--dasharray);stroke-width:1}.editing-line:not(.editing){display:none}.line.dashed{stroke-dasharray:var(--dasharray)}.line.dotted{stroke-dasharray:var(--dotted)}.cell.active .decorator-text .text-container{outline:1px dashed var(--palette-blue-5)}.decorator-text .text-container{width:max-content;padding:0.5em}.decorator-text .text:focus{outline:none}.cell.faded{opacity:0.3}.cell.container-active{opacity:1}.cell .node{pointer-events:none}.cell .node > *{position:fixed;pointer-events:auto}.degraded{pointer-events:bounding-box}.degraded circle{fill:rgb(119,141,195)}.degraded text{text-anchor:middle;fill:var(--antd-text-color)}.cell.active .degraded circle,\n.cell.active .degraded text,\n.degraded:hover circle,\n.degraded:hover text{fill:var(--color-brand)}.decorator-container{--defaultSize:24px}.decorator-container .text-container{display:flex;align-items:center;justify-content:center;padding:0.5em;text-align:center;font-size:16px;background-color:rgba(119,141,195,0.6);overflow:hidden}.decorator-container .horizontal{height:max-content;width:100%}:is(.decorator-container .horizontal) .text{min-height:var(--defaultSize)}.decorator-container .vertical{width:max-content;height:100%;writing-mode:vertical-lr;text-orientation:upright;letter-spacing:4px}:is(.decorator-container .vertical) .text{min-width:var(--defaultSize)}",""]);const l=a.toString()}}]);
//# sourceMappingURL=9961.b0abcd60.js.map