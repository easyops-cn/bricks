"use strict";(globalThis.webpackChunk_next_bricks_diagram=globalThis.webpackChunk_next_bricks_diagram||[]).push([[5399],{7780:(e,t,r)=>{r.r(t),r.d(t,{BrickLoadError:()=>k,enqueueStableLoadBricks:()=>p,enqueueStableLoadProcessors:()=>m,flushStableLoadBricks:()=>f,loadBricksImperatively:()=>w,loadEditorsImperatively:()=>v,loadProcessorsImperatively:()=>h,loadScript:()=>o,loadSharedModule:()=>i,loadStyle:()=>a});const s=new Map;function n(e,t,r,o){if(Array.isArray(t))return Promise.all(t.map((t=>n(e,t,r))));const a=r&&!/^https?:/.test(t)?`${r}${t}`:t,i=s.get(a);if(i)return i;const c=new Promise(((t,r)=>{const s=()=>{window.dispatchEvent(new Event("request.end"))},n=document.createElement("style"===e?"link":"script");"script"===e?Object.assign(n,{type:"text/javascript",async:!0,...o,src:a}):Object.assign(n,{rel:"stylesheet",...o,href:a}),n.onload=()=>{t(a),s()},n.onerror=e=>{r(e),s()};const i=document.currentScript||document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i),window.dispatchEvent(new Event("request.start"))}));return s.set(a,c),c}function o(e,t,r){return n("script",e,t,r)}function a(e,t,r){return n("style",e,t,r)}async function i(e,t){await r.I("default");const s=window[e];return await s.init(r.S.default),(await s.get(t))()}let c,l,u=!1;const d=new Promise(((e,t)=>{c=e,l=t}));function f(){u||c()}function p(e,t){return S($("bricks",e,t))}function m(e,t){return S($("processors",e,t))}async function w(e,t){const r=$("bricks",e,t);return f(),S(r)}function h(e,t){const r=$("processors",e,t);return f(),S(r)}function v(e,t){const r=$("editors",e,t);return f(),S(r)}class k extends Error{constructor(e){super(e),this.name="BrickLoadError",Error.captureStackTrace&&Error.captureStackTrace(this,k)}}let y;const b="v2-adapter.load-bricks";function g(e,t,r){const s=new Map,n=new Set,o=t=>{var a;if(n.has(t))return;let i,c,l;if(n.add(t),"editors"===e){l=t;for(const e of r.values()){var u;null!==(u=e.propertyEditors??e.editors)&&void 0!==u&&u.some((e=>e===l))&&(i=e)}}else if("processors"===e||t.includes(".")){[c,l]=t.split(".");const s=`bricks/${"processors"===e?(p=c,p.replace(/[A-Z]/g,(e=>`-${e[0].toLocaleLowerCase()}`)).replace(/_[0-9]/g,(e=>`-${e[1]}`))):c}`;i=r.get(s)}else{let e;l=t;for(const s of r.values()){var d;if(null!==(d=s.elements)&&void 0!==d&&d.some((e=>e===l))){var f;if(null===(f=s.deprecatedElements)||void 0===f||!f.includes(t)){i=s;break}e=s}}!i&&e&&(i=e)}var p;if(!i)return void console.error(`Package for ${t} not found.`);let m=s.get(i);m||(m=[],s.set(i,m)),m.push({fullName:t,lastName:l});const w=null===(a=i.dependencies)||void 0===a?void 0:a[t];if(w)for(const e of w)o(e)};for(const e of t)o(e);return s}async function P(e,t,r){const s=`${"processors"===e||"editors"===e?`./${e}/`:"./"}${"editors"===e?r.fullName:r.lastName}`;try{await i(t,s)}catch(t){throw console.error(t),new k(`Load ${e} of "${r.fullName}" failed: ${null==t?void 0:t.message}`)}}function E(e,t,r){return t.map((async t=>(await o(t.filePath,window.PUBLIC_ROOT??""),await d,Promise.all(r.get(t).map((r=>P(e,t.id,r)))))))}async function $(e,t,r){const s=new Map;for(const e of r){const t=e.id||L(e.filePath);s.set(t,e)}const n=g(e,t,s);let a;const i=[],d=[];let f;for(const e of n.keys())if(e.id)"bricks/basic"===e.id?a=e:d.push(e);else if(i.push(e),f=s.get("bricks/v2-adapter"),!f)throw new Error("Using v2 bricks, but v2-adapter not found");const p=f;let m;const w=a;if(w){const t=o(w.filePath,window.PUBLIC_ROOT??"");u||(u=!0,t.then((()=>Promise.resolve())).then(c,l)),m=t.then((()=>Promise.all(n.get(w).map((t=>P(e,w.id,t))))))}const h=[m].concat(E(e,d,n));if(p&&i.length>0){if(!y){const e=g("bricks",[b],s),t=[...e.keys()];y=(async()=>(await Promise.all(E("bricks",t,e)),document.createElement(b)))()}h.push(y.then((t=>Promise.all(i.map((s=>{const o=L(s.filePath).split("/")[1];return t.resolve(p.filePath,"editors"===e?s.propertyEditorsJsFilePath??s.filePath:s.filePath,"bricks"===e?n.get(s).map((e=>`${o}.${e.lastName}`)):[],s.dll,r)}))))))}await Promise.all(h)}async function S(e){window.dispatchEvent(new Event("request.start"));try{await e}finally{window.dispatchEvent(new Event("request.end"))}}function L(e){return e.split("/").slice(0,2).join("/")}}}]);
//# sourceMappingURL=5399.49b9b464.js.map