/*! For license information please see preview-container.3dbf94d6.js.LICENSE.txt */
(self.webpackChunk_next_bricks_ui_test=self.webpackChunk_next_bricks_ui_test||[]).push([[3610,3028,5628],{1226:(e,t,r)=>{"use strict";r.d(t,{V:()=>a});var n=r(8657),i=r.n(n);function a(e){var{type:t,width:r,height:n,left:a,top:o,selector:s}=e;return i().createElement("div",{className:"outline "+t,style:{width:r+4,height:n+4,left:a-2,top:o-2}},i().createElement("div",{className:"label"},"testid"===s.type?"{".concat(s.value,"}"):"id"===s.type?"#".concat(s.value):s.value))}},9936:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PreviewContainer:()=>W,PreviewContainerComponent:()=>re});var n,i,a,o,s,c,l,u,p,d,v,f,h,g,b,w,y,m,Z,k,O,C,E,x,j,M,S,R,P,W,_=r(7896),T=r(2159),z=r(3028),A=r(3395),I=r(6666),B=r(1815),D=r(381),L=r(687),N=r(2604),U=r(8657),V=r.n(U),H=r(5366),q=r(4511),F=(r(8161),r(5062)),G=r(2779),J=r.n(G),K=r(9375),Q=r(1226),X=["width","height","left","top"],{defineElement:Y,property:$,method:ee,event:te}=(0,H.createDecorators)(),re=(0,U.forwardRef)(Ce);i=Y("ui-test.preview-container",{styleTexts:[K.Z]}),a=$(),s=$({type:Boolean}),l=$({type:Boolean}),p=$({attribute:!1}),v=$({attribute:!1}),h=ee(),g=ee(),b=ee(),w=te({type:"url.change"}),k=te({type:"inspect.select"}),x=te({type:"record.complete"});var ne=new WeakMap,ie=new WeakMap,ae=new WeakMap,oe=new WeakMap,se=new WeakMap,ce=new WeakMap,le=new WeakMap,ue=new WeakMap,pe=new WeakMap,de=new WeakMap,ve=new WeakMap,fe=new WeakMap,he=new WeakMap,ge=new WeakMap;class be extends q.ReactNextElement{constructor(){super(...arguments),(0,A.Z)(this,he,{get:Oe,set:ke}),(0,A.Z)(this,de,{get:Ze,set:me}),(0,A.Z)(this,le,{get:ye,set:we}),(0,I.Z)(this,"_previewContainerRef",(0,U.createRef)()),(0,A.Z)(this,ne,{writable:!0,value:(R(this),o(this))}),(0,A.Z)(this,ie,{writable:!0,value:c(this)}),(0,A.Z)(this,ae,{writable:!0,value:u(this)}),(0,A.Z)(this,oe,{writable:!0,value:d(this)}),(0,A.Z)(this,se,{writable:!0,value:f(this)}),(0,A.Z)(this,ce,{writable:!0,value:y(this)}),(0,A.Z)(this,ue,{writable:!0,value:e=>{(0,L.Z)(this,le).emit(e)}}),(0,A.Z)(this,pe,{writable:!0,value:O(this)}),(0,A.Z)(this,ve,{writable:!0,value:e=>{(0,L.Z)(this,de).emit(e)}}),(0,A.Z)(this,fe,{writable:!0,value:j(this)}),(0,A.Z)(this,ge,{writable:!0,value:e=>{(0,L.Z)(this,he).emit(e)}})}get src(){return(0,L.Z)(this,ne)}set src(e){(0,D.Z)(this,ne,e)}get recording(){return(0,L.Z)(this,ie)}set recording(e){(0,D.Z)(this,ie,e)}get inspecting(){return(0,L.Z)(this,ae)}set inspecting(e){(0,D.Z)(this,ae,e)}get hoverRelatedCommands(){return(0,L.Z)(this,oe)}set hoverRelatedCommands(e){(0,D.Z)(this,oe,e)}get activeRelatedCommands(){return(0,L.Z)(this,se)}set activeRelatedCommands(e){(0,D.Z)(this,se,e)}back(){var e;null===(e=this._previewContainerRef.current)||void 0===e||e.back()}forward(){var e;null===(e=this._previewContainerRef.current)||void 0===e||e.forward()}reload(){var e;null===(e=this._previewContainerRef.current)||void 0===e||e.reload()}render(){return V().createElement(re,{ref:this._previewContainerRef,src:this.src,recording:this.recording,inspecting:this.inspecting,hoverRelatedCommands:this.hoverRelatedCommands,activeRelatedCommands:this.activeRelatedCommands,onUrlChange:(0,L.Z)(this,ue),onInspectSelect:(0,L.Z)(this,ve),onRecordComplete:(0,L.Z)(this,ge)})}}function we(e){Z(this,e)}function ye(){return m(this)}function me(e){E(this,e)}function Ze(){return C(this)}function ke(e){S(this,e)}function Oe(){return M(this)}function Ce(e,t){var{src:r,recording:n,inspecting:i,hoverRelatedCommands:a,activeRelatedCommands:o,onUrlChange:s,onInspectSelect:c,onRecordComplete:l}=e,u=(0,U.useRef)(null),[p,d]=(0,U.useState)(!1),v=(0,U.useMemo)((()=>new URL(r,location.origin).origin),[r]),[f,h]=(0,U.useState)({x:0,y:0}),[g,b]=(0,U.useState)([]),[w,y]=(0,U.useState)([]),[m,Z]=(0,U.useState)([]),[k,O]=(0,U.useState)([]),C=(0,U.useCallback)((()=>{var e;null===(e=u.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"back"},v)}),[v]),E=(0,U.useCallback)((()=>{var e;null===(e=u.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"forward"},v)}),[v]),x=(0,U.useCallback)((()=>{var e;null===(e=u.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"reload"},v)}),[v]);(0,U.useImperativeHandle)(t,(()=>({back:C,forward:E,reload:x})));var j=(0,U.useCallback)((()=>{var e,t,r=F.__secret_internals.getBrickPackagesById("bricks/ui-test");if(!r)throw new Error("Cannot find preview agent package: bricks/ui-test");null===(e=u.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"initialize",payload:{agent:{brick:"ui-test.inject-preview-agent",pkg:(0,z.Z)((0,z.Z)({},r),{},{filePath:"".concat(location.origin).concat((0,F.getBasePath)()).concat(null!==(t=window.PUBLIC_ROOT)&&void 0!==t?t:"").concat(r.filePath)})}}},v)}),[v]),M=(0,U.useMemo)((()=>{if(p)return()=>{setTimeout((()=>{window.postMessage({channel:"ui-test-preview",type:"inspect-hover",payload:{outlines:[]}})}),100)}}),[p]),S=(0,U.useCallback)((e=>e.map((e=>{var t,r,n,i,a=null!==(t=null==u||null===(r=u.current)||void 0===r?void 0:r.offsetLeft)&&void 0!==t?t:0,o=null!==(n=null==u||null===(i=u.current)||void 0===i?void 0:i.offsetTop)&&void 0!==n?n:0,{width:s,height:c,left:l,top:p}=e,d=(0,T.Z)(e,X);return(0,z.Z)({width:1*s,height:1*c,left:1*(l-f.x)+a,top:1*(p-f.y)+o},d)}))),[f.x,f.y]);return(0,U.useEffect)((()=>{var e=e=>{var t;if("ui-test-preview"===(null===(t=e.data)||void 0===t?void 0:t.channel))switch(e.data.type){case"initialized":d(!0);break;case"url-change":null==s||s(e.data.payload.url);break;case"inspect-hover":b(e.data.payload.outlines);break;case"inspect-active":y(e.data.payload.outlines);break;case"scroll":h(e.data.payload);break;case"inspect-select":null==c||c(e.data.payload.targets);break;case"record-complete":null==l||l(e.data.payload.steps)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[s,c,l]),(0,U.useEffect)((()=>{var e;p&&(null===(e=u.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"toggle-record",payload:{recording:n}},v))}),[p,v,n]),(0,U.useEffect)((()=>{var e;p&&(null===(e=u.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"toggle-inspecting",payload:{inspecting:i}},v))}),[p,v,i]),(0,U.useEffect)((()=>{var e;p&&(null===(e=u.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"set-active-tree-node",payload:{relatedCommands:null!=o?o:[]}},v))}),[v,o,p]),(0,U.useEffect)((()=>{var e;p&&(null===(e=u.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"hover-over-tree-node",payload:{relatedCommands:null!=a?a:[]}},v))}),[v,a,p]),(0,U.useEffect)((()=>{O(S(w))}),[w,S]),(0,U.useEffect)((()=>{Z(S(g))}),[g,S]),V().createElement("div",{className:J()("preview-container",{inspecting:i})},V().createElement("iframe",{ref:u,src:r,className:"iframe",onLoad:j,onMouseOut:M}),m.map(((e,t)=>V().createElement(Q.V,(0,_.Z)({key:t,type:"hover"},e)))),k.map(((e,t)=>V().createElement(Q.V,(0,_.Z)({key:t,type:"active"},e)))))}P=be,({e:[o,c,u,d,f,y,m,Z,O,C,E,j,M,S,R],c:[W,n]}=(0,N.Z)(P,[[a,1,"src"],[s,1,"recording"],[l,1,"inspecting"],[p,1,"hoverRelatedCommands"],[v,1,"activeRelatedCommands"],[h,2,"back"],[g,2,"forward"],[b,2,"reload"],[w,1,"urlChangeEvent",e=>(0,L.Z)(e,ce),(e,t)=>(0,D.Z)(e,ce,t)],[k,1,"inspectSelectEvent",e=>(0,L.Z)(e,pe),(e,t)=>(0,D.Z)(e,pe,t)],[x,1,"recordCompleteEvent",e=>(0,L.Z)(e,fe),(e,t)=>(0,D.Z)(e,fe,t)]],[i],0,(e=>ge.has((0,B.Z)(e))),q.ReactNextElement)),n()},2779:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var o=i.apply(null,r);o&&e.push(o)}}else if("object"===a){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},9375:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(9601),i=r.n(n),a=r(2609),o=r.n(a)()(i());o.push([e.id,"*{box-sizing:border-box}.preview-container{width:100%;height:100%;position:relative;box-shadow:0 0 0 1px rgba(204,204,204,0.2);border-radius:4px}.iframe{width:100%;height:100%;margin:0;transform-origin:0% 0%;border:0;padding:0;border-radius:4px}.mask{display:none;position:absolute;top:0;bottom:0;left:0;right:0}.outline{position:absolute;border-style:solid;border-width:2px;border-radius:0 4px 4px;pointer-events:none}.label{position:absolute;left:-2px;top:-20px;height:18px;line-height:16px;padding:2px 5px 0;font-size:12px;border-radius:4px 4px 0 0;white-space:nowrap}.outline.hover{border-color:rgba(var(--palette-blue-6-channel),0.3)}.outline.hover .label{background:rgba(var(--palette-blue-6-channel),0.3)}.outline.active{border-color:var(--palette-blue-6)}.outline.active .label{background:var(--palette-blue-6)}",""]);const s=o.toString()},2609:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);n&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},9601:e=>{"use strict";e.exports=function(e){return e[1]}},2604:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(6522),i=r(1815);function a(e,t){return function(r){(function(e,t){if(e.v)throw new Error("attempted to call addInitializer after decoration was finished")})(t),c(r,"An initializer"),e.push(r)}}function o(e,t){if(!e(t))throw new TypeError("Attempted to access private element on non-instance")}function s(e,t,r,n,i,s,c,l,u,p){var d;switch(s){case 1:d="accessor";break;case 2:d="method";break;case 3:d="getter";break;case 4:d="setter";break;default:d="field"}var v,f,h={kind:d,name:l?"#"+r:r,static:c,private:l},g={v:!1};if(0!==s&&(h.addInitializer=a(i,g)),l||0!==s&&2!==s)if(2===s)v=function(e){return o(p,e),n.value};else{var b=0===s||1===s;(b||3===s)&&(v=l?function(e){return o(p,e),n.get.call(e)}:function(e){return n.get.call(e)}),(b||4===s)&&(f=l?function(e,t){o(p,e),n.set.call(e,t)}:function(e,t){n.set.call(e,t)})}else v=function(e){return e[r]},0===s&&(f=function(e,t){e[r]=t});var w=l?p.bind():function(e){return r in e};h.access=v&&f?{get:v,set:f,has:w}:v?{get:v,has:w}:{set:f,has:w};try{return e.call(t,u,h)}finally{g.v=!0}}function c(e,t){if("function"!=typeof e)throw new TypeError(t+" must be a function")}function l(e,t){var r=(0,n.Z)(t);if(1===e){if("object"!==r||null===t)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");void 0!==t.get&&c(t.get,"accessor.get"),void 0!==t.set&&c(t.set,"accessor.set"),void 0!==t.init&&c(t.init,"accessor.init")}else if("function"!==r)throw new TypeError((0===e?"field":5===e?"class":"method")+" decorators must return a function or void 0")}function u(e){return function(){return e(this)}}function p(e){return function(t){e(this,t)}}function d(e,t,r,n,i,a,o,c,d,v){var f,h,g,b,w,y,m=r[0];n||Array.isArray(m)||(m=[m]),c?f=0===a||1===a?{get:u(r[3]),set:p(r[4])}:3===a?{get:r[3]}:4===a?{set:r[3]}:{value:r[3]}:0!==a&&(f=Object.getOwnPropertyDescriptor(t,i)),1===a?g={get:f.get,set:f.set}:2===a?g=f.value:3===a?g=f.get:4===a&&(g=f.set);for(var Z=n?2:1,k=m.length-1;k>=0;k-=Z){var O;void 0!==(b=s(m[k],n?m[k-1]:void 0,i,f,d,a,o,c,g,v))&&(l(a,b),0===a?O=b:1===a?(O=b.init,w=b.get||g.get,y=b.set||g.set,g={get:w,set:y}):g=b,void 0!==O&&(void 0===h?h=O:"function"==typeof h?h=[h,O]:h.push(O)))}if(0===a||1===a){if(void 0===h)h=function(e,t){return t};else if("function"!=typeof h){var C=h;h=function(e,t){for(var r=t,n=C.length-1;n>=0;n--)r=C[n].call(e,r);return r}}else{var E=h;h=function(e,t){return E.call(e,t)}}e.push(h)}0!==a&&(1===a?(f.get=g.get,f.set=g.set):2===a?f.value=g:3===a?f.get=g:4===a&&(f.set=g),c?1===a?(e.push((function(e,t){return g.get.call(e,t)})),e.push((function(e,t){return g.set.call(e,t)}))):2===a?e.push(g):e.push((function(e,t){return g.call(e,t)})):Object.defineProperty(t,i,f))}function v(e,t,r){for(var n,a,o,s=[],c=new Map,l=new Map,u=0;u<t.length;u++){var p=t[u];if(Array.isArray(p)){var v,h,g=p[1],b=p[2],w=p.length>3,y=16&g,m=!!(8&g),Z=r;if(g&=7,m?(v=e,0!==g&&(h=a=a||[]),w&&!o&&(o=function(t){return(0,i.Z)(t)===e}),Z=o):(v=e.prototype,0!==g&&(h=n=n||[])),0!==g&&!w){var k=m?l:c,O=k.get(b)||0;if(!0===O||3===O&&4!==g||4===O&&3!==g)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+b);k.set(b,!(!O&&g>2)||g)}d(s,v,p,y,b,g,m,w,h,Z)}}return f(s,n),f(s,a),s}function f(e,t){t&&e.push((function(e){for(var r=0;r<t.length;r++)t[r].call(e);return e}))}function h(e,t,r,n,i){return{e:v(e,t,i),get c(){return function(e,t,r){if(t.length){for(var n=[],i=e,o=e.name,s=r?2:1,c=t.length-1;c>=0;c-=s){var u={v:!1};try{var p=t[c].call(r?t[c-1]:void 0,i,{kind:"class",name:o,addInitializer:a(n,u)})}finally{u.v=!0}void 0!==p&&(l(5,p),i=p)}return[i,function(){for(var e=0;e<n.length;e++)n[e].call(i)}]}}(e,r,n)}}}},1815:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(6522);function i(e){if(Object(e)!==e)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==e?(0,n.Z)(e):"null"));return e}},5863:(e,t,r)=>{"use strict";function n(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}r.d(t,{Z:()=>n})},175:(e,t,r)=>{"use strict";function n(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}r.d(t,{Z:()=>n})},687:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(175);function i(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,(0,n.Z)(e,t,"get"))}},3395:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(5863);function i(e,t,r){(0,n.Z)(e,t),t.set(e,r)}},381:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(175);function i(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,(0,n.Z)(e,t,"set"),r),r}},6666:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(5850);function i(e,t,r){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},7896:(e,t,r)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{Z:()=>n})},3028:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(6666);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},2159:(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}r.d(t,{Z:()=>n})},5850:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(6522);function i(e){var t=function(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==(0,n.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,n.Z)(t)?t:String(t)}},6522:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:()=>n})}}]);
//# sourceMappingURL=preview-container.3dbf94d6.js.map