/*! For license information please see 5562.15b63b24.js.LICENSE.txt */
(self.webpackChunk_next_bricks_ui_test=self.webpackChunk_next_bricks_ui_test||[]).push([[5562,5628],{1532:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=1532,e.exports=t},7077:(e,t,n)=>{"use strict";n.r(t);var r=n(7896),i=n(2159),a=n(3028),o=n(3395),s=n(6666),l=n(6522);function c(e){if(Object(e)!==e)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==e?(0,l.Z)(e):"null"));return e}var u=n(381),d=n(687);function p(e,t){return function(n){(function(e,t){if(e.v)throw new Error("attempted to call addInitializer after decoration was finished")})(t),h(n,"An initializer"),e.push(n)}}function v(e,t){if(!e(t))throw new TypeError("Attempted to access private element on non-instance")}function f(e,t,n,r,i,a,o,s,l,c){var u;switch(a){case 1:u="accessor";break;case 2:u="method";break;case 3:u="getter";break;case 4:u="setter";break;default:u="field"}var d,f,h={kind:u,name:s?"#"+n:n,static:o,private:s},y={v:!1};if(0!==a&&(h.addInitializer=p(i,y)),s||0!==a&&2!==a)if(2===a)d=function(e){return v(c,e),r.value};else{var m=0===a||1===a;(m||3===a)&&(d=s?function(e){return v(c,e),r.get.call(e)}:function(e){return r.get.call(e)}),(m||4===a)&&(f=s?function(e,t){v(c,e),r.set.call(e,t)}:function(e,t){r.set.call(e,t)})}else d=function(e){return e[n]},0===a&&(f=function(e,t){e[n]=t});var g=s?c.bind():function(e){return n in e};h.access=d&&f?{get:d,set:f,has:g}:d?{get:d,has:g}:{set:f,has:g};try{return e.call(t,l,h)}finally{y.v=!0}}function h(e,t){if("function"!=typeof e)throw new TypeError(t+" must be a function")}function y(e,t){var n=(0,l.Z)(t);if(1===e){if("object"!==n||null===t)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");void 0!==t.get&&h(t.get,"accessor.get"),void 0!==t.set&&h(t.set,"accessor.set"),void 0!==t.init&&h(t.init,"accessor.init")}else if("function"!==n)throw new TypeError((0===e?"field":5===e?"class":"method")+" decorators must return a function or void 0")}function m(e){return function(){return e(this)}}function g(e){return function(t){e(this,t)}}function w(e,t,n,r,i,a,o,s,l,c){var u,d,p,v,h,w,b=n[0];r||Array.isArray(b)||(b=[b]),s?u=0===a||1===a?{get:m(n[3]),set:g(n[4])}:3===a?{get:n[3]}:4===a?{set:n[3]}:{value:n[3]}:0!==a&&(u=Object.getOwnPropertyDescriptor(t,i)),1===a?p={get:u.get,set:u.set}:2===a?p=u.value:3===a?p=u.get:4===a&&(p=u.set);for(var k=r?2:1,E=b.length-1;E>=0;E-=k){var Z;void 0!==(v=f(b[E],r?b[E-1]:void 0,i,u,l,a,o,s,p,c))&&(y(a,v),0===a?Z=v:1===a?(Z=v.init,h=v.get||p.get,w=v.set||p.set,p={get:h,set:w}):p=v,void 0!==Z&&(void 0===d?d=Z:"function"==typeof d?d=[d,Z]:d.push(Z)))}if(0===a||1===a){if(void 0===d)d=function(e,t){return t};else if("function"!=typeof d){var C=d;d=function(e,t){for(var n=t,r=C.length-1;r>=0;r--)n=C[r].call(e,n);return n}}else{var x=d;d=function(e,t){return x.call(e,t)}}e.push(d)}0!==a&&(1===a?(u.get=p.get,u.set=p.set):2===a?u.value=p:3===a?u.get=p:4===a&&(u.set=p),s?1===a?(e.push((function(e,t){return p.get.call(e,t)})),e.push((function(e,t){return p.set.call(e,t)}))):2===a?e.push(p):e.push((function(e,t){return p.call(e,t)})):Object.defineProperty(t,i,u))}function b(e,t,n){for(var r,i,a,o=[],s=new Map,l=new Map,u=0;u<t.length;u++){var d=t[u];if(Array.isArray(d)){var p,v,f=d[1],h=d[2],y=d.length>3,m=16&f,g=!!(8&f),b=n;if(f&=7,g?(p=e,0!==f&&(v=i=i||[]),y&&!a&&(a=function(t){return c(t)===e}),b=a):(p=e.prototype,0!==f&&(v=r=r||[])),0!==f&&!y){var E=g?l:s,Z=E.get(h)||0;if(!0===Z||3===Z&&4!==f||4===Z&&3!==f)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+h);E.set(h,!(!Z&&f>2)||f)}w(o,p,d,m,h,f,g,y,v,b)}}return k(o,r),k(o,i),o}function k(e,t){t&&e.push((function(e){for(var n=0;n<t.length;n++)t[n].call(e);return e}))}var E=n(8657),Z=n.n(E),C=n(5366),x=n(4511),I=(n(8161),n(5062)),S=n(2779),P=n.n(S),M=n(9375);function T(e){var{type:t,width:n,height:r,left:i,top:a,selector:o}=e;return Z().createElement("div",{className:"outline "+t,style:{width:n+4,height:r+4,left:i-2,top:a-2}},Z().createElement("div",{className:"label"},"testid"===o.type?"{".concat(o.value,"}"):"id"===o.type?"#".concat(o.value):o.value))}var A,_,O,L,R,W,N,j,D,B,U,q,z,H,Y,F,X,J,$,G,K,Q,V,ee,te,ne,re,ie,ae,oe,se=["width","height","left","top"],{defineElement:le,property:ce,method:ue,event:de}=(0,C.createDecorators)(),pe=(0,E.forwardRef)(Ne);_=le("ui-test.preview-container",{styleTexts:[M.Z]}),O=ce(),R=ce({type:Boolean}),N=ce({type:Boolean}),D=ce({attribute:!1}),U=ce({attribute:!1}),z=ue(),H=ue(),Y=ue(),F=de({type:"url.change"}),G=de({type:"inspect.select"}),ee=de({type:"record.complete"});var ve,fe,he,ye=new WeakMap,me=new WeakMap,ge=new WeakMap,we=new WeakMap,be=new WeakMap,ke=new WeakMap,Ee=new WeakMap,Ze=new WeakMap,Ce=new WeakMap,xe=new WeakMap,Ie=new WeakMap,Se=new WeakMap,Pe=new WeakMap,Me=new WeakMap;class Te extends x.ReactNextElement{constructor(){super(...arguments),(0,o.Z)(this,Pe,{get:We,set:Re}),(0,o.Z)(this,xe,{get:Le,set:Oe}),(0,o.Z)(this,Ee,{get:_e,set:Ae}),(0,s.Z)(this,"_previewContainerRef",(0,E.createRef)()),(0,o.Z)(this,ye,{writable:!0,value:(ie(this),L(this))}),(0,o.Z)(this,me,{writable:!0,value:W(this)}),(0,o.Z)(this,ge,{writable:!0,value:j(this)}),(0,o.Z)(this,we,{writable:!0,value:B(this)}),(0,o.Z)(this,be,{writable:!0,value:q(this)}),(0,o.Z)(this,ke,{writable:!0,value:X(this)}),(0,o.Z)(this,Ze,{writable:!0,value:e=>{(0,d.Z)(this,Ee).emit(e)}}),(0,o.Z)(this,Ce,{writable:!0,value:K(this)}),(0,o.Z)(this,Ie,{writable:!0,value:e=>{(0,d.Z)(this,xe).emit(e)}}),(0,o.Z)(this,Se,{writable:!0,value:te(this)}),(0,o.Z)(this,Me,{writable:!0,value:e=>{(0,d.Z)(this,Pe).emit(e)}})}get src(){return(0,d.Z)(this,ye)}set src(e){(0,u.Z)(this,ye,e)}get recording(){return(0,d.Z)(this,me)}set recording(e){(0,u.Z)(this,me,e)}get inspecting(){return(0,d.Z)(this,ge)}set inspecting(e){(0,u.Z)(this,ge,e)}get hoverRelatedCommands(){return(0,d.Z)(this,we)}set hoverRelatedCommands(e){(0,u.Z)(this,we,e)}get activeRelatedCommands(){return(0,d.Z)(this,be)}set activeRelatedCommands(e){(0,u.Z)(this,be,e)}back(){var e;null===(e=this._previewContainerRef.current)||void 0===e||e.back()}forward(){var e;null===(e=this._previewContainerRef.current)||void 0===e||e.forward()}reload(){var e;null===(e=this._previewContainerRef.current)||void 0===e||e.reload()}render(){return Z().createElement(pe,{ref:this._previewContainerRef,src:this.src,recording:this.recording,inspecting:this.inspecting,hoverRelatedCommands:this.hoverRelatedCommands,activeRelatedCommands:this.activeRelatedCommands,onUrlChange:(0,d.Z)(this,Ze),onInspectSelect:(0,d.Z)(this,Ie),onRecordComplete:(0,d.Z)(this,Me)})}}function Ae(e){$(this,e)}function _e(){return J(this)}function Oe(e){V(this,e)}function Le(){return Q(this)}function Re(e){re(this,e)}function We(){return ne(this)}function Ne(e,t){var{src:n,recording:o,inspecting:s,hoverRelatedCommands:l,activeRelatedCommands:c,onUrlChange:u,onInspectSelect:d,onRecordComplete:p}=e,v=(0,E.useRef)(null),[f,h]=(0,E.useState)(!1),y=(0,E.useMemo)((()=>new URL(n,location.origin).origin),[n]),[m,g]=(0,E.useState)({x:0,y:0}),[w,b]=(0,E.useState)([]),[k,C]=(0,E.useState)([]),[x,S]=(0,E.useState)([]),[M,A]=(0,E.useState)([]),_=(0,E.useCallback)((()=>{var e;null===(e=v.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"back"},y)}),[y]),O=(0,E.useCallback)((()=>{var e;null===(e=v.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"forward"},y)}),[y]),L=(0,E.useCallback)((()=>{var e;null===(e=v.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"reload"},y)}),[y]);(0,E.useImperativeHandle)(t,(()=>({back:_,forward:O,reload:L})));var R=(0,E.useCallback)((()=>{var e,t,n=I.__secret_internals.getBrickPackagesById("bricks/ui-test");if(!n)throw new Error("Cannot find preview agent package: bricks/ui-test");null===(e=v.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"initialize",payload:{agent:{brick:"ui-test.inject-preview-agent",pkg:(0,a.Z)((0,a.Z)({},n),{},{filePath:"".concat(location.origin).concat((0,I.getBasePath)()).concat(null!==(t=window.PUBLIC_ROOT)&&void 0!==t?t:"").concat(n.filePath)})}}},y)}),[y]),W=(0,E.useMemo)((()=>{if(f)return()=>{setTimeout((()=>{window.postMessage({channel:"ui-test-preview",type:"inspect-hover",payload:{outlines:[]}})}),100)}}),[f]),N=(0,E.useCallback)((e=>e.map((e=>{var t,n,r,o,s=null!==(t=null==v||null===(n=v.current)||void 0===n?void 0:n.offsetLeft)&&void 0!==t?t:0,l=null!==(r=null==v||null===(o=v.current)||void 0===o?void 0:o.offsetTop)&&void 0!==r?r:0,{width:c,height:u,left:d,top:p}=e,f=(0,i.Z)(e,se);return(0,a.Z)({width:1*c,height:1*u,left:1*(d-m.x)+s,top:1*(p-m.y)+l},f)}))),[m.x,m.y]);return(0,E.useEffect)((()=>{var e=e=>{var t;if("ui-test-preview"===(null===(t=e.data)||void 0===t?void 0:t.channel))switch(e.data.type){case"initialized":h(!0);break;case"url-change":null==u||u(e.data.payload.url);break;case"inspect-hover":b(e.data.payload.outlines);break;case"inspect-active":C(e.data.payload.outlines);break;case"scroll":g(e.data.payload);break;case"inspect-select":null==d||d(e.data.payload.targets);break;case"record-complete":null==p||p(e.data.payload.steps)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[u,d,p]),(0,E.useEffect)((()=>{var e;f&&(null===(e=v.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"toggle-record",payload:{recording:o}},y))}),[f,y,o]),(0,E.useEffect)((()=>{var e;f&&(null===(e=v.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"toggle-inspecting",payload:{inspecting:s}},y))}),[f,y,s]),(0,E.useEffect)((()=>{var e;f&&(null===(e=v.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"set-active-tree-node",payload:{relatedCommands:null!=c?c:[]}},y))}),[y,c,f]),(0,E.useEffect)((()=>{var e;f&&(null===(e=v.current)||void 0===e||null===(e=e.contentWindow)||void 0===e||e.postMessage({channel:"ui-test-preview",type:"hover-over-tree-node",payload:{relatedCommands:null!=l?l:[]}},y))}),[y,l,f]),(0,E.useEffect)((()=>{A(N(k))}),[k,N]),(0,E.useEffect)((()=>{S(N(w))}),[w,N]),Z().createElement("div",{className:P()("preview-container",{inspecting:s})},Z().createElement("iframe",{ref:v,src:n,className:"iframe",onLoad:R,onMouseOut:W}),x.map(((e,t)=>Z().createElement(T,(0,r.Z)({key:t,type:"hover"},e)))),M.map(((e,t)=>Z().createElement(T,(0,r.Z)({key:t,type:"active"},e)))))}ae=Te,({e:[L,W,j,B,q,X,J,$,K,Q,V,te,ne,re,ie],c:[oe,A]}=(ve=ae,fe=[[O,1,"src"],[R,1,"recording"],[N,1,"inspecting"],[D,1,"hoverRelatedCommands"],[U,1,"activeRelatedCommands"],[z,2,"back"],[H,2,"forward"],[Y,2,"reload"],[F,1,"urlChangeEvent",e=>(0,d.Z)(e,ke),(e,t)=>(0,u.Z)(e,ke,t)],[G,1,"inspectSelectEvent",e=>(0,d.Z)(e,Ce),(e,t)=>(0,u.Z)(e,Ce,t)],[ee,1,"recordCompleteEvent",e=>(0,d.Z)(e,Se),(e,t)=>(0,u.Z)(e,Se,t)]],he=[_],x.ReactNextElement,{e:b(ve,fe,(e=>Me.has(c(e)))),get c(){return function(e,t,n){if(t.length){for(var r=[],i=e,a=e.name,o=t.length-1;o>=0;o-=1){var s={v:!1};try{var l=t[o].call(void 0,i,{kind:"class",name:a,addInitializer:p(r,s)})}finally{s.v=!0}void 0!==l&&(y(5,l),i=l)}return[i,function(){for(var e=0;e<r.length;e++)r[e].call(i)}]}}(ve,he)}})),A();var je,De=n(4795),Be=n(628),Ue=n(1211),qe=!1;function ze(e){je=e}function He(e){if(qe!==e){qe=e;var t=e?"addEventListener":"removeEventListener";window[t]("click",Ye,!0),window[t]("mousedown",Fe,!0),window[t]("mouseover",Fe,!0),window[t]("mouseup",Fe,!0),window[t]("pointerdown",Je,!0),window[t]("pointerover",$e,!0),window[t]("pointerup",Fe,!0),window[t]("pointerleave",Ge,!0)}}function Ye(e){e.preventDefault(),e.stopPropagation(),function(e){var t=Ke(e.composedPath());t.length>0&&window.parent.postMessage({channel:"ui-test-preview",type:"inspect-select",payload:{targets:t.map((e=>e.selector))}},je)}(e)}function Fe(e){e.preventDefault(),e.stopPropagation()}var Xe=(0,Ue.throttle)((e=>{var t=Ke(e);window.parent.postMessage({channel:"ui-test-preview",type:"inspect-hover",payload:{outlines:t.length>0?[nt(t[0])]:[]}},je)}),100,{leading:!1});function Je(e){e.preventDefault(),e.stopPropagation(),Xe(e.composedPath())}function $e(e){e.preventDefault(),e.stopPropagation(),Xe(e.composedPath())}function Ge(e){e.preventDefault(),e.stopPropagation(),window.parent.postMessage({channel:"ui-test-preview",type:"inspect-hover",payload:{outlines:[]}},je)}function Ke(e){var t=[];for(var n of e)if(n.nodeType===Node.ELEMENT_NODE&&n instanceof HTMLElement){if(n.id&&("main-mount-point"===n.id||"portal-mount-point"===n.id))break;var r=n.tagName.toLowerCase();if("slot"===r)continue;n.dataset.testid?t.push({element:n,selector:{type:"testid",value:n.dataset.testid,tag:r}}):n.id&&t.push({element:n,selector:{type:"id",value:n.id,tag:r}})}return t.length>1&&(0,Ue.isEqual)(t[0].selector,{tag:"button",type:"testid",value:"button"})&&"basic-bricks.general-button"===t[1].selector.tag&&t.shift(),t}function Qe(e){window.parent.postMessage({channel:"ui-test-preview",type:"inspect-hover",payload:{outlines:et(e)}},je)}function Ve(e){window.parent.postMessage({channel:"ui-test-preview",type:"inspect-active",payload:{outlines:et(e)}},je)}function et(e){var t=[],n=[document],r=!1,i=function(e){var[t]=null!=s?s:[];switch(e){case"findByTestId":case"findAllByTestId":if("string"==typeof t){var n='[data-testid="'.concat(t,'"]');l((t=>"findByTestId"===e?t.querySelector(n):[...t.querySelectorAll(n)]),{type:"testid",value:t});break}c();break;case"get":if("string"==typeof t){/^#[-\w]+$/.test(t)?l((e=>[...e.querySelectorAll(t)]),{type:"id",value:t.substring(1)}):l((e=>[...e.querySelectorAll(t)]),{type:"css-selector",value:t});break}c();break;case"find":if("string"==typeof t){l((e=>[...e.querySelectorAll(t)]),{type:"css-selector",value:t});break}c()}};for(var{name:o,params:s}of e)i(o);function l(e,i){r&&(t.length=0);var o=[];for(var s of n){var l=e(s),c=tt(l);if(c&&!l)break;for(var u of c?[l]:l)t.push({element:u,selector:(0,a.Z)((0,a.Z)({},i),{},{tag:u.tagName.toLowerCase()})}),o.push(u);if(c)break}n=o,r=!0}function c(){r&&(t.length=0),n=[],r=!0}return t.map(nt)}function tt(e){return!Array.isArray(e)}function nt(e){var{element:t,selector:n}=e,{width:r,height:i,left:a,top:o}=t.getBoundingClientRect();return{width:r,height:i,left:a+window.scrollX,top:o+window.scrollY,selector:n}}var rt,it,at=!1,ot=null;function st(e,t){at!==e&&(at=e,t&&He(!e),e?(it=[],window.addEventListener("click",lt,{capture:!0,passive:!0}),window.addEventListener("dblclick",lt,{capture:!0,passive:!0}),window.addEventListener("keydown",ct,{capture:!0,passive:!0})):(ut(),ot=null,window.removeEventListener("click",lt,{capture:!0}),window.removeEventListener("dblclick",lt,{capture:!0}),window.removeEventListener("keydown",ct,{capture:!0}),it.length>0&&window.parent.postMessage({channel:"ui-test-preview",type:"record-complete",payload:{steps:it}},je)))}function lt(e){ut(),ot=null;var t=Ke(e.composedPath());0!==t.length&&it.push({event:e.type,targets:t.map((e=>e.selector))})}function ct(e){var t,n=Ke(e.composedPath()),r=n[0];if(0!==n.length)switch(r.element!==(null===(t=ot)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.element)&&(ut(),ot=n,rt=[]),e.key){case"Backspace":rt.push("{backspace}");break;case"Enter":rt.push("{enter}");break;case"Escape":rt.push("{esc}");break;default:1===e.key.length&&rt.push(e.key)}else ot=null}function ut(){ot&&rt.length>0&&it.push({event:"type",targets:ot.map((e=>e.selector)),text:rt.join("")})}var dt=!1,pt=(0,I.getHistory)();function vt(){return vt=(0,De.Z)((function*(e,t){if(!dt){dt=!0;var n=t=>{window.parent.postMessage((0,a.Z)({channel:"ui-test-preview"},t),e)};n({type:"initialized"}),ze(e);var r=!1;window.addEventListener("message",(e=>{var t;if("ui-test-preview"===(null===(t=e.data)||void 0===t?void 0:t.channel))switch(e.data.type){case"toggle-record":st(e.data.payload.recording,r);break;case"toggle-inspecting":He(r=e.data.payload.inspecting);break;case"reload":location.reload();break;case"back":pt.goBack();break;case"forward":pt.goForward();break;case"hover-over-tree-node":Qe(e.data.payload.relatedCommands);break;case"set-active-tree-node":Ve(e.data.payload.relatedCommands)}})),pt.listen((e=>{n({type:"url-change",payload:{url:location.origin+pt.createHref(e)}})})),window.addEventListener("scroll",(()=>{n({type:"scroll",payload:{x:window.scrollX,y:window.scrollY}})}))}})),vt.apply(this,arguments)}customElements.define("ui-test.inject-preview-agent",(0,Be.createProviderClass)((function(e,t){return vt.apply(this,arguments)})));var ft=n(7243),ht=n(1483),yt=n(5865),mt=function(e){return e.Suite="suite",e.Block="block",e.Command="command",e}({});function gt(e){var t,n=null===(t=e.params)||void 0===t?void 0:t[0];return n?(0,yt.parse)(n).program.body:[]}function wt(e){var t;return e.name.startsWith("should")?null===(t=e.name.split(":"))||void 0===t?void 0:t[0]:e.name}function bt(e){var{name:t}=e,n=function(e){if(e.name.startsWith("should")){var t,[,n]=e.name.split(":"),r=(null===(t=e.params)||void 0===t?void 0:t.slice())||[];return n&&r.unshift(n),r}return e.params}(e);if(!n)return[];if(!Array.isArray(n))throw new Error("The expected type of the `params` field in `".concat(t,"` is an array, but the received type is a ").concat(typeof n));var r=JSON.stringify(n);return(0,yt.parse)(r).program.body[0].expression.elements}function kt(e,t){var{startItem:n}=t,[r,...i]=e;if(0===i.length)return Zt(n);if("code"===r.name){var a=gt(r);if(0===a.length)return kt(i.slice(1),{startItem:n});var o,s=null===(o=a[0])||void 0===o?void 0:o.expression;if(!ht.isCallExpression(s))throw new Error("to use the `code` command in the call chain, it must be a callExpression type");return Et(s,i,{startItem:n})}return ht.callExpression(ht.memberExpression(kt(i,{startItem:n}),ht.identifier(wt(r))),bt(r))}function Et(e,t,n){var{startItem:r}=n;return ht.isMemberExpression(e.callee)?ht.callExpression(ht.memberExpression(Et(e.callee.object,t,{startItem:r}),e.callee.property),e.arguments):ht.callExpression(ht.memberExpression(kt(t,{startItem:r}),e.callee),e.arguments)}function Zt(e){return ht.callExpression(ht.memberExpression(ht.identifier("cy"),ht.identifier(wt(e))),bt(e))}function Ct(e){if((0,Ue.isEmpty)(e.children))return[];if("describe"===e.name){if(e.children.some((e=>e.type!==mt.Block)))throw new Error("The children of the `".concat(e.name,'` are only be  ` block ` type, specifically including before, beforeEach, after, afterEach and "it."'));return e.children.map((e=>xt(e)))}return t=e.children,n=[],t.forEach((e=>{"code"===e.name?n.push(...gt(e)):n.push(function(e){var t;if((0,Ue.isEmpty)(e.children))return ht.expressionStatement(Zt(e));var n=null===(t=e.children)||void 0===t?void 0:t.reverse().concat(e);return ht.expressionStatement(kt(n,{startItem:e}))}(e))})),n;var t,n}function xt(e){var t=["only","skip"].includes(e.flag)?ht.memberExpression(ht.identifier(e.name),ht.identifier(e.flag)):ht.identifier(e.name);return ht.expressionStatement(ht.callExpression(t,[...["before","beforeEach","after","afterEach"].includes(e.name)?[]:[ht.stringLiteral(e.label||"")],ht.arrowFunctionExpression([],ht.blockStatement(Ct(e)))]))}var It,St,Pt=n(186),Mt="directory-handle-key";function Tt(){return At.apply(this,arguments)}function At(){return(At=(0,De.Z)((function*(){var e,t;return(It=yield(0,Pt.U2)(Mt))||(It=yield null===(e=(t=window).showDirectoryPicker)||void 0===e?void 0:e.call(t,{mode:"readwrite"}),yield(0,Pt.t8)(Mt,It)),It}))).apply(this,arguments)}function _t(e,t){return Ot.apply(this,arguments)}function Ot(){return Ot=(0,De.Z)((function*(e,t){var{appId:n}=t,r=yield e.getDirectoryHandle("cypress",{create:!0}),i=yield r.getDirectoryHandle("e2e",{create:!0});return yield i.getDirectoryHandle("".concat(n),{create:!0})})),Ot.apply(this,arguments)}function Lt(e,t){return Rt.apply(this,arguments)}function Rt(){return Rt=(0,De.Z)((function*(e,t){var{caseName:n,appId:r}=t,i="".concat(n,".spec.js"),a="".concat(e.name,"-").concat(r,"-").concat(i);if(!(St=yield(0,Pt.U2)(a))){var o,s=yield _t(e,{appId:r});St=yield null==s||null===(o=s.getFileHandle)||void 0===o?void 0:o.call(s,i,{create:!0}),yield(0,Pt.t8)(a,St)}return St})),Rt.apply(this,arguments)}var Wt=n(554),Nt=n(8828),jt=n(311);function Dt(){return Dt=(0,De.Z)((function*(e,t){var n,r,i,a;try{i=yield Tt(),a=yield Lt(i,{caseName:e.name,appId:t})}catch(n){if("NotAllowedError"!==n.name)return console.error(n),!1;var o=yield Tt();yield o.requestPermission({mode:"readwrite"}),a=yield Lt(i,{caseName:e.name,appId:t})}var s=yield null===(n=a)||void 0===n||null===(r=n.createWritable)||void 0===r?void 0:r.call(n),l=ht.program(function(e){return(0,Ue.isEmpty)(e.children)?[]:function(e){if(!e.every((e=>e.type===mt.Block)))throw new Error("The children nodes of the suite type must be of the block type");return e.map((e=>xt(e)))}(e.children)}(e),void 0,"module"),c=(0,ft.transformFromAst)(l,void 0,{generatorOpts:{jsescOption:{minimal:!0}}}).code,u=yield(0,Wt.WU)(c,{parser:"babel-ts",plugins:[Nt,jt],printWidth:50});return yield s.write(u),yield s.close(),!0})),Dt.apply(this,arguments)}function Bt(e,t){var n;switch(e.type){case"suite":n={lib:"fa",icon:"vial",color:"var(--palette-purple-6)"};break;case"block":n={lib:"fa",icon:"bookmark",color:"var(--palette-cyan-6)"};break;default:var r=null==t?void 0:t.find((t=>t.name===e.name));switch(null==r?void 0:r.category){case"query":n={lib:"antd",icon:"aim",color:"var(--palette-blue-6)"};break;case"action":n={lib:"fa",icon:"computer-mouse",color:"var(--palette-red-6)"};break;case"assertion":n={lib:"fa",icon:"spell-check",color:"var(--palette-green-6)"};break;default:n={lib:"fa",icon:"wrench",color:"var(--palette-yellow-6)"}}null!=r&&r.icon&&(n=(0,a.Z)({color:n.color},r.icon))}return n}function Ut(){return(Ut=(0,De.Z)((function*(e){var t,n;if("get"===(null==e?void 0:e.action))return(0,Pt.U2)(Mt);var r=yield null===(t=(n=window).showDirectoryPicker)||void 0===t?void 0:t.call(n,{mode:"readwrite"});return(0,Pt.t8)(Mt,r),r}))).apply(this,arguments)}customElements.define("ui-test.export-as-file",(0,Be.createProviderClass)((function(e,t){return Dt.apply(this,arguments)}))),I.customProcessors.define("uiTest.getTreeData",(function(e,t){var{topic_vertices:[n],vertices:r,edges:i}=e,o=e=>(0,Ue.sortBy)(r.filter((t=>e.find((e=>e.data.instanceId===t.instanceId)))),"sort");return function e(n,s){var l="command"===(null==s?void 0:s.type)&&"command"===n.type,c=(t=>{var n=i.filter((e=>e.in===t.instanceId)).map((e=>r.find((t=>e.out===t.instanceId)))).filter(Boolean);return(0,Ue.sortBy)(n,"sort").map((n=>e(n,t)))})(n),u=0;if(c.length>0){var d,p=c[c.length-1];u=(null!==(d=p.data.sort)&&void 0!==d?d:0)+1,p.data.isLastChild=!0}for(var v of c)v.data.nextSiblingSort=u;var f=function(e){var t=e.flag&&"none"!==e.flag?"[".concat(e.flag,"] "):"";if("suite"===e.type)return e.name;if(e.label)return"".concat(t).concat(e.name,": ").concat(e.label);var n=function(e){var t=[];if(Array.isArray(e))for(var n of e){if(!(t.length<3&&["string","boolean","number"].includes(typeof n)))break;t.push(n)}return t}(e.params),r="".concat(t).concat(e.name);return 0===n.length?r:"".concat(r,": ").concat(n.join(", "))}(n);return{name:f,key:n.instanceId,icon:Bt(n,t),data:(0,a.Z)((0,a.Z)({},n),{},{isChainChild:l,parent:s,displayLabel:f,children:o(c),nextChildSort:u}),children:c}}(n)})),customElements.define("ui-test.choose-directory",(0,Be.createProviderClass)((function(e){return Ut.apply(this,arguments)})));var qt=n(6092);function zt(){return(zt=(0,De.Z)((function*(e){var{category:t,chain:n,q:r}=null!=e?e:{},i=yield(0,qt.Z)(),a=[];if(Array.isArray(t)&&t.length>0&&a.push((e=>t.includes(e.category))),Array.isArray(n)&&n.length>0&&a.push((e=>n.includes(e.chain))),r){var o=r.toLowerCase();a.push((e=>{var t;return e.name.toLowerCase().includes(o)||(null===(t=e.keywords)||void 0===t?void 0:t.some((e=>e.toLowerCase().includes(o))))}))}return 0===a.length?i:i.filter((e=>a.every((t=>t(e)))))}))).apply(this,arguments)}function Ht(e,t){var n,r=(e,t)=>{var i;e.key!==t?(0,Ue.isEmpty)(e.children)||null===(i=e.children)||void 0===i||i.forEach((e=>r(e,t))):n=e};return e.forEach((e=>r(e,t))),n}customElements.define("ui-test.get-commands",(0,Be.createProviderClass)((function(e){return zt.apply(this,arguments)}))),customElements.define("ui-test.sort-test-tree-node",(0,Be.createProviderClass)((function(e,t,n){var r,i,o,s=Ht(e,null===(r=t.parent)||void 0===r?void 0:r.instanceId),l=(null==s?void 0:s.children)||[],c=null==l?void 0:l.findIndex((e=>e.key===t.instanceId));if(-1!==c){var u="move-up"===n&&0!==c,d="move-down"===n&&c!==l.length-1;if(u||d){var p=(o=u?c-1:c,[...(i=l).slice(0,o),i[o+1],i[o],...i.slice(o+2)].map(((e,t)=>{var n=e.data.sort;return(0,a.Z)((0,a.Z)({},e),{},{data:(0,a.Z)((0,a.Z)({},e.data),{},{sort:t,isSortChange:t!==n})})})));return s.children=p,{treeData:e,sortedChangeChildren:p.filter((e=>e.data.isSortChange))}}}return{treeData:e,sortedChangeChildren:[]}})));var Yt,Ft,Xt=n(9751),Jt=function(){var e=(0,De.Z)((function*(e,t,n){return(yield Xt.http.post("api/gateway/cmdb.instance.CreateInstance/v2/object/".concat(e,"/instance"),t,n)).data}));return function(t,n,r){return e.apply(this,arguments)}}(),$t=["name","label","sort","type","params"];function Gt(e,t,n){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,De.Z)((function*(e,t,n){var r=yield Promise.all(t.map((t=>Jt("UI_TEST_NODE@EASYOPS",(0,a.Z)((0,a.Z)({},(0,Ue.pick)(t,$t)),{},{parent:null==e?void 0:e.instanceId}))))),i=0;for(var o of t){var s,l=null===(s=Ht(n,o.instanceId))||void 0===s?void 0:s.data;(0,Ue.isEmpty)(null==l?void 0:l.children)||(yield Gt(r[i],l.children,n)),i+=1}}))).apply(this,arguments)}function Qt(){return(Qt=(0,De.Z)((function*(e,t,n){var r,i,o=yield Jt("UI_TEST_NODE@EASYOPS",(0,a.Z)((0,a.Z)({},(0,Ue.pick)(e,$t)),{},{sort:null!==(r=t.children)&&void 0!==r&&r.length?(null!==(i=t.children[t.children.length-1].sort)&&void 0!==i?i:0)+1:0,parent:t.instanceId}));(0,Ue.isEmpty)(e.children)||(yield Gt(o,e.children,n))}))).apply(this,arguments)}function Vt(e,t){return en.apply(this,arguments)}function en(){return en=(0,De.Z)((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(var r of e)yield tn((0,a.Z)((0,a.Z)({},r),{},{parent:t,sort:n})),n++})),en.apply(this,arguments)}function tn(e){return nn.apply(this,arguments)}function nn(){return(nn=(0,De.Z)((function*(e){var t,n=yield Jt("UI_TEST_NODE@EASYOPS",(0,Ue.omit)(e,["children"]));null!==(t=e.children)&&void 0!==t&&t.length&&(yield Vt(e.children,n.instanceId))}))).apply(this,arguments)}function rn(){return rn=(0,De.Z)((function*(e){var{steps:t,parent:n,initialSort:r}=e,i=function(e){var t,n,r=[];for(var i of e){var o;t&&null!==(o=n)&&void 0!==o&&o.children&&(0,Ue.isEqual)(i.target,t)?n.children.push(an(i)):(t=i.target,r.push(n=(0,a.Z)((0,a.Z)({type:mt.Command},"testid"===i.target.type?{name:"findByTestId",params:[i.target.value]}:{name:"get",params:["#".concat(i.target.value)]}),{},{children:[an(i)]})))}return r}(t);yield Vt(i,n,r)})),rn.apply(this,arguments)}function an(e){return(0,a.Z)({type:mt.Command},"type"===e.event?{name:"type",params:[e.text]}:{name:e.event})}function on(){return(on=(0,De.Z)((function*(e){var{nodes:t,parent:n,initialSort:r}=e;yield Vt(t,n,r)}))).apply(this,arguments)}function sn(e,t){return ln.apply(this,arguments)}function ln(){return(ln=(0,De.Z)((function*(e,t){Yt=yield Tt();var n=yield _t(Yt,{appId:t});yield n.removeEntry("".concat(e.name,".spec.js"))}))).apply(this,arguments)}function cn(){return(cn=(0,De.Z)((function*(e,t){try{yield sn(e,t)}catch(n){"NotAllowedError"===n.name?(yield Yt.requestPermission({mode:"readwrite"}),yield sn(e,t)):console.error(n)}}))).apply(this,arguments)}function un(e,t,n){return dn.apply(this,arguments)}function dn(){return dn=(0,De.Z)((function*(e,t,n){Ft=yield Tt();var r=yield Lt(Ft,{caseName:e,appId:n});yield r.move("".concat(t,".spec.js"))})),dn.apply(this,arguments)}function pn(){return(pn=(0,De.Z)((function*(e,t,n){try{yield un(e,t,n)}catch(r){"NotAllowedError"===r.name?(yield Ft.requestPermission({mode:"readwrite"}),yield un(e,t,n)):console.error(r)}}))).apply(this,arguments)}customElements.define("ui-test.clone-nodes",(0,Be.createProviderClass)((function(e,t,n){return Qt.apply(this,arguments)}))),customElements.define("ui-test.save-recorded-commands",(0,Be.createProviderClass)((function(e){return rn.apply(this,arguments)}))),customElements.define("ui-test.get-flat-nodes-in-tree",(0,Be.createProviderClass)((function(e){var t=[];return function e(n){var r;for(var i of(t.push({type:n.data.type,display:n.name,instanceId:n.data.instanceId,initialSort:n.children.length?(null!==(r=n.children[n.children.length-1].data.sort)&&void 0!==r?r:0)+1:0}),n.children))e(i)}(e),t}))),customElements.define("ui-test.apply-snippet",(0,Be.createProviderClass)((function(e){return on.apply(this,arguments)}))),customElements.define("ui-test.delete-file",(0,Be.createProviderClass)((function(e,t){return cn.apply(this,arguments)}))),customElements.define("ui-test.rename-file",(0,Be.createProviderClass)((function(e,t,n){return pn.apply(this,arguments)})));var vn=function(){var e=(0,De.Z)((function*(e,t,n){return(yield Xt.http.post("api/gateway/cmdb.instance.ImportInstance/object/".concat(e,"/instance/_import"),t,n)).data}));return function(t,n,r){return e.apply(this,arguments)}}();function fn(){return fn=(0,De.Z)((function*(e,t,n){var r,i,o,s,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"down",c=Ht(e,null===(r=t.parent)||void 0===r?void 0:r.instanceId),u=(null==c?void 0:c.children)||[],d=u.findIndex((e=>e.key===t.instanceId));"up"===l?(o=u.slice(d),s=t.sort):(o=u.slice(d+1),s=t.sort+1),yield Jt("UI_TEST_NODE@EASYOPS",(0,a.Z)((0,a.Z)({},n),{},{parent:null===(i=t.parent)||void 0===i?void 0:i.instanceId,sort:s})),o.length>0&&(yield vn("UI_TEST_NODE@EASYOPS",{keys:["instanceId"],datas:o.map(((e,t)=>({instanceId:e.data.instanceId,sort:s+1+t})))}))})),fn.apply(this,arguments)}customElements.define("ui-test.insert-node",(0,Be.createProviderClass)((function(e,t,n){return fn.apply(this,arguments)})))},2779:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},9375:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(9601),i=n.n(r),a=n(2609),o=n.n(a)()(i());o.push([e.id,"*{box-sizing:border-box}.preview-container{width:100%;height:100%;position:relative;box-shadow:0 0 0 1px rgba(204,204,204,0.2);border-radius:4px}.iframe{width:100%;height:100%;margin:0;transform-origin:0% 0%;border:0;padding:0;border-radius:4px}.mask{display:none;position:absolute;top:0;bottom:0;left:0;right:0}.outline{position:absolute;border-style:solid;border-width:2px;border-radius:0 4px 4px;pointer-events:none}.label{position:absolute;left:-2px;top:-20px;height:18px;line-height:16px;padding:2px 5px 0;font-size:12px;border-radius:4px 4px 0 0;white-space:nowrap}.outline.hover{border-color:rgba(var(--palette-blue-6-channel),0.3)}.outline.hover .label{background:rgba(var(--palette-blue-6-channel),0.3)}.outline.active{border-color:var(--palette-blue-6)}.outline.active .label{background:var(--palette-blue-6)}",""]);const s=o.toString()},2609:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},9601:e=>{"use strict";e.exports=function(e){return e[1]}},5863:(e,t,n)=>{"use strict";function r(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}n.d(t,{Z:()=>r})},175:(e,t,n)=>{"use strict";function r(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}n.d(t,{Z:()=>r})},687:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(175);function i(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,(0,r.Z)(e,t,"get"))}},3395:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(5863);function i(e,t,n){(0,r.Z)(e,t),t.set(e,n)}},381:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(175);function i(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,(0,r.Z)(e,t,"set"),n),n}},7896:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:()=>r})}}]);
//# sourceMappingURL=5562.15b63b24.js.map