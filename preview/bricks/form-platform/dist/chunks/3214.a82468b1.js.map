{"version":3,"file":"chunks/3214.a82468b1.js","mappings":"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","sources":["webpack:///../../node_modules/@next-api-sdk/micro-app-sdk/dist/esm/api/micro_app/permission/validatePermissions.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/auth.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/checkPermissions.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/websocket/MessageService.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/websocket/MessageDispatcher.js","webpack:///../../node_modules/@next-api-sdk/micro-app-standalone-sdk/dist/esm/api/micro_app_standalone/runtime/searchMicroAppStandalone.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/checkInstalledApps.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/flowApi/FlowApiProvider.js","webpack:///../../node_modules/@next-api-sdk/api-gateway-sdk/dist/esm/api/api_gateway/contract/searchSingleContract.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/flowApi/CollectContracts.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/flowApi/FlowApi.js","webpack:///../../node_modules/@next-api-sdk/micro-app-sdk/dist/esm/api/micro_app/installed_micro_app/getMenusInfo.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/menu/constants.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/menu/mergeMenu.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/menu/loadDynamicMenuItems.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/menu/reorderMenuItems.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/menu/computeMenuData.js","webpack:///../../node_modules/@next-api-sdk/cmdb-sdk/dist/esm/api/cmdb/instance/getDetail.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/menu/fetchMenuTitle.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/menu/fetchMenuById.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/menu/getMenusOfStandaloneApp.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/analytics/transport.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/analytics/analytics.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/analytics/http.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/analytics/pageView.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/index.js","webpack:///../../node_modules/@next-core/easyops-runtime/dist/esm/auth-v2.js"],"sourcesContent":["import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { http } from \"@next-core/http\";\n/**\n * @description 校验系统权限\n * @endpoint POST /api/micro_app/v1/permission/validate\n */\nexport var PermissionApi_validatePermissions = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (data, options) {\n    return (/**! @contract easyops.api.micro_app.permission.ValidatePermissions@1.0.0 */(yield http.post(\"api/gateway/micro_app.permission.ValidatePermissions/api/micro_app/v1/permission/validate\", data, options)).data\n    );\n  });\n  return function PermissionApi_validatePermissions(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n//# sourceMappingURL=validatePermissions.js.map","import { resetPermissionPreChecks } from \"./checkPermissions.js\";\nconst auth = {};\n\n/** @internal */\n\n/** @internal */\nexport function authenticate(newAuth) {\n  Object.assign(auth, {\n    org: newAuth.org,\n    username: newAuth.username,\n    userInstanceId: newAuth.userInstanceId,\n    loginFrom: newAuth.loginFrom,\n    accessRule: newAuth.accessRule,\n    isAdmin: newAuth.isAdmin,\n    csrfToken: newAuth.csrfToken,\n    license: newAuth.license,\n    accessToken: newAuth.accessToken,\n    userShowValue: newAuth.userShowValue\n  });\n}\n\n/**\n * 获取当前登录认证信息。\n *\n * @returns 当前登录认证信息。\n */\nexport function getAuth() {\n  return {\n    ...auth\n  };\n}\n\n/** @internal */\nexport function logout() {\n  for (const key of Object.keys(auth)) {\n    auth[key] = undefined;\n  }\n  resetPermissionPreChecks();\n}\n\n/**\n * 查看当前是否已登录。\n *\n * @returns 当前是否已登录。\n */\nexport function isLoggedIn() {\n  return auth.username !== undefined;\n}\n//# sourceMappingURL=auth.js.map","import { scanPermissionActionsInAny, scanPermissionActionsInStoryboard } from \"@next-core/utils/storyboard\";\nimport { PermissionApi_validatePermissions } from \"@next-api-sdk/micro-app-sdk\";\nimport { getAuth, isLoggedIn } from \"./auth.js\";\nconst checkingPermissions = new Map();\nconst checkedPermissions = [];\nconst permissionMap = new Map();\nexport function preCheckPermissions(storyboard) {\n  if (isLoggedIn() && !getAuth().isAdmin) {\n    const usedActions = scanPermissionActionsInStoryboard(storyboard);\n    return validatePermissions(usedActions);\n  }\n}\nexport async function preCheckPermissionsForBrickOrRoute(container, asyncComputeRealValue) {\n  if (isLoggedIn() && !getAuth().isAdmin && Array.isArray(container.permissionsPreCheck)) {\n    const actions = await asyncComputeRealValue(container.permissionsPreCheck);\n    return validatePermissions(actions);\n  }\n}\nexport function preCheckPermissionsForAny(data) {\n  if (isLoggedIn() && !getAuth().isAdmin) {\n    const usedActions = scanPermissionActionsInAny(data);\n    return validatePermissions(usedActions);\n  }\n}\nexport async function validatePermissions(usedActions) {\n  // Do not request known actions.\n  const uncheckedActions = usedActions.filter(action => !checkedPermissions.includes(action));\n  if (uncheckedActions.length === 0) {\n    return;\n  }\n  const checkingTasks = [];\n  const restActions = [];\n  for (const action of uncheckedActions) {\n    const promise = checkingPermissions.get(action);\n    if (promise) {\n      checkingTasks.push(promise);\n    } else {\n      restActions.push(action);\n    }\n  }\n  if (restActions.length > 0) {\n    const task = (async () => {\n      try {\n        const result = await PermissionApi_validatePermissions({\n          actions: restActions\n        }, {\n          noAbortOnRouteChange: true\n        });\n        for (const item of result.actions) {\n          permissionMap.set(item.action, item.authorizationStatus);\n          if (item.authorizationStatus === \"undefined\") {\n            // eslint-disable-next-line no-console\n            console.error(`Undefined permission action: \"${item.action}\"`);\n          }\n        }\n      } catch (error) {\n        // Allow pre-check to fail, and\n        // make it not crash when the backend service is not updated.\n        // eslint-disable-next-line no-console\n        console.error(\"Pre-check permissions failed\", error);\n      } finally {\n        checkedPermissions.push(...restActions);\n      }\n    })();\n    for (const action of restActions) {\n      checkingPermissions.set(action, task);\n    }\n    checkingTasks.push(task);\n  }\n  await Promise.all(checkingTasks);\n}\n\n/**\n * Check the current logged-in user whether to have all\n * permissions of actions passed to it.\n *\n * @param actions - Required permission actions.\n */\nexport function checkPermissions() {\n  if (!isLoggedIn()) {\n    return false;\n  }\n  if (getAuth().isAdmin) {\n    return true;\n  }\n  for (var _len = arguments.length, actions = new Array(_len), _key = 0; _key < _len; _key++) {\n    actions[_key] = arguments[_key];\n  }\n  for (const action of actions) {\n    // Only **exclusively authorized** permissions are ok.\n    // Those scenarios below will fail:\n    // - unauthorized actions (pre-check results)\n    // - undefined actions (pre-check results)\n    // - Un-pre-checked or pre-check failed\n    switch (permissionMap.get(action)) {\n      case \"unauthorized\":\n      case \"undefined\":\n        return false;\n      case undefined:\n        // eslint-disable-next-line no-console\n        console.error(`Un-checked permission action: \"${action}\", please make sure the permission to check is defined in permissionsPreCheck.`);\n        return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Reset permission pre-checks after logged-out.\n */\nexport function resetPermissionPreChecks() {\n  checkingPermissions.clear();\n  checkedPermissions.length = 0;\n  permissionMap.clear();\n}\n//# sourceMappingURL=checkPermissions.js.map","import _classPrivateMethodInitSpec from \"@babel/runtime/helpers/classPrivateMethodInitSpec\";\nimport _classPrivateFieldInitSpec from \"@babel/runtime/helpers/classPrivateFieldInitSpec\";\nimport _assertClassBrand from \"@babel/runtime/helpers/assertClassBrand\";\nimport _classPrivateFieldGet from \"@babel/runtime/helpers/classPrivateFieldGet2\";\nimport _classPrivateFieldSet from \"@babel/runtime/helpers/classPrivateFieldSet2\";\nconst RETRY_TIMEOUT_UNIT = 1000;\nconst RETRY_LIMIT = 5;\nvar _url = /*#__PURE__*/new WeakMap();\nvar _ws = /*#__PURE__*/new WeakMap();\nvar _queuedMessages = /*#__PURE__*/new WeakMap();\nvar _messageListeners = /*#__PURE__*/new WeakMap();\nvar _closeListeners = /*#__PURE__*/new WeakMap();\nvar _retryCount = /*#__PURE__*/new WeakMap();\nvar _closed = /*#__PURE__*/new WeakMap();\nvar _MessageService_brand = /*#__PURE__*/new WeakSet();\nexport class MessageService {\n  constructor(url) {\n    _classPrivateMethodInitSpec(this, _MessageService_brand);\n    _classPrivateFieldInitSpec(this, _url, void 0);\n    _classPrivateFieldInitSpec(this, _ws, void 0);\n    _classPrivateFieldInitSpec(this, _queuedMessages, []);\n    _classPrivateFieldInitSpec(this, _messageListeners, new Set());\n    _classPrivateFieldInitSpec(this, _closeListeners, new Set());\n    _classPrivateFieldInitSpec(this, _retryCount, 0);\n    _classPrivateFieldInitSpec(this, _closed, false);\n    _classPrivateFieldSet(_url, this, url);\n  }\n  send(data) {\n    // Connect when data is sent for the first time\n    if (!_classPrivateFieldGet(_ws, this)) {\n      _classPrivateFieldSet(_ws, this, _assertClassBrand(_MessageService_brand, this, _connect).call(this));\n    }\n    const stringifiedData = JSON.stringify(data);\n    if (_classPrivateFieldGet(_ws, this).readyState === WebSocket.OPEN) {\n      _classPrivateFieldGet(_ws, this).send(stringifiedData);\n    } else {\n      _classPrivateFieldGet(_queuedMessages, this).push(stringifiedData);\n    }\n  }\n  onMessage(listener) {\n    _classPrivateFieldGet(_messageListeners, this).add(listener);\n  }\n  onClose(listener) {\n    _classPrivateFieldGet(_closeListeners, this).add(listener);\n  }\n  reset() {\n    _classPrivateFieldGet(_queuedMessages, this).length = 0;\n    _classPrivateFieldGet(_messageListeners, this).clear();\n    _classPrivateFieldGet(_closeListeners, this).clear();\n  }\n  close() {\n    var _classPrivateFieldGet2;\n    _classPrivateFieldSet(_closed, this, true);\n    if (((_classPrivateFieldGet2 = _classPrivateFieldGet(_ws, this)) === null || _classPrivateFieldGet2 === void 0 ? void 0 : _classPrivateFieldGet2.readyState) === WebSocket.OPEN) {\n      _classPrivateFieldGet(_ws, this).close();\n    }\n  }\n}\nfunction _connect() {\n  // eslint-disable-next-line no-console\n  console.log(\"WebSocket connecting ...\");\n  const ws = new WebSocket(_classPrivateFieldGet(_url, this));\n  let resetRetryCountTimeout;\n  ws.addEventListener(\"open\", e => {\n    // eslint-disable-next-line no-console\n    console.log(\"WebSocket open:\", e);\n\n    // If server closes the socket not more than 1 second after it's opened,\n    // we should not reset the retry count.\n    resetRetryCountTimeout = setTimeout(() => {\n      resetRetryCountTimeout = undefined;\n      _classPrivateFieldSet(_retryCount, this, 0);\n    }, 1e3);\n    for (const msg of _classPrivateFieldGet(_queuedMessages, this)) {\n      ws.send(msg);\n    }\n    _classPrivateFieldGet(_queuedMessages, this).length = 0;\n  });\n  ws.addEventListener(\"close\", e => {\n    if (_classPrivateFieldGet(_closed, this)) {\n      return;\n    }\n    if (resetRetryCountTimeout !== undefined) {\n      clearTimeout(resetRetryCountTimeout);\n    }\n    // eslint-disable-next-line no-console\n    console.log(\"WebSocket close:\", e);\n    for (const listener of _classPrivateFieldGet(_closeListeners, this)) {\n      listener();\n    }\n    // Error code 1000 means that the connection was closed normally.\n    if (e.code !== 1000) {\n      _assertClassBrand(_MessageService_brand, this, _reconnect).call(this);\n    }\n  });\n  ws.addEventListener(\"error\", e => {\n    // No need to reconnect in error event listener,\n    // there will always be a close event along with the error event.\n    // eslint-disable-next-line no-console\n    console.error(\"WebSocket error:\", e);\n  });\n  ws.addEventListener(\"message\", e => {\n    const response = JSON.parse(e.data);\n    for (const listener of _classPrivateFieldGet(_messageListeners, this)) {\n      listener(response);\n    }\n  });\n  return ws;\n}\nfunction _reconnect() {\n  // istanbul ignore next: currently can't mock this\n  if (_classPrivateFieldGet(_retryCount, this) >= RETRY_LIMIT) {\n    // eslint-disable-next-line no-console\n    console.error(\"WebSocket connect retry limit exceeded\");\n    return;\n  }\n  // Double the timeout for each retry\n  const delay = Math.pow(2, _classPrivateFieldGet(_retryCount, this)) * RETRY_TIMEOUT_UNIT;\n  // eslint-disable-next-line no-console\n  console.log(\"WebSocket will reconnect after %d seconds\", delay / 1000);\n  setTimeout(() => {\n    var _this$retryCount, _this$retryCount2;\n    _classPrivateFieldSet(_retryCount, this, (_this$retryCount = _classPrivateFieldGet(_retryCount, this), _this$retryCount2 = _this$retryCount++, _this$retryCount)), _this$retryCount2;\n    _classPrivateFieldSet(_ws, this, _assertClassBrand(_MessageService_brand, this, _connect).call(this));\n  }, delay);\n}\n//# sourceMappingURL=MessageService.js.map","import _classPrivateMethodInitSpec from \"@babel/runtime/helpers/classPrivateMethodInitSpec\";\nimport _classPrivateFieldInitSpec from \"@babel/runtime/helpers/classPrivateFieldInitSpec\";\nimport _classPrivateGetter from \"@babel/runtime/helpers/classPrivateGetter\";\nimport _assertClassBrand from \"@babel/runtime/helpers/assertClassBrand\";\nimport _classPrivateFieldSet from \"@babel/runtime/helpers/classPrivateFieldSet2\";\nimport _classPrivateFieldGet from \"@babel/runtime/helpers/classPrivateFieldGet2\";\nimport { getBasePath } from \"@next-core/runtime\";\nimport { escapeRegExp } from \"lodash\";\nimport { MessageService } from \"./MessageService.js\";\nvar _ms = /*#__PURE__*/new WeakMap();\nvar _memoizedChannels = /*#__PURE__*/new WeakMap();\nvar _channelPayloads = /*#__PURE__*/new WeakMap();\nvar _MessageDispatcher_brand = /*#__PURE__*/new WeakSet();\nexport class MessageDispatcher {\n  constructor() {\n    _classPrivateMethodInitSpec(this, _MessageDispatcher_brand);\n    _classPrivateFieldInitSpec(this, _ms, void 0);\n    _classPrivateFieldInitSpec(this, _memoizedChannels, {\n      sub: new Map(),\n      unsub: new Map()\n    });\n    _classPrivateFieldInitSpec(this, _channelPayloads, new Map());\n  }\n  subscribe(channel, payload) {\n    const stringifiedPayload = JSON.stringify(payload);\n    return _assertClassBrand(_MessageDispatcher_brand, this, _subOrUnsub).call(this, \"sub\", channel, payload, stringifiedPayload);\n  }\n  unsubscribe(channel) {\n    const stringifiedPayload = _classPrivateFieldGet(_channelPayloads, this).get(channel);\n    if (!stringifiedPayload) {\n      const msg = `The message channel to unsubscribe \"${channel}\" is not found`;\n      // eslint-disable-next-line no-console\n      console.error(msg);\n      return Promise.reject(new Error(msg));\n    }\n    const payload = JSON.parse(stringifiedPayload);\n    const result = _assertClassBrand(_MessageDispatcher_brand, this, _subOrUnsub).call(this, \"unsub\", channel, payload, stringifiedPayload);\n    _classPrivateFieldGet(_memoizedChannels, this).sub.delete(stringifiedPayload);\n    result.then(() => {\n      _classPrivateFieldGet(_channelPayloads, this).delete(channel);\n    });\n    return result;\n  }\n  onMessage(channel, listener) {\n    let stringifiedPayload = _classPrivateFieldGet(_channelPayloads, this).get(channel);\n    let warned = false;\n    _classPrivateGetter(_MessageDispatcher_brand, this, _get_ms).onMessage(response => {\n      if (!stringifiedPayload) {\n        stringifiedPayload = _classPrivateFieldGet(_channelPayloads, this).get(channel);\n      }\n      if (!stringifiedPayload) {\n        if (!warned) {\n          // eslint-disable-next-line no-console\n          console.error(`Message channel: \"${channel}\" not found`);\n          warned = true;\n        }\n        return;\n      }\n      if (response.event === \"MESSAGE.PUSH\" && matchMessageChannel(stringifiedPayload, response.payload)) {\n        listener(response.payload.message);\n      }\n    });\n  }\n  onClose(listener) {\n    _classPrivateGetter(_MessageDispatcher_brand, this, _get_ms).onClose(listener);\n  }\n  reset() {\n    var _classPrivateFieldGet2;\n    _classPrivateFieldGet(_memoizedChannels, this).sub.clear();\n    _classPrivateFieldGet(_memoizedChannels, this).unsub.clear();\n    _classPrivateFieldGet(_channelPayloads, this).clear();\n    (_classPrivateFieldGet2 = _classPrivateFieldGet(_ms, this)) === null || _classPrivateFieldGet2 === void 0 || _classPrivateFieldGet2.reset();\n  }\n}\nfunction _get_ms(_this) {\n  if (!_classPrivateFieldGet(_ms, _this)) {\n    const protocol = location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n    const url = `${protocol}//${window.location.host}${getBasePath()}api/websocket_service/v1/ws`;\n    _classPrivateFieldSet(_ms, _this, new MessageService(url));\n  }\n  return _classPrivateFieldGet(_ms, _this);\n}\nfunction _subOrUnsub(type, channel, payload, stringifiedPayload) {\n  const hit = _classPrivateFieldGet(_memoizedChannels, this)[type].get(stringifiedPayload);\n  if (hit) {\n    return hit;\n  }\n  const request = {\n    event: type === \"sub\" ? \"TOPIC.SUB\" : \"TOPIC.UNSUB\",\n    payload\n  };\n  const promise = new Promise((resolve, reject) => {\n    const identity = getIdentity(payload);\n    _classPrivateGetter(_MessageDispatcher_brand, this, _get_ms).onMessage(response => {\n      const isSuccess = response.event === (type === \"sub\" ? \"TOPIC.SUB_SUCCESS\" : \"TOPIC.UNSUB_SUCCESS\");\n      const isFailed = response.event === (type === \"sub\" ? \"TOPIC.SUB_FAILED\" : \"TOPIC.UNSUB_FAILED\");\n      if ((isSuccess || isFailed) &&\n      // Put this after event type checks, to prevent unnecessary\n      // JSON stringify.\n      identity === getIdentity(response.payload)) {\n        (isSuccess ? resolve : reject)(response);\n      }\n    });\n    _classPrivateGetter(_MessageDispatcher_brand, this, _get_ms).send(request);\n  });\n  if (type === \"sub\") {\n    _classPrivateFieldGet(_channelPayloads, this).set(channel, stringifiedPayload);\n  }\n  _classPrivateFieldGet(_memoizedChannels, this)[type].set(stringifiedPayload, promise);\n  return promise;\n}\nfunction getIdentity(payload) {\n  const {\n    system,\n    topic\n  } = payload;\n  return JSON.stringify({\n    system,\n    topic\n  });\n}\nfunction matchMessageChannel(stringifiedPayload, responsePayload) {\n  const payload = JSON.parse(stringifiedPayload);\n  return payload.system === responsePayload.system && (\n  // Exact match\n  payload.topic === responsePayload.topic ||\n  // Wildcards match\n  // For `ab.cd.*`:\n  // - Matches `ab.cd.r` or `ab.cd.x.yz`\n  // - DOES NOT match `ab.cd.x/yz` or `ab.x.cd` or `x.ab.cd.yz`\n  typeof payload.topic === \"string\" && payload.topic.includes(\"*\") && new RegExp(`^${payload.topic.replace(/([^*]*)\\*([^*]*)/g, (_m, p1, p2) => `${escapeRegExp(p1)}[^/]*${escapeRegExp(p2)}`)}$`).test(responsePayload.topic));\n}\n//# sourceMappingURL=MessageDispatcher.js.map","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { http } from \"@next-core/http\";\n/**\n * @description 查询独立部署小产品\n * @endpoint POST /api/v1/micro_app_standalone/search\n */\nexport var RuntimeApi_searchMicroAppStandalone = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (data, options) {\n    return (/**! @contract easyops.api.micro_app_standalone.runtime.SearchMicroAppStandalone@1.0.1 */(yield http.post(\"api/gateway/micro_app_standalone.runtime.SearchMicroAppStandalone/api/v1/micro_app_standalone/search\", data, options)).data\n    );\n  });\n  return function RuntimeApi_searchMicroAppStandalone(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n//# sourceMappingURL=searchMicroAppStandalone.js.map","import { traverseStoryboardExpressions, collectInstalledAppsHasUsage } from \"@next-core/utils/storyboard\";\nimport { RuntimeApi_searchMicroAppStandalone } from \"@next-api-sdk/micro-app-standalone-sdk\";\nconst checkingApps = new Map();\nconst checkedApps = new Map();\nexport function preCheckInstalledApps(storyboard, hasAppInBootstrap) {\n  if (window.STANDALONE_MICRO_APPS && !window.NO_AUTH_GUARD) {\n    const appIds = scanInstalledAppsUsage(storyboard);\n    const searchIds = [];\n    for (const appId of appIds) {\n      // Do not check these apps already checking or in bootstrap.\n      if (!checkingApps.has(appId) && !hasAppInBootstrap(appId)) {\n        searchIds.push(appId);\n      }\n    }\n    if (searchIds.length === 0) {\n      return;\n    }\n    const promise = RuntimeApi_searchMicroAppStandalone({\n      query: {\n        appId: {\n          $in: searchIds\n        }\n      },\n      fields: [\"appId\", \"currentVersion\", \"installStatus\"]\n    }).catch(error => {\n      // Allow search micro app to fail, and\n      // make it not crash when the backend service is not updated.\n      // eslint-disable-next-line no-console\n      console.error(\"Get off site standalone micro-apps failed\", error);\n    });\n    for (const appId of searchIds) {\n      checkingApps.set(appId, promise.then(result => {\n        var _result$list;\n        const app = result === null || result === void 0 || (_result$list = result.list) === null || _result$list === void 0 ? void 0 : _result$list.find(item => item.appId === appId);\n        const checkedApp = app ? {\n          ...app,\n          id: appId\n        } : undefined;\n        checkedApps.set(appId, checkedApp);\n        return checkedApp;\n      }));\n    }\n  }\n}\nexport async function waitForCheckingApps(appIds) {\n  await Promise.all(appIds.map(appId => checkingApps.get(appId)));\n}\nexport function getCheckedApp(appId) {\n  if (window.STANDALONE_MICRO_APPS) {\n    return checkedApps.get(appId);\n  }\n}\nfunction scanInstalledAppsUsage(storyboard) {\n  const usage = {\n    usedArgs: new Set()\n  };\n  // `INSTALLED_APPS.has(...)` is not available in storyboard functions\n  const {\n    customTemplates,\n    menus\n  } = storyboard.meta ?? {};\n  traverseStoryboardExpressions([storyboard.routes, customTemplates, menus], (node, parent) => {\n    collectInstalledAppsHasUsage(usage, node, parent);\n  }, \"INSTALLED_APPS\");\n  return [...usage.usedArgs];\n}\n//# sourceMappingURL=checkInstalledApps.js.map","import { createProviderClass } from \"@next-core/utils/general\";\nimport { http } from \"@next-core/http\";\nimport { isEmpty, isObject } from \"lodash\";\nimport { createSSEStream } from \"@next-core/utils/general\";\nexport const FLOW_API_PROVIDER = \"core.provider-flow-api\";\nfunction hasFields(ext_fields, type) {\n  return ext_fields.some(item => item.source === type);\n}\nexport function processExtFields(ext_fields) {\n  const hasQueryParams = hasFields(ext_fields, \"query\");\n  const hasBodyParams = hasFields(ext_fields, \"body\");\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  if (hasQueryParams) {\n    if (hasBodyParams) {\n      const [data, params, options] = args;\n      return {\n        data: data,\n        options: {\n          params: params,\n          ...options\n        }\n      };\n    }\n    const [params, options] = args;\n    return {\n      data: {},\n      options: {\n        params: params,\n        ...options\n      }\n    };\n  }\n\n  // only hasBodyParams or default\n  const [data, options] = args;\n  return {\n    data,\n    options: options\n  };\n}\nexport function hasFileType(request) {\n  if ((request === null || request === void 0 ? void 0 : request.type) !== \"object\") {\n    return false;\n  }\n  const processFields = fields => {\n    return !isEmpty(fields) && fields.some(field => [\"file\", \"file[]\"].includes(field.type) || processFields(field.fields));\n  };\n  return processFields(request.fields);\n}\nexport function transformFormData(data) {\n  if (data instanceof FormData) {\n    return data;\n  }\n  const formData = new FormData();\n  for (const [key, value] of Object.entries(data)) {\n    if (Array.isArray(value)) {\n      value.forEach(v => {\n        formData.append(key, v);\n      });\n    } else if (isObject(value) && !(value instanceof Blob) && !(value instanceof Date)) {\n      Object.entries(value).forEach(_ref => {\n        let [k, v] = _ref;\n        formData.append(`${key}[${k}]`, v);\n      });\n    } else {\n      formData.append(key, value);\n    }\n  }\n  return formData;\n}\nexport async function callFlowApi(_ref2) {\n  let {\n    url,\n    originalUri,\n    method = \"GET\",\n    responseWrapper = true,\n    ext_fields = [],\n    request,\n    isFileType,\n    stream\n  } = _ref2;\n  const isSimpleRequest = [\"get\", \"delete\", \"head\"].includes(method.toLowerCase());\n  const defaultOptions = isFileType ? {\n    responseType: \"blob\"\n  } : {};\n  let response;\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n  if (isSimpleRequest) {\n    var _originalUri$match, _request$fields;\n    const noParams = originalUri && (request === null || request === void 0 ? void 0 : request.type) === \"object\" ? (((_originalUri$match = originalUri.match(/:([^/]+)/g)) === null || _originalUri$match === void 0 ? void 0 : _originalUri$match.length) ?? 0) === (((_request$fields = request.fields) === null || _request$fields === void 0 ? void 0 : _request$fields.length) ?? 0) : false;\n    let params;\n    let options;\n    if (noParams) {\n      [options] = args;\n    } else {\n      [params, options] = args;\n    }\n    if (stream) {\n      var _options;\n      const stream = await createSSEStream(http.getUrlWithParams(url, params), {\n        ...defaultOptions,\n        ...options,\n        method,\n        headers: Object.fromEntries([...new Headers(((_options = options) === null || _options === void 0 ? void 0 : _options.headers) ?? {}).entries()])\n      });\n      return stream;\n    }\n    response = await http.simpleRequest(method, url, {\n      params,\n      ...defaultOptions,\n      ...options\n    });\n  } else {\n    const isUploadType = hasFileType(request);\n    const result = processExtFields(ext_fields, ...args);\n    const data = isUploadType ? transformFormData(result.data) : result.data;\n    if (stream) {\n      var _result$options;\n      const {\n        body,\n        headers\n      } = http.getBodyAndHeaders(data, (_result$options = result.options) === null || _result$options === void 0 ? void 0 : _result$options.headers);\n      const stream = await createSSEStream(url, {\n        ...defaultOptions,\n        ...result.options,\n        method,\n        headers: Object.fromEntries([...new Headers(headers ?? {}).entries()]),\n        body\n      });\n      return stream;\n    }\n    response = await http.requestWithBody(method, url, data, {\n      ...defaultOptions,\n      ...result.options\n    });\n  }\n  return (isFileType ? false : responseWrapper) ? response.data : response;\n}\nexport function registerFlowApiProvider() {\n  customElements.define(FLOW_API_PROVIDER, createProviderClass(callFlowApi));\n}\n//# sourceMappingURL=FlowApiProvider.js.map","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { http } from \"@next-core/http\";\n/**\n * @description 通过defaultOrg查找单个契约信息\n * @endpoint POST /api/contract/single_search\n */\nexport var ContractApi_searchSingleContract = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (data, options) {\n    return (/**! @contract easyops.api.api_gateway.contract.SearchSingleContract@1.0.0 */(yield http.post(\"api/contract/single_search\", data, options)).data\n    );\n  });\n  return function ContractApi_searchSingleContract(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n//# sourceMappingURL=searchSingleContract.js.map","const contractsMap = new Map();\nconst widgetContractMap = new Map();\nconst debugContractMap = new Map();\nconst addContract = (contracts, map) => {\n  contracts === null || contracts === void 0 || contracts.forEach(contract => {\n    map.set(`${contract.namespaceId}.${contract.name}`, contract);\n  });\n};\nexport function collectContract(contracts) {\n  addContract(contracts, contractsMap);\n}\nexport function collectWidgetContract(contracts) {\n  addContract(contracts, widgetContractMap);\n}\nexport function clearCollectWidgetContract() {\n  widgetContractMap.clear();\n}\nexport function collectDebugContract(contracts) {\n  addContract(contracts, debugContractMap);\n}\nexport function clearDebugContract() {\n  debugContractMap.clear();\n}\nexport function getContract(name) {\n  return contractsMap.get(name) || widgetContractMap.get(name) || debugContractMap.get(name);\n}\n//# sourceMappingURL=CollectContracts.js.map","import yaml from \"js-yaml\";\nimport { ContractApi_searchSingleContract } from \"@next-api-sdk/api-gateway-sdk\";\nimport { getContract } from \"./CollectContracts.js\";\nconst remoteContractCache = new Map();\n\n// Legacy Custom API: `${namespace}@${name}`\n// Flow API: `${namespace}@${name}:${version}`\nexport function isFlowApiProvider(provider) {\n  return provider.includes(\"@\");\n}\nexport async function getArgsOfFlowApi(provider, originalArgs, method, stream) {\n  if (!provider.includes(\":\")) {\n    throw new Error(`You're using legacy Custom API \"${provider}\" which is dropped in v3, please use Flow API instead`);\n  }\n  const apiDefinition = await fetchFlowApiDefinition(provider);\n  if (!apiDefinition) {\n    throw new FlowApiNotFoundError(`Flow API not found: \"${provider}\"`);\n  }\n  const apiProfile = getApiProfileFromApiDefinition(provider, apiDefinition);\n  return getApiArgsFromApiProfile(apiProfile, originalArgs, method, stream);\n}\nfunction getApiArgsFromApiProfile(_ref, originalArgs, method, stream) {\n  let {\n    uri,\n    method: apiMethod,\n    ext_fields,\n    name,\n    namespace,\n    serviceName,\n    responseWrapper,\n    version,\n    isFileType,\n    request\n  } = _ref;\n  // `saveAs` requires the first argument to be the filename.\n  const isDownload = method === \"saveAs\";\n  let fileName;\n  if (isDownload) {\n    fileName = originalArgs.shift();\n  }\n  const {\n    url,\n    args\n  } = getTransformedUriAndRestArgs(uri, originalArgs, name, namespace, serviceName, version);\n  return [...(isDownload ? [fileName] : []), {\n    url,\n    originalUri: uri,\n    method: apiMethod,\n    ext_fields,\n    responseWrapper,\n    request,\n    isFileType,\n    stream\n  }, ...args];\n}\nfunction getTransformedUriAndRestArgs(uri, originalArgs, name, namespace, serviceName, version) {\n  const prefix = version ? serviceName === \"logic.api.gateway\" || serviceName !== null && serviceName !== void 0 && serviceName.startsWith(\"logic.api.gateway.\") ? \"\" : serviceName ? `api/gateway/${serviceName}` : `api/gateway/${namespace}.${name}@${version}` : `api/gateway/api_service.${namespace}.${name}`;\n  const restArgs = originalArgs.slice();\n  const transformedUri = uri.replace(/:([^/]+)/g, () => restArgs.shift());\n  return {\n    url: prefix ? prefix + transformedUri : transformedUri.replace(/^\\//, \"\"),\n    args: restArgs\n  };\n}\nfunction getApiProfileFromApiDefinition(provider, api) {\n  var _contract$response;\n  const contract = typeof api.contract === \"string\" ? yaml.safeLoad(api.contract, {\n    schema: yaml.JSON_SCHEMA,\n    json: true\n  }) : api.contract;\n  const {\n    uri,\n    method = \"GET\",\n    ext_fields\n  } = (contract === null || contract === void 0 ? void 0 : contract.endpoint) ?? {};\n  const responseWrapper = contract !== null && contract !== void 0 && contract.response ? contract.response.wrapper !== false : false;\n  if (!uri) {\n    throw new Error(`Missing endpoint.uri in contract of provider \"${provider}\"`);\n  }\n  return {\n    uri,\n    method: method.toLowerCase() === \"list\" ? \"get\" : method,\n    ext_fields,\n    name: api.name,\n    namespace: api.namespace,\n    serviceName: api.serviceName,\n    version: api.version,\n    isFileType: (contract === null || contract === void 0 || (_contract$response = contract.response) === null || _contract$response === void 0 ? void 0 : _contract$response.type) === \"file\",\n    responseWrapper,\n    request: contract === null || contract === void 0 ? void 0 : contract.request\n  };\n}\nasync function fetchFlowApiDefinition(provider) {\n  const [namespaceName, nameWithVersion] = provider.split(\"@\");\n  const [name, version] = nameWithVersion.split(\":\");\n\n  // Do not cache the result of `geContract`, which will lead to no contract\n  // will be found when render twice immediately.\n  const contract = getContract(`${namespaceName}.${name}`);\n  if (contract) {\n    return {\n      name: contract.name,\n      namespace: contract.namespaceId,\n      serviceName: contract.serviceName,\n      version: contract.version,\n      contract: {\n        endpoint: contract.endpoint,\n        response: contract.response,\n        request: contract.request\n      }\n    };\n  }\n  let promise = remoteContractCache.get(provider);\n  if (!promise) {\n    promise = fetchFlowApiDefinitionFromRemote(namespaceName, name, version);\n    remoteContractCache.set(provider, promise);\n  }\n  return promise;\n}\nasync function fetchFlowApiDefinitionFromRemote(namespace, name, version) {\n  var _contractData$namespa;\n  const {\n    contractData\n  } = await ContractApi_searchSingleContract({\n    contractName: `${namespace}.${name}`,\n    version\n  });\n\n  // return undefined if don't found contract\n  return contractData ? {\n    name: contractData.name,\n    namespace: (_contractData$namespa = contractData.namespace) === null || _contractData$namespa === void 0 || (_contractData$namespa = _contractData$namespa[0]) === null || _contractData$namespa === void 0 ? void 0 : _contractData$namespa.name,\n    serviceName: contractData.serviceName,\n    version: contractData.version,\n    contract: {\n      endpoint: contractData.endpoint,\n      response: contractData.response,\n      request: contractData.request\n    }\n  } : null;\n}\nclass FlowApiNotFoundError extends Error {\n  constructor(message) {\n    // Pass remaining arguments (including vendor specific ones) to parent constructor\n    super(message);\n    this.name = \"FlowApiNotFoundError\";\n\n    // Maintains proper stack trace for where our error was thrown (only available on V8)\n    // istanbul ignore else\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, FlowApiNotFoundError);\n    }\n  }\n}\n//# sourceMappingURL=FlowApi.js.map","import _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { http } from \"@next-core/http\";\n/**\n * @description 获取菜单信息\n * @endpoint GET /api/v1/micro-app/menus/:menuId\n */\nexport var InstalledMicroAppApi_getMenusInfo = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (menuId, params, options) {\n    return (/**! @contract easyops.api.micro_app.installed_micro_app.GetMenusInfo@1.0.0 */(yield http.get(\"api/gateway/micro_app.installed_micro_app.GetMenusInfo/api/v1/micro-app/menus/\".concat(menuId), _objectSpread(_objectSpread({}, options), {}, {\n        params\n      }))).data\n    );\n  });\n  return function InstalledMicroAppApi_getMenusInfo(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n//# sourceMappingURL=getMenusInfo.js.map","export const symbolAppId = Symbol(\"appId\");\nexport const symbolMenuI18nNamespace = Symbol(\"menuI18nNamespace\");\nexport const symbolOverrideApp = Symbol(\"overrideApp\");\n//# sourceMappingURL=constants.js.map","import { i18n } from \"@next-core/i18n\";\nimport { symbolAppId, symbolMenuI18nNamespace, symbolOverrideApp } from \"./constants.js\";\nimport { loadDynamicMenuItems } from \"./loadDynamicMenuItems.js\";\nexport async function mergeMenu(menuList, runtimeContext, helpers) {\n  const mainMenu = menuList.find(menu => menu.type !== \"inject\");\n  if (!mainMenu) {\n    return undefined;\n  }\n  const validMenuList = [];\n  const injectWithMenus = new Map();\n  const menuWithI18n = new WeakMap();\n  for (const menu of menuList) {\n    if (menu.i18n) {\n      const menuI18nNamespace = `menu/${menu.menuId}~${menu.app[0].appId}+${menu.instanceId}`;\n      // Support any language in `menu.i18n`.\n      Object.entries(menu.i18n).forEach(_ref => {\n        let [lang, resources] = _ref;\n        i18n.addResourceBundle(lang, menuI18nNamespace, resources);\n      });\n      menuWithI18n.set(menu, menuI18nNamespace);\n    }\n  }\n  await Promise.all(menuList.map(menu => loadDynamicMenuItems(menu, runtimeContext, menuWithI18n, helpers)));\n  for (const menu of menuList) {\n    var _menu$items;\n    if ((_menu$items = menu.items) !== null && _menu$items !== void 0 && _menu$items.length) {\n      if (menu.type === \"inject\" && menu.injectMenuGroupId) {\n        let injectingMenus = injectWithMenus.get(menu.injectMenuGroupId);\n        if (!injectingMenus) {\n          injectingMenus = [];\n          injectWithMenus.set(menu.injectMenuGroupId, injectingMenus);\n        }\n        injectingMenus.push(menu);\n      } else {\n        validMenuList.push(menu);\n      }\n    }\n  }\n  return {\n    ...mainMenu,\n    items: validMenuList.flatMap(menu =>\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    processGroupInject(menu.items, menu, injectWithMenus, menuWithI18n)),\n    [symbolMenuI18nNamespace]: menuWithI18n.get(mainMenu),\n    [symbolOverrideApp]: mainMenu.overrideApp\n  };\n}\nfunction processGroupInject(items, menu, injectWithMenus, menuWithI18n) {\n  return items === null || items === void 0 ? void 0 : items.map(item => {\n    const foundInjectingMenus = item.groupId && injectWithMenus.get(item.groupId);\n    if (foundInjectingMenus) {\n      // Each menu to be injected with should be injected only once.\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      injectWithMenus.delete(item.groupId);\n    }\n    return {\n      ...item,\n      children: (processGroupInject(item.children, menu, injectWithMenus, menuWithI18n) ?? []).concat(foundInjectingMenus ? foundInjectingMenus.flatMap(injectingMenu =>\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      processGroupInject(injectingMenu.items, injectingMenu, injectWithMenus, menuWithI18n)) : []),\n      [symbolAppId]: menu.app[0].appId,\n      [symbolMenuI18nNamespace]: menuWithI18n.get(menu),\n      [symbolOverrideApp]: menu.overrideApp\n    };\n  });\n}\n//# sourceMappingURL=mergeMenu.js.map","import { preCheckPermissionsForAny } from \"../checkPermissions.js\";\nexport async function loadDynamicMenuItems(menu, runtimeContext, menuWithI18n, helpers) {\n  if (menu.dynamicItems && menu.itemsResolve) {\n    const overrideAppId = menu.app[0].appId;\n    const newRuntimeContext = {\n      ...runtimeContext,\n      pendingPermissionsPreCheck: [...runtimeContext.pendingPermissionsPreCheck, preCheckPermissionsForAny(menu.itemsResolve)]\n    };\n    if (overrideAppId !== runtimeContext.app.id) {\n      var _helpers$getStoryboar;\n      newRuntimeContext.overrideApp = window.STANDALONE_MICRO_APPS ? menu.overrideApp : (_helpers$getStoryboar = helpers.getStoryboardByAppId(overrideAppId)) === null || _helpers$getStoryboar === void 0 ? void 0 : _helpers$getStoryboar.app;\n      newRuntimeContext.appendI18nNamespace = menuWithI18n.get(menu);\n    }\n    const resolved = await helpers.resolveData({\n      transform: \"items\",\n      ...menu.itemsResolve\n    }, newRuntimeContext);\n    menu.items = resolved.items;\n  }\n}\n//# sourceMappingURL=loadDynamicMenuItems.js.map","import { sortBy } from \"lodash\";\nexport function reorderMenu(menuData) {\n  menuData.items = reorderMenuItems(menuData.items);\n}\nfunction reorderMenuItems(list) {\n  return sortMenuItems(list).map(item => ({\n    ...item,\n    children: reorderMenuItems(item.children)\n  }));\n}\nfunction sortMenuItems(list) {\n  return sortBy(list, item => item.sort ?? -Infinity);\n}\n//# sourceMappingURL=reorderMenuItems.js.map","import { symbolAppId, symbolMenuI18nNamespace, symbolOverrideApp } from \"./constants.js\";\nimport { hasOwnProperty, isObject } from \"@next-core/utils/general\";\nimport { pipes } from \"@next-core/pipes\";\nimport { isEvaluable } from \"@next-core/cook\";\nexport function computeMenuData(data, overrideAppId, runtimeContext, helpers) {\n  if (\"titleDataSource\" in data && isObject(data.titleDataSource) && Object.entries(data.titleDataSource).every(_ref => {\n    let [, value] = _ref;\n    return value === null || value === \"\";\n  })) {\n    delete data.titleDataSource;\n  }\n  if (\"if\" in data && data.if === null) {\n    delete data.if;\n  }\n  if (\"to\" in data && data.to && !isEvaluable(data.to)) {\n    const yaml = pipes.yaml(data.to);\n    if (isObject(yaml) && [\"pathname\", \"search\", \"hash\"].some(key => hasOwnProperty(yaml, key))) {\n      data.to = yaml;\n    }\n  }\n  let newRuntimeContext = runtimeContext;\n  if (overrideAppId !== runtimeContext.app.id) {\n    var _helpers$getStoryboar;\n    const overrideApp = window.STANDALONE_MICRO_APPS ? data[symbolOverrideApp] : (_helpers$getStoryboar = helpers.getStoryboardByAppId(overrideAppId)) === null || _helpers$getStoryboar === void 0 ? void 0 : _helpers$getStoryboar.app;\n    newRuntimeContext = {\n      ...runtimeContext,\n      overrideApp,\n      appendI18nNamespace: data[symbolMenuI18nNamespace]\n    };\n  }\n  return helpers.asyncComputeRealValue(data, newRuntimeContext, {\n    ignoreSymbols: true\n  });\n}\nexport function computeMenuItems(items, runtimeContext, helpers) {\n  return Promise.all(items.map(async _ref2 => {\n    let {\n      children,\n      ...rest\n    } = _ref2;\n    const [computedRest, computedChildren] = await Promise.all([computeMenuData(rest, rest[symbolAppId], runtimeContext, helpers), children && (await computeMenuItems(children, runtimeContext, helpers))]);\n    return {\n      ...computedRest,\n      children: computedChildren\n    };\n  }));\n}\n//# sourceMappingURL=computeMenuData.js.map","import _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { http } from \"@next-core/http\";\n/**\n * @description 获取实例详情\n * @endpoint GET /object/:objectId/instance/:instanceId\n */\nexport var InstanceApi_getDetail = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (objectId, instanceId, params, options) {\n    return (/**! @contract easyops.api.cmdb.instance.GetDetail@1.0.0 */(yield http.get(\"api/gateway/cmdb.instance.GetDetail/object/\".concat(objectId, \"/instance/\").concat(instanceId), _objectSpread(_objectSpread({}, options), {}, {\n        params\n      }))).data\n    );\n  });\n  return function InstanceApi_getDetail(_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}();\n//# sourceMappingURL=getDetail.js.map","import { isEmpty } from \"lodash\";\nimport { InstanceApi_getDetail } from \"@next-api-sdk/cmdb-sdk\";\nconst menuTitleCache = new Map();\nexport async function fetchMenuTitle(menuData) {\n  if (menuData.title || isEmpty(menuData.titleDataSource)) {\n    return menuData.title;\n  }\n  const cacheKey = JSON.stringify(menuData.titleDataSource);\n  const cachedTitle = menuTitleCache.get(cacheKey);\n  if (cachedTitle !== undefined) {\n    return cachedTitle;\n  }\n  const {\n    objectId,\n    instanceId,\n    attributeId\n  } = menuData.titleDataSource;\n  const attr = attributeId ?? \"name\";\n  const instanceData = await InstanceApi_getDetail(objectId, instanceId, {\n    fields: attr\n  });\n  let title;\n  if (attributeId === \"#showKey\" && Array.isArray(instanceData[attr])) {\n    const [primary, ...rest] = instanceData[attr];\n    title = rest.length > 0 ? `${primary}(${rest.join(\",\")})` : String(primary);\n  } else {\n    title = String(instanceData[attr]);\n  }\n  menuTitleCache.set(cacheKey, title);\n  return title;\n}\n//# sourceMappingURL=fetchMenuTitle.js.map","import { InstanceApi_postSearch } from \"@next-api-sdk/cmdb-sdk\";\nimport { InstalledMicroAppApi_getMenusInfo } from \"@next-api-sdk/micro-app-sdk\";\nimport { omit, pick } from \"lodash\";\nimport { checkIfOfComputed } from \"@next-core/runtime\";\nimport { mergeMenu } from \"./mergeMenu.js\";\nimport { reorderMenu } from \"./reorderMenuItems.js\";\nimport { computeMenuItems, computeMenuData } from \"./computeMenuData.js\";\nimport { fetchMenuTitle } from \"./fetchMenuTitle.js\";\nimport { getMenusOfStandaloneApp } from \"./getMenusOfStandaloneApp.js\";\nimport { preCheckPermissionsForAny } from \"../checkPermissions.js\";\nconst menuPromises = new Map();\nconst menuCache = new Map();\nfunction transformMenuItems(menuItems) {\n  return menuItems === null || menuItems === void 0 ? void 0 : menuItems.filter(checkIfOfComputed).map(item => {\n    const children = transformMenuItems(item.children);\n    const transformedMenuItem = item.type === \"group\" ? {\n      type: \"group\",\n      title: item.text,\n      childLayout: item.childLayout,\n      items: children,\n      groupId: item.groupId,\n      groupFrom: item.groupFrom\n    } : children !== null && children !== void 0 && children.length ? {\n      type: \"subMenu\",\n      childLayout: item.childLayout,\n      title: item.text,\n      icon: item.icon,\n      items: children,\n      defaultExpanded: item.defaultExpanded\n    } : omit(item, [\"type\", \"items\", \"children\"]);\n    return transformedMenuItem;\n  });\n}\nexport function getMenuById(menuId) {\n  return menuCache.get(menuId);\n}\nexport function fetchMenuById(menuId, runtimeContext, helpers) {\n  let promise = menuPromises.get(menuId);\n  if (!promise) {\n    promise = _fetchMenuById(menuId, runtimeContext, helpers);\n  }\n  return promise;\n}\nasync function _fetchMenuById(menuId, runtimeContext, helpers) {\n  const menuList = window.STANDALONE_MICRO_APPS ? getMenusOfStandaloneApp(menuId, runtimeContext.app.id, helpers) : runtimeContext.flags[\"three-level-menu-layout\"] ? (await InstalledMicroAppApi_getMenusInfo(menuId, {\n    menuObjectId: \"EASYOPS_STORYBOARD_MENU\"\n  })).menus : (await InstanceApi_postSearch(\"EASYOPS_STORYBOARD_MENU\", {\n    page: 1,\n    page_size: 200,\n    fields: {\n      menuId: true,\n      title: true,\n      icon: true,\n      link: true,\n      titleDataSource: true,\n      defaultCollapsed: true,\n      defaultCollapsedBreakpoint: true,\n      type: true,\n      injectMenuGroupId: true,\n      dynamicItems: true,\n      itemsResolve: true,\n      items: true,\n      i18n: true,\n      \"items.children\": true,\n      \"app.appId\": true\n    },\n    query: {\n      menuId: {\n        $eq: menuId\n      },\n      app: {\n        $size: {\n          $gt: 0\n        }\n      }\n    }\n  })).list;\n  const menuData = await mergeMenu(menuList, runtimeContext, helpers);\n  if (!menuData) {\n    throw new Error(`Menu not found: ${menuId}`);\n  }\n  reorderMenu(menuData);\n  const {\n    items,\n    app,\n    ...restMenuData\n  } = menuData;\n  const newRuntimeContext = {\n    ...runtimeContext,\n    pendingPermissionsPreCheck: [...runtimeContext.pendingPermissionsPreCheck, preCheckPermissionsForAny([items, restMenuData])]\n  };\n  delete newRuntimeContext.tplStateStoreId;\n  delete newRuntimeContext.forEachItem;\n  delete newRuntimeContext.forEachIndex;\n  delete newRuntimeContext.forEachSize;\n  const rootAppId = app[0].appId;\n  const [computedMenuData, computedMenuItems] = await Promise.all([computeMenuData(restMenuData, rootAppId, newRuntimeContext, helpers), computeMenuItems(items, newRuntimeContext, helpers)]);\n  const finalMenuData = {\n    title: await fetchMenuTitle(computedMenuData),\n    ...pick(computedMenuData, [\"icon\", \"link\", \"defaultCollapsed\", \"defaultCollapsedBreakpoint\"]),\n    menuItems: transformMenuItems(computedMenuItems)\n  };\n\n  // Todo(steve): reconsider the menu cache strategy\n  menuCache.set(menuId, finalMenuData);\n}\n//# sourceMappingURL=fetchMenuById.js.map","export function getMenusOfStandaloneApp(menuId, appId, helpers) {\n  var _storyboard$meta, _storyboard$meta2;\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const storyboard = helpers.getStoryboardByAppId(appId);\n  const menus = ((_storyboard$meta = storyboard.meta) === null || _storyboard$meta === void 0 ? void 0 : _storyboard$meta.injectMenus) ?? ((_storyboard$meta2 = storyboard.meta) === null || _storyboard$meta2 === void 0 ? void 0 : _storyboard$meta2.menus) ?? [];\n  return menus.filter(menu => menu.menuId === menuId).map(menu => {\n    var _menu$app;\n    return {\n      ...menu,\n      ...((_menu$app = menu.app) !== null && _menu$app !== void 0 && (_menu$app = _menu$app[0]) !== null && _menu$app !== void 0 && _menu$app.appId ? {} : {\n        app: [{\n          appId\n        }]\n      })\n    };\n  });\n\n  // Todo: maybe: fetch menus from STANDALONE_MENU@EASYOPS\n}\n//# sourceMappingURL=getMenusOfStandaloneApp.js.map","export const events = [];\nconst MAXIMUM_WAITING_TIME = 5 * 1000;\nconst MAXIMUM_LOGGED_EVENTS = 10;\nlet timer = null;\nexport const transportOptions = {\n  maxWaitingTime: MAXIMUM_WAITING_TIME,\n  maxLoggedEvents: MAXIMUM_LOGGED_EVENTS\n};\nexport function createTransport(api, options) {\n  Object.assign(transportOptions, {\n    ...options,\n    api\n  });\n  return {\n    sendOnExit,\n    emit\n  };\n}\nfunction nextTime(callback) {\n  return (window.requestIdleCallback || window.requestAnimationFrame || (cb => setTimeout(cb, 17)))(callback);\n}\nfunction emit() {\n  clearTimeout(timer);\n  events.length > transportOptions.maxLoggedEvents ? send() : timer = setTimeout(send, transportOptions.maxWaitingTime);\n}\nfunction send() {\n  if (events.length === 0) {\n    return;\n  }\n  const transportEvents = events.splice(0, transportOptions.maxLoggedEvents);\n  const transportData = buildTransportData(transportEvents);\n  sendBeacon(transportOptions.api, transportData);\n  events.length && nextTime(send);\n}\nfunction sendBeacon(requestUrl, data) {\n  const headers = {\n    type: \"application/json\"\n  };\n  const blob = new Blob([JSON.stringify(data)], headers);\n  window.navigator.sendBeacon(requestUrl, blob);\n}\nfunction sendOnExit() {\n  window.addEventListener(\"beforeunload\", send, false);\n}\nfunction buildTransportData(data) {\n  return {\n    model: \"easyops.FRONTEND_STAT\",\n    columns: [\"_ver\", \"st\", \"et\", \"lt\", \"size\", \"time\", \"traceId\", \"code\", \"duration\", \"page\", \"uid\", \"username\", \"api\", \"type\", \"msg\", \"status\", \"pageId\", \"route\", \"apiCount\", \"maxApiTimeCost\", \"apiSizeCost\", \"pageTitle\"],\n    data\n  };\n}\n//# sourceMappingURL=transport.js.map","import { createTransport, events } from \"./transport.js\";\nlet initialized = false;\nlet transport;\nlet pageState = null;\nlet isFirstPageView = true;\nconst stashedApiMetrics = [];\nexport function initialize(api) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (initialized) {\n    return;\n  }\n  initialized = true;\n  if (!transport) {\n    transport = createTransport(api, options);\n    transport.sendOnExit();\n  }\n}\nexport function createPageView() {\n  stashedApiMetrics.length = 0;\n  pageState = null;\n}\nexport function finishPageView(metric) {\n  const pageId = generateUUID();\n  const {\n    lt,\n    route\n  } = metric;\n  pageState = {\n    lt,\n    route,\n    pageId\n  };\n  events.push({\n    ...metric,\n    pageId,\n    apiCount: stashedApiMetrics.length,\n    maxApiTimeCost: Math.max(0, ...stashedApiMetrics.map(api => api.duration)),\n    size: stashedApiMetrics.map(api => api.size).filter(size => size > 0).reduce((prev, current) => prev + current, 0)\n  });\n  for (const item of stashedApiMetrics) {\n    events.push({\n      ...item,\n      ...pageState\n    });\n  }\n  stashedApiMetrics.length = 0;\n  transport.emit();\n}\nexport function earlyFinishPageView() {\n  events.push(...stashedApiMetrics);\n  stashedApiMetrics.length = 0;\n}\nexport function pushApiMetric(metric) {\n  if (pageState) {\n    events.push({\n      ...metric,\n      type: \"apiRequest\",\n      ...pageState\n    });\n  } else {\n    stashedApiMetrics.push(metric);\n  }\n}\n\n// Ref https://medium.com/teads-engineering/generating-uuids-at-scale-on-the-web-2877f529d2a2\nfunction generateUUID() {\n  const url = URL.createObjectURL(new Blob([]));\n  let uuid = url.substring(url.lastIndexOf(\"/\") + 1);\n  URL.revokeObjectURL(url);\n  // 第一次渲染加上特殊标记\n  if (isFirstPageView) {\n    uuid = \"88-\" + uuid;\n    isFirstPageView = false;\n  }\n  return uuid;\n}\n//# sourceMappingURL=analytics.js.map","import { HttpResponseError, HttpParseError, HttpAbortError } from \"@next-core/http\";\nimport { isObject } from \"@next-core/utils/general\";\nimport { getAuth } from \"../auth.js\";\nimport { pushApiMetric } from \"./analytics.js\";\nconst symbolHttpAnalytics = Symbol(\"HttpAnalytics\");\nexport function onRequest(config) {\n  const perfStartTime = Math.round(performance.now());\n  const st = Date.now();\n  config[symbolHttpAnalytics] = {\n    st,\n    time: Math.round(st / 1000),\n    perfStartTime\n  };\n  return config;\n}\nexport function onResponse(response, config) {\n  return onResponseOrError(false, response, config);\n}\nexport function onResponseError(error, config) {\n  return onResponseOrError(true, error, config);\n}\nfunction onResponseOrError(hasError, responseOrError, config) {\n  const perfEndTime = Math.round(performance.now());\n  const et = Date.now();\n  const {\n    [symbolHttpAnalytics]: meta,\n    url\n  } = config;\n  if (meta && !(hasError && responseOrError instanceof HttpAbortError)) {\n    delete config[symbolHttpAnalytics];\n    const {\n      st,\n      time,\n      perfStartTime\n    } = meta;\n    const {\n      userInstanceId: uid,\n      username\n    } = getAuth();\n    let code;\n    let message;\n    let traceId;\n    let size;\n    let status;\n    let headers;\n    let data;\n    if (hasError) {\n      const isHttpResponseError = responseOrError instanceof HttpResponseError;\n      if (isHttpResponseError || responseOrError instanceof HttpParseError) {\n        ({\n          status,\n          headers\n        } = responseOrError.response);\n        if (isHttpResponseError) {\n          data = responseOrError.responseJson;\n        }\n      }\n    } else {\n      ({\n        status,\n        data,\n        headers\n      } = responseOrError);\n    }\n    if (isObject(data)) {\n      ({\n        code,\n        message\n      } = data);\n    }\n    if (headers instanceof Headers) {\n      traceId = headers.get(\"x-b3-traceid\");\n      size = headers.get(\"content-length\");\n    }\n    pushApiMetric({\n      st,\n      _ver: st,\n      uid,\n      username,\n      time,\n      et,\n      page: location.href,\n      duration: perfEndTime - perfStartTime,\n      api: url,\n      type: \"api\",\n      code: code ?? -1,\n      msg: message ?? \"\",\n      status,\n      traceId: traceId ?? \"\",\n      size: size ? Number(size) : -1\n    });\n  }\n  return hasError ? Promise.reject(responseOrError) : responseOrError;\n}\n//# sourceMappingURL=http.js.map","import { createPageView, earlyFinishPageView, finishPageView } from \"./analytics.js\";\nimport { getAuth } from \"../auth.js\";\nexport function create() {\n  const perfStartTime = Math.round(performance.now());\n  const startTime = Date.now();\n  createPageView();\n  return function finish(_ref) {\n    let {\n      status,\n      path,\n      pageTitle\n    } = _ref;\n    if (status !== \"ok\") {\n      earlyFinishPageView();\n      return;\n    }\n    const renderTime = Math.round(performance.now()) - perfStartTime;\n    const endTime = Date.now();\n    const {\n      username\n    } = getAuth();\n    finishPageView({\n      type: \"page\",\n      page: location.href,\n      _ver: startTime,\n      time: Math.round(startTime / 1000),\n      st: startTime,\n      et: endTime,\n      lt: renderTime,\n      pageTitle,\n      username,\n      route: path\n    });\n\n    // For bricks which would take actions with render time.\n    window.dispatchEvent(new CustomEvent(\"route.render\", {\n      detail: {\n        renderTime\n      }\n    }));\n  };\n}\n//# sourceMappingURL=pageView.js.map","// istanbul ignore file\nimport { checkPermissions as _checkPermissions, preCheckPermissions, preCheckPermissionsForBrickOrRoute } from \"./checkPermissions.js\";\nimport { MessageDispatcher } from \"./websocket/MessageDispatcher.js\";\nimport * as authV3 from \"./auth.js\";\nimport { authV2Factory } from \"./auth-v2.js\";\nimport * as _checkInstalledApps from \"./checkInstalledApps.js\";\nexport { _checkInstalledApps as checkInstalledApps };\nimport * as _flowApi from \"./flowApi/index.js\";\nexport { _flowApi as flowApi };\nimport * as _menu from \"./menu/index.js\";\nexport { _menu as menu };\nimport * as _analytics from \"./analytics/index.js\";\nexport { _analytics as analytics };\nexport const checkPermissions = Object.freeze({\n  checkPermissions: _checkPermissions,\n  preCheckPermissions,\n  preCheckPermissionsForBrickOrRoute\n});\nexport const messageDispatcher = new MessageDispatcher();\nexport const auth = authV2Factory() || authV3;\n//# sourceMappingURL=index.js.map","// istanbul ignore file\nimport { getV2RuntimeFromDll } from \"@next-core/runtime\";\nimport { pick } from \"lodash\";\nexport function authV2Factory() {\n  const v2Kit = getV2RuntimeFromDll();\n  if (v2Kit) {\n    return Object.freeze(pick(v2Kit, [\"authenticate\", \"getAuth\", \"isLoggedIn\", \"logout\"]));\n  }\n}\n//# sourceMappingURL=auth-v2.js.map"],"names":["PermissionApi_validatePermissions","_ref","data","options","http","post","_x","_x2","apply","this","arguments","auth","authenticate","newAuth","Object","assign","org","username","userInstanceId","loginFrom","accessRule","isAdmin","csrfToken","license","accessToken","userShowValue","getAuth","logout","key","keys","undefined","checkingPermissions","clear","checkedPermissions","length","permissionMap","isLoggedIn","Map","preCheckPermissionsForAny","validatePermissions","scanPermissionActionsInAny","async","usedActions","uncheckedActions","filter","action","includes","checkingTasks","restActions","promise","get","push","task","result","actions","noAbortOnRouteChange","item","set","authorizationStatus","console","error","Promise","all","RETRY_TIMEOUT_UNIT","RETRY_LIMIT","_url","WeakMap","_ws","_queuedMessages","_messageListeners","_closeListeners","_retryCount","_closed","_MessageService_brand","WeakSet","MessageService","constructor","url","Set","send","_connect","call","stringifiedData","JSON","stringify","readyState","WebSocket","OPEN","onMessage","listener","add","onClose","reset","close","_classPrivateFieldGet2","log","ws","resetRetryCountTimeout","addEventListener","e","setTimeout","msg","clearTimeout","code","_reconnect","response","parse","delay","Math","pow","_this$retryCount","_ms","_memoizedChannels","_channelPayloads","_MessageDispatcher_brand","_get_ms","_this","location","protocol","window","host","getBasePath","_subOrUnsub","type","channel","payload","stringifiedPayload","hit","request","event","resolve","reject","identity","getIdentity","isSuccess","isFailed","system","topic","RuntimeApi_searchMicroAppStandalone","checkingApps","checkedApps","preCheckInstalledApps","storyboard","hasAppInBootstrap","STANDALONE_MICRO_APPS","NO_AUTH_GUARD","appIds","usage","usedArgs","customTemplates","menus","meta","traverseStoryboardExpressions","routes","node","parent","collectInstalledAppsHasUsage","scanInstalledAppsUsage","searchIds","appId","has","query","$in","fields","catch","then","_result$list","app","list","find","checkedApp","id","waitForCheckingApps","map","getCheckedApp","FLOW_API_PROVIDER","hasFields","ext_fields","some","source","callFlowApi","_ref2","originalUri","method","responseWrapper","isFileType","stream","isSimpleRequest","toLowerCase","defaultOptions","responseType","_len2","args","Array","_key2","_originalUri$match","_request$fields","params","_options","match","createSSEStream","getUrlWithParams","headers","fromEntries","Headers","entries","simpleRequest","isUploadType","processFields","isEmpty","field","hasFileType","hasQueryParams","hasBodyParams","_len","_key","processExtFields","FormData","formData","value","isArray","forEach","v","append","isObject","Blob","Date","k","transformFormData","_result$options","body","getBodyAndHeaders","requestWithBody","registerFlowApiProvider","customElements","define","createProviderClass","ContractApi_searchSingleContract","contractsMap","widgetContractMap","debugContractMap","addContract","contracts","contract","namespaceId","name","collectContract","collectWidgetContract","clearCollectWidgetContract","collectDebugContract","clearDebugContract","remoteContractCache","isFlowApiProvider","provider","getArgsOfFlowApi","originalArgs","Error","apiDefinition","namespaceName","nameWithVersion","split","version","getContract","namespace","serviceName","endpoint","_contractData$namespa","contractData","contractName","fetchFlowApiDefinitionFromRemote","fetchFlowApiDefinition","FlowApiNotFoundError","apiProfile","api","_contract$response","schema","json","uri","wrapper","getApiProfileFromApiDefinition","apiMethod","isDownload","fileName","shift","prefix","startsWith","restArgs","slice","transformedUri","replace","getTransformedUriAndRestArgs","getApiArgsFromApiProfile","message","super","captureStackTrace","InstalledMicroAppApi_getMenusInfo","menuId","concat","_x3","symbolAppId","Symbol","symbolMenuI18nNamespace","symbolOverrideApp","mergeMenu","menuList","runtimeContext","helpers","mainMenu","menu","validMenuList","injectWithMenus","menuWithI18n","i18n","menuI18nNamespace","instanceId","lang","resources","addResourceBundle","dynamicItems","itemsResolve","overrideAppId","newRuntimeContext","pendingPermissionsPreCheck","_helpers$getStoryboar","overrideApp","getStoryboardByAppId","appendI18nNamespace","resolved","resolveData","transform","items","loadDynamicMenuItems","_menu$items","injectMenuGroupId","injectingMenus","flatMap","processGroupInject","foundInjectingMenus","groupId","delete","children","injectingMenu","reorderMenu","menuData","reorderMenuItems","sortBy","sort","sortMenuItems","computeMenuData","titleDataSource","every","if","to","isEvaluable","yaml","pipes","hasOwnProperty","asyncComputeRealValue","ignoreSymbols","computeMenuItems","rest","computedRest","computedChildren","InstanceApi_getDetail","objectId","_x4","menuTitleCache","fetchMenuTitle","title","cacheKey","cachedTitle","attributeId","attr","instanceData","primary","join","String","menuPromises","menuCache","transformMenuItems","menuItems","checkIfOfComputed","text","childLayout","groupFrom","icon","defaultExpanded","omit","getMenuById","fetchMenuById","_storyboard$meta","_storyboard$meta2","injectMenus","_menu$app","getMenusOfStandaloneApp","flags","menuObjectId","page","page_size","link","defaultCollapsed","defaultCollapsedBreakpoint","$eq","$size","$gt","restMenuData","tplStateStoreId","forEachItem","forEachIndex","forEachSize","rootAppId","computedMenuData","computedMenuItems","finalMenuData","pick","_fetchMenuById","events","timer","transportOptions","maxWaitingTime","maxLoggedEvents","emit","transportData","model","columns","splice","callback","requestUrl","blob","navigator","sendBeacon","requestIdleCallback","requestAnimationFrame","cb","sendOnExit","transport","initialized","pageState","isFirstPageView","stashedApiMetrics","initialize","createTransport","symbolHttpAnalytics","onRequest","config","perfStartTime","round","performance","now","st","time","onResponse","onResponseOrError","onResponseError","hasError","responseOrError","perfEndTime","et","HttpAbortError","uid","traceId","size","status","isHttpResponseError","HttpResponseError","HttpParseError","responseJson","metric","_ver","href","duration","Number","create","startTime","path","pageTitle","renderTime","endTime","pageId","URL","createObjectURL","uuid","substring","lastIndexOf","revokeObjectURL","generateUUID","lt","route","apiCount","maxApiTimeCost","max","reduce","prev","current","finishPageView","dispatchEvent","CustomEvent","detail","freeze","checkPermissions","preCheckPermissions","scanPermissionActionsInStoryboard","preCheckPermissionsForBrickOrRoute","container","permissionsPreCheck","messageDispatcher","sub","unsub","subscribe","unsubscribe","warned","responsePayload","RegExp","_m","p1","p2","escapeRegExp","test","matchMessageChannel","v2Kit","getV2RuntimeFromDll","authV2Factory"],"sourceRoot":""}