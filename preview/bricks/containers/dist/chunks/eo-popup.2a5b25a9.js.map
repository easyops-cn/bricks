{"version":3,"file":"chunks/eo-popup.2a5b25a9.js","mappings":"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","sources":["webpack:///./src/popup/index.tsx","webpack:///./src/popup/styles.shadow.css"],"sourcesContent":["import React, {\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { createDecorators } from \"@next-core/element\";\nimport { ReactNextElement, wrapBrick } from \"@next-core/react-element\";\nimport \"@next-core/theme\";\nimport styleText from \"./styles.shadow.css\";\nimport { JsonStorage } from \"@next-core/utils/general\";\nimport { Rnd, RndResizeCallback, RndDragCallback } from \"react-rnd\";\nimport { isEqual } from \"lodash\";\nimport type {\n  GeneralIcon,\n  GeneralIconProps,\n} from \"@next-bricks/icons/general-icon\";\n\nconst { defineElement, property, method } = createDecorators();\n\nconst WrappedIcon = wrapBrick<GeneralIcon, GeneralIconProps>(\"eo-icon\");\n\nexport enum OpenDirection {\n  LeftTop = \"leftTop\",\n  LeftBottom = \"leftBottom\",\n  RightTop = \"rightTop\",\n  RightBottom = \"rightBottom\",\n  Center = \"center\",\n}\n\n/**\n * 构件 `eo-popup`\n */\nexport\n@defineElement(\"eo-popup\", {\n  styleTexts: [styleText],\n})\nclass EoPopup extends ReactNextElement {\n  /**\n   * 浮层Id, 如果有设置浮层id, 会开启位置记录功能\n   */\n  @property()\n  accessor popupId: string | undefined;\n\n  /**\n   * 弹窗宽度\n   * @default 500\n   */\n  @property()\n  accessor popupWidth: React.CSSProperties[\"width\"] | undefined;\n\n  /**\n   * 弹窗高度\n   */\n  @property()\n  accessor popupHeight: React.CSSProperties[\"height\"] | undefined;\n\n  /**\n   * 弹窗标题\n   */\n  @property()\n  accessor popupTitle: string | undefined;\n\n  /**\n   * 弹窗打开位置\n   * @default center\n   */\n  @property()\n  accessor openDirection: OpenDirection | undefined;\n\n  /**\n   * 是否显示模态框\n   */\n  @property({\n    type: Boolean,\n  })\n  accessor visible: boolean | undefined;\n\n  /**\n   * 用于设置 popup head的样式\n   */\n  @property({\n    attribute: false,\n  })\n  accessor headerStyle: React.CSSProperties | undefined;\n\n  /**\n   * 用于设置 popup wrapper的样式\n   */\n  @property({\n    attribute: false,\n  })\n  accessor wrapperStyle: React.CSSProperties | undefined;\n\n  /**\n   * 内容没有边距\n   */\n  @property({\n    type: Boolean,\n    render: false,\n  })\n  accessor noPadding: boolean | undefined;\n\n  /**\n   * 是否可调整尺寸\n   */\n  @property({\n    type: Boolean,\n  })\n  accessor resizable: boolean | undefined;\n\n  /**\n   * 显示弹窗\n   */\n  @method()\n  open(): void {\n    this.visible = true;\n  }\n\n  /**\n   * 关闭弹窗\n   */\n  @method()\n  close(): void {\n    this.#closePopup();\n  }\n\n  #closePopup = (): void => {\n    this.visible = false;\n  };\n\n  render() {\n    return (\n      <EoPopupComponent\n        popupId={this.popupId}\n        popupWidth={this.popupWidth}\n        popupHeight={this.popupHeight}\n        popupTitle={this.popupTitle}\n        visible={this.visible}\n        closePopup={this.#closePopup}\n        openDirection={this.openDirection}\n        headerStyle={this.headerStyle}\n        wrapperStyle={this.wrapperStyle}\n        noPadding={this.noPadding}\n        resizable={this.resizable}\n      />\n    );\n  }\n}\n\nexport interface EoPopupProps {\n  popupId?: string;\n  visible: boolean;\n  popupTitle?: string;\n  popupWidth?: React.CSSProperties[\"width\"];\n  popupHeight?: React.CSSProperties[\"height\"];\n  headerStyle?: Record<string, any>;\n  wrapperStyle?: Record<string, any>;\n  openDirection?: OpenDirection;\n  resizable?: boolean;\n  noPadding?: boolean;\n  closePopup?: () => void;\n}\n\nexport interface StorageCache {\n  position?: [number, number];\n  size?: [number, number];\n}\n\nexport function EoPopupComponent({\n  popupId,\n  popupTitle,\n  popupWidth,\n  popupHeight,\n  visible,\n  headerStyle,\n  wrapperStyle,\n  openDirection,\n  resizable,\n  closePopup,\n}: EoPopupProps) {\n  const popupRef = useRef<HTMLDivElement>();\n  const headerRef = useRef<HTMLDivElement>();\n  const contentRef = useRef<HTMLDivElement>();\n  const [size, setSize] = useState<[number | string, number | string]>([\n    popupWidth ?? 500,\n    popupHeight,\n  ]);\n  const [position, setPosition] = useState<[number, number]>();\n  const preSizeRef = useRef<[number | string, number | string]>(size);\n  const prePositionRef = useRef<[number, number]>();\n\n  const storage = useMemo(\n    () =>\n      popupId\n        ? new JsonStorage<Record<string, StorageCache>>(\n            localStorage,\n            \"general-popup-\"\n          )\n        : null,\n    [popupId]\n  );\n\n  const handleResizeStop: RndResizeCallback = (\n    _e,\n    _direction,\n    ref,\n    _delta,\n    pos\n  ) => {\n    const { width, height } = ref.getBoundingClientRect();\n    const size: [number, number] = [width, height];\n    const position: [number, number] = [pos.x, pos.y];\n    setSize(size);\n    setPosition(position);\n    if (popupId) {\n      storage.setItem(popupId, {\n        size,\n        position,\n      });\n    }\n  };\n\n  const handleDragStop: RndDragCallback = (_e, d) => {\n    const position: [number, number] = [d.x, d.y];\n    setPosition(position);\n    if (popupId) {\n      const cache = storage.getItem(popupId) ?? {};\n      storage.setItem(popupId, {\n        ...cache,\n        position,\n      });\n    }\n  };\n\n  const computedRightPosition = useCallback(() => {\n    const popup = popupRef.current;\n    if (!popup) return;\n    const { innerWidth, innerHeight } = window;\n    const { width, height, x, y } = popup.getBoundingClientRect();\n    const widthGap = 15;\n    const heightGap = 30;\n    const rightWidth = width > innerWidth ? innerWidth : width;\n    const rightHeight = height > innerHeight ? innerHeight : height;\n    const isOverflowX = x + width - widthGap > innerWidth || x < 0;\n    const isOverflowY = y + height - heightGap > innerHeight || y < 0;\n    if (isOverflowX || isOverflowY) {\n      setPosition((prePos) => {\n        const newPos: [number, number] = [\n          isOverflowX ? Math.max(0, innerWidth - width) - widthGap : prePos[0],\n          isOverflowY\n            ? Math.max(0, innerHeight - height) - heightGap\n            : prePos[1],\n        ];\n        prePositionRef.current = newPos;\n        return newPos;\n      });\n    }\n    if (rightWidth !== width || rightHeight !== height) {\n      const newSize: [number, number] = [rightWidth, rightHeight];\n      preSizeRef.current = newSize;\n      setSize(newSize);\n    }\n  }, []);\n\n  const initPos = useCallback(() => {\n    let initPostion: [number, number];\n    if (visible && popupRef.current) {\n      const { innerWidth, innerHeight } = window;\n      const { offsetWidth: width, offsetHeight: height } = popupRef.current;\n      const { offsetHeight: headerHeight } = headerRef.current;\n      const widthGap = 30;\n      const heightGap = 60;\n\n      const map: { [key in OpenDirection]: Array<number> } = {\n        [OpenDirection.LeftTop]: [widthGap, headerHeight],\n        [OpenDirection.LeftBottom]: [\n          widthGap,\n          innerHeight - height - heightGap,\n        ],\n\n        [OpenDirection.RightTop]: [innerWidth - width - widthGap, headerHeight],\n        [OpenDirection.RightBottom]: [\n          innerWidth - width - widthGap,\n          innerHeight - height - heightGap,\n        ],\n\n        [OpenDirection.Center]: [\n          (innerWidth - width) / 2,\n          (innerHeight - height) / 2 - headerHeight,\n        ],\n      };\n\n      initPostion = map[openDirection || OpenDirection.Center] as [\n        number,\n        number,\n      ];\n      const cache = popupId && storage.getItem(popupId);\n      const newPos = popupId && cache?.position ? cache.position : initPostion;\n      return newPos;\n    }\n    return initPostion;\n  }, [visible, openDirection, popupId, storage]);\n\n  useLayoutEffect(() => {\n    if (popupId) {\n      const cache = storage.getItem(popupId);\n      if (cache?.size) {\n        setSize(cache.size);\n        return;\n      }\n    }\n  }, []);\n\n  useLayoutEffect(() => {\n    const popupElement = popupRef.current;\n    if (popupElement) {\n      setPosition(initPos());\n    }\n  }, [visible, initPos]);\n\n  useEffect(() => {\n    const prePos = prePositionRef.current;\n    const preSize = preSizeRef.current;\n    if (!isEqual(prePos, position) || !isEqual(preSize, size)) {\n      computedRightPosition();\n    }\n  }, [position, size]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", computedRightPosition);\n    return () => {\n      window.removeEventListener(\"resize\", computedRightPosition);\n    };\n  }, []);\n\n  return (\n    visible && (\n      <div className=\"general-popup-popup\">\n        <Rnd\n          className=\"general-popup\"\n          dragHandleClassName=\"general-popup-header\"\n          enableResizing={resizable}\n          size={{\n            width: size[0],\n            height: size[1],\n          }}\n          position={\n            position && {\n              x: position[0],\n              y: position[1],\n            }\n          }\n          bounds=\"window\"\n          onDragStop={handleDragStop}\n          onResizeStop={handleResizeStop}\n        >\n          <div\n            ref={popupRef}\n            className=\"general-popup-container\"\n            style={wrapperStyle}\n          >\n            <div\n              className=\"general-popup-header\"\n              ref={headerRef}\n              style={headerStyle}\n            >\n              <span className=\"title\">{popupTitle}</span>\n              <div className=\"general-popup-header-toolbar\">\n                <slot name=\"toolbar\"></slot>\n                <span className=\"general-popup-close-btn\">\n                  <WrappedIcon\n                    icon=\"close\"\n                    lib=\"antd\"\n                    theme=\"outlined\"\n                    onClick={closePopup}\n                  />\n                </span>\n              </div>\n            </div>\n            <div ref={contentRef} className=\"content\">\n              <slot />\n            </div>\n          </div>\n        </Rnd>\n      </div>\n    )\n  );\n}\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host{display:inline-block}:host([hidden]){display:none}.general-popup-popup{position:fixed;left:0;top:0;z-index:1001}.general-popup{box-shadow:0px 21px 50px 0px rgb(0 0 0/46%);border-radius:6px;overflow:hidden}.general-popup .general-popup-container{height:100%;background:var(--antd-dropdown-menu-bg);display:flex;flex-direction:column}.general-popup-header{display:flex;align-items:center;justify-content:space-between;background:var(--antd-modal-footer-bg);padding:12px;border-radius:6px 6px 0 0;font-size:16px;line-height:16px;cursor:move;font-weight:var(--font-weight-500)}.general-popup-header .general-popup-header-toolbar{display:flex;gap:12px;cursor:auto}.general-popup-close-btn{display:flex;align-items:center;cursor:pointer;color:var(--antd-text-color-secondary)}.general-popup-close-btn:hover{color:var(--antd-icon-color-hover)}:host([no-padding]) .content{padding:0}.content{flex:1;overflow:auto;padding:20px;margin-top:-1px;height:-moz-fit-content;height:fit-content}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___.toString();\n"],"names":["defineElement","property","method","createDecorators","WrappedIcon","wrapBrick","_EoPopup","OpenDirection","_A","WeakMap","_B","_C","_D","_E","_F","_G","_H","_I","_J","_closePopup","EoPopup","ReactNextElement","constructor","arguments","_classPrivateFieldInitSpec","_initProto","_init_popupId","_init_extra_popupId","_init_popupWidth","_init_extra_popupWidth","_init_popupHeight","_init_extra_popupHeight","_init_popupTitle","_init_extra_popupTitle","_init_openDirection","_init_extra_openDirection","_init_visible","_init_extra_visible","_init_headerStyle","_init_extra_headerStyle","_init_wrapperStyle","_init_extra_wrapperStyle","_init_noPadding","_init_extra_noPadding","_init_resizable","_init_extra_resizable","this","visible","popupId","_classPrivateFieldGet","v","_classPrivateFieldSet","popupWidth","popupHeight","popupTitle","openDirection","headerStyle","wrapperStyle","noPadding","resizable","open","close","call","render","React","EoPopupComponent","closePopup","_ref","popupRef","useRef","headerRef","contentRef","size","setSize","useState","position","setPosition","preSizeRef","prePositionRef","storage","useMemo","JsonStorage","localStorage","computedRightPosition","useCallback","popup","current","innerWidth","innerHeight","window","width","height","x","y","getBoundingClientRect","rightWidth","rightHeight","isOverflowX","isOverflowY","prePos","newPos","Math","max","newSize","initPos","initPostion","offsetWidth","offsetHeight","headerHeight","widthGap","heightGap","LeftTop","LeftBottom","RightTop","RightBottom","Center","cache","getItem","useLayoutEffect","useEffect","preSize","isEqual","addEventListener","removeEventListener","className","Rnd","dragHandleClassName","enableResizing","bounds","onDragStop","handleDragStop","_e","d","setItem","onResizeStop","handleResizeStop","_direction","ref","_delta","pos","style","name","icon","lib","theme","onClick","_EoPopup2","e","c","_initClass","_applyDecs","styleTexts","styleText","type","Boolean","attribute","___CSS_LOADER_EXPORT___","push","module","id","toString"],"sourceRoot":""}