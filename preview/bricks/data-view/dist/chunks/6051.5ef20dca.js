"use strict";(self.webpackChunk_next_bricks_data_view=self.webpackChunk_next_bricks_data_view||[]).push([[6051],{5863:(e,t,r)=>{function n(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}r.d(t,{Z:()=>n})},175:(e,t,r)=>{function n(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}r.d(t,{Z:()=>n})},687:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(175);function a(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,(0,n.Z)(e,t,"get"))}},3395:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(5863);function a(e,t,r){(0,n.Z)(e,t),t.set(e,r)}},381:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(175);function a(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,(0,n.Z)(e,t,"set"),r),r}},6171:(e,t,r)=>{function n(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}r.d(t,{Z:()=>n})},5866:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(5863);function a(e,t){(0,n.Z)(e,t),t.add(e)}},6666:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(5850);function a(e,t,r){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},3028:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(6666);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},2159:(e,t,r)=>{function n(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}r.d(t,{Z:()=>n})},5850:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(6522);function a(e){var t=function(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,"string");if("object"!==(0,n.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,n.Z)(t)?t:String(t)}},6522:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:()=>n})},6051:(e,t,r)=>{r.r(t),r.d(t,{Dialog:()=>ir,Notification:()=>vr,StoryboardFunctionRegistryFactory:()=>he,__secret_internals:()=>n,__test_only:()=>{},applyTheme:()=>ne,authenticate:()=>Ao,batchSetAppsLocalTheme:()=>ae,checkIfByTransform:()=>Tt,checkIfOfComputed:()=>Ot,createHistory:()=>A,createRuntime:()=>ho,customProcessors:()=>B,customTemplates:()=>Me,fetchByProvider:()=>xo,getAuth:()=>Oo,getBasePath:()=>m,getCssPropertyValue:()=>ue,getCurrentMode:()=>le,getCurrentTheme:()=>re,getHistory:()=>O,getPageInfo:()=>ea,getRuntime:()=>mo,getV2RuntimeFromDll:()=>C,handleHttpError:()=>pr,httpErrorToString:()=>lr,isLoggedIn:()=>To,isUnauthenticatedError:()=>cr,logout:()=>Ro,matchPath:()=>Vt,registerWidgetFunctions:()=>Fe,registerWidgetI18n:()=>j,setUIVersion:()=>aa,unstable_createRoot:()=>Mo});var n={};r.r(n),r.d(n,{getAddedContracts:()=>Yo,getAllContextValues:()=>zo,getBrickPackagesById:()=>Go,getContextValue:()=>qo,getRenderId:()=>Jo,legacyDoTransform:()=>Fo,mountUseBrick:()=>Lo,renderUseBrick:()=>_o,unmountUseBrick:()=>Uo,updateSnippetPreviewSettings:()=>Vo,updateStoryboard:()=>No,updateStoryboardByRoute:()=>jo,updateStoryboardBySnippet:()=>Wo,updateStoryboardByTemplate:()=>$o,updateTemplatePreviewSettings:()=>Do});var a=r(3028),o=r(4795),i=r(5866),s=r(3395),l=r(6171),c=r(381),u=r(687),d=r(7730),f=r(4153),p=r(6107),v=r(8874),h=(r(8525),r(7857));function m(){var e=document.querySelector("base");return e?e.getAttribute("href"):"/"}var g=r(2159),y=r(5178);function b(e,t){var r=(0,y.orderBy)(e,(e=>{var t,r;return null!==(t=null===(r=e.app.homepage)||void 0===r?void 0:r.length)&&void 0!==t?t:0}),"desc");for(var n of r){var a=n.app.homepage;if("string"==typeof a&&"/"===a[0]&&w(a,t))return n}}function w(e,t){return"/"===e?t===e:"".concat(t.replace(/\/+$/,""),"/").startsWith("".concat(e.replace(/\/+$/,""),"/"))}function S(e){var t;return!e||(null===(t=mo().getCurrentApp())||void 0===t?void 0:t.id)!==e.app.id&&!window.STANDALONE_MICRO_APPS&&e.app.standaloneMode}var E,k=["extraQuery","clear","keepHash"],I=!1;function Z(e,t){t(!(I=!confirm(e)))}function C(){var e,{dll:t}=window;if(t&&null!==(e=window.BRICK_NEXT_VERSIONS)&&void 0!==e&&null!==(e=e["brick-container"])&&void 0!==e&&e.startsWith("2."))return t("tYg3")}function A(){if(!E){var e=(0,h.createBrowserHistory)({basename:m().replace(/\/$/,""),getUserConfirmation:Z});Object.assign(e,function(e){var t,{push:r,replace:n}=e;function o(e,t,n){I=!1,r(e,t),null==n||n(I)}function i(e,t,r){I=!1,n(e,t),null==r||r(I)}function s(t){return function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,{extraQuery:s,clear:l,keepHash:c}=n,u=(0,g.Z)(n,k),d=new URLSearchParams(l?"":e.location.search),f={};for(var[p,v]of(Object.assign(f,r,s),Object.entries(f)))if(Array.isArray(v))for(var h of(d.delete(p),v))d.append(p,h);else null==v||""===v?d.delete(p):d.set(p,v);("push"===t?o:i)("?".concat(d.toString()).concat(c?e.location.hash:""),u,a)}}return(0,a.Z)({pushQuery:s("push"),replaceQuery:s("replace"),pushAnchor:function(t,r,n){o((0,a.Z)((0,a.Z)({},e.location),{},{key:void 0,hash:t,state:(0,a.Z)({notify:!1},r)}),void 0,n)},reload:function(t){i((0,a.Z)((0,a.Z)({},e.location),{},{state:(0,a.Z)((0,a.Z)({},e.location.state),{},{notify:!0})}),void 0,t)},setBlockMessage:function(e){t=e},getBlockMessage:function(){return t},unblock:function(){t=void 0}},function(e){var{push:t,replace:r}=e;function n(n){return function(a,o,i){var s,l="string"==typeof a;return"string"==typeof(s=l?(0,h.parsePath)(a).pathname:a.pathname)&&s.startsWith("/")&&S(function(e){var t,r;return b(null!==(t=null===(r=no)||void 0===r?void 0:r.storyboards)&&void 0!==t?t:[],e)}(s))?location["push"===n?"assign":"replace"](l?m()+a.substring(1):e.createHref(a)):("push"===n?t:r)(a,o,i)}}return{push:n("push"),replace:n("replace")}}((0,a.Z)((0,a.Z)({},e),{},{push:o,replace:i})))}(e)),E=e}return E}var O=function(){var e=C();if(e)return e.getHistory}()||function(){return E},R=r(5121),T=r(5777),x=r(3110),P=r(8689),M=r(7820),_=new WeakMap,B=function(){var e=C();if(e)return Object.freeze({define:(t,r)=>e.getRuntime().registerCustomProcessor(t,r)})}()||new class{constructor(){(0,s.Z)(this,_,{writable:!0,value:new Map})}define(e,t){var[r,n]=e.split("."),a=(0,u.Z)(this,_).get(r);if(a||(a=new Map,(0,u.Z)(this,_).set(r,a)),a.has(n))throw new Error('Custom processor of "'.concat(e,'" already registered'));a.set(n,t)}get(e){return(0,u.Z)(this,_).get(e)}};function L(e){var{app:t,meta:r}=e;if(null!=r&&r.i18n){var n=U("app",t.id),a=[];return Object.entries(r.i18n).forEach((e=>{var[t,r]=e;d.i18n.addResourceBundle(t,n,r),a.push(t)})),()=>{for(var e of a)d.i18n.removeResourceBundle(e,n)}}}function U(e,t){return"".concat(e,"/").concat(t)}function F(e){return d.i18n.getFixedT(null,U("widget",e))}var N,j=function(){var e=C();if(e)return function(t,r){return e.getRuntime().registerWidgetI18n(t,r)}}()||function(e,t){var r=U("widget",e);Object.entries(t).forEach((e=>{var[t,n]=e;d.i18n.addResourceBundle(t,r,n)}))},$="brick-next-devtools-panel",D="devtools-frame-active-change",K="devtools-panel-change",W=!0;function V(e,t){var r=H();if(r&&("evaluation"!==e||W&&(!N||"Evaluations"===N))){var n=()=>{var n;null===(n=r.emit)||void 0===n||n.call(r,{type:e,payload:t})};"function"==typeof window.requestIdleCallback?window.requestIdleCallback(n):setTimeout(n,0)}}function H(){return window.__BRICK_NEXT_DEVTOOLS_HOOK__}var q=()=>{throw new Error("Can't modify read-only proxy object")},z={set:q,defineProperty:q,deleteProperty:q,setPrototypeOf:q};function G(e){return new Proxy(e,z)}function J(e){var{get:t,ownKeys:r}=e;return H()?G(Object.fromEntries(r(null).map((e=>[e,t(null,e,null)])))):new Proxy(Object.freeze({}),{get:t})}var Y="light",Q=new p.JsonStorage(localStorage),X="apps-theme";function ee(e){if("dark"!==e&&"light"!==e&&"dark-v2"!==e)throw new Error("Unsupported theme: ".concat(e));Y=e}function te(){return Y}function re(){return document.documentElement.dataset.theme}function ne(e){e?ee(e):e=te(),e!==re()&&(document.documentElement.dataset.theme=e,window.dispatchEvent(new CustomEvent("theme.change",{detail:e})))}function ae(e){Q.setItem(X,(0,a.Z)((0,a.Z)({},oe()),e))}function oe(){var e,t;try{t=Q.getItem(X)}catch(e){console.error("JSON parse error inside `getLocalAppsTheme()`")}return null!==(e=t)&&void 0!==e?e:{}}var ie="default";function se(e){if("dashboard"!==e&&"default"!==e)throw new Error("Unsupported mode: ".concat(e));ie=e}function le(){return document.documentElement.dataset.mode}function ce(e){e?se(e):e=ie,e!==le()&&(document.documentElement.dataset.mode=e,window.dispatchEvent(new CustomEvent("mode.change",{detail:e})))}function ue(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return r&&(null===(t=window.getComputedStyle(r))||void 0===t?void 0:t.getPropertyValue(e))||""}function de(e,t){var r={};for(var n of e){var a=fe(n,t);void 0!==a&&(r[n]=a)}return r}function fe(e,t){var r,n,a,{collectCoverage:o,widgetId:i,widgetVersion:s,app:l,appendI18nNamespace:c,storyboardFunctions:u,isStoryboardFunction:f}=t;switch(e){case"BASE_URL":return o?"/next":m().replace(/\/$/,"");case"FN":return u;case"IMG":return o?{get:e=>"mock/images/".concat(e)}:i?null==oo||null===(r=oo.images)||void 0===r?void 0:r.widgetImagesFactory(i,s):null==oo||null===(n=oo.images)||void 0===n?void 0:n.imagesFactory(l.id,l.isBuildPush,l.currentVersion);case"I18N":return o?y.identity:i?F(i):d.i18n.getFixedT(null,[c,U("app",l.id)].filter(Boolean));case"I18N_TEXT":return o?pe:d.i18nText;case"PERMISSIONS":return G({check:o?ve:null==oo||null===(a=oo.checkPermissions)||void 0===a?void 0:a.checkPermissions});case"THEME":return G({getTheme:o?()=>"light":te});case"console":return f?G(console):void 0;case"location":return o?{href:"http://localhost:3000/functions/test",origin:"http://localhost:3000",host:"localhost:3000",hostname:"localhost"}:{href:location.href,origin:location.origin,host:location.host,hostname:location.hostname}}}function pe(e){return null==e?void 0:e.en}function ve(){return!0}function he(){var e,{widgetId:t,widgetVersion:r,collectCoverage:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=new Map,i=new Proxy(Object.freeze({}),{get:(a,s)=>function(a){var s,l=o.get(a);if(l){if(l.processed)return l.cooked;n&&(s=n.createCollector(a));var c=(0,T.precookFunction)(l.source,{typescript:l.typescript,hooks:s&&{beforeVisit:s.beforeVisit}});return l.cooked=(0,T.cook)(c.function,l.source,{rules:{noVar:!0},globalVariables:(0,M.supply)(c.attemptToVisitGlobals,de(c.attemptToVisitGlobals,{collectCoverage:n,widgetId:t,widgetVersion:r,app:e,storyboardFunctions:i,isStoryboardFunction:!0}),!!n),hooks:s&&{beforeEvaluate:s.beforeEvaluate,beforeCall:s.beforeCall,beforeBranch:s.beforeBranch}}),l.processed=!0,l.cooked}}(s)});return{storyboardFunctions:i,registerStoryboardFunctions:function(t,r){if(r&&(e=r),o.clear(),Array.isArray(t))for(var a of t){var i=(0,x.collectMemberUsageInFunction)(a,"FN",!!n),s=(0,x.collectMemberUsageInFunction)(a,"PERMISSIONS",!!n).has("check");o.set(a.name,{source:a.source,typescript:a.typescript,deps:i,hasPermissionsCheck:s})}},updateStoryboardFunction(e,t){var r=(0,a.Z)((0,a.Z)({},t),{},{name:e}),n=(0,x.collectMemberUsageInFunction)(r,"FN",!0),i=(0,x.collectMemberUsageInFunction)(r,"PERMISSIONS",!0).has("check");o.set(e,{source:t.source,typescript:t.typescript,deps:n,hasPermissionsCheck:i})},checkPermissionsUsage(e){var t=new Set,r=e=>{if(!t.has(e)){t.add(e);var n=o.get(e);return!!n&&(n.hasPermissionsCheck||[...n.deps].some(r))}return!1};return e.some(r)}}}var{storyboardFunctions:me,registerStoryboardFunctions:ge,checkPermissionsUsage:ye}=he(),be={};try{be.EventTarget=(new EventTarget).constructor}catch(e){!function(e,t){var r=e.create,n=e.defineProperty,a=o.prototype;function o(){t.set(this,r(null))}function i(e,t,r){n(e,t,{configurable:!0,writable:!0,value:r})}function s(e){var t=e.options;return t&&t.once&&e.target.removeEventListener(this.type,e.listener),"function"==typeof e.listener?e.listener.call(e.target,this):e.listener.handleEvent(this),this._stopImmediatePropagationFlag}i(a,"addEventListener",(function(e,r,n){for(var a=t.get(this),o=a[e]||(a[e]=[]),i=0,s=o.length;i<s;i++)if(o[i].listener===r)return;o.push({target:this,listener:r,options:n})})),i(a,"dispatchEvent",(function(e){var r=t.get(this)[e.type];return r&&(i(e,"target",this),i(e,"currentTarget",this),r.slice(0).some(s,e),delete e.currentTarget,delete e.target),!0})),i(a,"removeEventListener",(function(e,r){for(var n=t.get(this),a=n[e]||(n[e]=[]),o=0,i=a.length;o<i;o++)if(a[o].listener===r)return void a.splice(o,1)})),be.EventTarget=o}(Object,new WeakMap)}const we=be.EventTarget;var Se=function(e){return e.xLarge="xLarge",e.large="large",e.medium="medium",e.small="small",e.xSmall="xSmall",e}({}),Ee=new Map([[Se.xLarge,"1920px"],[Se.large,"1600px"],[Se.medium,"1280px"],[Se.small,"1024px"],[Se.xSmall,0]]),ke=new we,Ie={},Ze={};function Ce(e,t){var r=!1;for(var[n]of(Ie[t]=e.matches,Ee))if(Ie[n]&&Ze.breakpoint!==n){Ze.breakpoint=n,r=!0;break}r&&ke.dispatchEvent(new CustomEvent("change",{detail:Ze}))}Ee.forEach(((e,t)=>{var r=window.matchMedia("(min-width: ".concat(e,")"));Ce(r,t),r.addEventListener?r.addEventListener("change",(e=>{Ce(e,t)})):r.addListener((e=>{Ce(e,t)}))}));var Ae=()=>Ze;function Oe(e){return function(t){var r,n="local"===e?localStorage:sessionStorage;return JSON.parse(null!==(r=n.getItem(t))&&void 0!==r?r:"null")}}function Re(e){var t,r;return!(null===(t=e?e.flags:null===(r=mo())||void 0===r?void 0:r.getFeatureFlags())||void 0===t||!t["brick-next-v3-strict-mode"])}function Te(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var o=0===n.length?"":",";e?console.error("".concat(t," is dropped in v3 strict mode").concat(o),...n):console.warn("".concat(t," is deprecated in v3 and will be dropped in strict mode").concat(o),...n)}var xe=new Set(["prefix"]),Pe=new WeakMap,Me=function(){var e=C();if(e)return Object.freeze({define:(t,r)=>e.getRuntime().registerCustomTemplate(t,r)})}()||new class{constructor(){(0,s.Z)(this,Pe,{writable:!0,value:new Map})}define(e,t){var r,n,o,i,s=(0,u.Z)(this,Pe).has(e);s?console.warn('Custom template of "'.concat(e,'" already registered.')):(s=!!customElements.get(e))&&console.warn('Custom template of "'.concat(e,'" already defined by customElements.'));var l=Re(),c=null!==(r=null===(n=t.proxy)||void 0===n?void 0:n.properties)&&void 0!==r?r:{},d=[],f=[];for(var[p,v]of Object.entries(c))v.asVariable?(Te(l,"Template `asVariable`",e,p),l||f.push(p)):v.mergeProperty||v.refTransform?console.error("Template `mergeProperty` and `refTransform` are dropped in v3:",e,p):v.ref&&d.push([p,v]);var h=(0,a.Z)((0,a.Z)({},t),{},{proxy:(0,a.Z)((0,a.Z)({},t.proxy),{},{properties:Object.fromEntries(d)}),state:(t.state?l?t.state:t.state.map((e=>(0,a.Z)({expose:!0},e))):[]).concat(f.map((e=>({name:e,expose:!0}))))});(0,u.Z)(this,Pe).set(e,(0,a.Z)((0,a.Z)({},h),{},{name:e}));var m,g,b=(m=h.state,(0,y.uniq)(null!==(g=null==m?void 0:m.filter((e=>e.expose)).map((e=>e.name)))&&void 0!==g?g:[])),w=Object.entries(null!==(o=null===(i=h.proxy)||void 0===i?void 0:i.methods)&&void 0!==o?o:{}),S=b.concat(d.map((e=>e[0]))),E=w.map((e=>e[0])),k=S.concat(E).filter((e=>e in HTMLElement.prototype&&!xe.has(e)));if(k.length>0&&(Te(l,"Using native HTMLElement properties as template properties or methods",e,...k),l))throw new Error('In custom template "'.concat(e,'", ').concat(k.map((e=>'"'.concat(e,'"'))).join(", ")," are native HTMLElement properties, and should be avoid to be used as brick properties or methods."));if(!s){class t extends HTMLElement{get $$typeof(){return"custom-template"}static get _dev_only_definedProperties(){return S}static get _dev_only_definedMethods(){return E}$$getElementByRef(e){var t;return null===(t=this.$$tplStateStore)||void 0===t||null===(t=t.hostBrick)||void 0===t||null===(t=t.tplHostMetadata)||void 0===t||null===(t=t.internalBricksByRef.get(e))||void 0===t?void 0:t.element}connectedCallback(){var e=this.shadowRoot;e||(e=this.attachShadow({mode:"open"}));var t=document.createDocumentFragment(),r=document.createElement("style");r.textContent=":host{display:block}:host([hidden]){display:none}";var n=document.createElement("slot");t.appendChild(r),t.appendChild(n),e.appendChild(t)}disconnectedCallback(){this.shadowRoot&&(this.shadowRoot.textContent="")}}var I=function(r){if(d.some((e=>e[0]===r)))return console.error('Cannot define an exposed state that is also a proxy property: "'.concat(r,'" in ').concat(e)),1;Object.defineProperty(t.prototype,r,{get(){return this.$$tplStateStore.getValue(r)},set(e){var t;null===(t=this.$$tplStateStore)||void 0===t||t.updateValue(r,e,"replace")},enumerable:!0})};for(var Z of b)I(Z);var C=function(e,r){Object.defineProperty(t.prototype,e,{get(){var t;return this.$$getElementByRef(r.ref)[null!==(t=r.refProperty)&&void 0!==t?t:e]},set(t){var n,a,o=null===(n=this.$$getElementByRef)||void 0===n?void 0:n.call(this,r.ref);o&&(o[null!==(a=r.refProperty)&&void 0!==a?a:e]=t)},enumerable:!0})};for(var[A,O]of d)C(A,O);var R=function(e,r){Object.defineProperty(t.prototype,e,{value(){var t;this.$$getElementByRef(r.ref)[null!==(t=r.refMethod)&&void 0!==t?t:e](...arguments)},enumerable:!0})};for(var[T,x]of w)R(T,x);customElements.define(e,t)}}get(e){return(0,u.Z)(this,Pe).get(e)}};function _e(e,t,r){var{tplStateStoreId:n,tplStateStoreMap:a}=e;if(!n)throw new Error('Using "'.concat(t,'" outside of a custom template').concat(null!=r?r:""));var o=a.get(n);if(!o)throw new Error('Template state store is not found when using "'.concat(t,'"').concat(null!=r?r:"",".\nThis is a bug of Brick Next, please report it."));return o}function Be(e,t,r){var n=_e(e,t,r).hostBrick.element;if(!n)throw new Error('Template host element is gone when using "'.concat(t,'"').concat(null!=r?r:"",".\nThis is a bug of Brick Next, please report it."));return n}var Le=new Map,Ue=new Proxy(Object.freeze({}),{get:(e,t)=>Le.get(t)}),Fe=function(){var e=C();if(e)return function(t,r,n){return e.getRuntime().registerWidgetFunctions(t,r,n)}}()||function(e,t,r){if(Le.has(e))throw new Error('Widget functions of "'.concat(e,'" already registered'));var{storyboardFunctions:n,registerStoryboardFunctions:a}=he({widgetId:e,widgetVersion:r});Le.set(e,n),a(t)};const Ne=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,je=e=>{if("string"!=typeof e)throw new TypeError("Invalid argument expected string");const t=e.match(Ne);if(!t)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},$e=e=>"*"===e||"x"===e||"X"===e,De=e=>{const t=parseInt(e,10);return isNaN(t)?e:t},Ke=(e,t)=>{if($e(e)||$e(t))return 0;const[r,n]=((e,t)=>typeof e!=typeof t?[String(e),String(t)]:[e,t])(De(e),De(t));return r>n?1:r<n?-1:0},We=(e,t)=>{for(let r=0;r<Math.max(e.length,t.length);r++){const n=Ke(e[r]||"0",t[r]||"0");if(0!==n)return n}return 0},Ve=(e,t,r)=>{ze(r);const n=((e,t)=>{const r=je(e),n=je(t),a=r.pop(),o=n.pop(),i=We(r,n);return 0!==i?i:a&&o?We(a.split("."),o.split(".")):a||o?a?-1:1:0})(e,t);return He[r].includes(n)},He={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},qe=Object.keys(He),ze=e=>{if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===qe.indexOf(e))throw new Error(`Invalid operator, expected one of ${qe.join("|")}`)};function Ge(e,t){var r=Co(e);if(!r&&null!=oo&&oo.checkInstalledApps&&(r=oo.checkInstalledApps.getCheckedApp(e)),!r||"running"===r.installStatus)return!1;if(!t||!r.currentVersion)return!0;var n=t.match(/^([><]=?|=)(.*)$/);try{if(!n)throw new TypeError("Invalid match version: ".concat(t));return Ve(r.currentVersion,n[2],n[1])}catch(e){console.error(e)}return!1}function Je(e,t,r){var{formStateStoreId:n,formStateStoreMap:a}=e;if(!n)throw new Error('Using "'.concat(t,'" outside of form renderer').concat(null!=r?r:""));var o=a.get(n);if(!o)throw new Error('Form state store is not found when using "'.concat(t,'"').concat(null!=r?r:"",".\nThis is a bug of Brick Next, please report it."));return o}var Ye=new Map;function Qe(e){return Xe.apply(this,arguments)}function Xe(){return Xe=(0,o.Z)((function*(e){var t,r=null==oo||null===(t=oo.flowApi)||void 0===t?void 0:t.isFlowApiProvider(e);r&&(e=oo.flowApi.FLOW_API_PROVIDER);var n=Ye.get(e);if(n)return n;if(e.includes("-")&&!customElements.get(e))if(r)oo.flowApi.registerFlowApiProvider();else if(yield(0,f.loadBricksImperatively)([e],Eo()),!customElements.get(e))throw new Error('Provider not defined: "'.concat(e,'".'));return n=document.createElement(e),Ye.set(e,n),n})),Xe.apply(this,arguments)}var et=new WeakSet;function tt(e){if((0,p.isObject)(e)&&!rt(e))if(et.add(e),Array.isArray(e))e.forEach(tt);else{var t=Object.getPrototypeOf(e);t&&t.constructor!==Object||Object.values(e).forEach(tt)}}function rt(e){return et.has(e)}var nt=new Map;function at(e,t,r){return ot.apply(this,arguments)}function ot(){return(ot=(0,o.Z)((function*(e,t,r){var{useProvider:n,method:o="resolve",args:i=[],onReject:s}=e,{provider:l,field:c}=e;if(l&&!n)throw new Error("You're using \"provider: ".concat(l,'" which is dropped in v3, please use "useProvider" instead'));var u=null!=c;if(u){var d=Re();if(Te(d,"`resolve.field`"),d)throw new Error("Using deprecated `resolve.field`")}var f,[p,v]=yield Promise.all([Qe(n),wt(i,t)]),h=null==r?void 0:r.renderId,m=it(p,n,o,v,r,i,!!h&&h!==ko()),{transform:g}=e;try{var b=yield m;tt(f=u?(0,y.get)(b,c):b)}catch(e){if(!function(e){return!(null==e||!e.transform)}(s))throw e;g=s.transform,f=e}return g?"string"==typeof g?{[g]:f}:wt(g,(0,a.Z)((0,a.Z)({},t),{},{data:f})):f}))).apply(this,arguments)}function it(e,t,r,n,a,o,i){return st.apply(this,arguments)}function st(){return st=(0,o.Z)((function*(e,t,r,n,a,i,s){var l,c;try{l=JSON.stringify({useProvider:t,method:r,args:n})}catch(e){if(!i)throw e;l=JSON.stringify({useProvider:t,method:r,originalArgs:i})}return"reload"!==(null==a?void 0:a.cache)&&(c=nt.get(l)),c||(c=(0,o.Z)((function*(){var a,o=null!=oo&&null!==(a=oo.flowApi)&&void 0!==a&&a.isFlowApiProvider(t)?yield oo.flowApi.getArgsOfFlowApi(t,n,r):n;return e.resolve(...o)}))(),s||nt.set(l,c)),c})),st.apply(this,arguments)}var lt=Symbol.for("pre.evaluated.raw"),ct=Symbol.for("pre.evaluated.context");function ut(e){return!(null==e||!e[lt])}function dt(e){return e[lt]}function ft(e){return"string"==typeof e?(0,T.shouldAllowRecursiveEvaluations)(e):(0,T.shouldAllowRecursiveEvaluations)(e[lt])}var pt=new WeakSet([SyntaxError,TypeError,ReferenceError]);function vt(e){return pt.has(e.constructor)?e.constructor:TypeError}function ht(){return(ht=(0,o.Z)((function*(e,t,r){var{blockingList:n,run:a}=mt(e,t,r,!0);return yield Promise.all(n),a()}))).apply(this,arguments)}function mt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=[];if("string"!=typeof e){var i=(0,y.omit)(t,["pendingPermissionsPreCheck","tplStateStoreMap","tplStateStoreScope","formStateStoreMap","formStateStoreScope"]);t=(0,a.Z)((0,a.Z)({},e[ct]),i),e=e[lt]}var s,l={usedArgs:new Set},c={usedArgs:new Set};try{s=(0,T.preevaluate)(e,{withParent:!0,hooks:{beforeVisitGlobal(e,t){(0,x.collectAppGetMenuUsage)(l,e,t),(0,x.collectInstalledAppsHasUsage)(c,e,t)}}})}catch(t){var u="".concat(t.message,', in "').concat(e,'"');throw new(vt(t))(u)}if(l.hasNonStaticUsage)throw new Error('Non-static usage of "APP.getMenu" is prohibited in v3, check your expression: "'.concat(e,'"'));if(c.hasNonStaticUsage)throw new Error('Non-static usage of "INSTALLED_APPS.has" is prohibited in v3, check your expression: "'.concat(e,'"'));var d,v,h,m,g={},{attemptToVisitGlobals:b}=s;if(r.lazy||b.has("EVENT")&&!(0,p.hasOwnProperty)(t,"event")||b.has("DATA")&&!(0,p.hasOwnProperty)(t,"data"))return{blockingList:o,run:()=>Object.keys(t).length>0?{[lt]:e,[ct]:t}:e};var w,S,E=Re(t);(b.has("STATE")||!E&&b.has("TPL"))&&(m=_e(t,"STATE",': "'.concat(e,'"'))),b.has("FORM_STATE")&&(S=Je(t,"FORM_STATE",': "'.concat(e,'"')));var k=H();if(n||k){if(b.has("CTX")&&(d=(0,x.strictCollectMemberUsage)(e,"CTX"),n&&o.push(t.ctxStore.waitFor(d))),m){if(h=(0,x.strictCollectMemberUsage)(e,"STATE"),!E){var I=(0,x.strictCollectMemberUsage)(e,"TPL");for(var Z of I)h.add(Z)}n&&o.push(m.waitFor(h))}S&&(w=(0,x.strictCollectMemberUsage)(e,"FORM_STATE"),n&&o.push(S.waitFor(w))),b.has("PROCESSORS")&&(v=(0,x.strictCollectMemberUsage)(e,"PROCESSORS",2),n&&o.push((0,f.loadProcessorsImperatively)(v,Eo())))}if(n){var C,A=b.has("PERMISSIONS");if(!A&&b.has("FN")){var O=[...(0,x.strictCollectMemberUsage)(e,"FN")];A=ye(O)}if(A&&o.push(...t.pendingPermissionsPreCheck),l.usedArgs.size>0&&null!=oo&&oo.menu){var R=[...l.usedArgs];o.push(Promise.all(R.map((e=>oo.menu.fetchMenuById(e,t,{getStoryboardByAppId:Zo,resolveData:at,asyncComputeRealValue:wt})))))}c.usedArgs.size>0&&o.push(null==oo||null===(C=oo.checkInstalledApps)||void 0===C?void 0:C.waitForCheckingApps([...c.usedArgs]))}return{blockingList:o,run(){var r,n,o,i,{app:l,location:c,query:u,match:f,flags:k,sys:I,ctxStore:Z,data:C,event:A}=t,O=null!==(r=t.overrideApp)&&void 0!==r?r:l;for(var R of b)switch(R){case"ANCHOR":g[R]=c.hash?c.hash.substring(1):null;break;case"APP":g[R]=(0,a.Z)((0,a.Z)({},(0,y.cloneDeep)(O)),{},{getMenu:null==oo||null===(n=oo.menu)||void 0===n?void 0:n.getMenuById});break;case"CTX":g[R]=J({get:(e,t)=>Z.getValue(t),ownKeys:()=>Array.from(d)});break;case"DATA":g[R]=C;break;case"EVENT":g[R]=A;break;case"FLAGS":g[R]=G(k);break;case"FORM_STATE":g[R]=J({get:(e,t)=>S.getValue(t),ownKeys:()=>Array.from(w)});break;case"HASH":g[R]=c.hash;break;case"INSTALLED_APPS":g[R]=G({has:Ge});break;case"ITEM":case"INDEX":var x="ITEM"===R?"forEachItem":"forEachIndex";(0,p.hasOwnProperty)(t,x)?g[R]=t[x]:console.error("Using `".concat(R,'` but no `:forEach` is found, check your expression: "').concat(e,'"'));break;case"LOCAL_STORAGE":g[R]=G({getItem:Oe("local")});break;case"MEDIA":g[R]=G(Ae());break;case"MISC":g[R]=mo().getMiscSettings();break;case"PARAMS":g[R]=new URLSearchParams(u);break;case"PATH":g[R]=G(null!==(o=null==f?void 0:f.params)&&void 0!==o?o:{});break;case"PATH_NAME":g[R]=c.pathname;break;case"PROCESSORS":g[R]=J({get(e,t){var r=B.get(t);if(!r)throw new Error("'PROCESSORS.".concat(t,"' is not registered! Have you installed the relevant brick package?"));return J({get:(e,t)=>r.get(t),ownKeys:()=>Array.from(r.keys())})},ownKeys(){var e=new Set;for(var t of v){var r=t.split(".")[0];e.add(r)}return Array.from(e)}});break;case"QUERY":g[R]=Object.fromEntries(Array.from(u.keys()).map((e=>[e,u.get(e)])));break;case"QUERY_ARRAY":g[R]=Object.fromEntries(Array.from(u.keys()).map((e=>[e,u.getAll(e)])));break;case"SESSION_STORAGE":g[R]=G({getItem:Oe("session")});break;case"TPL":if(Te(E,'Using "TPL" in expression','check your expression: "'.concat(e,'"')),E)break;case"STATE":g[R]=J({get:(e,t)=>m.getValue(t),ownKeys:()=>Array.from(h)});break;case"SYS":g[R]=G(null!=I?I:{});break;case"__WIDGET_FN__":g[R]=Ue;break;case"__WIDGET_IMG__":g[R]=null==oo||null===(i=oo.images)||void 0===i?void 0:i.widgetImagesFactory;break;case"__WIDGET_I18N__":g[R]=F}Object.assign(g,de(s.attemptToVisitGlobals,{storyboardFunctions:me,app:t.app,appendI18nNamespace:t.appendI18nNamespace}));try{var P=(0,T.cook)(s.expression,s.source,{globalVariables:(0,M.supply)(s.attemptToVisitGlobals,g)});return V("evaluation",{raw:e,context:g,result:P}),P}catch(t){var _="".concat(t.message,', in "').concat(e,'"');throw new(vt(t))(_)}}}}var gt=function(e){return e[e.INITIAL=0]="INITIAL",e[e.USE_BRICK=1]="USE_BRICK",e[e.USE_BRICK_ITEM=2]="USE_BRICK_ITEM",e[e.USE_BRICK_PROPERTIES=3]="USE_BRICK_PROPERTIES",e[e.USE_BRICK_TRANSFORM=4]="USE_BRICK_TRANSFORM",e[e.USE_BRICK_EVENTS=5]="USE_BRICK_EVENTS",e[e.USE_BRICK_IF=6]="USE_BRICK_IF",e[e.USE_BRICK_SLOTS=7]="USE_BRICK_SLOTS",e[e.USE_BRICK_SLOTS_ITEM=8]="USE_BRICK_SLOTS_ITEM",e[e.USE_BRICK_SLOTS_ITEM_BRICKS=9]="USE_BRICK_SLOTS_ITEM_BRICKS",e[e.USE_BRICK_SLOTS_ITEM_BRICKS_ITEM=10]="USE_BRICK_SLOTS_ITEM_BRICKS_ITEM",e[e.USE_BRICK_LIFECYCLE=11]="USE_BRICK_LIFECYCLE",e[e.USE_BRICK_DATA_SOURCE=12]="USE_BRICK_DATA_SOURCE",e}({});function yt(e){switch(e){case gt.USE_BRICK_PROPERTIES:case gt.USE_BRICK_TRANSFORM:case gt.USE_BRICK_EVENTS:case gt.USE_BRICK_IF:case gt.USE_BRICK_LIFECYCLE:case gt.USE_BRICK_DATA_SOURCE:return!0}return!1}function bt(e,t,r){if(yt(e))return e;if(t)switch(e){case gt.USE_BRICK:return gt.USE_BRICK_ITEM;case gt.USE_BRICK_SLOTS_ITEM_BRICKS:return gt.USE_BRICK_SLOTS_ITEM_BRICKS_ITEM}else switch(e){case gt.INITIAL:if("useBrick"===r)return gt.USE_BRICK;break;case gt.USE_BRICK:case gt.USE_BRICK_ITEM:case gt.USE_BRICK_SLOTS_ITEM_BRICKS_ITEM:switch(r){case"properties":return gt.USE_BRICK_PROPERTIES;case"transform":return gt.USE_BRICK_TRANSFORM;case"dataSource":return gt.USE_BRICK_DATA_SOURCE;case"events":return gt.USE_BRICK_EVENTS;case"slots":return gt.USE_BRICK_SLOTS;case"children":return gt.USE_BRICK_SLOTS_ITEM_BRICKS;case"if":return gt.USE_BRICK_IF;case"lifeCycle":return gt.USE_BRICK_LIFECYCLE}break;case gt.USE_BRICK_SLOTS:return gt.USE_BRICK_SLOTS_ITEM;case gt.USE_BRICK_SLOTS_ITEM:if("bricks"===r)return gt.USE_BRICK_SLOTS_ITEM_BRICKS}return gt.INITIAL}function wt(e,t){return St.apply(this,arguments)}function St(){return St=(0,o.Z)((function*(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=ut(e);if(n||"string"==typeof e){var a,o=r.$$lazyForUseBrick&&yt(r.$$stateOfUseBrick),i=o;return n||(0,T.isEvaluable)(e)?(a=yield function(e,t,r){return ht.apply(this,arguments)}(e,t,{lazy:o}),i=ft(e)):a=o?e:((0,p.hasOwnProperty)(t,"data")?r.noInject?P.transform:P.transformAndInject:r.noInject?It:P.inject)(e,t),i||tt(a),a}if(!(0,p.isObject)(e)||rt(e)||"function"==typeof e)return e;if(Array.isArray(e)){var s=kt(r,!0);return Promise.all(e.map((e=>wt(e,t,s))))}return Object.fromEntries((yield Promise.all(Object.entries(e).map((e=>{var[n,a]=e;return Promise.all([wt(n,t),wt(a,t,kt(r,!1,n))])})))).concat(r.ignoreSymbols?[]:Object.getOwnPropertySymbols(e).map((t=>[t,e[t]]))))})),St.apply(this,arguments)}function Et(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=ut(e);if(n||"string"==typeof e){var a,o=r.$$lazyForUseBrick&&yt(r.$$stateOfUseBrick),i=o;return n||(0,T.isEvaluable)(e)?(a=function(e,t,r){var{run:n}=mt(e,t,void 0,!1);return n()}(e,t),i=ft(e)):a=o?e:((0,p.hasOwnProperty)(t,"data")?r.noInject?P.transform:P.transformAndInject:r.noInject?It:P.inject)(e,t),i||tt(a),a}if(!(0,p.isObject)(e)||rt(e)||"function"==typeof e)return e;if(Array.isArray(e)){var s=kt(r,!0);return e.map((e=>Et(e,t,s)))}return Object.fromEntries(Object.entries(e).map((e=>{var[n,a]=e;return[Et(n,t),Et(a,t,kt(r,!1,n))]})).concat(r.ignoreSymbols?[]:Object.getOwnPropertySymbols(e).map((t=>[t,e[t]]))))}function kt(e,t,r){return e.$$lazyForUseBrick?(0,a.Z)((0,a.Z)({},e),{},{$$stateOfUseBrick:bt(e.$$stateOfUseBrick,t,r)}):e}function It(e){return e}function Zt(e,t){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,o.Z)((function*(e,t){return!(0,p.hasOwnProperty)(e,"if")||!!("string"==typeof e.if||ut(e.if)?yield wt(e.if,t):e.if)}))).apply(this,arguments)}function At(e,t){return!(0,p.hasOwnProperty)(e,"if")||!!("string"==typeof e.if||ut(e.if)?Et(e.if,t):e.if)}function Ot(e){return!(0,p.hasOwnProperty)(e,"if")||!!e.if}function Rt(){return(Rt=(0,o.Z)((function*(e,t){return(0,p.isObject)(e.if)&&!ut(e.if)?Ot(yield at(e.if,t)):Zt(e,t)}))).apply(this,arguments)}var Tt=function(){var e=C();if(e)return e.looseCheckIfByTransform}()||function(e,t){return At(e,{data:t})};function xt(e){var t=!1,r=!1,n=!1;if("string"==typeof e?(0,T.isEvaluable)(e):ut(e)){var a="string"==typeof e?e:dt(e);if((0,T.isTrackAll)(a)){var o=(0,x.trackAll)(a);o&&(t=o.context,r=o.state,n=o.formState)}else t=(0,x.track)(a,"track context","CTX"),r=(0,x.track)(a,"track state","STATE"),n=(0,x.track)(a,"track formstate","FORM_STATE")}return{contextNames:t,stateNames:r,formStateNames:n}}function Pt(e,t){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,o.Z)((function*(e,t){for(var[r,n,a]of e)if(r===t){var o=yield n;if(void 0!==o||!a)return o}}))).apply(this,arguments)}function _t(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,o.Z)((function*(e){var t={};for(var[r,n,a]of e){var o=yield n;void 0===o&&a||!("style"!==r&&"dataset"!==r||(0,p.isObject)(o))||(t[r]=o)}return t}))).apply(this,arguments)}function Lt(e,t){if(t)for(var[r,n]of Object.entries(t))switch(r){case"style":case"dataset":for(var[a,o]of Object.entries(n))e[r][a]=o;break;case"constructor":case"__proto__":case"innerHTML":throw new Error("set `".concat(r,"` is prohibited"));default:e[r]=n}}function Ut(e,t,r){var n=function(e,t){return(0,p.isObject)(e)?Object.fromEntries(Object.entries(e).map((e=>{var[r,n]=e,a=Et(n,t,{$$lazyForUseBrick:!0,$$stateOfUseBrick:"useBrick"===r?gt.USE_BRICK:gt.INITIAL});if("style"!==r&&"dataset"!==r||(0,p.isObject)(a))return[r,a]})).filter(Boolean)):{}}(t,r);Array.isArray(e)||(e=[e]),e.forEach((e=>{Lt(e,n)}))}function Ft(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Nt(e){return e&&e.sensitive?"":"i"}function jt(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var n=r.strict,a=void 0!==n&&n,o=r.start,i=void 0===o||o,s=r.end,l=void 0===s||s,c=r.encode,u=void 0===c?function(e){return e}:c,d=r.delimiter,f=void 0===d?"/#?":d,p=r.endsWith,v="[".concat(Ft(void 0===p?"":p),"]|$"),h="[".concat(Ft(f),"]"),m=i?"^":"",g=0,y=e;g<y.length;g++){var b=y[g];if("string"==typeof b)m+=Ft(u(b));else{var w=Ft(u(b.prefix)),S=Ft(u(b.suffix));if(b.pattern)if(t&&t.push(b),w||S)if("+"===b.modifier||"*"===b.modifier){var E="*"===b.modifier?"?":"";m+="(?:".concat(w,"((?:").concat(b.pattern,")(?:").concat(S).concat(w,"(?:").concat(b.pattern,"))*)").concat(S,")").concat(E)}else m+="(?:".concat(w,"(").concat(b.pattern,")").concat(S,")").concat(b.modifier);else"+"===b.modifier||"*"===b.modifier?m+="((?:".concat(b.pattern,")").concat(b.modifier,")"):m+="(".concat(b.pattern,")").concat(b.modifier);else m+="(?:".concat(w).concat(S,")").concat(b.modifier)}}if(l)a||(m+="".concat(h,"?")),m+=r.endsWith?"(?=".concat(v,")"):"$";else{var k=e[e.length-1],I="string"==typeof k?h.indexOf(k[k.length-1])>-1:void 0===k;a||(m+="(?:".concat(h,"(?=").concat(v,"))?")),I||(m+="(?=".concat(h,"|").concat(v,")"))}return new RegExp(m,Nt(r))}(function(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var a=1,o="";if("?"===e[s=r+1])throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0==--a){s++;break}}else if("("===e[s]&&(a++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at ".concat(s));o+=e[s++]}else o+=e[s++]+e[s++];if(a)throw new TypeError("Unbalanced pattern at ".concat(r));if(!o)throw new TypeError("Missing pattern at ".concat(r));t.push({type:"PATTERN",index:r,value:o}),r=s}else{for(var i="",s=r+1;s<e.length;){var l=e.charCodeAt(s);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;i+=e[s++]}if(!i)throw new TypeError("Missing parameter name at ".concat(r));t.push({type:"NAME",index:r,value:i}),r=s}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,a=void 0===n?"./":n,o="[^".concat(Ft(t.delimiter||"/#?"),"]+?"),i=[],s=0,l=0,c="",u=function(e){if(l<r.length&&r[l].type===e)return r[l++].value},d=function(e){var t=u(e);if(void 0!==t)return t;var n=r[l],a=n.type,o=n.index;throw new TypeError("Unexpected ".concat(a," at ").concat(o,", expected ").concat(e))},f=function(){for(var e,t="";e=u("CHAR")||u("ESCAPED_CHAR");)t+=e;return t};l<r.length;){var p=u("CHAR"),v=u("NAME"),h=u("PATTERN");if(v||h){var m=p||"";-1===a.indexOf(m)&&(c+=m,m=""),c&&(i.push(c),c=""),i.push({name:v||s++,prefix:m,suffix:"",pattern:h||o,modifier:u("MODIFIER")||""})}else{var g=p||u("ESCAPED_CHAR");if(g)c+=g;else if(c&&(i.push(c),c=""),u("OPEN")){m=f();var y=u("NAME")||"",b=u("PATTERN")||"",w=f();d("CLOSE"),i.push({name:y||(b?s++:""),pattern:y&&!b?o:b,prefix:m,suffix:w,modifier:u("MODIFIER")||""})}else d("END")}}return i}(e,r),t,r)}function $t(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,a=r.exec(e.source);a;)t.push({name:a[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),a=r.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return $t(e,t,r).source}));return new RegExp("(?:".concat(n.join("|"),")"),Nt(r))}(e,t,r):jt(e,t,r)}var Dt=new Map,Kt=1e4,Wt=0;function Vt(e,t){var{path:r,exact:n=!1,strict:a=!1,sensitive:o=!0}=t;return(Array.isArray(r)?r:[r]).reduce(((t,r)=>{if(t)return t;var{regexp:i,keys:s}=function(e,t){var r="".concat(t.end).concat(t.strict).concat(t.sensitive),n=Dt.get(r);n||Dt.set(r,n=new Map);var a=n.get(e);if(a)return a;var o=[],i={regexp:$t(e,o,t),keys:o};return Wt<Kt&&(n.set(e,i),Wt++),i}(r,{end:n,strict:a,sensitive:o}),l=i.exec(e);if(!l)return null;var[c,...u]=l,d=e===c;return n&&!d?null:{path:r,url:"/"===r&&""===c?"/":c,isExact:d,params:s.reduce(((e,t,r)=>(e[t.name]=u[r],e)),{})}}),null)}function Ht(){return(Ht=(0,o.Z)((function*(e,t){for(var r of e){if("string"!=typeof r.path)throw console.error("Invalid route with invalid path:",r),new Error("Invalid route with invalid type of path: ".concat(typeof r.path));var n=qt(r,t.app.homepage,t.location.pathname);if(n&&(yield Zt(r,t)))return t.app.noAuthGuard||r.public||null==oo||!oo.auth||oo.auth.isLoggedIn()?{match:n,route:r}:"unauthenticated"}return"missed"}))).apply(this,arguments)}function qt(e,t,r){return Vt(r,{path:e.path.replace(/^\$\{APP.homepage\}/,t),exact:e.exact})}var zt,Gt=Symbol.for("tpl.asyncComputedPropsFromHost"),Jt=Symbol.for("tpl.stateStoreId"),Yt=Symbol.for("tpl.externalForEachItem"),Qt=Symbol.for("tpl.externalForEachIndex"),Xt=r(6666),er=new Set,tr=function(e){return e.REQUEST_FAILED="REQUEST_FAILED",e.SOMETHING_WENT_WRONG="SOMETHING_WENT_WRONG",e.LOGIN_TIMEOUT_MESSAGE="LOGIN_TIMEOUT_MESSAGE",e.NETWORK_ERROR="NETWORK_ERROR",e}({}),rr={[tr.REQUEST_FAILED]:"Request Failed",[tr.SOMETHING_WENT_WRONG]:"Something went wrong!",[tr.LOGIN_TIMEOUT_MESSAGE]:"You haven't logged in or your login session has expired. Login right now?",[tr.NETWORK_ERROR]:"Network error, please check your network."},nr={[tr.REQUEST_FAILED]:"请求失败",[tr.SOMETHING_WENT_WRONG]:"出现了一些问题！",[tr.LOGIN_TIMEOUT_MESSAGE]:"您还未登录或登录信息已过期，现在重新登录？",[tr.NETWORK_ERROR]:"网络错误，请检查您的网络连接。"},ar="core/runtime",or={en:rr,zh:nr},ir=Object.freeze({show:function(e){return zt?zt.resolve(e):"confirm"===e.type?confirm(e.content)?new Promise((e=>setTimeout((()=>{e()}),1))):new Promise(((e,t)=>setTimeout((()=>{t()}),1))):(alert(e.content),new Promise((e=>setTimeout((()=>{e()}),1e3))))}});function sr(e){var{search:t,pathname:r}=e,n=r?window.btoa(encodeURIComponent(r)):"",a=t?window.btoa(encodeURIComponent(t)):"";document.cookie="SALOGINPATH=".concat(n,"; path=/"),document.cookie="SALOGINQUERY=".concat(a,"; path=/")}function lr(e){if(e instanceof Event&&e.target instanceof HTMLScriptElement)return e.target.src;if(e instanceof R.HttpFetchError)return d.i18n.t("".concat(ar,":").concat(tr.NETWORK_ERROR));if(e instanceof R.HttpResponseError&&e.responseJson){if("string"==typeof e.responseJson.error)return e.responseJson.error;if("string"==typeof e.responseJson.msg)return e.responseJson.msg}return null==e?"Unknown error":e.toString()}function cr(e){return e instanceof R.HttpResponseError&&401===e.response.status&&!!e.responseJson&&100003===e.responseJson.code}var ur,dr,fr=!1;function pr(e){if(!(e instanceof R.HttpAbortError)){if(cr(e)&&!window.NO_AUTH_GUARD){if(fr)return;return fr=!0,void ir.show({type:"confirm",content:d.i18n.t("".concat(ar,":").concat(tr.LOGIN_TIMEOUT_MESSAGE))}).then((()=>{var e,t;e=mo().getFeatureFlags()["sso-enabled"],sr((t=O()).location),t.push(e?"/sso-auth/login":"/auth/login",{from:(0,a.Z)((0,a.Z)({},t.location),{},{state:void 0})}),fr=!1}),(()=>{fr=!1}))}console.error(e);var t=lr(e);t!==ur&&(ur=t,ir.show({type:"error",title:d.i18n.t("".concat(ar,":").concat(tr.REQUEST_FAILED)),content:t,contentStyle:{whiteSpace:"pre-wrap",wordBreak:"break-word"}}).then((()=>{ur=void 0})))}}var vr=Object.freeze({show:function(e){dr?dr.resolve(e):alert(e.message)}});function hr(e,t,r){t&&Object.entries(t).forEach((t=>{var[n,a]=t,o=wr(a,r,{element:e});for(var i of(e.addEventListener(n,o),e.$$listeners||(e.$$listeners=[]),e.$$listeners.push([n,o]),e.$$eventListeners||(e.$$eventListeners=[]),[].concat(a)))e.$$eventListeners.push([n,null,i])}))}function mr(e){return"string"==typeof e.action}function gr(e){return"string"==typeof e.useProvider}function yr(e){return!(!e.target&&!e.targetRef||!e.method&&!e.properties)}function br(e){return!!e.then}function wr(e,t,r){return function(n){var o,i;for(var s of[].concat(e))if(At(s,(0,a.Z)((0,a.Z)({},t),{},{event:n})))if(br(s))wr(s.then,t,r)(n);else if(mr(s)){var[l,c]=s.action.split(".");switch(s.action){case"history.push":case"history.replace":case"history.pushQuery":case"history.replaceQuery":case"history.pushAnchor":case"history.block":case"history.goBack":case"history.goForward":case"history.reload":case"history.unblock":Cr(n,c,s.args,s.callback,t);break;case"window.open":Ar(n,s.args,t);break;case"location.reload":case"location.assign":Pr(n,c,s.args,t);break;case"localStorage.setItem":case"localStorage.removeItem":case"sessionStorage.setItem":case"sessionStorage.removeItem":Mr(n,l,c,s.args,t);break;case"event.preventDefault":n.preventDefault();break;case"console.log":case"console.error":case"console.warn":case"console.info":_r(n,c,s.args,t);break;case"message.success":case"message.error":case"message.info":case"message.warn":Br(n,c,s.args,t);break;case"handleHttpError":pr(n.detail);break;case"context.assign":case"context.replace":case"context.refresh":case"context.load":Rr(n,c,s.args,null===(o=s.batch)||void 0===o||o,s.callback,t);break;case"state.update":case"state.refresh":case"state.load":Tr(n,c,s.args,null===(i=s.batch)||void 0===i||i,s.callback,t);break;case"tpl.dispatchEvent":var[u,d]=Nr(s.args,t,n);Be(t,s.action,": ".concat(u)).dispatchEvent(new CustomEvent(u,d));break;case"formstate.update":xr(n,s.args,s.callback,t);break;case"message.subscribe":case"message.unsubscribe":Lr(n,c,s.args,t,r,s.callback);break;case"theme.setDarkTheme":case"theme.setLightTheme":ne("theme.setDarkTheme"===s.action?"dark":"light");break;case"theme.setTheme":var[f]=Nr(s.args,t,n);ne(f);break;case"mode.setDashboardMode":case"mode.setDefaultMode":ce("mode.setDashboardMode"===s.action?"dashboard":"default");break;default:console.error("unknown event listener action:",s.action)}}else gr(s)?Sr(n,s,t,r):yr(s)?kr(n,s,t,r):console.error("unknown event handler:",s);else s.else&&wr(s.else,t,r)(n)}}function Sr(e,t,r,n){return Er.apply(this,arguments)}function Er(){return(Er=(0,o.Z)((function*(e,t,r,n){try{Ir(e,yield Qe(t.useProvider),t,"saveAs"!==t.method?"resolve":"saveAs",r,n)}catch(e){console.error(lr(e))}}))).apply(this,arguments)}function kr(e,t,r,n){var o=[],i=t.target,s=t.targetRef,l=i;if(("string"==typeof i?(0,T.isEvaluable)(i):ut(i))&&(l=Et(i,(0,a.Z)((0,a.Z)({},r),{},{event:e}))),"string"==typeof l)if("_self"===l)o.push(n.element);else if(t.multiple)o=Array.from(document.querySelectorAll(l));else{var c=document.querySelector(l);null!==c&&o.push(c)}else if(l)l instanceof HTMLElement?o.push(l):console.error("unexpected target:",l);else if(s){var u=s;("string"==typeof s?(0,T.isEvaluable)(s):ut(s))&&(u=Et(s,(0,a.Z)((0,a.Z)({},r),{},{event:e})));var d=[].concat(u),f=Be(r,"targetRef",": ".concat(d.join(", ")));o.push(...d.map((e=>{var t;return null===(t=f.$$getElementByRef)||void 0===t?void 0:t.call(f,e)})).filter(Boolean))}0!==o.length?function(e){return!!e.method}(t)?o.forEach((a=>{Ir(e,a,t,t.method,r,n,{useEventAsDefault:!0})})):function(e){return!!e.properties}(t)&&Ut(o,t.properties,(0,a.Z)((0,a.Z)({},r),{},{event:e})):console.error("target not found:",i||s)}function Ir(e,t,r,n,a,o,i){return Zr.apply(this,arguments)}function Zr(){return Zr=(0,o.Z)((function*(e,t,r,n,i,s,l){var c;if("function"==typeof t[n]){var u=function(){var a=(0,o.Z)((function*(){var a,o=Nr(r.args,i,e,l);return gr(r)&&null!=oo&&null!==(a=oo.flowApi)&&void 0!==a&&a.isFlowApiProvider(r.useProvider)&&(o=yield oo.flowApi.getArgsOfFlowApi(r.useProvider,o,n)),t[n](...o)}));return function(){return a.apply(this,arguments)}}();if(r.callback){var d,f=Fr(r.callback,i,s),p={progress:f("progress"),success:f("success"),error:f("error"),finally:f("finally")};if(gr(r)&&(d=Et(r.poll,(0,a.Z)((0,a.Z)({},i),{},{event:e}))),null!==(c=d)&&void 0!==c&&c.enabled)!function(e,t,r){var n,{progress:a,success:i,error:s,finally:l}=t,{interval:c,leadingRequestDelay:u,continueOnError:d,delegateLoadingBar:f,expectPollEnd:p,expectPollStopImmediately:v}=r,h=ko();function m(){return g.apply(this,arguments)}function g(){return(g=(0,o.Z)((function*(){var t;er.delete(n);try{if(!(t=null==v?void 0:v())){var r=yield e();(t=(null==v?void 0:v())||h!==ko())||(null==a||a(r),null!=p&&p(r)?(f&&window.dispatchEvent(new Event("request.end")),null==i||i(r),null==l||l()):y(null!=c?c:3e3))}}catch(e){(t=(null==v?void 0:v())||h!==ko())||(null==s||s(e),d?y(null!=c?c:3e3):null==l||l())}finally{f&&t&&window.dispatchEvent(new Event("request.end"))}}))).apply(this,arguments)}function y(e){n=setTimeout(m,e),er.add(n)}y(null!=u?u:0),f&&window.dispatchEvent(new Event("request.start"))}(u,p,d);else try{var v=yield u();p.success(v)}catch(e){p.error(e)}finally{p.finally()}}else u()}else console.error("target has no method:",{target:t,method:n})})),Zr.apply(this,arguments)}function Cr(e,t,r,n,a){var o=0,i=!1,s=t;switch(t){case"push":case"replace":case"pushQuery":case"replaceQuery":case"pushAnchor":o=2,i=!0;break;case"reload":i=!0;break;case"block":o=1,s="setBlockMessage"}var l=[];if(o>0&&((l=Nr(r,a,e,{useEventDetailAsDefault:!0})).length=o),i&&n){var c=Fr(n,a,void 0);l.push((e=>{c(e?"error":"success")({blocked:e}),c("finally")({blocked:e})}))}O()[s](...l)}function Ar(e,t,r){var[n,a,o]=Nr(t,r,e);window.open(n,a||"_self",o)}function Or(e,t,r,n,a,o){t?n.updateValues(e,r,(e=>Nr(e,a,o)[0])):e.forEach((e=>{var{name:t,value:i}=Nr([e],a,o)[0];n.updateValue(t,i,r)}))}function Rr(e,t,r,n,a,o){if(!Array.isArray(r)||!r.every(p.isObject)||"assign"!==t&&"replace"!==t){var[i,s]=Nr(r,o,e);o.ctxStore.updateValue(i,s,t,a,o)}else Or(r,n,t,o.ctxStore,o,e)}function Tr(e,t,r,n,a,o){if(Array.isArray(r)&&r.every(p.isObject)&&"update"===t)Or(r,n,"replace",_e(o,"state.".concat(t),": ".concat(JSON.stringify(r))),o,e);else{var[i,s]=Nr(r,o,e);_e(o,"state.".concat(t),": ".concat(i)).updateValue(i,s,"update"===t?"replace":t,a,o)}}function xr(e,t,r,n){var[a,o]=Nr(t,n,e);Je(n,"formstate.update",": ".concat(a)).updateValue(a,o,"replace",r,n)}function Pr(e,t,r,n){if("assign"===t){var[a]=Nr(r,n,e);location.assign(a)}else location[t]()}function Mr(e,t,r,n,a){var o="localStorage"===t?localStorage:sessionStorage,[i,s]=Nr(n,a,e);"setItem"===r?void 0!==s&&o.setItem(i,JSON.stringify(s)):o.removeItem(i)}function _r(e,t,r,n){console[t](...Nr(r,n,e,{useEventAsDefault:!0}))}function Br(e,t,r,n){var a=Nr(r,n,e,{useEventAsDefault:!0});vr.show({type:t,message:a[0]})}function Lr(e,t,r,n,a,o){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,o.Z)((function*(e,t,r,n,a,o){var i=()=>{var a,o=Nr(r,n,e);return null==oo||null===(a=oo.messageDispatcher)||void 0===a?void 0:a[t](...o)};if(o){var s=Fr(o,n,a);try{var l=yield i();s("success")(l)}catch(e){s("error")(e)}finally{s("finally")()}}else i()}))).apply(this,arguments)}function Fr(e,t,r){return function(n){return function(a){var o=null==e?void 0:e[n];if(o)try{var i=new CustomEvent("callback.".concat(n),{detail:a});wr(o,t,r)(i)}catch(e){console.error(e)}else"error"===n&&console.error("Unhandled callback error:",a)}}}function Nr(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Array.isArray(e)?Et(e,(0,a.Z)((0,a.Z)({},t),{},{event:r})):n.useEventAsDefault?[r]:n.useEventDetailAsDefault?[r.detail]:[]}var jr=["onBeforePageLoad","onPageLoad","onBeforePageLeave","onPageLeave","onAnchorLoad","onAnchorUnload"];class $r{constructor(e,t,r){(0,Xt.Z)(this,"type",void 0),(0,Xt.Z)(this,"data",new Map),(0,Xt.Z)(this,"changeEventType",void 0),(0,Xt.Z)(this,"pendingStack",[]),(0,Xt.Z)(this,"hostBrick",void 0),(0,Xt.Z)(this,"batchUpdate",!1),(0,Xt.Z)(this,"batchUpdateContextsNames",[]),(0,Xt.Z)(this,"rendererContext",void 0),(0,Xt.Z)(this,"routeMap",new WeakMap),this.type=e,this.changeEventType="FORM_STATE"===this.type?"formstate.change":"STATE"===this.type?"state.change":"context.change",this.hostBrick=t,this.rendererContext=r}getAllValues(){return Object.fromEntries([...this.data.entries()].map((e=>{var[t,{value:r}]=e;return[t,r]})))}getValue(e){var t;return null===(t=this.data.get(e))||void 0===t?void 0:t.value}getAffectListByContext(e){var t=[e];return this.data.forEach(((e,r)=>{e.deps&&e.deps.some((e=>t.includes(e)))&&t.push(r)&&t.push(...this.getAffectListByContext(r))})),t.shift(),[...new Set(t)]}updateValues(e,t,r){if(this.batchUpdate=!0,this.batchUpdateContextsNames=e.map((e=>e.name)),[...new Set(this.batchUpdateContextsNames)].length!==this.batchUpdateContextsNames.length)throw new Error("Batch update not allow to update same item");var n={},a={},o=[];e.forEach((e=>{var{name:a,value:i}=r([e]),s=this.data.get(a);o.push(...this.getAffectListByContext(a)),s&&(n[a]=s),this.updateValue(a,i,t)})),o.filter((e=>!n[e])).forEach((e=>{var t=this.data.get(e);t&&(a[e]=t)}));var i=e=>{for(var t in e){var r,n=e[t];null===(r=n.eventTarget)||void 0===r||r.dispatchEvent(new CustomEvent(this.changeEventType,{detail:n.value}))}};i(n),i(a),this.batchUpdate=!1}updateValue(e,t,r,n,o){var i=this.data.get(e);if(!i)throw new Error("".concat(this.type," '").concat(e,"' is not defined"));if("refresh"!==r&&"load"!==r)"replace"===r?i.value=t:(0,p.isObject)(i.value)?Object.assign(i.value,t):(console.warn('Non-object current value of "'.concat(this.type,".").concat(e,'" for "context.assign", try "context.replace" instead.')),i.value=t),this.batchUpdate||i.eventTarget.dispatchEvent(new CustomEvent(this.changeEventType,{detail:i.value}));else{if(!i.load)throw new Error("You can not ".concat(r,' "').concat(this.type,".").concat(e,'" which has no resolve'));var s;"load"===r&&(i.loaded?s=Promise.resolve(i.value):i.loading&&(s=i.loading));var l=e=>{var t,r;return"FlowApiNotFoundError"===(null==e?void 0:e.name)&&!!(r=null===(t=this.rendererContext)||void 0===t?void 0:t.renderId)&&r!==ko()};if(s||(s=i.loading=i.load((0,a.Z)({cache:"load"===r?"default":"reload"},t))).then((e=>{i.loaded=!0,i.value=e,i.eventTarget.dispatchEvent(new CustomEvent(this.changeEventType,{detail:i.value}))}),(e=>{l(e)||null!=n&&n.error||pr(e)})),n){var c=Fr(n,o);s.then((e=>{c("success")({value:e}),c("finally")()}),(e=>{!l(e)&&n.error&&c("error")(e),c("finally")()}))}}}define(e,t,r,n){if(Array.isArray(e)&&e.length>0){var a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"CTX",n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CTX",r=new Map;for(var n of e){var a=(0,x.collectMemberUsage)([n.if,n.value,n.resolve],t);r.set(n,a)}return r}(e,r),a=new Map;for(var i of Array.from(n.keys()).map((e=>e.name))){var s;a.set(i,(null!==(s=a.get(i))&&void 0!==s?s:0)+1)}var l=Array.from(n.values()).some((e=>e.hasNonStaticUsage)),c=new WeakSet,u=new Map,d=new Map([...new Set(e.map((e=>e.name)))].map((e=>[e,new Promise(((t,r)=>{u.set(e,{resolve:t,reject:r})}))]))),f=function(){var e=(0,o.Z)((function*(e){var r;c.add(e);var o=yield t(e);n.delete(e);var i=null!==(r=a.get(e.name))&&void 0!==r?r:0;if(o){if(u.get(e.name).resolve(),a.delete(e.name),0===i)throw new Error("Duplicated context defined: ".concat(e.name))}else 1===i?(u.get(e.name).resolve(),a.delete(e.name)):a.set(e.name,i-1);yield v()}));return function(t){return e.apply(this,arguments)}}(),p=l;function v(){return h.apply(this,arguments)}function h(){return h=(0,o.Z)((function*(){var e=Array.from(n.entries()).filter(function(e,t){return(r,n)=>t?0===n:![...r[1].usedProperties].some((t=>e.has(t)))}(a,p)).map((e=>e[0])).filter((e=>!c.has(e)));yield Promise.all(e.map(f))})),h.apply(this,arguments)}return{pendingResult:v().then((0,o.Z)((function*(){for(var e of(n.size>0&&(function(e,t){var r=new Map(e),n=new Set(Array.from(r.keys()).map((e=>e.name))),a=()=>{var e=!1;for(var[t,o]of r.entries())[...o.usedProperties].some((e=>n.has(e)))||(r.delete(t),n.delete(t.name),e=!0);e&&a()};if(a(),r.size>0)throw new ReferenceError("Circular ".concat(t," detected: ").concat(Array.from(r.keys()).map((e=>e.name)).join(", ")))}(n,r),p=!0,yield v()),u.values()))e.resolve()}))).catch((e=>{for(var t of u.values())t.reject(e);throw e})),pendingContexts:d}}(e,(e=>this.resolve(e,t,r,n)),this.type);this.pendingStack.push(a)}}onChange(e,t){var r;null===(r=this.data.get(e))||void 0===r||r.eventTarget.addEventListener(this.changeEventType,t)}waitFor(e){var t=this;return(0,o.Z)((function*(){var r=function*(t){yield Promise.all([...e].map((e=>t.get(e))))};for(var{pendingContexts:n}of t.pendingStack)yield*r(n)}))()}waitForAll(){var e=this;return(0,o.Z)((function*(){for(var{pendingContexts:t}of e.pendingStack)for(var r of t.values())r.catch((()=>{}));for(var{pendingResult:n}of e.pendingStack)yield n}))()}mountAsyncData(e){this.data.forEach((t=>{var r;if(t.async&&(!e||null!==(r=this.routeMap.get(e))&&void 0!==r&&r.has(t.name))){if(t.asyncMounted)return void console.error('Async data "'.concat(t.name,'" already mounted. This is a bug of Brick Next, please report it.'));t.asyncMounted=!0,t.loading.then((e=>{t.loaded=!0,t.value=e,t.eventTarget.dispatchEvent(new CustomEvent(this.changeEventType,{detail:e}))}))}}))}resolve(e,t,r,n){var i=this;return(0,o.Z)((function*(){if(!(yield Zt(e,t)))return!1;var s,l,c;r&&("STATE"===i.type?e.expose:"FORM_STATE"===i.type)&&(s=yield Pt(r,e.name));var u="eager";if(void 0===s){if(e.resolve){var d=(0,a.Z)({transform:"value"},e.resolve);if(yield Zt(e.resolve,t))l=function(){var e=(0,o.Z)((function*(e){var r;return(yield at(d,t,(0,a.Z)((0,a.Z)({},e),{},{renderId:null===(r=i.rendererContext)||void 0===r?void 0:r.renderId}))).value}));return function(t){return e.apply(this,arguments)}}(),"eager"==(u=e.resolve.async?"async":e.resolve.lazy?"lazy":"eager")?s=yield l():"async"===u&&(c=l());else if(!(0,p.hasOwnProperty)(e,"value"))return!1}l&&"eager"===u||void 0===e.value||(s=yield wt(e.value,t))}var f={name:e.name,value:s,eventTarget:new we,load:l,loaded:"eager"===u,loading:c,async:"async"===u,deps:[]};if("lazy"===u){var v,{trigger:h}=e.resolve;h&&jr.includes(h)&&(null===(v=i.rendererContext)||void 0===v||v.registerArbitraryLifeCycle(h,(()=>{i.updateValue(e.name,void 0,"load")})))}if(e.onChange&&f.eventTarget.addEventListener(i.changeEventType,wr(e.onChange,t)),e.track){var m=(0,x.strictCollectMemberUsage)(l?e.resolve:e.value,i.type);for(var g of(!l&&(f.deps=[...m]),m))i.onChange(g,i.batchAddListener((()=>{l?i.updateValue(e.name,{cache:"default"},"refresh"):i.updateValue(e.name,Et(e.value,t),"replace")}),e))}if(i.data.has(e.name))throw new Error("".concat(i.type," '").concat(e.name,"' has already been declared"));if(i.data.set(e.name,f),Array.isArray(n))for(var y of n){var b=i.routeMap.get(y);b?b.add(e.name):i.routeMap.set(y,new Set([e.name]))}return!0}))()}disposeDataInRoutes(e){for(var t of e){var r=this.routeMap.get(t);if(void 0!==r)for(var n of r)this.data.delete(n)}}batchAddListener(e,t){return r=>{this.batchUpdate&&this.batchUpdateContextsNames.includes(t.name)||e(r)}}}function Dr(e,t,r){var n,a,{reversedProxies:o,asyncHostPropertyEntries:i,externalSlots:s,tplStateStoreId:l,hostBrick:c}=e;if(t&&o){var u=o.properties.get(t);u&&(a=i,n=u.map((e=>{var{from:t,to:r}=e,n=a.filter((e=>e[0]===t));if(n.length>0&&r.refProperty)return[r.refProperty,Pt(n,t),!0]})).filter(Boolean));var d=o.slots.get(t);if(d&&s){var f=new Map;for(var{from:v,to:h}of d){var m,g,b,w,S=null!==(m=null===(g=s[v])||void 0===g?void 0:g.bricks)&&void 0!==m?m:[];if(S.length){var E=null!==(b=h.refSlot)&&void 0!==b?b:v,k=f.get(E);if(!k){k=[];for(var I=(0,p.hasOwnProperty)(r,E)?r[E].bricks.length+1:1,Z=0;Z<I;Z+=1)k.push([]);f.set(E,k)}var C=null!==(w=h.refPosition)&&void 0!==w?w:-1;k[(0,y.clamp)(C<0?k.length+C:C,0,k.length-1)].push(...(0,p.hasOwnProperty)(c.runtimeContext,"forEachItem")?Kr(S,c.runtimeContext.forEachItem,c.runtimeContext.forEachIndex):S)}}var A=function(){(0,p.hasOwnProperty)(r,O)||(r[O]={type:"bricks",bricks:[]});var e=r[O];e.bricks=R.flatMap(((t,r)=>r<e.bricks.length?t.concat(e.bricks[r]):t)),0===e.bricks.length&&delete r[O]};for(var[O,R]of f.entries())A()}}return{[Gt]:n,[Jt]:l}}function Kr(e,t,r){return e.map((e=>{var n;return(0,a.Z)((0,a.Z)({},e),{},{[Yt]:t,[Qt]:r,slots:Object.fromEntries(Object.entries(null!==(n=e.slots)&&void 0!==n?n:{}).map((e=>{var n,[a,o]=e;return[a,"routes"===o.type?{type:"routes",routes:Wr(o.routes,t,r)}:{type:"bricks",bricks:Kr(null!==(n=o.bricks)&&void 0!==n?n:[],t,r)}]})))})}))}function Wr(e,t,r){return e.map((e=>e.type&&"bricks"!==e.type?e:(0,a.Z)((0,a.Z)({},e),{},{bricks:Kr(e.bricks,t,r)})))}var Vr=["properties","slots","children"];function Hr(e,t){function r(e){return(0,p.isObject)(e)&&"function"!=typeof e?Array.isArray(e)?e.map(r):Object.fromEntries(Object.entries(e).map((e=>{var[t,a]=e;return(0,p.isObject)(a)&&"useBrick"===t?Array.isArray(a)?[t,a.map(n)]:[t,n(a)]:[t,r(a)]})).concat(Object.getOwnPropertySymbols(e).map((t=>[t,e[t]])))):e}function n(e){var{properties:o,slots:i,children:s}=e,l=(0,g.Z)(e,Vr),c=wn(s,i),u=Object.fromEntries(Object.entries(null!=c?c:{}).map((e=>{var t,[r,a]=e;return[r,{type:"bricks",bricks:(null!==(t=a.bricks)&&void 0!==t?t:[]).map(n)}]})));return(0,a.Z)((0,a.Z)({},l),{},{properties:r(o),slots:u},Dr(t,l.ref,u))}return r(e)}var qr=["slots","children"],zr=["properties","slots","children"];function Gr(e,t,r,n,o){var i,s=(0,y.uniqueId)("tpl-state-"),l=(0,a.Z)((0,a.Z)({},r.runtimeContext),{},{tplStateStoreId:s});delete l.forEachItem,delete l.forEachIndex,delete l.formStateStoreId;var c=new $r("STATE",r,o);l.tplStateStoreMap.set(s,c),l.tplStateStoreScope&&l.tplStateStoreScope.push(c);var{bricks:u,proxy:d,state:f,contracts:p}=Me.get(e);null==oo||null===(i=oo.flowApi)||void 0===i||i.collectWidgetContract(p),c.define(f,l,n);var{slots:v,children:h}=t,m=(0,g.Z)(t,qr),b=(0,a.Z)((0,a.Z)({},m),{},{brick:e});r.tplHostMetadata={internalBricksByRef:new Map,tplStateStoreId:s,proxy:d};var w={properties:new Map,slots:new Map};if(null!=d&&d.properties)for(var[S,E]of Object.entries(d.properties)){var k=w.properties.get(E.ref);k||(k=[],w.properties.set(E.ref,k)),k.push({from:S,to:E})}if(null!=d&&d.slots)for(var[I,Z]of Object.entries(d.slots)){var C=w.slots.get(Z.ref);C||(C=[],w.slots.set(Z.ref,C)),C.push({from:I,to:Z})}var A={reversedProxies:w,asyncHostPropertyEntries:n,externalSlots:wn(h,v),tplStateStoreId:s,hostBrick:r};return b.slots={"":{type:"bricks",bricks:u.map((e=>Jr(e,A)))}},b}function Jr(e,t){null===e.if&&delete e.if;var{properties:r,slots:n,children:o}=e,i=(0,g.Z)(e,zr),s=wn(o,n),l=Object.fromEntries(Object.entries(null!=s?s:{}).map((e=>{var r,[n,a]=e;return[n,{type:"bricks",bricks:(null!==(r=a.bricks)&&void 0!==r?r:[]).map((e=>Jr(e,t)))}]})));return(0,a.Z)((0,a.Z)({},i),{},{properties:Hr(r,t),slots:l},Dr(t,i.ref,l))}var Yr=function(e){return e[e.ROOT=1]="ROOT",e[e.BRICK=2]="BRICK",e[e.PLACEHOLDER=3]="PLACEHOLDER",e}({}),Qr="form-renderer.form-renderer",Xr=Symbol.for("form.stateStoreId"),en=["forms.general-form","form.general-form","eo-form"];function tn(e,t,r){var{id:n,bricks:o,events:i,context:s,mountPoint:l,instanceId:c}=e,{brick:u,properties:d}=e,f=t.find((e=>e.fieldId===n));if(f){var v=function(e){var t,r={id:e.fieldId,name:e.fieldId,label:e.name,dataset:{testid:e.fieldId}},n=()=>{var t,r;return{readOnly:null===(t=e.limit)||void 0===t?void 0:t.includes("READONLY"),required:null===(r=e.limit)||void 0===r?void 0:r.includes("REQUIRED")}};switch(e.fieldType){case"INT":t={brick:"forms.general-input-number",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description,precision:0,inputBoxStyle:{width:"100%"}})};break;case"BOOLEAN":t={brick:"forms.general-switch",properties:(0,a.Z)((0,a.Z)({},r),n())};break;case"FLOAT":t={brick:"forms.general-input-number",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description,inputBoxStyle:{width:"100%"}})};break;case"ENUM":t={brick:"forms.general-select",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{options:[{label:"选项一",value:1},{label:"选项二",value:2}],placeholder:e.description,inputBoxStyle:{width:"100%"}})};break;case"ENUMS":t={brick:"forms.general-select",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{mode:"multiple",options:[{label:"选项一",value:1},{label:"选项二",value:2}],placeholder:e.description,inputBoxStyle:{width:"100%"}})};break;case"DATE":case"TIME":t={brick:"forms.general-date-picker",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description})};break;case"IP":t={brick:"forms.general-input",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description,pattern:"((^s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))s*$)|(^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*$))",message:{pattern:"输入字符不匹配IP格式"}})};break;case"JSON":t={brick:"forms.general-textarea",properties:(0,a.Z)({},r)};break;case"ARRAY":t={brick:"forms.general-select",properties:(0,a.Z)({},r)};break;case"STRUCTURE":case"STRUCTURE_ARRAY":t={brick:"forms.cmdb-instance-select-panel",properties:(0,a.Z)((0,a.Z)({},r),n())};break;default:t={brick:"forms.general-input",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description})}}return t}(f);u||(u=v.brick),d=(0,a.Z)((0,a.Z)({},v.properties),d)}var h={brick:u,properties:d,iid:c,slot:l,events:i,context:s,children:rn(o,t,r),[Xr]:r};return(0,p.hasOwnProperty)(e,"if")&&(h.if=e.if),h}function rn(e,t,r){if(Array.isArray(e))return e.map((e=>tn(e,t,r)))}var nn=["blockingList","node","menuRequests","hasTrackingControls"],an=["if","permissionsPreCheck"],on=["formData"],sn=["src"],ln=["href"];function cn(e,t,r,n,a,o,i){return un.apply(this,arguments)}function un(){return un=(0,o.Z)((function*(e,t,r,n,o,i,s){var l=yield function(e,t){return Ht.apply(this,arguments)}(t,r),c={blockingList:[],menuRequests:[]};switch(l){case"missed":break;case"unauthenticated":c.unauthenticated=!0;break;default:var u,d=c.route=l.route;c.path=l.match.path;var p=(0,a.Z)((0,a.Z)({},r),{},{match:l.match});s&&p.ctxStore.disposeDataInRoutes(t);var v=o.concat(d);p.ctxStore.define(d.context,p,void 0,v),p.pendingPermissionsPreCheck.push(null==oo||null===(u=oo.checkPermissions)||void 0===u?void 0:u.preCheckPermissionsForBrickOrRoute(d,(e=>wt(e,p))));var{preLoadBricks:h}=d;if(Array.isArray(h)&&c.blockingList.push((0,f.loadBricksImperatively)(h,Eo())),"redirect"===d.type){var m;if("string"!=typeof(m="string"==typeof d.redirect?yield wt(d.redirect,p):(yield at((0,a.Z)({transform:"redirect"},d.redirect),p)).redirect))throw console.error("Unexpected redirect result:",m),new Error("Unexpected type of redirect result: ".concat(typeof m));c.redirect={path:m}}else{var g=function(e,t){if(e){if("brick"===e.type)throw console.error("Set menu with brick is dropped in v3:",e),new Error("Set menu with brick is dropped in v3");if("resolve"!==e.type)return wt(e,t);console.warn("Set menu with resolve is not supported in v3 yet:",e)}}(d.menu,p);g&&c.menuRequests.push(g),"routes"===d.type?bn(c,yield cn(e,d.routes,p,n,v,i)):bn(c,yield dn(e,d.bricks,p,n,v,i)),e.tag===Yr.BRICK&&n.memoizeMenuRequests(d,c.menuRequests)}}return c})),un.apply(this,arguments)}function dn(e,t,r,n,a,o,i,s){return fn.apply(this,arguments)}function fn(){return(fn=(0,o.Z)((function*(e,t,r,n,a,o,i,s){var l={blockingList:[],menuRequests:[]},c=null!=s?s:[];return(yield Promise.all(t.map(((t,s)=>pn(e,t,r,n,a,o,c.concat(s),i&&new Map(i)))))).forEach(((t,r)=>{t.hasTrackingControls&&n.memoize(o,c.concat(r),t.node,e),bn(l,t)})),l}))).apply(this,arguments)}function pn(e,t,r,n,a,o){return vn.apply(this,arguments)}function vn(){return vn=(0,o.Z)((function*(e,t,r,n,i,s){var l,c,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new Map,v={blockingList:[],menuRequests:[]};if(!t.brick)return t.template?console.error("Legacy templates are dropped in v3:",t):console.error("Invalid brick:",t),v;var{if:h,permissionsPreCheck:m}=t,b=(0,g.Z)(t,an);if(function(e){return"string"==typeof e?(0,T.isTrackAll)(e):ut(e)&&(0,T.isTrackAll)(dt(e))}(h))return pn(e,(0,a.Z)({brick:":if",dataSource:h,permissionsPreCheck:m,slots:{"":{type:"bricks",bricks:[b]}}},Object.getOwnPropertySymbols(t).reduce(((e,r)=>(0,a.Z)((0,a.Z)({},e),{},{[r]:t[r]})),{})),r,n,i,s,u,d);var S=t[Jt],E=t[Xr],k=(0,a.Z)((0,a.Z)({},r),{},{tplStateStoreId:S,formStateStoreId:E});(0,p.hasOwnProperty)(t,Yt)&&(k.forEachItem=t[Yt],k.forEachIndex=t[Qt]);var{context:I}=t;if(Array.isArray(I)&&I.length>0){var Z=Re(k);Te(Z,"Defining context on bricks","check your brick:",t),Z||k.ctxStore.define(I,k)}if(k.pendingPermissionsPreCheck.push(null==oo||null===(l=oo.checkPermissions)||void 0===l?void 0:l.preCheckPermissionsForBrickOrRoute(t,(e=>wt(e,k)))),!(yield function(e,t){return Rt.apply(this,arguments)}(t,k)))return v;var C=t.brick;if(C.startsWith(":")){var A;!function(e){if(":forEach"!==e&&":if"!==e&&":switch"!==e)throw new Error('Unknown storyboard control node: "'.concat(e,'"'))}(C);var{dataSource:O}=t,R=function(){var r=(0,o.Z)((function*(r){var a,o=yield wt(O,r),l=":forEach"===C?"":":switch"===C?String(o):o?"":"else",c=wn(t.children,t.slots),f=c&&(0,p.hasOwnProperty)(c,l)&&(null===(a=c[l])||void 0===a?void 0:a.bricks);if(!Array.isArray(f))return{blockingList:[],menuRequests:[]};switch(C){case":forEach":return Array.isArray(o)?function(e,t,r,n,a,o,i,s,l){return hn.apply(this,arguments)}(e,o,f,r,n,i,s,d,u):{blockingList:[],menuRequests:[]};case":if":case":switch":return dn(e,f,r,n,i,s,d,u)}}));return function(e){return r.apply(this,arguments)}}(),P=function(){var t=(0,o.Z)((function*(t){var r,n=yield R(t);return null!==(r=n.node)&&void 0!==r||(n.node={tag:Yr.PLACEHOLDER,return:e}),n}));return function(e){return t.apply(this,arguments)}}(),M=yield P(k),{onMount:_,onUnmount:B}=null!==(A=t.lifeCycle)&&void 0!==A?A:{},{contextNames:L,stateNames:U}=xt(O);if(L||U){M.hasTrackingControls=!0;var F=0,N=function(){var t=(0,o.Z)((function*(){var t=++F,[r,a,o]=yn(k),i=yield P(r),l=[...a,...o];if(yield gn(i,r,l),F===t)for(var c of(B&&wr(B,k)(new CustomEvent("unmount",{detail:{rerender:!0}})),n.reRender(s,u,i.node,e),_&&wr(_,r)(new CustomEvent("mount",{detail:{rerender:!0}})),l))c.mountAsyncData()}));return function(){return t.apply(this,arguments)}}(),j=(0,y.debounce)(N);if(L)for(var $ of L)k.ctxStore.onChange($,j);if(U)for(var D of U)_e(k,"STATE",': "'.concat(O,'"')).onChange(D,j)}return _&&n.registerArbitraryLifeCycle("onMount",(()=>{wr(_,k)(new CustomEvent("mount",{detail:{rerender:!1}}))})),B&&n.registerArbitraryLifeCycle("onUnmount",(()=>{wr(B,k)(new CustomEvent("unmount",{detail:{rerender:!1}}))})),M}/\.tpl-/.test(C)&&!Me.get(C)&&(yield Sn((0,f.loadBricksImperatively)([C],Eo()),"brick",C,n.unknownBricks));var K,W,V=function(e,t){if(!e.includes(".")&&e.startsWith("tpl-")&&t){var r="".concat(t,".").concat(e);if(Me.get(r))return r}return!!Me.get(e)&&e}(C,null===(c=k.app)||void 0===c?void 0:c.id);if(V){var H,q=null!==(H=d.get(V))&&void 0!==H?H:0;if(q>=10)throw new Error('Maximum custom template stack overflowed: "'.concat(V,'"'));d.set(V,q+1)}else C.includes("-")&&!customElements.get(C)&&(C===Qr?customElements.define(Qr,class extends HTMLElement{get $$typeof(){return"form-renderer"}}):v.blockingList.push(Sn((0,f.enqueueStableLoadBricks)([C],Eo()),"brick",C,n.unknownBricks)));if(C===Qr){var z,G=null!==(z=t.properties)&&void 0!==z?z:{};({formData:K}=G),W=(0,g.Z)(G,on)}else W=t.properties;var J=[],Y=function(e,t,r){return(0,p.isObject)(e)?Object.entries(e).map((e=>{var[n,a]=e,{contextNames:o,stateNames:i,formStateNames:s}=xt(a);return(o||i||s)&&r.push({contextNames:o,stateNames:i,formStateNames:s,propName:n,propValue:a}),[n,wt(a,t,{$$lazyForUseBrick:!0,$$stateOfUseBrick:"useBrick"===n?gt.USE_BRICK:gt.INITIAL})]})):[]}(W,k,J),Q=t[Gt];Q&&Y.push(...Q);var X="script"===C;if(X||"link"===C){var ee=yield _t(Y);if(X?ee.src:"stylesheet"===ee.rel&&ee.href){var te,re=null!==(te=window.PUBLIC_ROOT)&&void 0!==te?te:"";if(X){var{src:ne}=ee,ae=(0,g.Z)(ee,sn);yield Sn((0,f.loadScript)(ne,re,ae),"script",ne,"silent")}else{var{href:oe}=ee;ae=(0,g.Z)(ee,ln),yield Sn((0,f.loadStyle)(oe,re,ae),"stylesheet",oe,"silent")}return v}}var ie={tag:Yr.BRICK,type:V||C,return:e,slotId:s,events:t.events,runtimeContext:k,portal:t.portal,iid:t.iid,ref:t.ref};v.node=ie;var se=(0,x.strictCollectMemberUsage)([t.events,t.lifeCycle],"PROCESSORS",2);se.size>0&&v.blockingList.push(Sn((0,f.loadProcessorsImperatively)(se,Eo()),"processors",[...se].join(", "),n.unknownBricks));var le=[],ce=function(){var e=(0,o.Z)((function*(){ie.properties=yield _t(Y),function(e,t){var r=function(t){var r=()=>{e.element&&Ut(e.element,{[t.propName]:t.propValue},e.runtimeContext)};if(t.contextNames)for(var n of t.contextNames)e.runtimeContext.ctxStore.onChange(n,r);if(t.stateNames){var a=_e(e.runtimeContext,"STATE",': "'.concat(t.propValue,'"'));for(var o of t.stateNames)a.onChange(o,r)}if(t.formStateNames){var i=Je(e.runtimeContext,"FORM_STATE",': "'.concat(t.propValue,'"'));for(var s of t.formStateNames)i.onChange(s,r)}};for(var n of t)r(n)}(ie,J)}));return function(){return e.apply(this,arguments)}}();le.push(ce()),n.registerBrickLifeCycle(ie,t.lifeCycle);var ue,de=t;V?de=Gr(V,t,ie,Y,n):C===Qr&&(de=function(e,t,r,n,o){var i,s,l="string"==typeof e?JSON.parse(e):e,c=(0,y.uniqueId)("form-state-"),u=(0,a.Z)((0,a.Z)({},r.runtimeContext),{},{formStateStoreId:c});delete u.forEachItem,delete u.forEachIndex,delete u.tplStateStoreId;var d=new $r("FORM_STATE",void 0,o);u.formStateStoreMap.set(c,d),u.formStateStoreScope&&u.formStateStoreScope.push(d);var f=null!==(i=l.context)&&void 0!==i?i:[];f.some((e=>"params"===e.name))||f.push({name:"params"}),d.define(f,u,n);var v=tn(l.formSchema,l.fields,c);return en.includes(v.brick)&&t.events&&(v.events=function(e,t){var r=null!=e?e:{};for(var[n,a]of Object.entries(t))r[n]=(0,p.hasOwnProperty)(r,n)?[r[n],a].flat():a;return r}(v.events,t.events)),"boolean"!=typeof(null===(s=t.properties)||void 0===s?void 0:s.renderRoot)||t.properties.renderRoot?(0,a.Z)((0,a.Z)({},t),{},{slots:void 0,children:[{brick:"eo-micro-view",properties:{style:{padding:"12px"}},children:[v]}]}):(0,a.Z)((0,a.Z)({},t),{},{slots:void 0,children:[v]})}(K,t,ie,Y,n)),de.portal&&(ie.slotId=void 0),V?(delete(ue=(0,a.Z)({},k)).forEachItem,delete ue.forEachIndex):ue=k;var fe=function(){var e=(0,o.Z)((function*(){var e=wn(de.children,de.slots);if(e){var t=new Set,r=yield Promise.all(Object.entries(e).map(((e,r)=>{var[s,l]=e;return"routes"!==l.type?dn(ie,l.bricks,ue,n,i,s,d):(k.flags["incremental-sub-route-rendering"]&&(t.add(r),n.performIncrementalRender(function(){var e=(0,o.Z)((function*(e){var{homepage:t}=ue.app,{pathname:r}=e;if(!w(t,r)||!i.every((e=>qt(e,t,r))))return!1;var o,[c,u,d]=yn((0,a.Z)((0,a.Z)({},ue),{},{location:e,query:new URLSearchParams(e.search)})),f=!1,p=[];try{if(!(o=yield cn(ie,l.routes,c,n,i,s,!0)).route)return!1;if(n.reBailout(o))return!0;p=[...u,...d],yield gn(o,c,[c.ctxStore,...p]),yield n.reMergeMenuRequests(l.routes,o.route,o.menuRequests)}catch(e){console.error("Incremental sub-router failed:",e);var v=n.reCatch(e,ie);if(!v)return!0;({failed:f,output:o}=v),yield n.reMergeMenuRequests(l.routes,o.route,o.menuRequests)}if(n.reRender(s,[],o.node,ie),!f)for(var h of(c.ctxStore.mountAsyncData(o.route),p))h.mountAsyncData();return!0}));return function(t){return e.apply(this,arguments)}}())),cn(ie,l.routes,ue,n,i,s))}))),l=(0,a.Z)((0,a.Z)({},v),{},{node:void 0,blockingList:[],menuRequests:[]});r.forEach(((e,r)=>{t.has(r)&&n.memoize(s,[],e.node,ie),bn(l,e)})),l.node&&(ie.child=l.node),bn(v,(0,a.Z)((0,a.Z)({},l),{},{node:void 0}))}}));return function(){return e.apply(this,arguments)}}();return le.push(fe()),yield Promise.all(le),v})),vn.apply(this,arguments)}function hn(){return(hn=(0,o.Z)((function*(e,t,r,n,o,i,s,l,c){var u={blockingList:[],menuRequests:[]},d=t.length;return(yield Promise.all(t.map(((t,u)=>Promise.all(r.map(((r,f)=>pn(e,r,(0,a.Z)((0,a.Z)({},n),{},{forEachItem:t,forEachIndex:u}),o,i,s,c.concat(u*d+f),l&&new Map(l))))))))).flat().forEach(((t,r)=>{t.hasTrackingControls&&o.memoize(s,c.concat(r),t.node,e),bn(u,t)})),u}))).apply(this,arguments)}function mn(e){return[e.ctxStore,...e.tplStateStoreMap.values(),...e.formStateStoreMap.values()]}function gn(e,t,r){return(0,f.flushStableLoadBricks)(),Promise.all([...e.blockingList,...r.map((e=>e.waitForAll())),...t.pendingPermissionsPreCheck])}function yn(e){var t=[],r=[];return[(0,a.Z)((0,a.Z)({},e),{},{tplStateStoreScope:t,formStateStoreScope:r}),t,r]}function bn(e,t){var{blockingList:r,node:n,menuRequests:a,hasTrackingControls:o}=t,i=(0,g.Z)(t,nn);if(e.blockingList.push(...r),e.menuRequests.push(...a),n)if(e.node){for(var s=e.node;s.sibling;)s=s.sibling;s.sibling=n}else e.node=n;Object.assign(e,i)}function wn(e,t){var r=t;if(Array.isArray(e)&&!r)for(var n of(r={},e)){var a,o=null!==(a=n.slot)&&void 0!==a?a:"";(0,p.hasOwnProperty)(r,o)||(r[o]={type:"bricks",bricks:[]}),r[o].bricks.push(n)}return r}function Sn(e,t,r,n){return"silent"===n?e.catch((e=>{console.error("Load ".concat(t,' "').concat(r,'" failed:'),e)})):e}function En(e){var t,{ref:r,runtimeContext:n,element:a}=e;if(r&&n.tplStateStoreId){var{hostBrick:o}=_e(n,"bindTemplateProxy"),i=o.tplHostMetadata;i.internalBricksByRef.set(r,e);var s=null===(t=i.proxy)||void 0===t?void 0:t.events;if(s){var l=function(e){if(u.ref===r){var t,n,i,s=t=>{t.bubbles&&t.stopPropagation(),o.element.dispatchEvent(new CustomEvent(e,{detail:t.detail,bubbles:t.bubbles,cancelable:t.cancelable,composed:t.composed}))},l=null!==(t=u.refEvent)&&void 0!==t?t:e;a.addEventListener(l,s),null!==(i=(n=a).$$proxyListeners)&&void 0!==i||(n.$$proxyListeners=[]),a.$$proxyListeners.push([l,s])}};for(var[c,u]of Object.entries(s))l(c)}}}function kn(e){var{ref:t,runtimeContext:r,element:n}=e;if(null!=r&&r.tplStateStoreId&&t){var{hostBrick:a}=_e(r,"unbindTemplateProxy"),o=a.tplHostMetadata;for(var[i,s]of(o.internalBricksByRef.delete(t),null!==(l=n.$$proxyListeners)&&void 0!==l?l:[])){var l;n.removeEventListener(i,s)}delete n.$$proxyListeners}}function In(e){e.replaceChildren()}function Zn(e,t){for(var r=e.child,n=[];r;){if(r.tag===Yr.BRICK){var a,o=r.type;o.includes("-")&&!customElements.get(o)&&console.error("Undefined custom element: ".concat(o)),"basic-bricks.script-brick"===o&&console.warn("`basic-bricks.script-brick` is deprecated, please take caution when using it");var i=t&&r===e.child?t:document.createElement(o);r.element=i,r.slotId&&i.setAttribute("slot",r.slotId),r.iid&&(i.dataset.iid=r.iid),null!==(a=r.tplHostMetadata)&&void 0!==a&&a.tplStateStoreId&&(i.dataset.tplStateStoreId=r.tplHostMetadata.tplStateStoreId),Lt(i,r.properties),hr(i,r.events,r.runtimeContext),r.tplHostMetadata&&(i.$$tplStateStore=_e({tplStateStoreId:r.tplHostMetadata.tplStateStoreId,tplStateStoreMap:r.runtimeContext.tplStateStoreMap},"mount")),En(r),r.portal?n.push(i):r.return&&(r.return.childElements||(r.return.childElements=[]),r.return.childElements.push(i))}if(r.child)r=r.child;else if(r.sibling)r=r.sibling;else{for(var s,l=r.return;l;){var c;if(l.childElements)l.tag===Yr.ROOT?null===(c=l.container)||void 0===c||c.append(...l.childElements):l.element.append(...l.childElements),l.childElements=void 0;if(l.tag===Yr.ROOT&&n.length>0&&("function"==typeof l.createPortal?l.createPortal():l.createPortal).append(...n),l.sibling)break;l=l.return}r=null===(s=l)||void 0===s?void 0:s.sibling}}}var Cn,An,On=["onMount","onUnmount","onMediaChange","onScrollIntoView","onMessage","onMessageClose"],Rn=["onBeforePageLoad","onPageLoad","onPageLeave","onBeforePageLeave","onAnchorLoad","onAnchorUnload"],Tn=new WeakMap,xn=new WeakMap,Pn=new WeakMap,Mn=new WeakMap,_n=new WeakMap,Bn=new WeakMap,Ln=new WeakMap,Un=new WeakMap,Fn=new WeakMap,Nn=new WeakSet,jn=new WeakSet,$n=new WeakSet,Dn=new WeakSet;class Kn{constructor(e,t){var r;(0,i.Z)(this,Dn),(0,i.Z)(this,$n),(0,i.Z)(this,jn),(0,i.Z)(this,Nn),(0,Xt.Z)(this,"scope",void 0),(0,Xt.Z)(this,"unknownBricks",void 0),(0,Xt.Z)(this,"renderId",void 0),(0,s.Z)(this,Tn,{writable:!0,value:void 0}),(0,s.Z)(this,xn,{writable:!0,value:{onBeforePageLoad:[],onPageLoad:[],onPageLeave:[],onBeforePageLeave:[],onAnchorLoad:[],onAnchorUnload:[],onMediaChange:[],onScrollIntoView:[],onMount:[],onUnmount:[],onMessage:[],onMessageClose:[]}}),(0,s.Z)(this,Pn,{writable:!0,value:new Map}),(0,s.Z)(this,Mn,{writable:!0,value:void 0}),(0,s.Z)(this,_n,{writable:!0,value:new Map}),(0,s.Z)(this,Bn,{writable:!0,value:void 0}),(0,s.Z)(this,Ln,{writable:!0,value:void 0}),(0,s.Z)(this,Un,{writable:!0,value:void 0}),(0,s.Z)(this,Fn,{writable:!0,value:[]}),this.scope=e,this.unknownBricks=null!==(r=null==t?void 0:t.unknownBricks)&&void 0!==r?r:"throw",(0,c.Z)(this,Tn,null==t?void 0:t.routeHelper),this.renderId=null==t?void 0:t.renderId}setInitialMenuRequests(e){(0,c.Z)(this,Ln,e)}memoizeMenuRequests(e,t){(0,u.Z)(this,Un)||(0,c.Z)(this,Un,new WeakMap),(0,u.Z)(this,Un).set(e,t[0])}reMergeMenuRequests(e,t,r){var n=this;return(0,o.Z)((function*(){var a,o;for(var i of e)if(a=(0,u.Z)(n,Un).get(i)){o=i;break}var s=(0,u.Z)(n,Ln),l=a?s.indexOf(a):-1;if(-1===l){if(!r.length)return;s.push(...r)}else s.splice(l,s.length-l,...r);o&&o!==t&&(0,u.Z)(n,Un).delete(o),yield(0,u.Z)(n,Tn).mergeMenus(s)}))()}reBailout(e){return(0,u.Z)(this,Tn).bailout(e)}reCatch(e,t){return(0,u.Z)(this,Tn).catch(e,t)}didPerformIncrementalRender(e){var t=this;return(0,o.Z)((function*(){return(yield Promise.all((0,u.Z)(t,Fn).map((t=>t(e))))).some((e=>e))}))()}performIncrementalRender(e){(0,u.Z)(this,Fn).push(e)}registerBrickLifeCycle(e,t){if(t){var r=[...On,..."page"===this.scope?Rn:[]];for(var n of r){var a=t[n];a&&(0,u.Z)(this,xn)[n].push({brick:e,handlers:a})}(0,y.isEmpty)(t.useResolves)||console.error("`lifeCycle.useResolves` is dropped in v3:",t)}}registerArbitraryLifeCycle(e,t){var r=(0,u.Z)(this,_n).get(e);r?r.add(t):(0,u.Z)(this,_n).set(e,new Set([t]))}memoize(e,t,r,n){(0,u.Z)(this,Bn)||(0,c.Z)(this,Bn,new WeakMap);var a=[null!=e?e:"",...t].join("."),o=(0,u.Z)(this,Bn).get(n);o||(o=new Map,(0,u.Z)(this,Bn).set(n,o)),o.set(a,{node:r,last:zn(r),lastNormal:Gn(r),lastPortal:Yn(r)})}reRender(e,t,r,n){var a,o,i,s,c,d,f,p,v,h,m=[null!=e?e:"",...t].join("."),g=(0,u.Z)(this,Bn).get(n).get(m),{node:y,last:b,lastNormal:w,lastPortal:S}=g;(null==y?void 0:y.tag)===Yr.PLACEHOLDER?(a=null!==(i=null===(s=function(e){return Jn(e,!0)}(y))||void 0===s?void 0:s.element)&&void 0!==i?i:null,o=null!==(c=null===(d=function(e){return Qn(e,!0)}(y))||void 0===d?void 0:d.element)&&void 0!==c?c:null):(a=null!==(f=null==w||null===(p=w.element)||void 0===p?void 0:p.nextSibling)&&void 0!==f?f:null,o=null!==(v=null==S||null===(h=S.element)||void 0===h?void 0:h.nextSibling)&&void 0!==v?v:null);var E,k=zn(r);g.node=r,g.last=k,g.lastNormal=Gn(r),g.lastPortal=Yn(r);for(var I=n.child;I&&I!==b;){if(I.sibling===y){E=I;break}I=I.sibling}var Z=document.createDocumentFragment(),C=document.createDocumentFragment(),A={tag:Yr.ROOT,container:Z,createPortal:C,child:r};for(I=r;I;)I.return=A,I=I.sibling;var O,R,T=Xn(y,b);for((0,l.Z)(this,Nn,Wn).call(this,T),Zn(A),E?E.sibling=r:n.child=r,k&&(k.sibling=null==b?void 0:b.sibling),I=r;I;)I.return=n,I=I.sibling;if(n.tag===Yr.ROOT?null===(O=n.container)||void 0===O||O.insertBefore(Z,a):null===(R=n.element)||void 0===R||R.insertBefore(Z,a),C.childNodes.length>0){for(var x,P=r;P&&P.return;)P=P.return;if((null===(x=P)||void 0===x?void 0:x.tag)!==Yr.ROOT)throw new Error("Cannot find render root node. This is a bug of Brick Next, please report it.");("function"==typeof P.createPortal?P.createPortal():P.createPortal).insertBefore(C,o)}var M=Xn(r,k);(0,l.Z)(this,jn,Vn).call(this,M)}dispose(){for(var e of Object.values((0,u.Z)(this,xn)))e.length=0;for(var t of(0,u.Z)(this,Pn).values()){for(var r of t)r.disconnect();t.length=0}(0,u.Z)(this,Pn).clear(),(0,u.Z)(this,Mn)&&(ke.removeEventListener("change",(0,u.Z)(this,Mn)),(0,c.Z)(this,Mn,void 0)),(0,c.Z)(this,Bn,void 0),(0,c.Z)(this,Ln,void 0),(0,c.Z)(this,Un,void 0),(0,u.Z)(this,_n).clear(),(0,u.Z)(this,Fn).length=0}dispatchBeforePageLoad(){(0,l.Z)(this,$n,Hn).call(this,"onBeforePageLoad",new CustomEvent("page.beforeLoad"))}dispatchPageLoad(){var e=new CustomEvent("page.load");(0,l.Z)(this,$n,Hn).call(this,"onPageLoad",e),window.dispatchEvent(e)}dispatchBeforePageLeave(e){(0,l.Z)(this,$n,Hn).call(this,"onBeforePageLeave",new CustomEvent("page.beforeLeave",{detail:e}))}dispatchPageLeave(){(0,l.Z)(this,$n,Hn).call(this,"onPageLeave",new CustomEvent("page.leave"))}dispatchAnchorLoad(){var{hash:e}=O().location;e&&"#"!==e?(0,l.Z)(this,$n,Hn).call(this,"onAnchorLoad",new CustomEvent("anchor.load",{detail:{hash:e,anchor:e.substring(1)}})):(0,l.Z)(this,$n,Hn).call(this,"onAnchorUnload",new CustomEvent("anchor.unload"))}initializeScrollIntoView(){for(var{brick:e,handlers:t}of(0,u.Z)(this,xn).onScrollIntoView)(0,l.Z)(this,Dn,qn).call(this,e,t)}initializeMediaChange(){(0,c.Z)(this,Mn,(e=>{(0,l.Z)(this,$n,Hn).call(this,"onMediaChange",new CustomEvent("media.change",{detail:G(e.detail)}))})),ke.addEventListener("change",(0,u.Z)(this,Mn))}initializeMessageDispatcher(){var e,t=function(e){var t=function(t){var r;null==oo||null===(r=oo.messageDispatcher)||void 0===r||r.onMessage(t.channel,(r=>{wr(t.handlers,e.runtimeContext,e)(new CustomEvent("message.push",{detail:r}))}))};for(var r of[].concat(n))t(r)};for(var{brick:r,handlers:n}of(0,u.Z)(this,xn).onMessage)t(r);null==oo||null===(e=oo.messageDispatcher)||void 0===e||e.onClose((()=>{(0,l.Z)(this,$n,Hn).call(this,"onMessageClose",new CustomEvent("message.close"))}))}dispatchOnMount(){(0,l.Z)(this,$n,Hn).call(this,"onMount",new CustomEvent("mount"))}dispatchOnUnmount(){(0,l.Z)(this,$n,Hn).call(this,"onUnmount",new CustomEvent("unmount"))}}function Wn(e){var t=[...On,..."page"===this.scope?Rn:[]],r=[];for(var n of t){var a=(0,y.remove)((0,u.Z)(this,xn)[n],(t=>e.has(t.brick)));"onUnmount"===n&&r.push(...a)}for(var o of e){var i,s,l=(0,u.Z)(this,Pn).get(o);if(null!=l&&l.length){for(var c of l)c.disconnect();l.length=0,(0,u.Z)(this,Pn).delete(o)}kn(o),null===(i=o.element)||void 0===i||delete i.$$tplStateStore,null===(s=o.element)||void 0===s||s.remove()}var d=new CustomEvent("unmount");for(var{brick:f,handlers:p}of r)wr(p,f.runtimeContext,f)(d)}function Vn(e){var t=new CustomEvent("mount");for(var{brick:r,handlers:n}of(0,u.Z)(this,xn).onMount)e.has(r)&&wr(n,r.runtimeContext,r)(t);for(var{brick:a,handlers:o}of(0,u.Z)(this,xn).onScrollIntoView)e.has(a)&&(0,l.Z)(this,Dn,qn).call(this,a,o)}function Hn(e,t){for(var{brick:r,handlers:n}of(0,u.Z)(this,xn)[e])wr(n,r.runtimeContext,r)(t);var a=(0,u.Z)(this,_n).get(e);if(a)for(var o of a)o()}function qn(e,t){var r,n=null!==(r=t.threshold)&&void 0!==r?r:.1,a=new IntersectionObserver(((r,a)=>{r.forEach((r=>{r.isIntersecting&&r.intersectionRatio>=n&&(wr(t.handlers,e.runtimeContext,e)(new CustomEvent("scroll.into.view")),a.disconnect())}))}),{threshold:n});a.observe(e.element);var o=(0,u.Z)(this,Pn).get(e);o||(o=[],(0,u.Z)(this,Pn).set(e,o)),o.push(a)}function zn(e){for(var t=e;null!==(r=t)&&void 0!==r&&r.sibling;){var r;t=t.sibling}return t}function Gn(e){return Jn(e,!1)}function Jn(e,t){for(var r,n=e;n;){if(n.tag===Yr.BRICK&&!n.portal){if(t)return n;r=n}n=n.sibling}return r}function Yn(e){return Qn(e,!1)}function Qn(e,t){for(var r,n=e;n;){if(n.tag===Yr.BRICK&&n.portal){if(t)return n;r=n}if(n.child)n=n.child;else if(n.sibling)n=n.sibling;else{for(var a,o=n.return;o&&!o.sibling;)o=o.return;n=null===(a=o)||void 0===a?void 0:a.sibling}}return r}function Xn(e,t){for(var r=new Set,n=e;n;)if(n.tag===Yr.BRICK&&r.add(n),n.child)n=n.child;else{if(n===t)break;if(n.sibling)n=n.sibling;else{for(var a,o=n.return;o&&o!==t&&!o.sibling;)o=o.return;if(o===t)break;n=null===(a=o)||void 0===a?void 0:a.sibling}}return r}function ea(){if(!Cn){if(Cn={isInIframe:!1,isInIframeOfSameSite:!1,isInIframeOfNext:!1,isInIframeOfVisualBuilder:!1,isInIframeOfLegacyConsole:!1},window!==window.parent){Cn.isInIframe=!0;try{if(window.origin===window.parent.origin){Cn.isInIframeOfSameSite=!0;var e="/next/"===m(),t=window.parent.location.pathname,r=t.startsWith("/next/");Cn.isInIframeOfNext=0==(Number(e)^Number(r)),Cn.isInIframeOfVisualBuilder=t.startsWith("".concat(r?"/next":"","/visual-builder/")),Cn.isInIframeOfLegacyConsole=e&&!r}}catch(e){}}Object.freeze(Cn)}return Cn}function ta(e){var t;if(!e.$$registerCustomTemplateProcessed){e.$$registerCustomTemplateProcessed=!0;var r=null===(t=e.meta)||void 0===t?void 0:t.customTemplates;if(Array.isArray(r))for(var n of r){var a=n.name.includes(".")?n.name:"".concat(e.app.id,".").concat(n.name);Me.define(a,n)}}}function ra(){return ra=(0,o.Z)((function*(e){if(!e.$$fulfilled)return e.$$fulfilling||(e.$$fulfilling=function(e){return na.apply(this,arguments)}(e)),e.$$fulfilling})),ra.apply(this,arguments)}function na(){return(na=(0,o.Z)((function*(e){var t;yield null==oo||null===(t=oo.fulfilStoryboard)||void 0===t?void 0:t.call(oo,e),L(e),Object.assign(e,{$$fulfilled:!0,$$fulfilling:null})}))).apply(this,arguments)}function aa(e){var t;t="8.2"===e?"v8-2":"v8",document.documentElement.dataset.ui=t}var oa=new WeakMap,ia=new WeakMap,sa=new WeakMap,la=new WeakMap,ca=new WeakMap,ua=new WeakMap,da=new WeakMap,fa=new WeakMap,pa=new WeakMap,va=new WeakMap,ha=new WeakMap,ma=new WeakMap,ga=new WeakSet,ya=new WeakSet,ba=new WeakSet,wa=new WeakSet;class Sa{constructor(e){(0,i.Z)(this,wa),(0,i.Z)(this,ba),(0,i.Z)(this,ya),(0,i.Z)(this,ga),(0,s.Z)(this,oa,{writable:!0,value:void 0}),(0,s.Z)(this,ia,{writable:!0,value:!1}),(0,s.Z)(this,sa,{writable:!0,value:void 0}),(0,s.Z)(this,la,{writable:!0,value:void 0}),(0,s.Z)(this,ca,{writable:!0,value:void 0}),(0,s.Z)(this,ua,{writable:!0,value:void 0}),(0,s.Z)(this,da,{writable:!0,value:new Set}),(0,s.Z)(this,fa,{writable:!0,value:0}),(0,s.Z)(this,pa,{writable:!0,value:void 0}),(0,s.Z)(this,va,{writable:!0,value:void 0}),(0,s.Z)(this,ha,{writable:!0,value:void 0}),(0,s.Z)(this,ma,{writable:!0,value:void 0}),(0,c.Z)(this,oa,e);var t=O();window.addEventListener("beforeunload",(e=>{(0,l.Z)(this,ga,Ea).call(this,{})?(e.preventDefault(),e.returnValue=""):delete e.returnValue})),t.block(((e,t)=>(0,l.Z)(this,ga,Ea).call(this,{location:e,action:t})))}getRenderId(){return(0,u.Z)(this,pa)}getRuntimeContext(){return(0,u.Z)(this,ca)}getRecentApps(){return{currentApp:(0,u.Z)(this,va),previousApp:(0,u.Z)(this,ha)}}getNavConfig(){return(0,u.Z)(this,ma)}bootstrap(){var e=this;window.AbortController&&(An=new AbortController,R.http.interceptors.request.use((e=>{var t;return(0,a.Z)((0,a.Z)({},e),{},{options:(0,a.Z)((0,a.Z)({},e.options),{},{signal:null!==(t=e.options)&&void 0!==t&&t.noAbortOnRouteChange?null:An.signal})})})));var t=O();(0,c.Z)(this,sa,t.location);var r=0;return t.listen(function(){var t=(0,o.Z)((function*(t,n){var o,i,s,d,f,p=++r,v={hash:void 0,state:void 0};if(void 0!==t.key&&("POP"!==n||void 0!==(0,u.Z)(e,sa).key&&!1!==(null===(o=(0,u.Z)(e,sa).state)||void 0===o?void 0:o.notify))||(v.key=void 0),((0,h.locationsAreEqual)((0,a.Z)((0,a.Z)({},(0,u.Z)(e,sa)),v),(0,a.Z)((0,a.Z)({},t),v))||"POP"!==n&&!1===(null===(i=t.state)||void 0===i?void 0:i.notify))&&(d=!0),d||(d=yield null===(f=(0,u.Z)(e,ua))||void 0===f?void 0:f.didPerformIncrementalRender(t)),r===p)if(d)(0,c.Z)(e,sa,t);else{if(An&&(An.abort(),An=new AbortController),(0,c.Z)(e,sa,t),null===(s=(0,u.Z)(e,ua))||void 0===s||s.dispatchPageLeave(),"POP"===n&&S(b((0,u.Z)(e,oa),t.pathname)))return void window.location.reload();(0,u.Z)(e,ia)?(0,c.Z)(e,la,t):(V("locationChange"),(0,l.Z)(e,ba,Ia).call(e,t).catch(pr))}}));return function(e,r){return t.apply(this,arguments)}}()),(0,l.Z)(this,ba,Ia).call(this,t.location)}}function Ea(e){var t,r=O(),n=r.getBlockMessage();null===(t=(0,u.Z)(this,ua))||void 0===t||t.dispatchBeforePageLeave(e);var a=r.getBlockMessage();return!n&&a&&r.unblock(),a}function ka(e,t,r){var n,a;if((0,c.Z)(this,fa,(n=(0,u.Z)(this,fa),a=n++,n)),a>10){var o='Infinite redirect detected: from "'.concat(r.pathname).concat(r.search).concat(r.hash,'" to "').concat(e,'"');throw new Error(o)}O().replace(e,t)}function Ia(e){return Za.apply(this,arguments)}function Za(){return(Za=(0,o.Z)((function*(e){(0,c.Z)(this,ia,!0);try{yield(0,l.Z)(this,wa,Ca).call(this,e)}finally{if((0,c.Z)(this,ia,!1),(0,u.Z)(this,la)){var t=(0,u.Z)(this,la);(0,c.Z)(this,la,void 0),yield(0,l.Z)(this,ba,Ia).call(this,t)}}}))).apply(this,arguments)}function Ca(e){return Aa.apply(this,arguments)}function Aa(){return Aa=(0,o.Z)((function*(e){var t,r,n,i=this,s=(0,c.Z)(this,pa,(0,y.uniqueId)("render-id-"));et=new WeakSet,nt.clear(),null==oo||null===(t=oo.flowApi)||void 0===t||t.clearCollectWidgetContract(),O().unblock();var d=null==oo||null===(r=oo.pageView)||void 0===r?void 0:r.create(),f=b((0,u.Z)(this,oa),e.pathname),p=null===(n=(0,u.Z)(this,ca))||void 0===n?void 0:n.app;null!=f&&f.app&&(yield function(e){return ra.apply(this,arguments)}(f));var v,h=(0,c.Z)(this,va,null==f?void 0:f.app),m=p&&h?p.id!==h.id:p!==h,g=mo().getFeatureFlags(),w=(0,u.Z)(this,ua),S=(t,r)=>{null==d||d({status:"redirected"}),(0,u.Z)(this,da).add(w),(0,l.Z)(this,ya,ka).call(this,t,r,e)},E=()=>{var t=g["sso-enabled"]?"/sso-auth/login":"/auth/login";sr(e),S(t,{from:e})},k=document.querySelector("#main-mount-point"),I=document.querySelector("#portal-mount-point"),Z={tag:Yr.ROOT,container:k,createPortal:I},C=()=>{var e;for(var t of(In(k),In(I),(0,u.Z)(this,da).add(w),(0,u.Z)(this,da)))t&&(t.dispatchOnUnmount(),t.dispose());(0,u.Z)(this,da).clear(),null==oo||null===(e=oo.messageDispatcher)||void 0===e||e.reset(),m&&((0,c.Z)(this,ha,p),window.dispatchEvent(new CustomEvent("app.change",{detail:{previousApp:p,currentApp:h}})))};if(ee(h&&(oe()[h.id]||h.theme)||"light"),se("default"),h){var A,T,x,P,M,_;null==oo||null===(A=oo.checkInstalledApps)||void 0===A||A.preCheckInstalledApps(f,(e=>!!Co(e)));var B={bailout:e=>e.unauthenticated?(E(),!0):e.redirect?(S(e.redirect.path,e.redirect.state),!0):void(0,c.Z)(this,fa,0),mergeMenus:(v=(0,o.Z)((function*(e){var t=yield Promise.all(e);(0,c.Z)(i,ma,function(e){var t={breadcrumb:[]};for(var r of e){var{breadcrumb:n}=r;n&&(n.overwrite?t.breadcrumb=n.items:t.breadcrumb.push(...n.items))}return t}(t))})),function(e){return v.apply(this,arguments)}),catch:(t,r)=>{if(!cr(t)||window.NO_AUTH_GUARD){if(!(t instanceof R.HttpAbortError)){var n=mo().getMiscSettings().noAuthGuardLoginPath;return cr(t)&&n?void S(n,{from:e}):{failed:!0,output:{node:{tag:Yr.BRICK,type:"div",properties:{textContent:lr(t)},runtimeContext:null,return:r},blockingList:[],menuRequests:[]}}}(0,u.Z)(this,da).add(w)}else E()}},L=(0,c.Z)(this,ua,new Kn("page",{routeHelper:B,renderId:s})),U=(0,c.Z)(this,ca,{app:h,location:e,query:new URLSearchParams(e.search),flags:g,sys:(0,a.Z)((0,a.Z)((0,a.Z)({},null==oo||null===(T=oo.auth)||void 0===T?void 0:T.getAuth()),ea()),{},{settings:{brand:mo().getBrandSettings()}}),ctxStore:new $r("CTX",void 0,L),pendingPermissionsPreCheck:[null==oo||null===(x=oo.checkPermissions)||void 0===x?void 0:x.preCheckPermissions(f)],tplStateStoreMap:new Map,formStateStoreMap:new Map});(0,c.Z)(this,ma,void 0),ta(f),ge(null===(P=f.meta)||void 0===P?void 0:P.functions,h),null==oo||null===(M=oo.flowApi)||void 0===M||M.collectContract(null===(_=f.meta)||void 0===_?void 0:_.contracts);var F,N=!1,j=[];try{if(F=yield cn(Z,function(e){if(window.parent===window)return e;var t=e,r=(0,y.findLastIndex)(t,(e=>e.path.startsWith("${APP.homepage}/_dev_only_/template-preview/")));t=[...t.slice(0,r+1),{path:"${APP.homepage}/_dev_only_/template-preview/:templateId",bricks:[{brick:"span"}],menu:!1,exact:!0},...t.slice(r+1)];var n=(0,y.findLastIndex)(t,(e=>e.path.startsWith("${APP.homepage}/_dev_only_/snippet-preview/")));return[...t.slice(0,n+1),{path:"${APP.homepage}/_dev_only_/snippet-preview/:snippetId",bricks:[{brick:"span"}],menu:!1,exact:!0},...t.slice(n+1)]}(f.routes),U,L,[]),B.bailout(F))return;j=mn(U),yield gn(F,U,j),yield B.mergeMenus(F.menuRequests),L.setInitialMenuRequests(F.menuRequests)}catch(e){console.error("Router failed:",e);var $=B.catch(e,Z);if(!$)return;({failed:N,output:F}=$)}if(Z.child=F.node,C(),F.route&&"routes"!==F.route.type||N){if(N||L.dispatchBeforePageLoad(),ne(),ce(),window.DISABLE_REACT_FLUSH_SYNC=!1,aa(null==h?void 0:h.uiVersion),Zn(Z),setTimeout((()=>{window.DISABLE_REACT_FLUSH_SYNC=!0})),window.scrollTo(0,0),N)null==d||d({status:"failed"});else{for(var D of(L.dispatchPageLoad(),L.dispatchAnchorLoad(),L.dispatchOnMount(),L.initializeScrollIntoView(),L.initializeMediaChange(),L.initializeMessageDispatcher(),j))D.mountAsyncData();null==d||d({status:"ok",path:F.path,pageTitle:document.title})}return void V("rendered")}}else{if(!window.NO_AUTH_GUARD&&null!=oo&&oo.auth&&!oo.auth.isLoggedIn())return void E();C()}ne(),ce();var K={tag:Yr.BRICK,type:"div",properties:{textContent:"Page not found"},runtimeContext:null,return:Z};Z.child=K,Zn(Z),window.scrollTo(0,0),null==d||d({status:"not-found"}),V("rendered")})),Aa.apply(this,arguments)}var Oa="undefined"!=typeof BRICK_PACKAGES?BRICK_PACKAGES:null;function Ra(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function Ta(e){return e<=1?"".concat(100*Number(e),"%"):e}function xa(e){return 1===e.length?"0"+e:String(e)}function Pa(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*r*(t-e):r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Ma(e){return _a(e)/255}function _a(e){return parseInt(e,16)}var Ba={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function La(e){var t,r,n,a={r:0,g:0,b:0},o=1,i=null,s=null,l=null,c=!1,u=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(Ba[e])e=Ba[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var r=ja.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=ja.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=ja.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=ja.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=ja.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=ja.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=ja.hex8.exec(e))?{r:_a(r[1]),g:_a(r[2]),b:_a(r[3]),a:Ma(r[4]),format:t?"name":"hex8"}:(r=ja.hex6.exec(e))?{r:_a(r[1]),g:_a(r[2]),b:_a(r[3]),format:t?"name":"hex"}:(r=ja.hex4.exec(e))?{r:_a(r[1]+r[1]),g:_a(r[2]+r[2]),b:_a(r[3]+r[3]),a:Ma(r[4]+r[4]),format:t?"name":"hex8"}:!!(r=ja.hex3.exec(e))&&{r:_a(r[1]+r[1]),g:_a(r[2]+r[2]),b:_a(r[3]+r[3]),format:t?"name":"hex"}}(e)),"object"==typeof e&&($a(e.r)&&$a(e.g)&&$a(e.b)?(t=e.r,r=e.g,n=e.b,a={r:255*Ra(t,255),g:255*Ra(r,255),b:255*Ra(n,255)},c=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):$a(e.h)&&$a(e.s)&&$a(e.v)?(i=Ta(e.s),s=Ta(e.v),a=function(e,t,r){e=6*Ra(e,360),t=Ra(t,100),r=Ra(r,100);var n=Math.floor(e),a=e-n,o=r*(1-t),i=r*(1-a*t),s=r*(1-(1-a)*t),l=n%6;return{r:255*[r,i,o,o,s,r][l],g:255*[s,r,r,i,o,o][l],b:255*[o,o,s,r,r,i][l]}}(e.h,i,s),c=!0,u="hsv"):$a(e.h)&&$a(e.s)&&$a(e.l)&&(i=Ta(e.s),l=Ta(e.l),a=function(e,t,r){var n,a,o;if(e=Ra(e,360),t=Ra(t,100),r=Ra(r,100),0===t)a=r,o=r,n=r;else{var i=r<.5?r*(1+t):r+t-r*t,s=2*r-i;n=Pa(s,i,e+1/3),a=Pa(s,i,e),o=Pa(s,i,e-1/3)}return{r:255*n,g:255*a,b:255*o}}(e.h,i,l),c=!0,u="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(o=e.a)),o=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(o),{ok:c,format:e.format||u,r:Math.min(255,Math.max(a.r,0)),g:Math.min(255,Math.max(a.g,0)),b:Math.min(255,Math.max(a.b,0)),a:o}}var Ua="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),Fa="[\\s|\\(]+(".concat(Ua,")[,|\\s]+(").concat(Ua,")[,|\\s]+(").concat(Ua,")\\s*\\)?"),Na="[\\s|\\(]+(".concat(Ua,")[,|\\s]+(").concat(Ua,")[,|\\s]+(").concat(Ua,")[,|\\s]+(").concat(Ua,")\\s*\\)?"),ja={CSS_UNIT:new RegExp(Ua),rgb:new RegExp("rgb"+Fa),rgba:new RegExp("rgba"+Na),hsl:new RegExp("hsl"+Fa),hsla:new RegExp("hsla"+Na),hsv:new RegExp("hsv"+Fa),hsva:new RegExp("hsva"+Na),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function $a(e){return Boolean(ja.CSS_UNIT.exec(String(e)))}var Da=2,Ka=.16,Wa=.05,Va=.05,Ha=.15,qa=5,za=4,Ga=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Ja(e){var t=function(e,t,r){e=Ra(e,255),t=Ra(t,255),r=Ra(r,255);var n=Math.max(e,t,r),a=Math.min(e,t,r),o=0,i=n,s=n-a,l=0===n?0:s/n;if(n===a)o=0;else{switch(n){case e:o=(t-r)/s+(t<r?6:0);break;case t:o=(r-e)/s+2;break;case r:o=(e-t)/s+4}o/=6}return{h:o,s:l,v:i}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function Ya(e){var t=e.r,r=e.g,n=e.b;return"#".concat(function(e,t,r,n){var a=[xa(Math.round(e).toString(16)),xa(Math.round(t).toString(16)),xa(Math.round(r).toString(16))];return a.join("")}(t,r,n))}function Qa(e,t,r){var n;return(n=Math.round(e.h)>=60&&Math.round(e.h)<=240?r?Math.round(e.h)-Da*t:Math.round(e.h)+Da*t:r?Math.round(e.h)+Da*t:Math.round(e.h)-Da*t)<0?n+=360:n>=360&&(n-=360),n}function Xa(e,t,r){return 0===e.h&&0===e.s?e.s:((n=r?e.s-Ka*t:t===za?e.s+Ka:e.s+Wa*t)>1&&(n=1),r&&t===qa&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2)));var n}function eo(e,t,r){var n;return(n=r?e.v+Va*t:e.v-Ha*t)>1&&(n=1),Number(n.toFixed(2))}function to(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],n=La(e),a=qa;a>0;a-=1){var o=Ja(n),i=Ya(La({h:Qa(o,a,!0),s:Xa(o,a,!0),v:eo(o,a,!0)}));r.push(i)}r.push(Ya(n));for(var s=1;s<=za;s+=1){var l=Ja(n),c=Ya(La({h:Qa(l,s),s:Xa(l,s),v:eo(l,s)}));r.push(c)}return"dark"===t.theme?Ga.map((function(e){var n,a,o,i=e.index,s=e.opacity;return Ya((n=La(t.backgroundColor||"#141414"),o=100*s/100,{r:((a=La(r[i])).r-n.r)*o+n.r,g:(a.g-n.g)*o+n.g,b:(a.b-n.b)*o+n.b}))})):r}var ro,no,ao,oo,io={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},so={},lo={};function co(e){return':root,\n[data-override-theme="light"] {\n'.concat(e,"}")}function uo(e){return'html[data-theme="dark-v2"],\n[data-override-theme="dark-v2"] {\n'.concat(e,"}")}function fo(e){return e.match(/[0-9a-fA-F]{2}/g).map((e=>parseInt(e,16))).join(", ")}function po(e,t,r){return"dark"===t?to(e,{theme:t,backgroundColor:r})[5]:e}function vo(e){var t=[];if(["light","dark"].forEach((r=>{if(e[r])switch(e.type){case"brandColor":t.push(function(e,t){return("dark"===e?uo:co)("string"==typeof(r=t)?"  --color-brand: ".concat(r,";\n"):["  --color-brand: ".concat(r.default,";"),"  --color-brand-hover: ".concat(r.hover,";"),"  --color-brand-active: ".concat(r.active,";"),""].join("\n"));var r}(r,e[r]));break;case"baseColors":t.push(function(e,t,r){return("dark"===e?uo:co)("".concat(function(e,t){return Object.entries(e).flatMap((e=>{var[r,n]=e;return function(e){if(!/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(e))throw new Error("Invalid base color name: ".concat(JSON.stringify(e)))}(r),n.map(((e,n)=>["  --palette-".concat(r,"-").concat(n+1,"-channel: ").concat(fo(e),";")].concat("dark"===t?[]:"  --palette-".concat(r,"-").concat(n+1,": rgb(var(--palette-").concat(r,"-").concat(n+1,"-channel));")).join("\n"))).concat("")})).join("\n")}(function(e,t,r){return Object.fromEntries(Object.entries(e).map((e=>{var[n,a]=e;return[n,to(a,"dark"===t?{theme:t,backgroundColor:r}:void 0)]})))}(t,e,r),e),"\n").concat(function(e,t,r){return Object.entries({green:"green",red:"red",blue:"blue",orange:"orange",cyan:"cyan",purple:"purple",geekblue:"indigo"}).flatMap((n=>{var[a,o]=n;return["  --theme-".concat(a,"-color-rgb-channel: ").concat(fo(po(t[o],e,r)),";"),..."dark"===e?[]:["  --theme-".concat(a,"-color: var(--palette-").concat(o,"-6);"),"  --theme-".concat(a,"-border-color: var(--palette-").concat(o,"-3);")],"  --theme-".concat(a,"-background: var(--palette-").concat(o,"-").concat("dark"===e?2:1,");"),""]})).join("\n")}(e,t,r)))}(r,e[r],e.backgroundColor));break;case"variables":t.push(function(e,t){return("dark"===e?uo:co)(function(e){return Object.entries(e).map((e=>{var[t,r]=e;return function(e){if(!/^--[a-z][a-z0-9]*(?:-[a-z0-9]+)*$/.test(e))throw new Error("Invalid css variable name: ".concat(JSON.stringify(e)))}(t),"  ".concat(t,": ").concat(r,";")})).concat("").join("\n")}(t))}(r,e[r]))}})),t.length>0){var r=document.createElement("style");return r.textContent=t.join("\n\n"),document.head.appendChild(r),()=>{r.remove()}}}function ho(e){if(ro)throw new Error("Cannot create multiple runtimes");return window.addEventListener("message",(e=>{var{data:t}=e;if((null==t?void 0:t.source)===$){var r=t.payload;switch(null==r?void 0:r.type){case D:W=r.active;break;case K:N=r.panel}}})),oo=null==e?void 0:e.hooks,(0,d.initializeI18n)(ar,or),v.locale(d.i18n.language),d.i18n.on("languageChanged",(()=>{v.locale(d.i18n.language)})),A(),ro=new wo}Object.keys(io).forEach((function(e){so[e]=to(io[e]),so[e].primary=so[e][5],lo[e]=to(io[e],{theme:"dark",backgroundColor:"#141414"}),lo[e].primary=lo[e][5]})),so.red,so.volcano,so.gold,so.orange,so.yellow,so.lime,so.green,so.cyan,so.blue,so.geekblue,so.purple,so.magenta,so.grey;var mo=function(){var e=C();if(e)return function(){return new Proxy(e.getRuntime(),{get(){switch(arguments.length<=1?void 0:arguments[1]){case"getCurrentApp":case"getRecentApps":case"hasInstalledApp":case"getDesktops":case"getLaunchpadSettings":case"getLaunchpadSiteMap":case"toggleLaunchpadEffect":case"applyPageTitle":case"getNavConfig":case"getFeatureFlags":case"getMiscSettings":case"getBrandSettings":return Reflect.get(...arguments)}}})}}()||function(){return ro},go=new WeakMap,yo=new WeakMap,bo=new WeakSet;class wo{constructor(){(0,i.Z)(this,bo),(0,s.Z)(this,go,{writable:!0,value:!1}),(0,s.Z)(this,yo,{writable:!0,value:!1})}initialize(e){var t;if((0,u.Z)(this,go))throw new Error("The runtime cannot be initialized more than once");(0,c.Z)(this,go,!0),function(e){if(Array.isArray(e.storyboards)){var t=function(){if(r.locales){var e="tmp/".concat(r.id);Object.entries(r.locales).forEach((t=>{var[r,n]=t;d.i18n.addResourceBundle(r,e,n)})),r.localeName=d.i18n.getFixedT(null,e)("name",r.name),Object.keys(r.locales).forEach((t=>{d.i18n.removeResourceBundle(t,e)}))}else r.localeName=r.name};for(var{app:r}of e.storyboards)t()}(0,p.isObject)(e.settings)&&(0,p.deepFreeze)(e.settings),e.brickPackages&&(0,p.deepFreeze)(e.brickPackages)}(e),no=e;var r,{notification:n,dialog:o}=(0,l.Z)(this,bo,So).call(this);!1!==n&&(r=null!=n?n:"basic.show-notification",(0,this.loadBricks)([r]).then((()=>{dr=document.createElement(r)}),(e=>{console.error("Load notification service failed:",e)}))),!1!==o&&function(e,t){t([e]).then((()=>{zt=document.createElement(e)}),(e=>{console.error("Load dialog service failed:",e)}))}(null!=o?o:"basic.show-dialog",this.loadBricks),function(e){e&&(e.brandColor?vo((0,a.Z)({type:"brandColor"},e.brandColor)):e.baseColors?vo((0,a.Z)({type:"baseColors"},e.baseColors)):e.variables&&vo((0,a.Z)({type:"variables"},e.variables)))}(null===(t=e.settings)||void 0===t||null===(t=t.misc)||void 0===t?void 0:t.theme)}bootstrap(e){var t=this;return(0,o.Z)((function*(){if(e&&t.initialize(e),(0,u.Z)(t,yo))throw new Error("The runtime cannot be bootstrapped more than once");(0,c.Z)(t,yo,!0),ao=new Sa(no.storyboards),yield ao.bootstrap()}))()}getRecentApps(){var e,t;return null!==(e=null===(t=ao)||void 0===t?void 0:t.getRecentApps())&&void 0!==e?e:{}}getCurrentApp(){var e;return null===(e=ao)||void 0===e?void 0:e.getRecentApps().currentApp}hasInstalledApp(e,t){return Ge(e,t)}getFeatureFlags(){var e,t;return(0,a.Z)((0,a.Z)((0,a.Z)({},null===(e=no)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.featureFlags),null===(t=ao)||void 0===t||null===(t=t.getRecentApps().currentApp)||void 0===t||null===(t=t.config)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.featureFlags),{},{"migrate-to-brick-next-v3":!0})}getMiscSettings(){var e,t;return(0,a.Z)((0,a.Z)({},null===(e=no)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.misc),null===(t=ao)||void 0===t||null===(t=t.getRecentApps().currentApp)||void 0===t||null===(t=t.config)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.misc)}getBrandSettings(){var e;return(0,a.Z)({base_title:"DevOps 管理专家"},null===(e=no)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.brand)}getLaunchpadSettings(){var e;return(0,a.Z)({columns:7,rows:4},null===(e=no)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.launchpad)}getDesktops(){var e,t;return null!==(e=null===(t=no)||void 0===t?void 0:t.desktops)&&void 0!==e?e:[]}getLaunchpadSiteMap(){var e,t;return null!==(e=null===(t=no)||void 0===t?void 0:t.siteSort)&&void 0!==e?e:[]}toggleLaunchpadEffect(e){document.body.classList.toggle("launchpad-open",e)}applyPageTitle(e){var t=this.getBrandSettings().base_title;document.title=e?"".concat(e," - ").concat(t):t}getNavConfig(){var e;return null===(e=ao)||void 0===e?void 0:e.getNavConfig()}loadBricks(e){return(0,f.loadBricksImperatively)(e,Eo())}}function So(){var e,t;return null!==(e=null===(t=no)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.presetBricks)&&void 0!==e?e:{}}function Eo(){var e,t,r,n;return null!==(e=null!==(t=null!==(r=null===(n=no)||void 0===n?void 0:n.brickPackages)&&void 0!==r?r:Oa)&&void 0!==t?t:window.STANDALONE_BRICK_PACKAGES)&&void 0!==e?e:[]}function ko(){var e;return null===(e=ao)||void 0===e?void 0:e.getRenderId()}function Io(){var e;return null===(e=ao)||void 0===e?void 0:e.getRuntimeContext()}function Zo(e){var t;return null===(t=no)||void 0===t||null===(t=t.storyboards)||void 0===t?void 0:t.find((t=>t.app.id===e))}function Co(e){var t;return null===(t=Zo(e))||void 0===t?void 0:t.app}function Ao(){for(var e,t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];null==oo||null===(e=oo.auth)||void 0===e||null===(t=e.authenticate)||void 0===t||t.call(e,...n)}function Oo(){var e;return null==oo||null===(e=oo.auth)||void 0===e?void 0:e.getAuth()}function Ro(){var e,t;return null==oo||null===(e=oo.auth)||void 0===e||null===(t=e.logout)||void 0===t?void 0:t.call(e)}function To(){var e;return null==oo||null===(e=oo.auth)||void 0===e?void 0:e.isLoggedIn()}function xo(e,t,r){return Po.apply(this,arguments)}function Po(){return(Po=(0,o.Z)((function*(e,t,r){return it(yield Qe(e),e,"resolve",t,r)}))).apply(this,arguments)}function Mo(e){var t,{portal:r,scope:n="fragment",unknownBricks:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r;t=r||(()=>((i=document.createElement("div")).style.position="absolute",i.style.width=i.style.height="0",document.body.append(i),i));var s,l,c=!1;return{render(r){var u=arguments;return(0,o.Z)((function*(){var{theme:o,uiVersion:d,context:f,functions:p,templates:v,i18n:h}=u.length>1&&void 0!==u[1]?u[1]:{};if(c)throw new Error("The root is unmounted and cannot be rendered any more");var m=[].concat(r),g=s,b=(0,y.uniqueId)("render-id-");s=new Kn(n,{unknownBricks:a,renderId:b});var w={ctxStore:new $r("CTX",void 0,s),pendingPermissionsPreCheck:[],tplStateStoreMap:new Map,formStateStoreMap:new Map},S={tag:Yr.ROOT,container:e,createPortal:t};if("page"===n){var E;ee(null!=o?o:"light"),se("default"),aa(d);var k={id:"demo",homepage:"/demo"};w.app=k;var I={app:k,meta:{i18n:h,customTemplates:v}};null===(E=l)||void 0===E||E(),l=L(I),ta(I),ge(p,k)}w.ctxStore.define(f,w);var Z,C=!1,A=[];try{Z=yield dn(S,m,w,s,[]),A=mn(w),yield gn(Z,w,A)}catch(e){C=!0,Z={node:{tag:Yr.BRICK,type:"div",properties:{textContent:lr(e)},return:S,runtimeContext:null},blockingList:[],menuRequests:[]}}if(S.child=Z.node,null==g||g.dispatchOnUnmount(),null==g||g.dispose(),In(e),i&&In(i),"page"===n&&(C||s.dispatchBeforePageLoad(),ne(),ce()),Zn(S),"page"===n&&window.scrollTo(0,0),!C){for(var O of A)O.mountAsyncData();"page"===n&&s.dispatchPageLoad(),s.dispatchOnMount(),s.initializeScrollIntoView(),s.initializeMediaChange(),s.initializeMessageDispatcher()}}))()},unmount(){c||(c=!0,In(e),i&&(In(i),r||i.remove()))}}}function _o(e,t){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,o.Z)((function*(e,t){var r,n,o,i,[s,l,c]=yn((0,a.Z)((0,a.Z)({},Io()),{},{data:t,pendingPermissionsPreCheck:[]}));null!==(r=s.tplStateStoreMap)&&void 0!==r||(s.tplStateStoreMap=new Map),null!==(n=s.formStateStoreMap)&&void 0!==n||(s.formStateStoreMap=new Map);var u=new Kn("fragment"),d={tag:Yr.ROOT,createPortal:null},f=e.transform,p=Re();f&&Te(p,"`useBrick.transform`",'please use "properties" instead, check your useBrick:',e);var v=yield pn(d,p?e:(0,a.Z)((0,a.Z)({},e),{},{properties:(0,a.Z)((0,a.Z)({},e.properties),f)}),s,u,[]),h=[...l,...c];if(yield gn(v,s,h),(null===(o=v.node)||void 0===o?void 0:o.tag)===Yr.PLACEHOLDER)throw new Error("The root brick of useBrick cannot be an ignored control node");if(null!==(i=v.node)&&void 0!==i&&i.portal)throw new Error("The root brick of useBrick cannot be a portal brick");return d.child=v.node,{tagName:v.node?v.node.type:null,renderRoot:d,rendererContext:u,scopedStores:h}}))).apply(this,arguments)}function Lo(e,t){var r,{renderRoot:n,rendererContext:a,scopedStores:o}=e;for(var i of(n.createPortal=()=>{var e=document.querySelector("#portal-mount-point");return r=document.createElement("div"),e.appendChild(r),r},Zn(n,t),a.dispatchOnMount(),a.initializeScrollIntoView(),a.initializeMediaChange(),a.initializeMessageDispatcher(),o))i.mountAsyncData();return{portal:r}}function Uo(e,t){var{rendererContext:r}=e;t.portal&&(In(t.portal),t.portal.remove()),r.dispatchOnUnmount(),r.dispose()}function Fo(e,t,r){if(r)throw new Error("Legacy doTransform does not support options in v3");return Et(t,(0,a.Z)((0,a.Z)({},Io()),{},{data:e}),{noInject:!0})}function No(e,t){var r=Zo(e);Object.assign(r,(0,a.Z)((0,a.Z)({},t),{},{$$fulfilling:null,$$fulfilled:!0,$$registerCustomTemplateProcessed:!1})),L(r)}function jo(e,t){var r=Zo(e),n=!1,a=e=>"".concat(e.path,".").concat(e.exact),o=(e,r)=>e.map((e=>{var i=a(e);return"routes"===e.type?(e.routes=o(e.routes,r),e):i===r?(n=!0,t):e}));r.routes=o(r.routes,a(t)),n||r.routes.unshift(t)}function $o(e,t,r){var n="".concat(e,".").concat(t.name);Me.define(n,{bricks:t.bricks,proxy:t.proxy,state:t.state}),Do(e,t.name,r)}function Do(e,t,r){Ho(e,"${APP.homepage}/_dev_only_/template-preview/".concat(t),[(0,a.Z)({brick:t},(0,y.pick)(r,"properties","events","lifeCycle","context","slots","children"))])}function Ko(e){return"${APP.homepage}/_dev_only_/snippet-preview/".concat(e)}function Wo(e,t){var r;Ho(e,Ko(t.snippetId),null!==(r=t.bricks)&&void 0!==r&&r.length?t.bricks:[{brick:"span"}],t.context)}var Vo=Wo;function Ho(e,t,r,n){var{routes:a}=Zo(e),o=a.findIndex((e=>e.path===t)),i={path:t,bricks:r,context:n,menu:!1,exact:!0};-1===o?a.unshift(i):a.splice(o,1,i)}function qo(e,t){var{tplStateStoreId:r}=t,n=Io();return r?_e((0,a.Z)((0,a.Z)({},n),{},{tplStateStoreId:r}),"STATE").getValue(e):n.ctxStore.getValue(e)}function zo(e){var{tplStateStoreId:t}=e,r=Io();return t?_e((0,a.Z)((0,a.Z)({},r),{},{tplStateStoreId:t}),"STATE").getAllValues():r.ctxStore.getAllValues()}function Go(e){return Eo().find((t=>t.id?t.id===e:t.filePath.startsWith(e)))}function Jo(){return ko()}function Yo(e,t){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,o.Z)((function*(e,t){var r,{appId:n,updateStoryboardType:a,collectUsedContracts:o}=t,i=Zo(n);if("route"===a)r={routes:[e]};else if("template"===a)r={meta:{customTemplates:[e]}};else if("snippet"===a){var s,l=Ko(e.snippetId);r={routes:[null==i||null===(s=i.routes)||void 0===s?void 0:s.find((e=>e.path===l))]}}var c=[];return r&&o&&(yield o(r)).forEach((e=>{var t,[r,n,a]=e.match(/(.*)@(.*):\d\.\d\.\d/);null!=i&&null!==(t=i.meta)&&void 0!==t&&null!==(t=t.contracts)&&void 0!==t&&t.some((e=>e.namespaceId===n&&e.name===a))||c.push(e)})),c}))).apply(this,arguments)}}}]);
//# sourceMappingURL=6051.5ef20dca.js.map