"use strict";(globalThis.webpackChunk_next_bricks_data_view=globalThis.webpackChunk_next_bricks_data_view||[]).push([[8038,2052],{60680:(e,t,n)=>{n.r(t),n.d(t,{ChinaMapChart:()=>F,ChinaMapChartComponent:()=>$});var r,a=n(74635),i=n(70918),o=n(26902),s=n(5536),c=n(86121),l=n(70829),u=n(62740),d=n(18769),p=n.n(d),f=n(10300),h=n(24295),g=(n(44291),n(3861)),y=n(48458),m=n(25337),v=n(72445),b=n(39628),w=n(46768),A=n(98418),x=n(56762);let S,E,L,k,C,H,_,z,T;const{defineElement:j,property:O,event:q}=(0,f.createDecorators)();let F;var I=new WeakMap,D=new WeakMap,P=new WeakMap,M=new WeakSet,N=new WeakMap;class R extends h.ReactNextElement{constructor(){super(...arguments),(0,a.A)(this,M),(0,i.A)(this,I,E(this)),(0,i.A)(this,D,(L(this),k(this))),(0,i.A)(this,P,(C(this),H(this))),(0,i.A)(this,N,(T(this),(e,t)=>{(0,s.A)(M,this,_).emit({open:e,data:t})}))}get dataSource(){return(0,l.A)(I,this)}set dataSource(e){(0,c.A)(I,this,e)}get detailContentStyle(){return(0,l.A)(D,this)}set detailContentStyle(e){(0,c.A)(D,this,e)}render(){return p().createElement($,{dataSource:this.dataSource,onDetailOpenChange:(0,l.A)(N,this),detailContentStyle:this.detailContentStyle})}}function $(e){const{onDetailOpenChange:t,dataSource:n=[],detailContentStyle:r={}}=e,a=(0,d.useRef)(),i=(0,d.useRef)(),[o,s]=(0,d.useState)(),c=(0,d.useRef)(),[l,u]=(0,d.useState)();return(0,d.useEffect)((()=>{const e=new y.Z5({id:a.current,logoVisible:!1,map:new m.A({center:[90.268,40.3628],pitch:35,zoom:1})});e.setMapStatus({doubleClickZoom:!1,zoomEnable:!1});const t=new Image;t.src=b;const r=new Image;return r.src=w,e.addImage("default",t),e.addImage("selected",r),e.addImage("chinaBg",A),e.on("loaded",(()=>{const t={...x._,features:x._.features.slice(0,x._.features.length-2)},r={...x._,features:x._.features.slice(x._.features.length-2,x._.features.length)},a=new y.qH({autoFit:!1}).source(t);a.shape("extrude").color("rgba(84, 239, 241, 0.20)").style({heightfixed:!0,pickLight:!0,opacity:1,raisingHeight:-13e5});const i=new y.qH({autoFit:!1}).source(t);i.shape("extrude").color("rgba(14, 11, 75, 0.58)").style({heightfixed:!0,pickLight:!0,opacity:1,raisingHeight:-11e5});const o=new y.qH({autoFit:!1}).source(t);o.shape("extrude").color("rgba(190, 225, 226, 1)").style({heightfixed:!0,pickLight:!0,opacity:1,raisingHeight:-9e5});const l=new y.qH({autoFit:!1}).source(t);l.shape("extrude").color("rgba(18, 26, 45, 1)").style({heightfixed:!0,pickLight:!0,opacity:1,raisingHeight:-7e5});const d=new y.qH({autoFit:!1}).source(t);d.shape("extrude").color("#111D3C").style({heightfixed:!0,pickLight:!0,opacity:1,raisingHeight:-5e5});const p=new y.qH({autoFit:!1}).source(t);p.shape("extrude").color("#121A2D").style({heightfixed:!0,pickLight:!0,opacity:1,raisingHeight:-3e5});const f=new y.qH({autoFit:!0}).source(t);f.shape("fill").color("rgba(8, 77, 255, 0.60)");const h=new y.PQ({autoFit:!1,zIndex:1}).source(A,{parser:{type:"image",extent:[73.33,17.9,134.85,53.73]}});h.shape("img").style({opacity:1});const g=(new y.S6).source(t).shape("line").color("rgba(43, 100, 255, 1)").size(1).style({raisingHeight:-16e5}),m=(new y.S6).source(t).shape("line").color("rgba(84, 239, 241, 1)").size(1).style({raisingHeight:-12e5}),w=(new y.S6).source(t).shape("line").color("rgba(43, 100, 255, 1)").size(1).style({raisingHeight:-6e5}),S=new y.S6({zIndex:2}).source(t).shape("line").color("#3DC6FF").size(1).style({raisingHeight:0}).scale("density",{type:"quantile"});e.addLayer(a),e.addLayer(i),e.addLayer(o),e.addLayer(l),e.addLayer(d),e.addLayer(p),e.addLayer(h),e.addLayer(f),e.addLayer(g),e.addLayer(m),e.addLayer(w),e.addLayer(S);const E=new y.qH({autoFit:!1}).source(r);E.shape("fill").color("black");const L=new y.S6({zIndex:2}).source(r).shape("line").color("rgba(30, 144, 255, 1)").size(.5).style({raisingHeight:0}).scale("density",{type:"quantile"});e.addLayer(E),e.addLayer(L),n.map((n=>{const r=document.createElement("div");let a="text";r.textContent=n.text;const i=t.features.find((e=>e.properties.name.includes(n.city)));["410000","820000","140000","110000","420000","430000","450000","500000","520000","530000","510000","610000","640000","150000","630000","540000","340000"].includes(i.id)&&(a=`${a} leftText`,n.isLeftOffset=!0),["620000","640000","450000","440000","120000","340000","510000","150000","320000"].includes(i.id)&&(a=`${a} topText`,n.isTopOffset=!0),r.className=a,r.onclick=e=>{n.width=r.getBoundingClientRect().width,((e,t)=>{e.stopPropagation(),(0,v.isEqual)(t,c.current)?s(null):(s(t),u({left:`${(0,v.toNumber)(e.target.style.left.replace("px",""))+24}px`,top:`${(0,v.toNumber)(e.target.style.top.replace("px",""))+28}px`}))})(e,n)};const o=document.createElement("img");o.src=b,o.className="iconImg";const l=i.properties.center;let d=l[1];["530000","520000","430000","360000","330000","610000","370000","130000"].includes(i.id)&&(d-=1);const p=new y.pH({element:r}).setLnglat({lng:l[0],lat:d}),f=new y.pH({element:o}).setLnglat({lng:l[0],lat:d});e.addMarker(p),e.addMarker(f)}))})),()=>{e.destroy()}}),[]),(0,d.useEffect)((()=>{var e;const t=e=>{i.current&&e.composedPath().includes(i.current)||s(null)};return null===(e=document)||void 0===e||e.addEventListener("click",t),()=>{var e;null===(e=document)||void 0===e||e.removeEventListener("click",t)}}),[]),(0,d.useEffect)((()=>{c.current=(0,v.cloneDeep)(o),t(!(0,v.isEmpty)(o),o)}),[o]),p().createElement("div",null,p().createElement("div",{id:"map",ref:a,className:"map"}),o&&p().createElement("div",{className:"detailContent",onClick:e=>{e.stopPropagation()},style:{..."textBottom"===o.detailDisplayLocation?{left:l.left,top:l.top,transform:`translate(${o.isLeftOffset?-o.width:0}px, ${o.isTopOffset?-50:-40}px)`}:{transform:"translate(-50%, 0%)",top:"50%",left:"50%"},...r}},p().createElement("slot",{name:"detail",ref:i})))}r=R,({e:[E,L,k,C,H,_,z,T],c:[F,S]}=(0,u.A)(r,[j("data-view.china-map-chart",{styleTexts:[g.A]})],[[O({attribute:!1}),1,"dataSource"],[O({attribute:!1}),1,"detailContentStyle"],[q({type:"detail.open.change"}),1,"openChangeEvent",e=>(0,l.A)(P,e),(e,t)=>(0,c.A)(P,e,t)]],0,(e=>N.has((0,o.A)(e))),h.ReactNextElement)),S()},40935:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&o[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},36758:e=>{e.exports=function(e){return e[1]}},62740:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(17545),a=n(26902);function i(e,t,n){"symbol"==(0,r.A)(t)&&(t=(t=t.description)?"["+t+"]":"");try{Object.defineProperty(e,"name",{configurable:!0,value:n?n+" "+t:t})}catch(e){}return e}var o=n(11369);function s(e,t,n,s,c,l){var u,d,p,f,h,g,y,m=Symbol.metadata||Symbol.for("Symbol.metadata"),v=Object.defineProperty,b=Object.create,w=[b(null),b(null)],A=t.length;function x(t,n,r){return function(a,i){n&&(i=a,a=e);for(var o=0;o<t.length;o++)i=t[o].apply(a,r?[i]:[]);return r?i:a}}function S(e,t,n,r){if("function"!=typeof e&&(r||void 0!==e))throw new TypeError(t+" must "+(n||"be")+" a function"+(r?"":" or undefined"));return e}function E(e,t,n,a,o,s,c,l,p,f,h){function g(e){if(!h(e))throw new TypeError("Attempted to access private element on non-instance")}var y=[].concat(t[0]),m=t[3],b=!c,A=1===o,E=3===o,L=4===o,k=2===o;function C(t,n,r){return function(a,i){return n&&(i=a,a=e),r&&r(a),H[t].call(a,i)}}if(!b){var H={},_=[],z=E?"get":L||A?"set":"value";if(p?(f||A?H={get:i((function(){return m(this)}),a,"get"),set:function(e){t[4](this,e)}}:H[z]=m,f||i(H[z],a,k?"":z)):f||(H=Object.getOwnPropertyDescriptor(e,a)),!f&&!p){if((d=w[+l][a])&&7!=(d^o))throw Error("Decorating two elements with the same name ("+H[z].name+") is not supported yet");w[+l][a]=o<3?1:o}}for(var T=e,j=y.length-1;j>=0;j-=n?2:1){var O=S(y[j],"A decorator","be",!0),q=n?y[j-1]:void 0,F={},I={kind:["field","accessor","method","getter","setter","class"][o],name:a,metadata:u,addInitializer:function(e,t){if(e.v)throw Error("attempted to call addInitializer after decoration was finished");S(t,"An initializer","be",!0),s.push(t)}.bind(null,F)};if(b)d=O.call(q,T,I),F.v=1,S(d,"class decorators","return")&&(T=d);else if(I.static=l,I.private=p,d=I.access={has:p?h.bind():function(e){return a in e}},L||(d.get=p?k?function(e){return g(e),H.value}:C("get",0,g):function(e){return e[a]}),k||E||(d.set=p?C("set",0,g):function(e,t){e[a]=t}),T=O.call(q,A?{get:H.get,set:H.set}:H[z],I),F.v=1,A){if("object"==(0,r.A)(T)&&T)(d=S(T.get,"accessor.get"))&&(H.get=d),(d=S(T.set,"accessor.set"))&&(H.set=d),(d=S(T.init,"accessor.init"))&&_.unshift(d);else if(void 0!==T)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else S(T,(f?"field":"method")+" decorators","return")&&(f?_.unshift(T):H[z]=T)}return o<2&&c.push(x(_,l,1),x(s,l,0)),f||b||(p?A?c.splice(-1,0,C("get",l),C("set",l)):c.push(k?H[z]:S.call.bind(H[z])):v(e,a,H)),T}function L(e){return v(e,m,{configurable:!0,enumerable:!0,value:u})}return void 0!==l&&(u=l[m]),u=b(null==u?null:u),h=[],g=function(e){e&&h.push(x(e))},y=function(t,r){for(var i=0;i<n.length;i++){var s=n[i],l=s[1],u=7&l;if((8&l)==t&&!u==r){var d=s[2],g=!!s[3],y=16&l;E(t?e:e.prototype,s,y,g?"#"+d:(0,o.A)(d),u,u<2?[]:t?f=f||[]:p=p||[],h,!!t,g,r,t&&g?function(t){return(0,a.A)(t)===e}:c)}}},y(8,0),y(0,0),y(8,1),y(0,1),g(p),g(f),d=h,A||L(e),{e:d,get c(){var n=[];return A&&[L(e=E(e,[t],s,e.name,5,n)),x(n,1)]}}}},12559:(e,t,n)=>{function r(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}n.d(t,{A:()=>r})},26902:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(17545);function a(e){if(Object(e)!==e)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==e?(0,r.A)(e):"null"));return e}},72016:(e,t,n)=>{function r(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}n.d(t,{A:()=>r})},70829:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(12559);function a(e,t){return e.get((0,r.A)(e,t))}},70918:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(72016);function a(e,t,n){(0,r.A)(e,t),t.set(e,n)}},86121:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(12559);function a(e,t,n){return e.set((0,r.A)(e,t),n),n}},11369:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(17545);function a(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=(0,r.A)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,r.A)(t)?t:t+""}},17545:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})}}]);
//# sourceMappingURL=china-map-chart.375f876a.js.map