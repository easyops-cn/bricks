{"version":3,"file":"chunks/cabinet-container.7ab996bf.js","mappings":"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","sources":["webpack:///./src/cabinet/cabinet-container/index.tsx","webpack:///./src/hooks/useResizeObserver/resizeObserverUtil.ts","webpack:///./src/hooks/useResizeObserver/index.ts","webpack:///./src/hooks/usePrevious/index.ts","webpack:///./src/cabinet/cabinet-container/cabinet-container.shadow.css","webpack:///./src/data-view-variables.shadow.css","webpack:///../../node_modules/classnames/index.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/classPrivateGetter.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/classPrivateMethodInitSpec.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"],"sourcesContent":["import React, { useCallback, useMemo, useRef } from \"react\";\nimport { ReactNextElement, wrapBrick } from \"@next-core/react-element\";\nimport { createDecorators, EventEmitter } from \"@next-core/element\";\nimport variablesText from \"../../data-view-variables.shadow.css\";\nimport styleText from \"./cabinet-container.shadow.css\";\nimport classNames from \"classnames\";\nimport { CabinetNodeProps, CabinetNode } from \"../cabinet-node/index.js\";\nimport { useResizeObserver } from \"../../hooks/index.js\";\n\nconst { defineElement, property, event } = createDecorators();\nexport type ContainerType = \"host\" | \"k8s\" | \"k8s-blue\";\nconst WrappedNode = wrapBrick<CabinetNode, CabinetNodeProps>(\n  \"data-view.cabinet-node\"\n);\nexport interface ClickEventDataType {\n  type: \"node\" | \"container\";\n  data: CabinetNodeProps | undefined;\n}\n\nexport interface CabinetContainerProps {\n  data: CabinetNodeProps[];\n  type?: ContainerType;\n  customTitle?: string | undefined;\n  status?: \"active\" | \"faded\";\n  handleClick?: (params: ClickEventDataType) => void;\n  handleDbClick?: (params: ClickEventDataType) => void;\n}\n\n/**\n * 大屏集群容器构件\n * @author astrid\n */\n@defineElement(\"data-view.cabinet-container\", {\n  styleTexts: [variablesText, styleText],\n})\nclass CabinetContainer\n  extends ReactNextElement\n  implements CabinetContainerProps\n{\n  /**\n   * @kind ContainerType\n   * @required true\n   * @default  host\n   * @description 容器类型，host、k8s（主题橙色）、k8s-blue（蓝色主题）\n   */\n  @property({ attribute: false })\n  accessor type: ContainerType = \"host\";\n\n  /**\n   * @kind CabinetNodeProps[]\n   * @required true\n   * @default  -\n   * @description 数据\n   */\n  @property({ attribute: false })\n  accessor data: CabinetNodeProps[] = [];\n\n  /**\n   * @kind \"active\" | \"faded\"\n   * @required false\n   * @default\n   * @description 当前状态,是否高亮或者淡化\n   */\n  @property()\n  accessor status: \"active\" | \"faded\";\n\n  /**\n   * @kind string|undefined\n   * @required false\n   * @default -\n   * @description 容器标题\n   */\n  @property()\n  accessor customTitle: string | undefined;\n\n  /**\n   * @detail\n   * @description 节点或者container 点击事件\n   */\n  @event({ type: \"container.click\" })\n  accessor #onHandleClick!: EventEmitter<ClickEventDataType>;\n\n  /**\n   * @detail\n   * @description 节点或者container 双击击事件\n   */\n  @event({ type: \"container.dbclick\" })\n  accessor #onHandleDbClick!: EventEmitter<ClickEventDataType>;\n\n  handleClick = (params: ClickEventDataType) => {\n    this.#onHandleClick.emit(params);\n  };\n  handleDbClick = (params: ClickEventDataType) => {\n    this.#onHandleDbClick.emit(params);\n  };\n\n  render(): React.ReactNode {\n    return (\n      <CabinetContainerComponent\n        type={this.type}\n        data={this.data}\n        status={this.status}\n        customTitle={this.customTitle}\n        handleClick={this.handleClick}\n        handleDbClick={this.handleDbClick}\n      />\n    );\n  }\n}\n\nexport function CabinetContainerComponent(\n  props: CabinetContainerProps\n): React.ReactElement {\n  const { type, data, status, customTitle, handleClick, handleDbClick } = props;\n  const isDbClick = useRef<boolean>(false);\n  const timerRef = useRef<number>();\n\n  const [containerRef, { clientWidth, clientHeight }] =\n    useResizeObserver<HTMLDivElement>();\n  const binarySearch = useCallback(\n    (\n      maxSizeCol: number,\n      minSizeCol: number,\n      maxSizeRow: number,\n      minSizeRow: number\n    ): { col: number; row: number } => {\n      // 利用二分法，去找到一个合适大小；\n      const maxRow = Math.max(minSizeRow, maxSizeRow), // 2\n        minRow = Math.min(minSizeRow, maxSizeRow), // 1\n        minCol = Math.min(minSizeCol, maxSizeCol),\n        maxCol = Math.max(minSizeCol, maxSizeCol);\n      const centerCol = Math.ceil((maxSizeCol + minSizeCol) / 2); // 希望col多一些\n      const centerRow = Math.ceil((maxSizeRow + minSizeRow) / 2);\n      const needRow = Math.ceil(data.length / centerCol);\n      if (centerCol <= 1) {\n        return {\n          col: 1,\n          row: data.length,\n        };\n      }\n      if (\n        needRow === centerRow ||\n        minCol === maxCol ||\n        minCol === centerCol ||\n        maxCol === centerCol\n      ) {\n        return {\n          col: centerCol,\n          row: needRow,\n        };\n      }\n      if (needRow > centerRow) {\n        // 那么col要放大，row减少\n        return binarySearch(centerCol, maxCol, needRow, minRow);\n      }\n      if (needRow < centerRow) {\n        // 那么col要缩小，row增加\n        return binarySearch(minCol, centerCol, maxRow, needRow);\n      }\n    },\n    [data.length]\n  );\n  const layoutWidth = useMemo(() => {\n    if (!data.length) {\n      return;\n    }\n\n    //数据总量： A， 整个屏幕最大尺寸可以放 B, 整个屏幕最小尺寸可以放C,\n    // B>=A,用 最大尺寸\n    // C>=A: 用最小尺寸\n    // B< A <C: 反推尺寸,\n    const maxWidth = 118,\n      minWidth = 56,\n      maxHeight = 105,\n      minHeight = 63;\n    const realWidth = clientWidth - 27;\n    const realHeight = clientHeight - 84;\n    if (realWidth <= 0 || realHeight <= 0) {\n      return;\n    }\n    const maxSizeCol = Math.floor(realWidth / maxWidth),\n      maxSizeRow = Math.floor(realHeight / maxHeight),\n      minSizeCol = Math.floor(realWidth / minWidth),\n      minSizeRow = Math.floor(realHeight / minHeight);\n    const maxSizeNum = maxSizeCol * maxSizeRow,\n      minSizeNum = minSizeCol * minSizeRow;\n    const allNum = data.length;\n    if (allNum <= maxSizeNum) {\n      return {\n        width: Math.floor(realWidth / maxSizeCol),\n        itemWidth: maxWidth,\n      };\n    } else if (allNum >= minSizeNum) {\n      return {\n        width: Math.floor(realWidth / minSizeCol),\n        itemWidth: minWidth,\n      };\n    } else {\n      // 在区间内， 希望撑满整个屏幕, 尺寸肯定在最大和最小之间\n      const { col } = binarySearch(\n        maxSizeCol,\n        minSizeCol,\n        maxSizeRow,\n        minSizeRow\n      );\n      return {\n        width: Math.floor(realWidth / col),\n        itemWidth: Math.max(realWidth / col - 10, minWidth),\n      };\n    }\n  }, [data.length, clientWidth, clientHeight, binarySearch]);\n\n  const handleOnClick = (\n    e: React.MouseEvent<HTMLDivElement>,\n    data: CabinetNodeProps | undefined,\n    type: \"node\" | \"container\"\n  ) => {\n    e.stopPropagation();\n    window.clearTimeout(timerRef.current);\n    isDbClick.current = false;\n    timerRef.current = window.setTimeout(function () {\n      if (!isDbClick.current) {\n        handleClick?.({\n          data,\n          type,\n        });\n      }\n    }, 200);\n  };\n  const handleOnDBClick = (\n    e: React.MouseEvent<HTMLDivElement>,\n    data: CabinetNodeProps | undefined,\n    type: \"node\" | \"container\"\n  ) => {\n    window.clearTimeout(timerRef.current);\n    isDbClick.current = true;\n    e.stopPropagation();\n    handleDbClick?.({\n      data,\n      type,\n    });\n  };\n\n  return (\n    <div\n      className={classNames(\n        \"wrapper\",\n        {\n          hostWrapper: type === \"host\" || type === \"k8s-blue\",\n          k8sWrapper: type === \"k8s\",\n        },\n        status && `wrapper-${status}`\n      )}\n      ref={containerRef}\n      onClick={(e) => handleOnClick(e, undefined, \"container\")}\n      onDoubleClick={(e) => handleOnDBClick(e, undefined, \"container\")}\n    >\n      <div\n        className={classNames(\n          \"container\",\n          {\n            hostContainer: type === \"host\" || type === \"k8s-blue\",\n            k8sContainer: type === \"k8s\",\n          },\n          status && `container-${status}`\n        )}\n      >\n        <div className=\"content\">\n          <div className=\"contentLayout\">\n            {data.map((item, index) => (\n              <div\n                key={index}\n                className=\"itemContent\"\n                style={{ width: layoutWidth?.width }}\n              >\n                <div\n                  className=\"item\"\n                  style={{ width: layoutWidth?.itemWidth }}\n                  onClick={(e) => handleOnClick(e, item, \"node\")}\n                  onDoubleClick={(e) => handleOnDBClick(e, item, \"node\")}\n                >\n                  <WrappedNode\n                    type={item.type}\n                    nodeTitle={item.nodeTitle}\n                    status={item.status}\n                    isAlert={item.isAlert}\n                  />\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n        {customTitle && (\n          <div className=\"footer\">\n            <div className=\"footerTitle\">{customTitle}</div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport { CabinetContainer };\n","import ResizeObserver from \"resize-observer-polyfill\";\n\nexport type ResizeCallback = (entry: ResizeObserverEntry) => void;\n\nconst elementListeners = new Map<Element, Set<ResizeCallback>>();\n\nexport const elementListeners_only_for_test =\n  process.env.NODE_ENV === \"test\"\n    ? elementListeners\n    : /* istanbul ignore next */ null;\n\nconst resizeObserverCallback = (entries: ResizeObserverEntry[]): void => {\n  entries.forEach((entry) => {\n    const { target } = entry;\n    elementListeners.get(target)?.forEach((callback) => callback(entry));\n  });\n};\n\nconst resizeObserver: ResizeObserver = new (ResizeObserver as any)(resizeObserverCallback);\n\nexport const observe = (element: Element, callback: ResizeCallback): void => {\n  if (!elementListeners.has(element)) {\n    elementListeners.set(element, new Set());\n    resizeObserver.observe(element);\n  }\n\n  elementListeners.get(element).add(callback);\n};\n\nexport const unobserve = (element: Element, callback: ResizeCallback): void => {\n  if (elementListeners.has(element)) {\n    elementListeners.get(element).delete(callback);\n\n    if (elementListeners.get(element).size === 0) {\n      resizeObserver.unobserve(element);\n      elementListeners.delete(element);\n    }\n  }\n};\n","import {\n  useState,\n  useCallback,\n  useRef,\n  type RefObject,\n  useEffect,\n} from \"react\";\nimport { observe, unobserve } from \"./resizeObserverUtil.js\";\n\ninterface ElementSize {\n  clientWidth: number;\n  clientHeight: number;\n}\n\nexport interface ResizeObserveProps<T extends Element = Element> {\n  targetRef?: RefObject<T>;\n  onResize?: (size: ResizeObserverEntry) => void;\n}\n\nexport function useResizeObserver<T extends Element = Element>(\n  props?: ResizeObserveProps<T>\n): [RefObject<T>, ElementSize] {\n  const {\n    targetRef,\n    onResize,\n  } = props || {};\n\n  const localRef = useRef<T>();\n  const ref = targetRef ?? localRef;\n  const [size, setSize] = useState<ElementSize>({ clientWidth: 0, clientHeight: 0 });\n\n  const handleResize = useCallback(\n    (entry: ResizeObserverEntry) => {\n      const { target } = entry;\n      const { clientWidth = 0, clientHeight = 0 } = target;\n\n      setSize((prev) => {\n        // skip if same size\n        if (prev.clientWidth === clientWidth && prev.clientHeight === clientHeight) {\n          return prev;\n        }\n\n        onResize?.(entry);\n\n        return { clientWidth, clientHeight };\n      });\n    },\n    [onResize]\n  );\n\n  useEffect(() => {\n    if (\n      typeof ref !== \"object\" ||\n      ref === null ||\n      !(ref.current instanceof Element)\n    ) {\n      throw new Error(\"ResizeObserver must observe an Element\");\n    }\n\n    const element = ref.current;\n    observe(element, handleResize);\n\n    return () => {\n      unobserve(element, handleResize);\n    };\n  }, [handleResize, ref]);\n\n  return [ref, { ...size }];\n}\n","import {useRef, useEffect} from 'react';\nexport  function usePrevious<T>(data?: T):T|undefined{\n    const ref = useRef<T>();\n    useEffect(()=>{\n        ref.current = data\n    })\n    return ref.current;\n}\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `*,\n*:after,\n*:before{box-sizing:border-box}.wrapper{width:100%;height:100%;position:relative}.container{width:100%;height:100%;border:3px solid;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);display:flex;flex-direction:column;cursor:pointer;overflow:hidden}.wrapper:after,\n.wrapper:before{content:\"\";position:absolute;left:50%;border:3px solid;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);transform:translateX(-50%)}.wrapper:before{width:calc(100% - 10px);height:100%;bottom:-14px;z-index:-1;opacity:0.6}.wrapper:after{width:calc(100% - 30px);height:100%;bottom:-24px;z-index:-10;opacity:0.4}.hostWrapper:before,\n.hostWrapper:after{border-image:radial-gradient(circle,rgba(55,229,252,1),#007aca) 3 3}.hostWrapper:not(:has(.item:hover)):hover:before,\n.hostWrapper.wrapper-active:before{border-image:radial-gradient(circle,rgba(55,229,252,1),#45e4ff) 3 3}.k8sWrapper:after,\n.k8sWrapper:before{border-image:radial-gradient(circle,rgba(255,102,51,1),#ff663380) 3 3}.hostContainer{background:rgba(7,4,21,0.85);-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px);border-image:radial-gradient(circle,rgba(55,229,252,1),#007aca) 3 3}.hostContainer:not(:has(.item:hover)):hover,\n.hostContainer.container-active{border-image:radial-gradient(circle,rgba(55,229,252,1),#45e4ff) 3 3;box-shadow:inset 0 0 30px 0 #45e4ff,inset 0 0 20px 0 #45e4ff}.hostWrapper.wrapper-faded:after,\n.hostWrapper.wrapper-faded:before,\n.k8sWrapper.wrapper-faded:after,\n.k8sWrapper.wrapper-faded:before{opacity:0.1}.k8sContainer{background:rgba(7,4,21,0.8);border-image:radial-gradient(circle,rgba(255,102,51,1),#ff663399) 3 3}.k8sContainer:not(:has(.item:hover)):hover,\n.k8sContainer.container-active{box-shadow:inset 0 0 30px 0 #ff6633,inset 0 0 20px 0 #ff6633}.hostContainer.container-faded,\n.k8sContainer.container-faded{opacity:0.4}.content{flex:1;padding:20px 10px;width:100%;box-sizing:border-box;overflow:hidden;display:flex}.contentLayout{overflow:auto;height:100%}.itemContent{display:inline-block;vertical-align:middle}.item{min-width:56px;min-height:63px;max-width:118px;margin:auto}.footer{width:100%;height:57px;text-align:center;line-height:57px;font-size:var(--auxiliary-font-size);font-weight:var(--font-weight-400);color:var(--color-normal-text);position:relative;display:flex}.footerTitle{flex:1;width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.footer:after{content:\"\";width:100%;height:100%;position:absolute;left:0;top:0;z-index:-1}.hostContainer > .footer:after{background:linear-gradient(180deg,rgba(26,103,157,0.2) 0%,#1b69a0 100%)}.k8sContainer > .footer:after{background:linear-gradient(180deg,rgba(255,102,51,0.1) 0%,rgba(255,102,51,0.55) 100%)}.hostContainer:not(:has(.item:hover)):hover > .footer:after,\n.hostContainer.container-active > .footer:after,\n.k8sContainer:not(:has(.item:hover)):hover > .footer:after,\n.k8sContainer.container-active > .footer:after{opacity:0.65}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host{--palette-rgba-white-1:rgba(255,255,255,10%);--palette-rgba-white-2:rgba(255,255,255,20%);--palette-rgba-white-3:rgba(255,255,255,30%);--palette-rgba-white-4:rgba(255,255,255,40%);--palette-rgba-white-5:rgba(255,255,255,50%);--palette-rgba-white-6:rgba(255,255,255,60%);--palette-rgba-white-7:rgba(255,255,255,70%);--palette-rgba-white-8:rgba(255,255,255,80%);--palette-rgba-white-9:rgba(255,255,255,90%);--palette-rgba-white-10:rgba(255,255,255,100%);--palette-rgba-gray-1:rgba(0,0,0,10%);--palette-rgba-gray-2:rgba(0,0,0,20%);--palette-rgba-gray-3:rgba(0,0,0,30%);--palette-rgba-gray-4:rgba(0,0,0,40%);--palette-rgba-gray-5:rgba(0,0,0,50%);--palette-rgba-gray-6:rgba(0,0,0,60%);--palette-rgba-gray-7:rgba(0,0,0,70%);--palette-rgba-gray-8:rgba(0,0,0,80%);--palette-rgba-gray-9:rgba(0,0,0,90%);--palette-rgba-gray-10:rgba(0,0,0,100%);--palette-rgba-blue-gray-2:rgba(101,106,134,20%);--palette-rgba-blue-gray-3:rgba(101,106,134,30%);--palette-rgba-blue-gray-8:rgba(101,106,134,80%);--palette-tech-blue-4-channel:67,127,255;--palette-tech-blue-4:rgb(var(--palette-tech-blue-4-channel));--palette-tech-blue-6-channel:51,102,255;--palette-tech-blue-6:rgb(var(--palette-tech-blue-6-channel));--palette-tech-blue-8-channel:40,69,159;--palette-tech-blue-8:rgb(var(--palette-tech-blue-8-channel));--palette-sea-green-4-channel:131,245,225;--palette-sea-green-4:rgb(var(--palette-sea-green-4-channel));--palette-green-6-channel:81,235,73;--palette-green-6:rgb(var(--palette-green-6-channel));--palette-green-2:rgba(var(--palette-green-6-channel),20%);--palette-lotus-pink-7-channel:204,0,102;--palette-lotus-pink-7:rgb(var(--palette-lotus-pink-7-channel));--palette-red-6-channel:242,39,39;--palette-red-6:rgb(var(--palette-red-6-channel));--palette-red-2:rgba(var(--palette-red-6-channel),20%);--color-fill-global-bg:#0f1014;--color-fill-bg-container-1:var(--palette-rgba-white-1);--color-fill-bg-container-2:var(--palette-rgba-blue-gray-2);--color-fill-bg-container-3:var(--palette-rgba-blue-gray-8);--color-fill-bg-base-1:var(--palette-rgba-blue-gray-2);--color-fill-bg-base-2:rgba(15,16,20,0%);--color-fill-bg-base-3:rgba(0,0,0,20%);--color-fill-bg-base-4:rgba(40,46,58,100%);--color-fill-bg-base-5:rgba(19,25,47,80%);--color-fill-bg-base-6:var(--palette-rgba-blue-gray-3);--color-brand:var(--palette-tech-blue-6);--color-brand-hover:var(--palette-tech-blue-4);--color-brand-active:var(--palette-tech-blue-8);--color-contrast-1:var(--palette-sea-green-4);--color-error:var(--palette-red-6);--color-error-bg:var(--palette-red-2);--color-success:var(--palette-green-6);--color-success-bg:var(--palette-green-2);--color-header-text-big:var(--palette-rgba-white-10);--color-header-text:var(--palette-rgba-white-10);--color-normal-text:var(--palette-rgba-white-10);--color-strong-text:var(--palette-rgba-white-9);--color-auxiliary-text:var(--palette-rgba-white-8);--color-secondary-text:var(--palette-rgba-white-6);--color-disabled-text:var(--palette-rgba-white-4);--color-border-divider-line:var(--palette-rgba-white-1);--color-text-divider-line-1:var(--palette-rgba-white-2);--color-text-divider-line-2:var(--palette-rgba-white-2);--small-border-radius:2px;--medius-border-radius:5px;--larger-border-radius:12px;--container-border-radius:9999px;--no-border-radius:0px;--mask-bg:var(--palette-rgba-gray-7);--title-font-size-larger:30px;--title-font-size-strong:22px;--title-font-size:18px;--normal-font-size:14px;--auxiliary-font-size:16px;--auxiliary-font-size-small:12px;--overview-data-font-size:34px;--statistics-data-font-size:28px;--normal-data-font-size-larger:20px;--normal-data-font-size:16px;--chart-legend-font-size:12px;--chart-tooltips-font-size-1:12px;--chart-tooltips-font-size-2:12px;--chart-axis-x-font-size:12px;--chart-axis-x-font-size-larger:14px;--chart-axis-y-font-size:12px;--chart-axis-y-font-size-larger:14px;--font-weight-600:600;--font-weight-500:500;--font-weight-400:400;--text-shadow:0px 1px 4px #2863ee;--border-width-base:1px;--border-width-double-base:2px;--border-width-tribble-base:3px;--punctate-width-base:1px;--paragraph-width-base:1px;--button-text-color:#40d0db}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___.toString();\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import assertClassBrand from \"./assertClassBrand.js\";\nexport default function _classPrivateGetter(s, r, a) {\n  return a(assertClassBrand(s, r));\n}","import checkPrivateRedeclaration from \"./checkPrivateRedeclaration.js\";\nexport default function _classPrivateMethodInitSpec(obj, privateSet) {\n  checkPrivateRedeclaration(obj, privateSet);\n  privateSet.add(obj);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}"],"names":["defineElement","property","event","createDecorators","WrappedNode","wrapBrick","_CabinetContainer","_A","WeakMap","_B","_C","_D","_E","_CabinetContainer_brand","WeakSet","_F","CabinetContainer","ReactNextElement","constructor","arguments","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","_init_type","_init_extra_type","_init_data","_init_extra_data","_init_status","_init_extra_status","_init_customTitle","_init_extra_customTitle","_init_onHandleClick","_init_extra_onHandleClick","_init_onHandleDbClick","_defineProperty","_init_extra_onHandleDbClick","params","_classPrivateGetter","this","_get_onHandleClick","emit","_get_onHandleDbClick","type","_classPrivateFieldGet","v","_classPrivateFieldSet","data","status","customTitle","render","React","CabinetContainerComponent","handleClick","handleDbClick","props","isDbClick","useRef","timerRef","containerRef","clientWidth","clientHeight","useResizeObserver","binarySearch","useCallback","maxSizeCol","minSizeCol","maxSizeRow","minSizeRow","maxRow","Math","max","minRow","min","minCol","maxCol","centerCol","ceil","centerRow","needRow","length","col","row","layoutWidth","useMemo","realWidth","realHeight","floor","maxSizeNum","minSizeNum","allNum","width","itemWidth","handleOnClick","e","stopPropagation","window","clearTimeout","current","setTimeout","handleOnDBClick","className","classNames","hostWrapper","k8sWrapper","ref","onClick","undefined","onDoubleClick","hostContainer","k8sContainer","map","item","index","key","style","nodeTitle","isAlert","_CabinetContainer2","_set_onHandleClick","_set_onHandleDbClick","c","_initClass","_applyDecs","styleTexts","variablesText","styleText","attribute","o","_","has","_checkInRHS","elementListeners","Map","resizeObserver","ResizeObserver","entries","forEach","entry","_elementListeners$get","target","get","callback","observe","element","set","Set","add","unobserve","delete","size","targetRef","onResize","localRef","setSize","useState","handleResize","prev","useEffect","Element","Error","usePrevious","___CSS_LOADER_EXPORT___","push","module","id","toString","hasOwn","hasOwnProperty","classes","i","arg","appendClass","parseValue","Array","isArray","apply","Object","prototype","includes","call","value","newClass","exports","default","s","r","a","obj","privateSet","defineProperty","enumerable","configurable","writable"],"sourceRoot":""}