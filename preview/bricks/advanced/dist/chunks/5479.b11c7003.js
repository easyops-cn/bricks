"use strict";(globalThis.webpackChunk_next_bricks_advanced=globalThis.webpackChunk_next_bricks_advanced||[]).push([[5479],{49385:(e,t,n)=>{n.d(t,{F:()=>F});var a=n(18769),l=n.n(a),o=n(80050),r=n(16768),i=n(42083),s=n(6257),c=n(89592),d=n(18799),u=n(85502),p=n(36538);let m=function(e){return e.TOTAL="TOTAL",e.SELECT_INFO="SELECT_INFO",e.CLEAR="CLEAR",e}({});const g="bricks/advanced/eo-next-table";var h=n(41030);const f={showSizeChanger:!0,showTotal:!0},b={preserveSelectedRowKeys:!0,showSelectInfo:!0};function v(e){const t=[];if((0,h.isNil)(e));else if(Array.isArray(e))e.map((e=>t.push(v(e))));else if("[object Object]"===Object.prototype.toString.call(e))for(const n in e)t.push(String(n),v(e[n]));else t.push(String(e));return t.flat(1/0).filter(Boolean)}function w(e,t){return Array.isArray(t)?(0,h.get)(e,t):e[t]}function x(e){let{list:t,columns:n,q:a,searchFields:l,childrenColumnName:o}=e;return a?(0,h.reduce)(t,((e,t)=>{let r=[];if(l?r=l.flatMap((e=>v((0,h.get)(t,e)))):n&&(r=n.flatMap((e=>v(w(t,e.dataIndex))))),r.some((e=>e.toLowerCase().includes(a))))return e.concat(t);const i=x({list:t[o],columns:n,q:a,searchFields:l,childrenColumnName:o});if(null!=i&&i.length){const n={...t,[o]:i};return e.concat(n)}return e}),[]):t}function y(e){return"[object Object]"===Object.prototype.toString.call(e)&&null!==e&&!Array.isArray(e)}function S(e){let{list:t,rowKey:n,childrenColumnName:a}=e;const l=[];return null==t||t.forEach((e=>{l.push(e[n]);const t=S({list:e[a],rowKey:n,childrenColumnName:a});l.push(...t)})),[...new Set(l)]}var E=n(24295),k=n(15223),C=n(81380),A=n(87046),B=n(5414),R=n(89575),T=n(56550);const K=(0,a.forwardRef)((function(e,t){return l().createElement("tr",(0,R.A)({},e,{ref:t}))}));function z(e){const{attributes:t,listeners:n,setNodeRef:a,transform:o,transition:r,isDragging:i}=(0,A.gl)({id:e["data-row-key"]}),s={...e.style,transform:T.Ks.Transform.toString(o),transition:r,cursor:"move",touchAction:"none",...i?{position:"relative",zIndex:999}:{}};return l().createElement(K,(0,R.A)({},e,{ref:a,style:s},t,n))}var N=n(84352),I=n(26386);function L(e){const[t,n]=(0,a.useState)(e.data);return(0,a.useEffect)((()=>{n(e.data)}),Object.values(e.data)),l().createElement(c.ReactUseMultipleBricks,{useBrick:e.useBrick,data:t})}(0,u.initializeReactI18n)(g,{en:{TOTAL:"Total <el>{{ total }}</el> items",SELECT_INFO:"{{ count }} item selected",SELECT_INFO_plural:"{{ count }} items selected",CLEAR:"Clear"},zh:{TOTAL:"共 <el>{{ total }}</el> 条",SELECT_INFO:"已选择 {{ count }} 项",CLEAR:"清空"}});const O=(0,E.wrapBrick)("eo-link"),F=(0,a.forwardRef)((function(e,t){var n,v;const{shadowRoot:E,rowKey:R,columns:T,cell:F,dataSource:_,frontSearch:D,pagination:M,multiSort:j,rowSelection:P,hiddenColumns:q,expandable:H,childrenColumnName:U,rowDraggable:G,searchFields:V,size:J,showHeader:Q,bordered:W,scrollConfig:X,optimizedColumns:Y,onPageChange:Z,onPageSizeChange:$,onSort:ee,onRowSelect:te,onRowExpand:ne,onExpandedRowsChange:ae,onRowDrag:le}=e,{t:oe}=(0,u.useTranslation)(g),re=(0,a.useMemo)((()=>(0,s.VC)()),[]),ie=(0,c.useCurrentTheme)(),se="zh"===d.i18n.language.split("-")[0]?I.A:N.A,ce=(0,C.FR)((0,C.MS)(C.AN,{activationConstraint:{distance:1}})),[de,ue]=(0,a.useState)(null==_?void 0:_.list),pe=(0,a.useMemo)((()=>{var e;return(null==_||null===(e=_.list)||void 0===e?void 0:e.map((e=>e[R])))??[]}),[null==_?void 0:_.list,R]),[{page:me,pageSize:ge},he]=(0,a.useState)({page:(null==_?void 0:_.page)??1,pageSize:(null==_?void 0:_.pageSize)??20}),[fe,be]=(0,a.useState)(e.selectedRowKeys),[ve,we]=(0,a.useState)(e.expandedRowKeys??[]),[xe,ye]=(0,a.useState)(e.sort),Se=(0,a.useMemo)((()=>{var e;return null==_||null===(e=_.list)||void 0===e?void 0:e.some((e=>{var t;return null===(t=e[U])||void 0===t?void 0:t.length}))}),[null==_?void 0:_.list,U]);(0,a.useEffect)((()=>{be(e.selectedRowKeys)}),[e.selectedRowKeys]),(0,a.useEffect)((()=>{we(e.expandedRowKeys??[])}),[e.expandedRowKeys]),(0,a.useEffect)((()=>{y(H)&&H.defaultExpandAllRows&&we(S({list:null==_?void 0:_.list,rowKey:R,childrenColumnName:U}))}),[]),(0,a.useEffect)((()=>{ue(null==_?void 0:_.list),he({page:(null==_?void 0:_.page)??1,pageSize:(null==_?void 0:_.pageSize)??20})}),[_]),(0,a.useEffect)((()=>{ye(e.sort)}),[e.sort]);const Ee=(0,a.useMemo)((()=>{const e=new Set(q),t=new Set(Y),n=(0,h.keyBy)([].concat(xe||[]),"columnKey");return null==T?void 0:T.filter((t=>!e.has(t.key))).map((e=>{const a=n[e.key],o=(t,n)=>{return a=w(t,e.dataIndex),l=w(n,e.dataIndex),String(a).localeCompare(String(l));var a,l};return{...e,...e.sortable?{sorter:j?{compare:D?o:void 0,multiple:e.sortPriority}:!D||o,sortOrder:a?a.order:null}:{},...t.has(e.key)?{shouldCellUpdate:(e,t)=>e!==t}:{},render(t,n,a){const o={cellData:t,rowData:n,columnIndex:a,rowIndex:a,columnKey:e.key};return null!=F&&F.useBrick?l().createElement(L,{useBrick:F.useBrick,data:o}):e.useBrick?l().createElement(L,{useBrick:e.useBrick,data:o}):l().createElement(l().Fragment,null,t)},title(){var t,n;const a={title:e.title,columnKey:e.key};return null!=F&&null!==(t=F.header)&&void 0!==t&&t.useBrick?l().createElement(L,{useBrick:F.header.useBrick,data:a}):null!==(n=e.headerBrick)&&void 0!==n&&n.useBrick?l().createElement(L,{useBrick:e.headerBrick.useBrick,data:a}):l().createElement(l().Fragment,null,e.title)},onCell:t=>({colSpan:e.cellColSpanKey?t[e.cellColSpanKey]:void 0,rowSpan:e.cellRowSpanKey?t[e.cellRowSpanKey]:void 0,style:{...e.cellStyle,verticalAlign:e.verticalAlign}}),onHeaderCell:()=>({style:e.headerStyle})}}))}),[F,T,q,j,xe,D,Y]),ke=(0,a.useMemo)((()=>{if(!1!==P&&!(0,h.isNil)(P))return{...b,...!0===P?{}:P}}),[P]),Ce=(0,a.useMemo)((()=>!1!==M&&{...f,...M}),[M]),Ae=(0,a.useMemo)((()=>Se||!Se&&"children"!==U?y(H)?H:{}:!1===H||(0,h.isNil)(H)?void 0:y(H)?H:{}),[H,Se,U]);(0,a.useImperativeHandle)(t,(()=>({search:e=>{let{q:t}=e;const n=x({q:(null==t?void 0:t.trim().toLowerCase())||"",list:null==_?void 0:_.list,columns:T,searchFields:V,childrenColumnName:U});ue(n),he((e=>{if(1!==e.page){const t={page:1,pageSize:e.pageSize??20};return null==Z||Z(t),t}return e}))}})));const Be=(0,a.useCallback)((e=>{let{active:t,over:n}=e;n&&t.id!==(null==n?void 0:n.id)&&ue((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const a=e.findIndex((e=>e[R]===t.id)),l=e.findIndex((e=>e[R]===(null==n?void 0:n.id))),o=(0,A.be)(e,a,l);return null==le||le({list:o,active:e[a],over:e[l]}),o}))}),[R,le]);return l().createElement(o.Ay,{locale:se,theme:{algorithm:"dark-v2"===ie?r.A.darkAlgorithm:r.A.defaultAlgorithm,components:{Table:{headerBorderRadius:0,headerSplitColor:"none",...W?{borderColor:"#f0f0f0"}:{}}}},getPopupContainer:()=>E},l().createElement(s.N7,{container:E,cache:re},l().createElement(C.Mp,{sensors:ce,collisionDetection:C.fp,modifiers:[B.FN,B.Mk],onDragEnd:Be},l().createElement(A.gB,{items:pe,strategy:A._G},l().createElement(i.A,{components:{body:{row:G&&!Se?z:K}},rowKey:R,columns:Ee,dataSource:de,size:J,showHeader:Q,bordered:W,scroll:X,pagination:!1!==Ce&&{...Ce,total:null==_?void 0:_.total,current:me,pageSize:ge,showTotal:e=>l().createElement("div",{className:"pagination-wrapper"},Ce.showTotal?l().createElement("span",{className:"pagination-total-text"},l().createElement(p.Trans,{i18nKey:oe(m.TOTAL),values:{total:e},components:{el:l().createElement("strong",{className:"pagination-total-number"})}})):null,null!=ke&&ke.showSelectInfo&&null!=fe&&fe.length?l().createElement("span",{className:"select-info"},l().createElement("span",null,oe(m.SELECT_INFO,{count:fe.length})),l().createElement(O,{onClick:()=>{be([]),null==te||te({keys:[],rows:[],info:{type:"none"}})}},oe(m.CLEAR))):null)},rowSelection:void 0===ke?void 0:{...ke,selectedRowKeys:fe,getCheckboxProps(e){const t={rowData:e};return{disabled:void 0!==ke.rowDisabled&&(0,k.checkIfByTransform)({if:ke.rowDisabled},t)}},onChange(e,t,n){be(e),null==te||te({keys:e,rows:t,info:n})}},expandable:void 0===Ae?void 0:{...Ae,childrenColumnName:U,expandedRowKeys:ve,rowExpandable(e){const t={rowData:e};return void 0===Ae.rowExpandable||(0,k.checkIfByTransform)({if:Ae.rowExpandable},t)},expandedRowRender:null!==(n=Ae.expandedRowBrick)&&void 0!==n&&n.useBrick?(e,t,n,a)=>{const o={rowData:e,index:t,indent:n,expanded:a};return l().createElement(L,{useBrick:Ae.expandedRowBrick.useBrick,data:o})}:void 0,expandIcon:null!==(v=Ae.expandIconBrick)&&void 0!==v&&v.useBrick?e=>{let{expanded:t,expandable:n,record:a,onExpand:o}=e;const r={rowData:a,expanded:t,expandable:n};return l().createElement("span",{onClick:e=>n&&o(a,e)},l().createElement(L,{useBrick:Ae.expandIconBrick.useBrick,data:r}))}:void 0,onExpand:(e,t)=>{null==ne||ne({expanded:e,record:t})},onExpandedRowsChange:e=>{const t=[...e];we(t),null==ae||ae(t)}},onChange:(e,t,n,a)=>{switch(a.action){case"paginate":he((t=>{if(t.pageSize!==e.pageSize){const t={page:1,pageSize:e.pageSize??20};return null==$||$(t),null==Z||Z(t),t}if(t.page!==e.current){const t={page:e.current??1,pageSize:e.pageSize??20};return null==Z||Z(t),t}return t}));break;case"sort":{const e=Array.isArray(n)?n.filter((e=>e.order)).map((e=>({columnKey:e.columnKey,order:e.order}))):n.order?{columnKey:n.columnKey,order:n.order}:void 0;ye(e),null==ee||ee(e)}}}})))))}))},61098:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(36758),l=n.n(a),o=n(40935),r=n.n(o)()(l());r.push([e.id,':root{--eo-table-head-cell-padding:14px 12px;--eo-table-body-cell-padding:12px 12px}html[data-ui="v8-2"]{--eo-table-head-cell-padding:8px 12px}html[data-ui="v8-2"] eo-next-table[size="large"]{--eo-table-body-cell-padding:10px 12px}html[data-ui="v8-2"] eo-next-table[size="middle"]{--eo-table-body-cell-padding:8px 12px}html[data-ui="v8-2"] eo-next-table[size="small"]{--eo-table-body-cell-padding:4px 12px}',""]);const i=r},81634:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(36758),l=n.n(a),o=n(40935),r=n.n(o)()(l());r.push([e.id,":host{display:block}:host([hidden]){display:none}.pagination-wrapper{display:flex;gap:20px}.pagination-total-text{color:var(--color-secondary-text)}.pagination-total-number{font-weight:var(--font-weight-400);color:var(--color-normal-text)}.select-info{display:flex;gap:10px}.ant-pagination-total-text{position:absolute;left:0}.ant-pagination-options{order:-1;padding-right:12px}.ant-table-wrapper .ant-table-thead .ant-table-cell{padding:var(--eo-table-head-cell-padding)}.ant-table-wrapper\n  .ant-table-container\n  table\n  > thead\n  > tr:first-child\n  > *:first-child,\n.ant-table-tbody .ant-table-row .ant-table-cell:first-child{padding-left:16px}.ant-table-wrapper\n  .ant-table-container\n  table\n  > thead\n  > tr:first-child\n  > *:last-child,\n.ant-table-tbody .ant-table-row .ant-table-cell:last-child{padding-right:16px}.ant-table-wrapper .ant-table-tbody .ant-table-cell{padding:var(--eo-table-body-cell-padding)}.ant-table-ping-left .ant-table-cell-fix-left-last::after{box-shadow:var(--left-slide-shadow)}.ant-table-ping-right .ant-table-cell-fix-right-first::after{box-shadow:var(--right-slide-shadow)}.ant-pagination-options .ant-select .ant-select-selector{border:none;box-shadow:none!important;color:var(--color-normal-text)}.ant-pagination .ant-pagination-item:not(.ant-pagination-item-active) a{color:var(--color-normal-text)}",""]);const i=r.toString()},34612:(e,t,n)=>{var a=n(72591),l=n.n(a),o=n(1740),r=n.n(o),i=n(88128),s=n.n(i),c=n(30855),d=n.n(c),u=n(93051),p=n.n(u),m=n(73656),g=n.n(m),h=n(61098),f={};f.styleTagTransform=g(),f.setAttributes=d(),f.insert=s().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=p(),l()(h.A,f),h.A&&h.A.locals&&h.A.locals}}]);
//# sourceMappingURL=5479.b11c7003.js.map