"use strict";(self.webpackChunk_next_bricks_advanced=self.webpackChunk_next_bricks_advanced||[]).push([[8172],{600:(e,n,a)=>{a.d(n,{v:()=>D});var t=a(3028),r=a(8657),l=a.n(r),o=a(2859),i=a(8786),s=a(2504),d=a(7263),u=a(1436),c=a(860),p=a(7088),v=a(2068),m=function(e){return e.TOTAL="TOTAL",e.SELECT_INFO="SELECT_INFO",e.CLEAR="CLEAR",e}({}),g="bricks/advanced/eo-next-table",f=a(5178),h={showSizeChanger:!0,showTotal:!0},w={preserveSelectedRowKeys:!0,showSelectInfo:!0};function y(e){var n=[];if((0,f.isNil)(e));else if(Array.isArray(e))e.map((e=>n.push(y(e))));else if("[object Object]"===Object.prototype.toString.call(e))for(var a in e)n.push(String(a),y(e[a]));else n.push(String(e));return n.flat(1/0).filter(Boolean)}function S(e,n){return Array.isArray(n)?(0,f.get)(e,n):e[n]}function E(e){var{list:n,columns:a,q:r,searchFields:l,childrenColumnName:o}=e;return r?(0,f.reduce)(n,((e,n)=>{var i=[];if(l?i=l.flatMap((e=>y((0,f.get)(n,e)))):a&&(i=a.flatMap((e=>y(S(n,e.dataIndex))))),i.some((e=>e.toLowerCase().includes(r))))return e.concat(n);var s=E({list:n[o],columns:a,q:r,searchFields:l,childrenColumnName:o});if(null!=s&&s.length){var d=(0,t.Z)((0,t.Z)({},n),{},{[o]:s});return e.concat(d)}return e}),[]):n}function k(e){return"[object Object]"===Object.prototype.toString.call(e)&&null!==e&&!Array.isArray(e)}function x(e){var{list:n,rowKey:a,childrenColumnName:t}=e,r=[];return null==n||n.forEach((e=>{r.push(e[a]);var n=x({list:e[t],rowKey:a,childrenColumnName:t});r.push(...n)})),[...new Set(r)]}var C=a(4511),R=a(5062),b=a(1540),B=a(6548),Z=a(8366),T=a(7896),A=a(2851),K=(0,r.forwardRef)((function(e,n){return l().createElement("tr",(0,T.Z)({},e,{ref:n}))}));function z(e){var{attributes:n,listeners:a,setNodeRef:r,transform:o,transition:i,isDragging:s}=(0,B.nB)({id:e["data-row-key"]}),d=(0,t.Z)((0,t.Z)({},e.style),{},{transform:A.ux.Transform.toString(o),transition:i,cursor:"move",touchAction:"none"},s?{position:"relative",zIndex:999}:{});return l().createElement(K,(0,T.Z)({},e,{ref:r,style:d},n,a))}var I=a(4713),N=a(6600);(0,p.initializeReactI18n)(g,{en:{TOTAL:"Total <el>{{ total }}</el> Items",SELECT_INFO:"{{ count }} item selected",SELECT_INFO_plural:"{{ count }} items selected",CLEAR:"Clear"},zh:{TOTAL:"共 <el>{{ total }}</el> 条",SELECT_INFO:"已选择 {{ count }} 项",CLEAR:"清空"}});var L=(0,C.wrapBrick)("eo-link"),D=(0,r.forwardRef)((function(e,n){var a,y,C,T,A,{shadowRoot:D,rowKey:O,columns:F,dataSource:M,frontSearch:_,pagination:j,multiSort:P,rowSelection:q,hiddenColumns:U,expandable:H,childrenColumnName:V,rowDraggable:G,searchFields:J,size:Q,showHeader:W,scrollConfig:X,optimizedColumns:Y,onPageChange:$,onPageSizeChange:ee,onSort:ne,onRowSelect:ae,onRowExpand:te,onExpandedRowsChange:re,onRowDrag:le}=e,{t:oe}=(0,p.useTranslation)(g),ie=(0,r.useMemo)((()=>(0,d.Df)()),[]),se=(0,u.useCurrentTheme)(),de="zh"===c.i18n.language.split("-")[0]?N.Z:I.Z,ue=(0,b.Dy)((0,b.VT)(b.we,{activationConstraint:{distance:1}})),[ce,pe]=(0,r.useState)(null==M?void 0:M.list),ve=(0,r.useMemo)((()=>{var e,n;return null!==(e=null==M||null===(n=M.list)||void 0===n?void 0:n.map((e=>e[O])))&&void 0!==e?e:[]}),[null==M?void 0:M.list,O]),[{page:me,pageSize:ge},fe]=(0,r.useState)({page:null!==(a=null==M?void 0:M.page)&&void 0!==a?a:1,pageSize:null!==(y=null==M?void 0:M.pageSize)&&void 0!==y?y:20}),[he,we]=(0,r.useState)(e.selectedRowKeys),[ye,Se]=(0,r.useState)(null!==(C=e.expandedRowKeys)&&void 0!==C?C:[]),[Ee,ke]=(0,r.useState)(e.sort),xe=(0,r.useMemo)((()=>{var e;return null==M||null===(e=M.list)||void 0===e?void 0:e.some((e=>{var n;return null===(n=e[V])||void 0===n?void 0:n.length}))}),[null==M?void 0:M.list,V]);(0,r.useEffect)((()=>{we(e.selectedRowKeys)}),[e.selectedRowKeys]),(0,r.useEffect)((()=>{var n;Se(null!==(n=e.expandedRowKeys)&&void 0!==n?n:[])}),[e.expandedRowKeys]),(0,r.useEffect)((()=>{k(H)&&H.defaultExpandAllRows&&Se(x({list:null==M?void 0:M.list,rowKey:O,childrenColumnName:V}))}),[]),(0,r.useEffect)((()=>{var e,n;pe(null==M?void 0:M.list),fe({page:null!==(e=null==M?void 0:M.page)&&void 0!==e?e:1,pageSize:null!==(n=null==M?void 0:M.pageSize)&&void 0!==n?n:20})}),[M]),(0,r.useEffect)((()=>{ke(e.sort)}),[e.sort]);var Ce=(0,r.useMemo)((()=>{var e=new Set(U),n=new Set(Y),a=(0,f.keyBy)([].concat(Ee||[]),"columnKey");return null==F?void 0:F.filter((n=>!e.has(n.key))).map((e=>{var r=a[e.key],o=(n,a)=>{return t=S(n,e.dataIndex),r=S(a,e.dataIndex),String(t).localeCompare(String(r));var t,r};return(0,t.Z)((0,t.Z)((0,t.Z)((0,t.Z)({},e),e.sortable?{sorter:P?{compare:_?o:void 0,multiple:e.sortPriority}:!_||o,sortOrder:r?r.order:null}:{}),n.has(e.key)?{shouldCellUpdate:(e,n)=>e!==n}:{}),{},{render(n,a,t){if(e.useBrick){var r={cellData:n,rowData:a,columnIndex:t};return l().createElement(u.ReactUseMultipleBricks,{useBrick:e.useBrick,data:r})}return l().createElement(l().Fragment,null,n)},title(n){var a;if(null!==(a=e.headerBrick)&&void 0!==a&&a.useBrick){var t={title:e.title};return l().createElement(u.ReactUseMultipleBricks,{useBrick:e.headerBrick.useBrick,data:t})}return l().createElement(l().Fragment,null,e.title)},onCell:(n,a)=>({colSpan:e.cellColSpanKey?n[e.cellColSpanKey]:void 0,rowSpan:e.cellRowSpanKey?n[e.cellRowSpanKey]:void 0,style:(0,t.Z)((0,t.Z)({},e.cellStyle),{},{verticalAlign:e.verticalAlign})}),onHeaderCell:()=>({style:e.headerStyle})})}))}),[F,U,P,Ee,_,Y]),Re=(0,r.useMemo)((()=>{if(!1!==q&&!(0,f.isNil)(q))return(0,t.Z)((0,t.Z)({},w),!0===q?{}:q)}),[q]),be=(0,r.useMemo)((()=>!1!==j&&(0,t.Z)((0,t.Z)({},h),j)),[j]),Be=(0,r.useMemo)((()=>xe||!xe&&"children"!==V?k(H)?H:{}:!1===H||(0,f.isNil)(H)?void 0:k(H)?H:{}),[H,xe,V]);(0,r.useImperativeHandle)(n,(()=>({search:e=>{var{q:n}=e,a=E({q:(null==n?void 0:n.trim().toLowerCase())||"",list:null==M?void 0:M.list,columns:F,searchFields:J,childrenColumnName:V});pe(a),fe((e=>{if(1!==e.page){var n,a={page:1,pageSize:null!==(n=e.pageSize)&&void 0!==n?n:20};return null==$||$(a),a}return e}))}})));var Ze=(0,r.useCallback)((e=>{var{active:n,over:a}=e;a&&n.id!==(null==a?void 0:a.id)&&pe((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.findIndex((e=>e[O]===n.id)),r=e.findIndex((e=>e[O]===(null==a?void 0:a.id))),l=(0,B.Rp)(e,t,r);return null==le||le({list:l,active:e[t],over:e[r]}),l}))}),[O,le]);return l().createElement(o.ZP,{locale:de,theme:{algorithm:"dark-v2"===se?i.Z.darkAlgorithm:i.Z.defaultAlgorithm},getPopupContainer:e=>D},l().createElement(d.V9,{container:D,cache:ie},l().createElement(b.LB,{sensors:ue,collisionDetection:b.pE,modifiers:[Z.DL,Z.lv],onDragEnd:Ze},l().createElement(B.Fo,{items:ve,strategy:B.qw},l().createElement(s.Z,{components:{body:{row:G&&!xe?z:K}},rowKey:O,columns:Ce,dataSource:ce,size:Q,showHeader:W,scroll:X,pagination:!1!==be&&(0,t.Z)((0,t.Z)({},be),{},{total:null==M?void 0:M.total,current:me,pageSize:ge,showTotal:e=>l().createElement("div",{className:"pagination-wrapper"},be.showTotal?l().createElement("span",{className:"pagination-total-text"},l().createElement(v.Trans,{i18nKey:oe(m.TOTAL),values:{total:e},components:{el:l().createElement("strong",{className:"pagination-total-number"})}})):null,null!=Re&&Re.showSelectInfo&&null!=he&&he.length?l().createElement("span",{className:"select-info"},l().createElement("span",null,oe(m.SELECT_INFO,{count:he.length})),l().createElement(L,{onClick:()=>{we([]),null==ae||ae({keys:[],rows:[],info:{type:"none"}})}},oe(m.CLEAR))):null)}),rowSelection:void 0===Re?void 0:(0,t.Z)((0,t.Z)({},Re),{},{selectedRowKeys:he,getCheckboxProps(e){var n={rowData:e};return{disabled:void 0!==Re.rowDisabled&&(0,R.checkIfByTransform)({if:Re.rowDisabled},n)}},onChange(e,n,a){we(e),null==ae||ae({keys:e,rows:n,info:a})}}),expandable:void 0===Be?void 0:(0,t.Z)((0,t.Z)({},Be),{},{childrenColumnName:V,expandedRowKeys:ye,rowExpandable(e){var n={rowData:e};return void 0===Be.rowExpandable||(0,R.checkIfByTransform)({if:Be.rowExpandable},n)},expandedRowRender:null!==(T=Be.expandedRowBrick)&&void 0!==T&&T.useBrick?(e,n,a,t)=>{var r={rowData:e,index:n,indent:a,expanded:t};return l().createElement(u.ReactUseMultipleBricks,{useBrick:Be.expandedRowBrick.useBrick,data:r})}:void 0,expandIcon:null!==(A=Be.expandIconBrick)&&void 0!==A&&A.useBrick?e=>{var{expanded:n,expandable:a,record:t,onExpand:r}=e,o={rowData:t,expanded:n,expandable:a};return l().createElement("span",{onClick:e=>a&&r(t,e)},l().createElement(u.ReactUseMultipleBricks,{useBrick:Be.expandIconBrick.useBrick,data:o}))}:void 0,onExpand:(e,n)=>{null==te||te({expanded:e,record:n})},onExpandedRowsChange:e=>{var n=[...e];Se(n),null==re||re(n)}}),onChange:(e,n,a,t)=>{switch(t.action){case"paginate":fe((n=>{if(n.pageSize!==e.pageSize){var a,t={page:1,pageSize:null!==(a=e.pageSize)&&void 0!==a?a:20};return null==ee||ee(t),null==$||$(t),t}if(n.page!==e.current){var r,l,o={page:null!==(r=e.current)&&void 0!==r?r:1,pageSize:null!==(l=e.pageSize)&&void 0!==l?l:20};return null==$||$(o),o}return n}));break;case"sort":var r=Array.isArray(a)?a.filter((e=>e.order)).map((e=>({columnKey:e.columnKey,order:e.order}))):a.order?{columnKey:a.columnKey,order:a.order}:void 0;ke(r),null==ne||ne(r)}}})))))}))},750:(e,n,a)=>{a.d(n,{Z:()=>i});var t=a(9601),r=a.n(t),l=a(2609),o=a.n(l)()(r());o.push([e.id,":host{display:block}:host([hidden]){display:none}.pagination-wrapper{display:flex;gap:20px}.pagination-total-text{color:var(--antd-pagination-total-text)}.pagination-total-number{font-weight:var(--font-weight-400);color:var(--antd-pagination-total-strong-text)}.select-info{display:flex;gap:10px}",""]);const i=o.toString()}}]);
//# sourceMappingURL=8172.eb0719a9.js.map