{"version":3,"file":"chunks/eo-text-tooltip.c1be073e.js","mappings":"8LACO,SAASA,EAAWC,GACzB,OAAOA,GAAsB,mBAAqBA,IAAUA,EAAMC,OAAS,YAC7E,CACO,MAAMC,EAAiB,CAACC,EAASC,EAAaC,IAChC,mBAAqBF,GAGpB,iBAAmBA,EAA0B,mBAAVE,EAAuBA,EAAMF,EAAQE,OAAS,CAAC,GAAKA,GAFlGD,EAIJ,SAASE,EAAaH,EAASE,GACpC,OAAOH,EAAeC,EAASA,EAASE,EAC1C,C,mPCMA,MAAM,cAAEE,EAAa,SAAEC,IAAaC,EAAAA,EAAAA,oBAEpC,IAAAC,EAAA,IAAAC,EAAA,IAAAC,QAAAC,EAAA,IAAAD,QAKA,MAAAE,UAG4BC,EAAAA,iBAAiBC,WAAAA,GAAA,SAAAC,YAC3CC,EAAAA,EAAAA,GAAA,KAAAP,EAAAQ,EAAA,QAOAD,EAAAA,EAAAA,GAAA,KAAAL,GAAAO,EAAA,MAAAC,EAAA,KAK6B,KAACC,EAAA,eAPrBC,GAAK,OAAAC,EAAAA,EAAAA,GAAAb,EAAA,eAALY,CAAKE,IAAAC,EAAAA,EAAAA,GAAAf,EAAA,KAAAc,EAAA,cAOLE,GAAS,OAAAH,EAAAA,EAAAA,GAAAX,EAAA,mBAATc,CAASF,IAAAC,EAAAA,EAAAA,GAAAb,EAAA,KAAAY,EAAA,CAElBG,MAAAA,GACE,OACEC,IAAAA,cAACC,EAAsB,CAACP,MAAOQ,KAAKR,MAAOI,UAAWI,KAAKJ,WAE/D,EAQK,SAASG,EAAuBzB,GACrC,MAAM,UAAEsB,EAAS,MAAEJ,GAAUlB,EACvB2B,GAAMC,EAAAA,EAAAA,QAAuB,OAE5BC,EAAMC,IAAWC,EAAAA,EAAAA,WAAS,GAE3BC,GAAaC,EAAAA,EAAAA,cAAY,KAC7B,MAAMC,EAAYP,EAAIQ,QAEtB,IAAKD,EAAW,OAAO,EACvB,MAAM,YAAEE,EAAW,aAAEC,EAAY,YAAEC,EAAW,aAAEC,GAAiBL,EACjE,OAAOE,EAAcE,GAAeD,EAAeE,CAAY,GAC9D,CAACjB,EAAWJ,IAETsB,GAAQC,EAAAA,EAAAA,UAAQ,KACbC,EAAAA,EAAAA,OACN,IAKH,OAHAC,EAAAA,EAAAA,YAAU,KACRb,EAAQE,IAAa,GACpB,CAACA,IAEFR,IAAAA,cAACoB,EAAAA,GAAc,CAACC,UAAU,UACxBrB,IAAAA,cAACsB,EAAAA,GAAa,CACZN,MAAOA,EACPO,aAAa,OACbC,aAAc,CAACC,EAAAA,KAEfzB,IAAAA,cAAC0B,EAAAA,EAAO,CACNC,MAEEtB,EAAOX,EAAQ,MAGjBM,IAAAA,cAAA,OACEG,IAAKA,EACLyB,UAAU,eACVC,MACE,CACE,eAAgB/B,IAInBJ,KAMb,CAxDCoC,EAAA7C,IAAA8C,GAAAzC,EAAAC,EAAAC,EAAAC,GAAAuC,GAAAnD,EAAAoD,KAAAC,EAAAA,EAAAA,GAAAJ,EAAA,CAvBApD,EAAc,kBAAmB,CAChCyD,WAAY,CAACC,EAAAA,MACb,EAMCzD,EAAS,CAAEP,KAAMiE,SAAS,YAO1B1D,EAAS,CAAEP,KAAMkE,SAAS,yBAZDpD,EAAAA,mBAAgB+C,G,sECzBxCM,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,+RAAgS,KAEzU,QAAeH,EAAwBI,U","sources":["webpack:///../../node_modules/antd/es/_util/reactNode.js","webpack:///./src/text-tooltip/index.tsx","webpack:///./src/text-tooltip/styles.shadow.css"],"sourcesContent":["import React from 'react';\nexport function isFragment(child) {\n  return child && /*#__PURE__*/React.isValidElement(child) && child.type === React.Fragment;\n}\nexport const replaceElement = (element, replacement, props) => {\n  if (! /*#__PURE__*/React.isValidElement(element)) {\n    return replacement;\n  }\n  return /*#__PURE__*/React.cloneElement(element, typeof props === 'function' ? props(element.props || {}) : props);\n};\nexport function cloneElement(element, props) {\n  return replaceElement(element, element, props);\n}","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { createDecorators } from \"@next-core/element\";\nimport { ReactNextElement } from \"@next-core/react-element\";\nimport \"@next-core/theme\";\nimport styleText from \"./styles.shadow.css\";\nimport { Tooltip, ConfigProvider } from \"antd\";\nimport {\n  StyleProvider,\n  createCache,\n  legacyLogicalPropertiesTransformer,\n} from \"@ant-design/cssinjs\";\n\nconst { defineElement, property } = createDecorators();\n\n/**\n * 超出宽度鼠标悬浮显示tooltip\n * 构件 `eo-text-tooltip`\n */\nexport\n@defineElement(\"eo-text-tooltip\", {\n  styleTexts: [styleText],\n})\nclass EoTextTooltip extends ReactNextElement {\n  /**\n   * 文案\n   * @default\n   */\n  @property({ type: String })\n  accessor label: string | undefined;\n\n  /**\n   * 省略行数\n   * @default 1\n   */\n  @property({ type: Number })\n  accessor lineClamp: number = 1;\n\n  render() {\n    return (\n      <EoTextTooltipComponent label={this.label} lineClamp={this.lineClamp} />\n    );\n  }\n}\n\ninterface TooltipPropsEoTextTooltipProps {\n  label?: string;\n  lineClamp?: number;\n}\n\nexport function EoTextTooltipComponent(props: TooltipPropsEoTextTooltipProps) {\n  const { lineClamp, label } = props;\n  const ref = useRef<HTMLDivElement>(null);\n  // 是否显示tooltip\n  const [show, setShow] = useState(false);\n  // 判断是否需要显示省略号\n  const isEllipsis = useCallback(() => {\n    const parentDom = ref.current;\n    /* istanbul ignore if */\n    if (!parentDom) return false;\n    const { offsetWidth, offsetHeight, scrollWidth, scrollHeight } = parentDom;\n    return offsetWidth < scrollWidth || offsetHeight < scrollHeight;\n  }, [lineClamp, label]);\n\n  const cache = useMemo(() => {\n    return createCache();\n  }, []);\n\n  useEffect(() => {\n    setShow(isEllipsis());\n  }, [isEllipsis]);\n  return (\n    <ConfigProvider prefixCls=\"antdV5\">\n      <StyleProvider\n        cache={cache}\n        hashPriority=\"high\"\n        transformers={[legacyLogicalPropertiesTransformer]}\n      >\n        <Tooltip\n          title={\n            /* istanbul ignore next */\n            show ? label : null\n          }\n        >\n          <div\n            ref={ref}\n            className=\"ellipsisWrap\"\n            style={\n              {\n                \"--line-clamp\": lineClamp,\n              } as React.CSSProperties\n            }\n          >\n            {label}\n          </div>\n        </Tooltip>\n      </StyleProvider>\n    </ConfigProvider>\n  );\n}\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host{display:inline;width:-moz-fit-content;width:fit-content;max-width:100%}:host([hidden]){display:none}.ellipsisWrap{display:-webkit-box;word-break:break-all;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:var(--line-clamp);white-space:normal;overflow:hidden}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___.toString();\n"],"names":["isFragment","child","type","replaceElement","element","replacement","props","cloneElement","defineElement","property","createDecorators","_EoTextTooltip","_A","WeakMap","_B","EoTextTooltip","ReactNextElement","constructor","arguments","_classPrivateFieldInitSpec","_init_label","_init_extra_label","_init_lineClamp","_init_extra_lineClamp","label","_classPrivateFieldGet","v","_classPrivateFieldSet","lineClamp","render","React","EoTextTooltipComponent","this","ref","useRef","show","setShow","useState","isEllipsis","useCallback","parentDom","current","offsetWidth","offsetHeight","scrollWidth","scrollHeight","cache","useMemo","createCache","useEffect","ConfigProvider","prefixCls","StyleProvider","hashPriority","transformers","legacyLogicalPropertiesTransformer","Tooltip","title","className","style","_EoTextTooltip2","e","c","_initClass","_applyDecs","styleTexts","styleText","String","Number","___CSS_LOADER_EXPORT___","push","module","id","toString"],"sourceRoot":""}