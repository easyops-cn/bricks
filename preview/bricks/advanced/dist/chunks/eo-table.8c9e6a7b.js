"use strict";(globalThis.webpackChunk_next_bricks_advanced=globalThis.webpackChunk_next_bricks_advanced||[]).push([[572],{36286:(e,t,s)=>{s.d(t,{m:()=>M});var i=s(89575),a=s(18769),n=s.n(a),l=s(42083),r=s(80050),o=s(10264),h=s(41030),d=s(53373),c=s.n(d),p=s(47522),u=s(80255),g=s(63737),m=s(50692),w=s(53435),A=s.n(w),f=s(89592),y=s(24295),b=s(6257),S=s(16137),x=s(85502),C=s(18799),_=s(84352),v=s(26386);(0,x.initializeReactI18n)(S.NS,S.I);const R="DraggableBodyRow",k={lib:"antd",icon:"down",theme:"outlined"},E={lib:"antd",icon:"right",theme:"outlined"},K=(0,y.wrapBrick)("eo-icon"),I=e=>{let{index:t,moveRow:s,className:a,style:l,...r}=e;const o=n().useRef(null),[{isOver:h,dropClassName:d},g]=(0,p.H)({accept:R,collect:e=>{const{index:s}=e.getItem()||{};return s===t?{}:{isOver:e.isOver(),dropClassName:s<t?"dropOverDownward":"dropOverUpward"}},drop:e=>{s(e.index,t)}}),[,m]=(0,u.i)({type:R,item:{type:R,index:t},collect:e=>({isDragging:e.isDragging()})});return g(m(o)),n().createElement("tr",(0,i.A)({ref:o,className:c()(a,{[d]:h}),style:{cursor:"move",...l}},r))},U=(e,t)=>function(){return n().createElement(f.ReactUseMultipleBricks,{useBrick:e,data:t})},N=(e,t)=>function(s,i,a){if(e){let l=null==t?void 0:t.get(i);return l||(l={cellData:s,rowData:i,columnIndex:a},null==t||t.set(i,l)),n().createElement(f.ReactUseMultipleBricks,{useBrick:e,data:l})}};function M(e){const{t}=(0,x.useTranslation)(S.NS),s="zh"===C.i18n.language.split("-")[0]?v.A:_.A;if(e.error)throw e.error;const{configProps:d={pagination:!0,sortBy:!1},columns:p,rowKey:u="key",expandIconAsCell:w,expandIconColumnIndex:y,childrenColumnName:R,scroll:M,optimizedColumns:P,onDelete:W,ellipsisInfo:B,showHeader:z}=e,D=(0,a.useMemo)((()=>{var t;return null===(t=e.dataSource)||void 0===t?void 0:t.map(((e,t)=>(0,h.isNil)(e[u])?{...e,[u]:t}:e))}),[e.dataSource,u]),[T,F]=(0,a.useState)(D),O=(0,a.useRef)(new Map),q=(0,a.useRef)(new Map),H=(0,a.useRef)(new Map),$=(0,a.useRef)(new Map);(0,a.useEffect)((()=>{$.current.clear(),F(D)}),[D]);const L=null!=d&&d.rowSelection?-1:0,Q=(0,a.useMemo)((()=>{if(p){q.current.clear(),H.current.clear();const e=p.map(((e,t)=>{const{useBrick:s,valueSuffix:i,cellStatus:a,cellStyle:l={},headerBrick:r,colSpanKey:d,rowSpanKey:c,filterDropdownBrick:p,...g}=e;if(null!=r&&r.useBrick){const t=null==r?void 0:r.useBrick;let s=q.current.get(e);s||(s={title:g.title},q.current.set(e,s)),g.title=U(t,s)}if(null!=p&&p.useBrick&&(g.filterDropdown=n().createElement(f.ReactUseMultipleBricks,{useBrick:p.useBrick})),s){let e;s&&(e=H.current.get(s),e||(e=new Map,H.current.set(s,e))),g.render=N(s,e),g.shouldCellUpdate=(e,t)=>!(0,h.isEqual)(e,t)}else i&&(g.render=e=>e+i);if(!w&&t===Number(y)+L){const e=g.render;g.render=function(t,s,i){return n().createElement(n().Fragment,null,!s[R]&&O.current.get(u?s[u]:s),e?e(t,s,i):t)}}if(a||d||c||l){const e=g.render;g.render=(t,s,i)=>({children:e?e(t,s,i):t,props:{colSpan:s[d],rowSpan:s[c],style:{...a?(0,o.Id)(a,s,t):{},...l}}})}return"string"==typeof g.dataIndex&&(g.dataIndex=(0,h.toPath)(g.dataIndex)),"top"===g.verticalAlign&&(g.className?g.className+=" alignTop":g.className="alignTop"),"bottom"===g.verticalAlign&&(g.className?g.className+=" alignBottom":g.className="alignBottom"),B&&(g.className?g.className+=" ellipsisInfoCell":g.className="ellipsisInfoCell"),g}));return e}}),[p,R,w,y,L,u,W,B]),V={body:{row:I}},j=(t,s)=>{const i=T[t],a=A()(T,{$splice:[[t,1],[s,0,i]]});F(a),e.onDrag&&e.onDrag(a)},X=(0,h.pickBy)({expandIconColumnIndex:y,expandIconAsCell:w,expandRowByClick:e.expandRowByClick,expandedRowKeys:e.expandedRowKeys,defaultExpandAllRows:e.defaultExpandAllRows},(e=>!(0,h.isNil)(e)));let J=n().createElement(l.A,(0,i.A)({className:c()("brickTable",{expandIconCellHidden:!w,customDropTable:e.tableDraggable,tableThTransparent:e.thTransparent,zebraPatternTable:(null==T?void 0:T.length)>=2&&e.zebraPattern,xSmallSizeTable:e.xSmallSizeTable}),dataSource:T},e.tableDraggable?{components:V,onRow:(e,t)=>({index:t,moveRow:j})}:{},{columns:Q,onChange:e.onChange},e.expandedRowBrick?{expandedRowRender:(t,s)=>{var i;let a=$.current.get(t);return a||(a={rowData:t,rowIndex:s},$.current.set(t,a)),n().createElement(f.ReactUseMultipleBricks,{useBrick:null===(i=e.expandedRowBrick)||void 0===i?void 0:i.useBrick,data:a})}}:{},X,{onExpand:(t,s)=>{e.onExpand&&e.onExpand(t,s)},showSorterTooltip:!1,onExpandedRowsChange:t=>{e.onExpandedRowsChange&&e.onExpandedRowsChange(t)},rowKey:u,childrenColumnName:R,rowClassName:(t,s)=>t.invalidRow?"invalidRow":t.disabledRow?"disabledRow":e.zebraPattern&&s%2?"brickTableOddRow":"",expandIcon:t=>{var s;const{record:i,expandable:a,expanded:l,onExpand:r}=t;let o,h=(null===(s=e.expandIcon)||void 0===s?void 0:s.collapsedIcon)||k;var d;a?(l||(h=(null===(d=e.expandIcon)||void 0===d?void 0:d.expandedIcon)||E),o=n().createElement("span",{className:"expandIconSpan","data-testid":"expand-icon",onClick:e=>{r(i,e)}},n().createElement(K,h))):o=n().createElement("span",{className:"expandIconSpan","data-testid":"expand-icon"},n().createElement("span",{style:{visibility:"hidden"}},n().createElement(K,h)));return o?(w||O.current.set(u?i[u]:i,o),o):n().createElement(n().Fragment,null)},scroll:M,showHeader:z},d));e.tableDraggable&&(J=n().createElement(g.Q,{backend:m.t2},J));const G=(0,a.useMemo)((()=>(0,b.VC)()),[]);return n().createElement(r.Ay,{locale:s},n().createElement(b.N7,{container:e.shadowRoot,cache:G},J))}},16137:(e,t,s)=>{s.d(t,{I:()=>a,NS:()=>i});const i="bricks/advanced/eo-table",a={en:{},zh:{}}},72643:(e,t,s)=>{s.r(t),s.d(t,{TableComponent:()=>Ot});var i,a=s(24586),n=s(74635),l=s(70918),r=s(26902),o=s(5536),h=s(86121),d=s(70829),c=s(62740),p=s(18769),u=s.n(p),g=s(10300),m=s(24295),w=s(2198),A=s(41030),f=s(15223),y=s(36286),b=s(10264);let S,x,C,_,v,R,k,E,K,I,U,N,M,P,W,B,z,D,T,F,O,q,H,$,L,Q,V,j,X,J,G,Y,Z,ee,te,se,ie,ae,ne,le,re,oe,he,de,ce,pe,ue,ge,me,we,Ae,fe,ye,be,Se,xe,Ce,_e,ve,Re,ke,Ee,Ke,Ie,Ue,Ne,Me,Pe,We,Be,ze,De,Te,Fe,Oe,qe,He,$e,Le,Qe,Ve,je,Xe,Je,Ge,Ye,Ze,et,tt,st,it,at,nt,lt,rt,ot,ht,dt,ct,pt,ut,gt,mt,wt,At,ft,yt,bt,St,xt,Ct,_t,vt,Rt,kt,Et,Kt,It,Ut,Nt,Mt,Pt,Wt,Bt;s(76477);const{defineElement:zt,property:Dt,event:Tt,method:Ft}=(0,g.createDecorators)();let Ot;var qt=new WeakMap,Ht=new WeakSet,$t=new WeakMap,Lt=new WeakMap,Qt=new WeakMap,Vt=new WeakMap,jt=new WeakMap,Xt=new WeakMap,Jt=new WeakMap,Gt=new WeakMap,Yt=new WeakMap,Zt=new WeakMap,es=new WeakMap,ts=new WeakMap,ss=new WeakMap,is=new WeakMap,as=new WeakMap,ns=new WeakMap,ls=new WeakMap,rs=new WeakMap,os=new WeakMap,hs=new WeakMap,ds=new WeakMap,cs=new WeakMap,ps=new WeakMap,us=new WeakMap,gs=new WeakMap,ms=new WeakMap,ws=new WeakMap,As=new WeakMap,fs=new WeakMap,ys=new WeakMap,bs=new WeakMap,Ss=new WeakMap,xs=new WeakMap,Cs=new WeakMap,_s=new WeakMap,vs=new WeakMap,Rs=new WeakMap,ks=new WeakMap,Es=new WeakMap,Ks=new WeakMap,Is=new WeakMap,Us=new WeakMap,Ns=new WeakMap,Ms=new WeakMap,Ps=new WeakMap,Ws=new WeakMap,Bs=new WeakMap,zs=new WeakMap,Ds=new WeakMap,Ts=new WeakMap,Fs=new WeakMap,Os=new WeakMap,qs=new WeakMap;class Hs extends m.ReactNextElement{constructor(){super(...arguments),(0,n.A)(this,Ht),(0,l.A)(this,qt,(S(this),C(this))),(0,l.A)(this,$t,(R(this),k(this))),(0,l.A)(this,Lt,(I(this),U(this))),(0,l.A)(this,Qt,(P(this),W(this))),(0,l.A)(this,Vt,(D(this),T(this))),(0,l.A)(this,jt,(q(this),H(this))),(0,l.A)(this,Xt,(Q(this),V(this))),(0,l.A)(this,Jt,(J(this),G(this))),(0,l.A)(this,Gt,(ee(this),te(this,!0))),(0,l.A)(this,Yt,(se(this),ie(this))),(0,l.A)(this,Zt,(ae(this),ne(this))),(0,l.A)(this,es,(le(this),re(this))),(0,l.A)(this,ts,(oe(this),he(this,!1))),(0,l.A)(this,ss,(de(this),ce(this))),(0,l.A)(this,is,(pe(this),ue(this))),(0,l.A)(this,as,(ge(this),me(this))),(0,l.A)(this,ns,(we(this),Ae(this))),(0,l.A)(this,ls,(fe(this),ye(this))),(0,l.A)(this,rs,(be(this),Se(this))),(0,l.A)(this,os,(xe(this),Ce(this))),(0,l.A)(this,hs,(_e(this),ve(this,!0))),(0,l.A)(this,ds,(Re(this),ke(this))),(0,l.A)(this,cs,(Ee(this),Ke(this))),(0,l.A)(this,ps,(Ie(this),Ue(this))),(0,l.A)(this,us,(Ne(this),Me(this,!1))),(0,l.A)(this,gs,(Pe(this),We(this))),(0,l.A)(this,ms,(Be(this),ze(this))),(0,l.A)(this,ws,(De(this),Te(this))),(0,l.A)(this,As,(Fe(this),Oe(this))),(0,l.A)(this,fs,(qe(this),He(this))),(0,a.A)(this,"_disabledChildrenKeys",($e(this),[])),(0,l.A)(this,ys,Le(this,"children")),(0,l.A)(this,bs,(Qe(this),Ve(this,!0))),(0,l.A)(this,Ss,(je(this),Xe(this))),(0,l.A)(this,xs,(Je(this),Ge(this,""))),(0,l.A)(this,Cs,(Ye(this),Ze(this))),(0,l.A)(this,_s,(et(this),tt(this))),(0,l.A)(this,vs,(st(this),it(this))),(0,l.A)(this,Rs,(at(this),nt(this))),(0,l.A)(this,ks,(lt(this),rt(this,{x:!0}))),(0,l.A)(this,Es,(ot(this),ht(this,"q"))),(0,l.A)(this,Ks,(dt(this),ct(this))),(0,l.A)(this,Is,(pt(this),ut(this))),(0,l.A)(this,Us,(gt(this),mt(this))),(0,l.A)(this,Ns,(wt(this),At(this,[]))),(0,l.A)(this,Ms,(ft(this),yt(this))),(0,l.A)(this,Ps,(bt(this),St(this))),(0,l.A)(this,Ws,(xt(this),Ct(this,!0))),(0,l.A)(this,Bs,(_t(this),vt(this))),(0,l.A)(this,zs,(Rt(this),kt(this))),(0,l.A)(this,Ds,(Et(this),Kt(this))),(0,l.A)(this,Ts,(It(this),Ut(this,!0))),(0,l.A)(this,Fs,(Nt(this),Mt(this,!0))),(0,a.A)(this,"_originalDataSource",(Pt(this),[])),(0,a.A)(this,"_dataSource",[]),(0,a.A)(this,"_pureSource",void 0),(0,a.A)(this,"_columns",void 0),(0,a.A)(this,"_finalConfigProps",{}),(0,a.A)(this,"_error",void 0),(0,l.A)(this,Os,void 0),(0,a.A)(this,"_selectUpdateEventName",""),(0,a.A)(this,"_selectUpdateEventDetailKeys",[]),(0,a.A)(this,"_selectUpdateEventDetailField",""),(0,a.A)(this,"_selectUpdateEventDetailExtra",{}),(0,a.A)(this,"_fields",{page:"page",pageSize:"pageSize",dataSource:"list",total:"total",ascend:"ascend",descend:"descend"}),(0,l.A)(this,qs,Wt(this,[])),(0,a.A)(this,"_selected",(Bt(this),!1)),(0,a.A)(this,"_selectedRow",void 0),(0,a.A)(this,"_selectedRows",[]),(0,a.A)(this,"_allChildren",[]),(0,a.A)(this,"_isInSelect",!1),(0,a.A)(this,"_getRowKey",(()=>{var e;return this.rowKey??this._fields.rowKey??(null===(e=this.configProps)||void 0===e?void 0:e.rowKey)??"key"})),(0,a.A)(this,"_findParentByChildKeyValue",((e,t,s,i)=>{let a;return s.some((s=>{if(s[t]===e)a=i;else{const i=s[this.childrenColumnName];i&&(a=this._findParentByChildKeyValue(e,t,i,s))}return!!a})),a})),(0,a.A)(this,"_handleRowSelectChange",((e,t)=>{const s=this._getRowKey(),i=(0,A.keyBy)(t,s);if(this._selected){const t=[...e];if(this._allChildren.forEach((e=>{const a=e[s];t.push(a),i[a]=e})),this.autoSelectParentWhenAllChildrenSelected&&this._selectedRow){const a=new Set(e),n=this._findParentByChildKeyValue(this._selectedRow[s],s,this._dataSource);if(n&&n[this.childrenColumnName].every((e=>a.has(e[s])))){const e=n[s];t.push(e),i[e]=n}}this.selectedRowKeys=(0,A.uniq)(t)}else{let t;this.autoSelectParentWhenAllChildrenSelected&&this._selectedRow&&(t=this._findParentByChildKeyValue(this._selectedRow[s],s,this._dataSource)),this.selectedRowKeys=(0,A.pullAll)(e,(0,A.map)(this._allChildren.concat(t),s))}this._selectedRow=void 0;const a=(0,A.keyBy)(this.extraRows,s);this._selectedRows=this.selectedRowKeys.map((e=>i[e]||a[e]));let n=null;const l=(0,A.isEmpty)(this._selectUpdateEventDetailField)?this._selectedRows:(0,A.map)(this._selectedRows,(e=>(0,A.get)(e,this._selectUpdateEventDetailField)));n=(0,A.isEmpty)(this._selectUpdateEventDetailKeys)||(0,A.isEmpty)(l)?l:(0,A.set)({},this._selectUpdateEventDetailKeys,l),(0,A.isEmpty)(n)||(n=(0,A.merge)(n,this._selectUpdateEventDetailExtra)),this._selectUpdateEventName?this.dispatchEvent(new CustomEvent(this._selectUpdateEventName,{detail:n})):(0,o.A)(Ht,this,N).emit(n),(0,o.A)(Ht,this,B).emit(e)})),(0,a.A)(this,"_getSelectedRowsWithChildren",(e=>{const t=[];return!(0,A.isEmpty)(e[this.childrenColumnName])&&(0,A.isArray)(e[this.childrenColumnName])&&(0,A.forEach)(e[this.childrenColumnName],(e=>{t.push(e),t.push(...this._getSelectedRowsWithChildren(e))})),t})),(0,a.A)(this,"_handleOnSelect",((e,t)=>{this._selected=t,this._selectedRow=e,this._isInSelect=!0;const s=this._getRowKey(),i=this.selectAllChildren?this._getSelectedRowsWithChildren(e):[];this._allChildren=i,this.autoSelectParentWhenAllChildrenSelected||(this._disabledChildrenKeys=t?(0,A.uniq)([...this._disabledChildrenKeys,...(0,A.map)(i,s)]):(0,A.pullAll)(this._disabledChildrenKeys,[...(0,A.map)(i,s)])),this.storeCheckedByUrl&&s&&this._updateUrlChecked([e[s]],t)})),(0,a.A)(this,"_handleSelectAll",((e,t,s)=>{this._selected=e,this._isInSelect=!0;const i=this._getRowKey();if(this.selectAllChildren){const t=(0,A.map)(this._dataSource,i),a=s.filter((e=>t.includes(e[i]))),n=(0,A.flatten)((0,A.map)(a,(e=>(0,A.map)(this._getSelectedRowsWithChildren(e),(e=>e[i]))))),l=(0,A.flatten)((0,A.map)(a,(e=>(0,A.map)(this._getSelectedRowsWithChildren(e),(e=>e)))));this._allChildren=l,this.autoSelectParentWhenAllChildrenSelected||(this._disabledChildrenKeys=e?(0,A.uniq)(this._disabledChildrenKeys.concat(n)):this._disabledChildrenKeys.filter((e=>!n.includes(e))))}this.storeCheckedByUrl&&i&&this._updateUrlChecked((0,A.map)(s,i),e)})),(0,a.A)(this,"_getCheckedFromUrl",(()=>{const e=(0,f.getHistory)(),t=new URLSearchParams(e.location.search).get("checked");return(0,A.isEmpty)(t)?[]:t.split(",")})),(0,a.A)(this,"_updateUrlChecked",((e,t)=>{const s=(0,f.getHistory)();let i=this._getCheckedFromUrl();t?i=[...i,...e]:(0,A.pull)(i,...e),this.shouldUpdateUrlParams&&s.pushQuery({checked:i.join(",")},{notify:!1})})),(0,a.A)(this,"_handleOnChange",((e,t,s)=>{const i=(0,f.getHistory)(),a=new URLSearchParams(i.location.search);if(!(0,A.isEmpty)(e))if(e.pageSize!==this.pageSize)e.current=1,a.set("page","1"),a.set("pageSize",(null==e?void 0:e.pageSize).toString()),(0,o.A)(Ht,this,E).emit({[this._fields.pageSize]:e.pageSize,[this._fields.page]:1}),this.page=1,this.pageSize=e.pageSize;else if(e.current!==this.page){const t=e.current||1;a.set("page",t.toString()),(0,o.A)(Ht,this,_).emit({[this._fields.page]:t}),this.page=t}this.filters=t,(0,A.isEmpty)(t)||(0,A.forEach)(t,((e,t)=>{(0,A.isNil)(e)||0===e.length?a.delete(t):a.set(t,e)})),s.order&&(0,A.isNil)(s.order)&&(s.columnKey!==this.sort||this._fields[s.order]!==this.order)&&(s.columnKey&&s.order?(a.set("sort",s.columnKey),a.set("order",this._fields[s.order].toString()),this.sort=s.columnKey,this.order=this._fields[s.order]):(a.delete("sort"),a.delete("order"),this.sort=null,this.order=null),(0,o.A)(Ht,this,F).emit({sort:this.sort,order:this.order})),this.frontSearch?(this.shouldUpdateUrlParams&&i.push(`?${a}`,{notify:!1}),this.frontendSearch(e,t,s)):this.shouldUpdateUrlParams&&i.push(`?${a}`,{notify:!!this.shouldRenderWhenUrlParamsUpdate})})),(0,a.A)(this,"renderSelectInfo",(()=>u().createElement("span",{style:{marginLeft:20}},u().createElement("span",null,"已选择",this.selectedRowKeys.length,"项"),u().createElement("a",{role:"button",style:{marginLeft:"10px"},onClick:()=>{this.selectedRowKeys=[],this._selectedRows=[],this._disabledChildrenKeys=[],this._allChildren=[],this._selectUpdateEventName?this.dispatchEvent(new CustomEvent(this._selectUpdateEventName,{detail:[]})):(0,o.A)(Ht,this,N).emit([])}},"清空")))),(0,a.A)(this,"_handleOnExpand",((e,t)=>{if(this.expandedRowKeys){const s=this._getRowKey(),i=[(0,A.get)(t,s)],a=(0,A.get)(t,this.childrenColumnName);if(!(0,A.isEmpty)(a)){const e=(0,A.map)((0,A.filter)(a,(e=>(0,A.isEmpty)((0,A.get)(e,this.childrenColumnName)))),s);i.push(...e)}this.expandedRowKeys=e?[...this.expandedRowKeys,...i]:(0,A.pull)(this.expandedRowKeys,...i),this._render()}(0,o.A)(Ht,this,$).emit({expanded:e,record:t})})),(0,a.A)(this,"_handleOnExpandedRowsChange",(e=>{(0,o.A)(Ht,this,j).emit({expandedRows:e})})),(0,a.A)(this,"_handleOnDrag",(e=>{(0,o.A)(Ht,this,Y).emit({data:e})})),(0,a.A)(this,"_getAllRows",(()=>{const e=[];return(0,b.RX)(this._dataSource,this.childrenColumnName,e),e})),(0,a.A)(this,"_handleDefaultSelectAll",(()=>{this._isInSelect=!0;const e=this._getRowKey();return this._selectedRows=this._getAllRows(),this.selectedRowKeys=(0,A.map)(this._selectedRows,e),this.selectedRowKeys})),(0,a.A)(this,"_initConfigProps",(()=>{var e;const t={current:this.page,pageSize:this.pageSize,total:(0,d.A)(Os,this),showSizeChanger:!0,pageSizeOptions:["10","20","50"],showTotal:e=>{var t;return u().createElement(u().Fragment,null,u().createElement("span",{className:"totalText"},"共 ",u().createElement("strong",{className:"total"},e)," 条"),((null===(t=this.configProps)||void 0===t?void 0:t.rowSelection)||this.rowSelection)&&this.showSelectInfo&&0!==this.selectedRowKeys.length&&this.renderSelectInfo())}},s=this._getRowKey();let i;this.rowDisabledConfig&&(i=Array.isArray(this.rowDisabledConfig)?this.rowDisabledConfig:[this.rowDisabledConfig]);const a={...s?{selectedRowKeys:this._isInSelect?this.selectedRowKeys:this.storeCheckedByUrl?this._getCheckedFromUrl():this.defaultSelectAll?this._handleDefaultSelectAll():this.selectedRowKeys,onSelect:this._handleOnSelect,onSelectAll:this._handleSelectAll,onChange:this._handleRowSelectChange,preserveSelectedRowKeys:!0}:{onChange:this._handleRowSelectChange,preserveSelectedRowKeys:!0},getCheckboxProps:e=>!(0,A.isEmpty)(this._disabledChildrenKeys)&&this._disabledChildrenKeys.includes((0,A.get)(e,s))?{disabled:!0}:i?{disabled:i.some((t=>{const{field:s,value:i,operator:a}=t,n=b.LT[a];return null==n?void 0:n(i,(0,A.get)(e,s))}))}:{}};this.configProps?(this._finalConfigProps=(0,A.cloneDeep)(this.configProps),!1!==this.configProps.pagination&&(this._finalConfigProps.pagination={...t,...this.pagination,...this.configProps.pagination},void 0!==this.configProps.pagination&&null!==this.configProps.pagination||!1!==this.pagination||(this._finalConfigProps.pagination=!1)),this.configProps.size||(this._finalConfigProps.size="x-small"==this.size?"":this.size)):(this._finalConfigProps={},this._finalConfigProps.pagination=!1!==this.pagination&&t,this._finalConfigProps.size="x-small"==this.size?"":this.size);const n=(null===(e=this.configProps)||void 0===e?void 0:e.rowSelection)??this.rowSelection;n?this._finalConfigProps.rowSelection=!0===n?{...a,type:this.type??"checkbox"}:{...a,type:this.type??"checkbox",...n,...a.selectedRowKeys?{selectedRowKeys:a.selectedRowKeys}:{}}:this.type?this._finalConfigProps.rowSelection={...a,type:this.type}:this._finalConfigProps.rowSelection=!1,this._columns&&(this._columns=this._columns.map((e=>{if((0,A.isNil)(e.key)&&(e.key=e.dataIndex),e.sorter&&(e.sortOrder=this.sort===e.key&&!(0,A.isNil)(this.order)&&(this._fields.ascend===this.order?"ascend":"descend")),e.filters){var t;const s=(0,f.getHistory)(),i=new URLSearchParams(s.location.search).get(e.key)??(null===(t=(0,A.get)(this.filters,e.key))||void 0===t?void 0:t.join(","));(0,A.isNil)(i)||(0,A.isEmpty)(i)?(e.filtered=!1,e.filteredValue=[]):(e.filtered=!0,e.filteredValue=i.split(",").map((t=>{var s;return(null===(s=(0,A.find)(e.filters,(e=>String(e.value)===t)))||void 0===s?void 0:s.value)??t})))}return e})))}))}set columns(e){this._columns=e,this._render()}get columns(){return this._columns}set dataSource(e){if(this._isInSelect=!1,this._originalDataSource=e,this._dataSource=(0,A.cloneDeep)(this._fields.dataSource?(0,A.get)(e,this._fields.dataSource):e),this._pureSource=(0,A.cloneDeep)(this._dataSource),this.stripEmptyExpandableChildren){var t;const e=(null===(t=this.configProps)||void 0===t||null===(t=t.expandable)||void 0===t?void 0:t.childrenColumnName)||"children";(0,b.zA)(e,this._dataSource)}(0,h.A)(Os,this,(0,A.get)(e,this._fields.total)),this.page=(0,A.get)(e,"page")??this.page??1,this.pageSize=(0,A.get)(e,"page_size")??(0,A.get)(e,"pageSize")??this.pageSize??10,this._render()}get showCard(){return(0,d.A)(Gt,this)}set showCard(e){(0,h.A)(Gt,this,e)}get rowSelection(){return(0,d.A)(Yt,this)}set rowSelection(e){(0,h.A)(Yt,this,e)}get rowKey(){return(0,d.A)(Zt,this)}set rowKey(e){(0,h.A)(Zt,this,e)}get hiddenColumns(){return(0,d.A)(es,this)}set hiddenColumns(e){(0,h.A)(es,this,e)}get showSelectInfo(){return(0,d.A)(ts,this)}set showSelectInfo(e){(0,h.A)(ts,this,e)}get filters(){return(0,d.A)(ss,this)}set filters(e){(0,h.A)(ss,this,e)}get configProps(){return(0,d.A)(is,this)}set configProps(e){(0,h.A)(is,this,e)}get sort(){return(0,d.A)(as,this)}set sort(e){(0,h.A)(as,this,e)}get order(){return(0,d.A)(ns,this)}set order(e){(0,h.A)(ns,this,e)}get rowDisabledConfig(){return(0,d.A)(ls,this)}set rowDisabledConfig(e){(0,h.A)(ls,this,e)}get expandedRowBrick(){return(0,d.A)(rs,this)}set expandedRowBrick(e){(0,h.A)(rs,this,e)}get expandIcon(){return(0,d.A)(os,this)}set expandIcon(e){(0,h.A)(os,this,e)}get expandIconAsCell(){return(0,d.A)(hs,this)}set expandIconAsCell(e){(0,h.A)(hs,this,e)}get expandIconColumnIndex(){return(0,d.A)(ds,this)}set expandIconColumnIndex(e){(0,h.A)(ds,this,e)}get expandRowByClick(){return(0,d.A)(cs,this)}set expandRowByClick(e){(0,h.A)(cs,this,e)}get optimizedColumns(){return(0,d.A)(ps,this)}set optimizedColumns(e){(0,h.A)(ps,this,e)}get stripEmptyExpandableChildren(){return(0,d.A)(us,this)}set stripEmptyExpandableChildren(e){(0,h.A)(us,this,e)}get defaultExpandAllRows(){return(0,d.A)(gs,this)}set defaultExpandAllRows(e){(0,h.A)(gs,this,e)}get ellipsisInfo(){return(0,d.A)(ms,this)}set ellipsisInfo(e){(0,h.A)(ms,this,e)}get expandedRowKeys(){return(0,d.A)(ws,this)}set expandedRowKeys(e){(0,h.A)(ws,this,e)}get selectAllChildren(){return(0,d.A)(As,this)}set selectAllChildren(e){(0,h.A)(As,this,e)}get defaultSelectAll(){return(0,d.A)(fs,this)}set defaultSelectAll(e){(0,h.A)(fs,this,e)}get childrenColumnName(){return(0,d.A)(ys,this)}set childrenColumnName(e){(0,h.A)(ys,this,e)}get sortable(){return(0,d.A)(bs,this)}set sortable(e){(0,h.A)(bs,this,e)}set fields(e){this._fields={...this._fields,...e},this._render()}get frontSearch(){return(0,d.A)(Ss,this)}set frontSearch(e){(0,h.A)(Ss,this,e)}get frontSearchQuery(){return(0,d.A)(xs,this)}set frontSearchQuery(e){(0,h.A)(xs,this,e)}get exactSearch(){return(0,d.A)(Cs,this)}set exactSearch(e){(0,h.A)(Cs,this,e)}get frontSearchFilterKeys(){return(0,d.A)(_s,this)}set frontSearchFilterKeys(e){(0,h.A)(_s,this,e)}get page(){return(0,d.A)(vs,this)}set page(e){(0,h.A)(vs,this,e)}get pageSize(){return(0,d.A)(Rs,this)}set pageSize(e){(0,h.A)(Rs,this,e)}get scrollConfigs(){return(0,d.A)(ks,this)}set scrollConfigs(e){(0,h.A)(ks,this,e)}get qField(){return(0,d.A)(Es,this)}set qField(e){(0,h.A)(Es,this,e)}get tableDraggable(){return(0,d.A)(Ks,this)}set tableDraggable(e){(0,h.A)(Ks,this,e)}get zebraPattern(){return(0,d.A)(Is,this)}set zebraPattern(e){(0,h.A)(Is,this,e)}get storeCheckedByUrl(){return(0,d.A)(Us,this)}set storeCheckedByUrl(e){(0,h.A)(Us,this,e)}get extraRows(){return(0,d.A)(Ns,this)}set extraRows(e){(0,h.A)(Ns,this,e)}get autoSelectParentWhenAllChildrenSelected(){return(0,d.A)(Ms,this)}set autoSelectParentWhenAllChildrenSelected(e){(0,h.A)(Ms,this,e)}get thTransparent(){return(0,d.A)(Ps,this)}set thTransparent(e){(0,h.A)(Ps,this,e)}get showHeader(){return(0,d.A)(Ws,this)}set showHeader(e){(0,h.A)(Ws,this,e)}get pagination(){return(0,d.A)(Bs,this)}set pagination(e){(0,h.A)(Bs,this,e)}get size(){return(0,d.A)(zs,this)}set size(e){(0,h.A)(zs,this,e)}get type(){return(0,d.A)(Ds,this)}set type(e){(0,h.A)(Ds,this,e)}get shouldUpdateUrlParams(){return(0,d.A)(Ts,this)}set shouldUpdateUrlParams(e){(0,h.A)(Ts,this,e)}get shouldRenderWhenUrlParamsUpdate(){return(0,d.A)(Fs,this)}set shouldRenderWhenUrlParamsUpdate(e){(0,h.A)(Fs,this,e)}get processedDataSource(){return this._dataSource}get processConfigProps(){return this._finalConfigProps}get processedColumns(){return this.getModifyColumns()}get selectedRowKeys(){return(0,d.A)(qs,this)}set selectedRowKeys(e){(0,h.A)(qs,this,e)}filterSourceData(e){const t=this.exactSearch?e.detail.q.trim():e.detail.q.trim().toLowerCase();if(this.shouldUpdateUrlParams){const e=(0,f.getHistory)(),s=new URLSearchParams(e.location.search);s.set("page","1"),t?(s.set(this.qField,t),e.push(`?${s}`,{notify:!this.frontSearch})):(s.delete(this.qField),e.push(`?${s}`,{notify:!this.frontSearch})),this.page=1}this.frontSearchQuery=t}handleFrontendDataChange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.shouldUpdateUrlParams){const e=(0,f.getHistory)(),t=new URLSearchParams(e.location.search);this.frontSearchQuery=t.get(this.qField)}let s=[];s=this.handleFrontendFilterSource(e,this.frontSearchQuery||"",t);const i=(0,A.isNil)(this.order)?null:this._fields.ascend===this.order?"ascend":"descend";return s=this.handleFrontendSorter(s,{columnKey:this.sort,order:i}),s=this.handleFrontendFilters(s),(0,h.A)(Os,this,s.length),s}handleFrontendFilterSource(e,t,s,i){if(!t)return e;const a=[];return i||(i=this.frontSearchFilterKeys||s.map((e=>e.dataIndex))),e.forEach((e=>{var n;const l=e[this.childrenColumnName];if(l){const n=this.handleFrontendFilterSource(l,t,s,i);if(n.length>0)return void a.push({...e,[this.childrenColumnName]:n})}(null===(n=i)||void 0===n?void 0:n.some((s=>{const i=(0,A.get)(e,s);return!(0,A.isNil)(i)&&(this.exactSearch?i===t:JSON.stringify(i).toLowerCase().includes(t))})))&&a.push(e)})),a}handleFrontendSorter(e,t){const s=e||[],{columnKey:i,order:a}=t;if(!i||!a)return e;let n=1;return"descend"===a?n=-1:"ascend"===a&&(n=1),void 0!==n&&(s.sort(((e,t)=>{const s=(0,A.get)(e,i),a=(0,A.get)(t,i);if((0,A.isNil)(s)){if(!(0,A.isNil)(a))return 1}else if((0,A.isNil)(a))return-1;return s==a?0:s>a?n:-n})),s.forEach((e=>{const s=e[this.childrenColumnName];s&&this.handleFrontendSorter(s,t)}))),s}handleFrontendFilters(e){let t=e||[];const s=(0,A.map)(this.filters,((e,t)=>({key:t,value:e}))).filter((e=>!(0,A.isNil)(e.value)&&0!==e.value.length));return t=t.filter((e=>(0,A.every)(s,(t=>{var s;return(null===(s=t.value)||void 0===s?void 0:s.includes((0,A.get)(e,t.key)))??!0})))),t}frontendSearch(e,t,s){this.sort=(0,A.isNil)(s.order)?null:s.columnKey,this.order=(0,A.isNil)(s.order)?null:this._fields[s.order]}expandAll(){const e=[],t=this._getRowKey();this._dataSource&&(0,b.Mm)(this._dataSource,t,this.childrenColumnName,e),this.expandedRowKeys=e}getModifyColumns(){let e=this._columns;return this._columns&&this.hiddenColumns&&(e=this._columns.filter((e=>{var t;return!(null!==(t=this.hiddenColumns)&&void 0!==t&&t.includes(e.dataIndex??e.key))}))),!1===this.sortable&&(e=(0,A.map)(e,(e=>(e.sorter=!1,e)))),e}render(){return this.frontSearch&&(this._dataSource=this.handleFrontendDataChange(this._pureSource,this._columns)),this._initConfigProps(),u().createElement(y.m,{shadowRoot:this.shadowRoot,dataSource:this._dataSource||[],columns:this.getModifyColumns(),configProps:this._finalConfigProps,error:this._error,onChange:this._handleOnChange,showCard:this.showCard,showHeader:this.showHeader,expandedRowBrick:this.expandedRowBrick,expandIconAsCell:this.expandIconAsCell,expandIconColumnIndex:this.expandIconColumnIndex,expandRowByClick:this.expandRowByClick,defaultExpandAllRows:this.defaultExpandAllRows,onExpand:this._handleOnExpand,onExpandedRowsChange:this._handleOnExpandedRowsChange,expandedRowKeys:this.expandedRowKeys,rowKey:this._getRowKey(),childrenColumnName:this.childrenColumnName,tableDraggable:this.tableDraggable||this.draggable,onDrag:this._handleOnDrag,zebraPattern:this.zebraPattern,expandIcon:this.expandIcon,scroll:this.scrollConfigs,optimizedColumns:this.optimizedColumns,ellipsisInfo:this.ellipsisInfo,thTransparent:this.thTransparent,xSmallSizeTable:"x-small"==this.size})}_test_only_getOriginalDataSource(){return this._originalDataSource}updateData(e){this._dataSource=e.detail,this._error=null,this._render()}updateError(e){this._error=e.detail,this._render()}set selectUpdateEventName(e){this._selectUpdateEventName=e}set selectUpdateEventDetailKeys(e){this._selectUpdateEventDetailKeys=e}set selectUpdateEventDetailField(e){this._selectUpdateEventDetailField=e}set selectUpdateEventDetailExtra(e){this._selectUpdateEventDetailExtra=e}}i=Hs,({e:[C,_,v,R,k,E,K,I,U,N,M,P,W,B,z,D,T,F,O,q,H,$,L,Q,V,j,X,J,G,Y,Z,ee,te,se,ie,ae,ne,le,re,oe,he,de,ce,pe,ue,ge,me,we,Ae,fe,ye,be,Se,xe,Ce,_e,ve,Re,ke,Ee,Ke,Ie,Ue,Ne,Me,Pe,We,Be,ze,De,Te,Fe,Oe,qe,He,$e,Le,Qe,Ve,je,Xe,Je,Ge,Ye,Ze,et,tt,st,it,at,nt,lt,rt,ot,ht,dt,ct,pt,ut,gt,mt,wt,At,ft,yt,bt,St,xt,Ct,_t,vt,Rt,kt,Et,Kt,It,Ut,Nt,Mt,Pt,Wt,Bt,S],c:[Ot,x]}=(0,c.A)(i,[zt("eo-table",{styleTexts:[w.A],alias:["advanced.general-table"]})],[[Tt({type:"page.update"}),1,"pageUpdate",e=>(0,d.A)(qt,e),(e,t)=>(0,h.A)(qt,e,t)],[Tt({type:"filter.update"}),1,"filterUpdate",e=>(0,d.A)($t,e),(e,t)=>(0,h.A)($t,e,t)],[Tt({type:"select.update"}),1,"selectUpdate",e=>(0,d.A)(Lt,e),(e,t)=>(0,h.A)(Lt,e,t)],[Tt({type:"select.row.keys.update"}),1,"selectRowKeysUpdate",e=>(0,d.A)(Qt,e),(e,t)=>(0,h.A)(Qt,e,t)],[Tt({type:"sort.update",cancelable:!0}),1,"sortUpdate",e=>(0,d.A)(Vt,e),(e,t)=>(0,h.A)(Vt,e,t)],[Tt({type:"row.expand"}),1,"rowExpand",e=>(0,d.A)(jt,e),(e,t)=>(0,h.A)(jt,e,t)],[Tt({type:"expand.rows.change"}),1,"expandRowsChange",e=>(0,d.A)(Xt,e),(e,t)=>(0,h.A)(Xt,e,t)],[Tt({type:"row.drag"}),1,"rowDrag",e=>(0,d.A)(Jt,e),(e,t)=>(0,h.A)(Jt,e,t)],[Dt({type:Boolean}),1,"showCard"],[Dt({attribute:!1}),1,"rowSelection"],[Dt(),1,"rowKey"],[Dt({attribute:!1}),1,"hiddenColumns"],[Dt({type:Boolean}),1,"showSelectInfo"],[Dt({attribute:!1}),1,"filters"],[Dt({attribute:!1}),1,"configProps"],[Dt(),1,"sort"],[Dt({attribute:!1}),1,"order"],[Dt({attribute:!1}),1,"rowDisabledConfig"],[Dt({attribute:!1}),1,"expandedRowBrick"],[Dt({attribute:!1}),1,"expandIcon"],[Dt({attribute:!1}),1,"expandIconAsCell"],[Dt({type:Number}),1,"expandIconColumnIndex"],[Dt({type:Boolean}),1,"expandRowByClick"],[Dt({attribute:!1}),1,"optimizedColumns"],[Dt({attribute:!1}),1,"stripEmptyExpandableChildren"],[Dt({type:Boolean}),1,"defaultExpandAllRows"],[Dt({type:Boolean}),1,"ellipsisInfo"],[Dt({attribute:!1}),1,"expandedRowKeys"],[Dt({type:Boolean}),1,"selectAllChildren"],[Dt({type:Boolean}),1,"defaultSelectAll"],[Dt({attribute:!1}),1,"childrenColumnName"],[Dt({attribute:!1}),1,"sortable"],[Dt({type:Boolean}),1,"frontSearch"],[Dt(),1,"frontSearchQuery"],[Dt({type:Boolean}),1,"exactSearch"],[Dt({attribute:!1}),1,"frontSearchFilterKeys"],[Dt({type:Number}),1,"page"],[Dt({type:Number}),1,"pageSize"],[Dt({attribute:!1}),1,"scrollConfigs"],[Dt(),1,"qField"],[Dt({type:Boolean}),1,"tableDraggable"],[Dt({type:Boolean}),1,"zebraPattern"],[Dt({type:Boolean}),1,"storeCheckedByUrl"],[Dt({attribute:!1}),1,"extraRows"],[Dt({type:Boolean}),1,"autoSelectParentWhenAllChildrenSelected"],[Dt({type:Boolean}),1,"thTransparent"],[Dt({type:Boolean}),1,"showHeader"],[Dt({attribute:!1}),1,"pagination"],[Dt(),1,"size"],[Dt({attribute:!1}),1,"type"],[Dt({type:Boolean}),1,"shouldUpdateUrlParams"],[Dt({type:Boolean}),1,"shouldRenderWhenUrlParamsUpdate"],[Dt({attribute:!1}),1,"selectedRowKeys"],[Ft(),2,"filterSourceData"],[Ft(),2,"expandAll"]],0,(e=>Os.has((0,r.A)(e))),m.ReactNextElement)),x()},10264:(e,t,s)=>{s.d(t,{Id:()=>n,LT:()=>a,Mm:()=>l,RX:()=>r,zA:()=>o});var i=s(41030);const a={$eq:i.isEqual,$lt:i.lt,$lte:i.lte,$gt:i.gt,$gte:i.gte,$ne:(e,t)=>!(0,i.isEqual)(e,t),$isEqual:i.isEqual,$notEqual:(e,t)=>!(0,i.isEqual)(e,t),$in:i.includes,$nin:(e,t)=>!(0,i.includes)(e,t),$exists:(e,t)=>e?!(0,i.isUndefined)(t):(0,i.isUndefined)(t)};function n(e,t,s){const{dataIndex:a,mapping:n}=e,l=void 0!==a?(0,i.get)(t,a):s,r=n.find((e=>e.value===l));return r?{borderLeft:`4px solid ${r.leftBorderColor}`}:{}}const l=(e,t,s,a)=>{e&&(0,i.forEach)(e,(e=>{const n=(0,i.get)(e,s),r=(0,i.get)(e,t);a.push(r),null!=n&&n.length&&l(n,t,s,a)}))},r=(e,t,s)=>{e&&(0,i.forEach)(e,(e=>{const a=(0,i.get)(e,t);s.push(e),null!=a&&a.length&&r(a,t,s)}))};function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return null!=t&&t.length&&t.forEach((t=>{var s;return null!==(s=t[e])&&void 0!==s&&s.length?o(e,t[e]):(delete t[e],t)})),t}},2198:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(36758),a=s.n(i),n=s(40935),l=s.n(n)()(a());l.push([e.id,".brickTableOddRow{background-color:var(--color-fill-bg-base-4)}.ant-table-small .ant-table-body{margin:0}.ant-table-small .ant-table-thead{background:var(--antd-table-header-bg)}.ant-table-small .ant-table-row{line-height:26px}.ant-table-tbody > tr.invalidRow > td{background-color:var(--color-error-bg)}.ant-table-tbody > tr.invalidRow:hover > td{background-color:var(--color-error-bg)}.ant-table-tbody > tr.disabledRow > td{background-color:var(--theme-gray-border-color)}.ant-table-tbody > .ant-table-row-selected td{background:var(--antd-table-cell-fixed-body-bg)!important}td.alignTop{vertical-align:top}td.alignBottom{vertical-align:bottom}.expandIconCellHidden .ant-table-row-expand-icon-cell,\n.expandIconCellHidden .ant-table-expand-icon-col{width:1px;min-width:auto}.expandIconCellHidden .ant-table-row-expand-icon-cell > *,\n.expandIconCellHidden .ant-table-expand-icon-col > *{display:none}.expandIconSpan{cursor:pointer;margin-right:9px;color:var(--antd-table-row-expand-icon-color);font-size:11px}.expandIconSpan .anticon{background:var(--antd-table-row-expand-icon-action-bg);border-radius:2px;padding:3px}.tableThTransparent thead.ant-table-thead > tr > th{background:var(--antd-table-header-bg)}.zebraPatternTable .ant-table-tbody tr td{border-bottom:0}.ellipsis{max-width:240px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.totalText{color:var(--antd-pagination-total-text)}.total{font-weight:normal;color:var(--antd-pagination-total-strong-text)}.ant-table-wrapper .ant-table-thead > tr > th{padding:11px 16px;font-size:12px;line-height:20px;border-bottom:0;font-weight:500;color:var(--antd-table-header-color)}.ant-table-wrapper .ant-table-pagination.ant-pagination{margin:24px 0}.xSmallSizeTable .ant-table{line-height:1}.xSmallSizeTable .ant-table .ant-table-selection-col{width:32px}.xSmallSizeTable .ant-table-thead tr th,\n.xSmallSizeTable .ant-table-tbody tr td{padding:0px 2px}.xSmallSizeTable .ant-table-thead tr th:first-child,\n.xSmallSizeTable .ant-table-tbody tr td:first-child{padding:0}",""]);const r=l.toString()}}]);
//# sourceMappingURL=eo-table.8c9e6a7b.js.map