"use strict";(globalThis.webpackChunk_next_bricks_advanced=globalThis.webpackChunk_next_bricks_advanced||[]).push([[944],{31007:(e,t,a)=>{a.r(t),a.d(t,{captureSnapshot:()=>c});var n=a(52681),o=a(96002);async function c(e){const{name:t,fileType:n,bucketName:c,selector:i,backgroundColor:r}=e;switch(n){case"image":{const e=await(0,o.Fg)(i,r);if(c){const a=await(0,o.m0)(e),n=new File([a],`${t}.png`,{type:a.type}),i=await(0,o.QM)(n,c);return(0,o.Lb)(c,i.data.objectName)}await(0,o.GV)(e,t)}break;case"pdf":{const{jsPDF:e}=await a.e(1576).then(a.bind(a,31576)),n=await(0,o.Fg)(i,r),c=n.toDataURL("image/jpeg",1),s=new e(n.width>n.height?"landscape":"portrait","pt",[n.width,n.height]);s.addImage(c,"JPEG",0,0,n.width,n.height),await s.save(`${t}.pdf`,{returnPromise:!0});break}}}customElements.define("advanced.capture-snapshot",(0,n.createProviderClass)(c))},96002:(e,t,a)=>{a.d(t,{Fg:()=>r,GV:()=>s,Lb:()=>h,QM:()=>u,m0:()=>d});var n=a(30108),o=a(28317),c=a.n(o),i=a(15223);function r(e,t){const a=e?document.querySelector(`${e}`):document.body;if(!a)throw new Error(`target not found: ${e}`);return new Promise((function(e,n){c()(a,{backgroundColor:t||null,useCORS:!0,allowTaint:!0,scale:window.devicePixelRatio<3?window.devicePixelRatio:2}).then((function(t){e(t)})).catch(n)}))}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image";return new Promise(((a,n)=>{try{const n=e.toDataURL("image/png"),o=new Image;o.onload=function(){const e=document.createElement("canvas");e.width=o.width,e.height=o.height;const a=e.getContext("2d");null==a||a.drawImage(o,0,0,o.width,o.height);const n=e.toDataURL("image/png"),c=document.createElement("a");c.href=n,c.download=t;const i=new MouseEvent("click");c.dispatchEvent(i)},o.src=n,a("succeed")}catch(e){n("failed")}}))}function d(e){return new Promise((function(t,a){e.toBlob((function(e){e?t(e):a()}))}))}function u(e,t){const a=new FormData;a.append("file",e,e.name);const o=`${(0,i.getBasePath)()}api/gateway/object_store.object_store.PutObject/api/v1/objectStore/bucket/${t}/object`;return n.http.request(o,{method:"PUT",body:a})}function h(e,t){return`${(0,i.getBasePath)()}api/gateway/logic.object_store_service/api/v1/objectStore/bucket/${e}/object/${t}`}}}]);
//# sourceMappingURL=capture-snapshot.524fa157.js.map