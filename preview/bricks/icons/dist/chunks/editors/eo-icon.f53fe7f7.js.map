{"version":3,"file":"chunks/editors/eo-icon.f53fe7f7.js","mappings":"mJAAO,MAAMA,EAAe,CAC1BC,KAAM,SACNC,KAAM,OACNC,UAAW,CACTF,KAAM,aACNG,MAAO,CACLC,OAAQ,aAGZC,SAAU,CACR,CACEL,KAAM,sBACNC,KAAM,OACNK,UAAW,CACTN,KAAM,gBACNG,MAAO,CACLI,KAAM,QAIZ,CACEP,KAAM,OACNQ,MAAO,KACPP,KAAM,SACNC,UAAW,e,yDCiCjBO,EAAAA,cAAcC,OAAO,WAnDrB,SAAgCC,GAC9B,OAAO,SACLR,GAEA,MAAM,qBACJS,EAAoB,uBACpBC,EAAsB,MACtBC,EAAK,KACLC,EAAI,QACJC,GACEb,EAkCJ,OAhCAQ,EAAMM,WAAU,KACd,MAAM,SAAEC,EAAQ,iBAAEC,GAAqBH,EAEvCD,EAAKK,WAAW,UAAU,KACxBD,GAAiB,CAACE,EAAuBN,KAAc,IAAAO,EACrD,MAAMC,GAA0B,QAAfD,EAAAP,EAAKS,kBAAU,IAAAF,OAAA,EAAfA,EAAiBG,SAAU,CAAC,EAC7C,OAAIJ,EACK,KACDE,aAAQ,EAARA,EAAUG,OAAQ,CAAC,GAGlB,CACLA,MAAMC,EAAAA,EAAAA,MAAKJ,EAAS,kBAAmB,CACrC,MACA,QACA,OACA,WACA,SACA,UAGN,IAEFL,GAAUU,IACD,KACDA,aAAK,EAALA,EAAOF,OAAQ,CAAC,KACjBE,KAEL,GACF,GACD,CAACb,EAAMC,IAEHL,EAAMkB,cAAcjB,EAAsB,CAC/CkB,OAAQjB,EAAuBd,EAAAA,GAC/Be,SAEJ,CACF,G","sources":["webpack:///./src/editors/eo-icon/eoIcon.schema.tsx","webpack:///./src/editors/eo-icon/index.tsx"],"sourcesContent":["export const eoIconSchema = {\n  name: \"layout\",\n  type: \"void\",\n  component: {\n    name: \"FormLayout\",\n    props: {\n      layout: \"vertical\",\n    },\n  },\n  children: [\n    {\n      name: \"categoryTitle_basic\",\n      type: \"void\",\n      decorator: {\n        name: \"CategoryTitle\",\n        props: {\n          text: \"基础\",\n        },\n      },\n    },\n    {\n      name: \"icon\",\n      title: \"图标\",\n      type: \"string\",\n      component: \"IconSelect\",\n    },\n  ],\n};\n","import type _React from \"react\";\nimport { customEditors } from \"@next-core/runtime\";\nimport type { EditorComponentProps } from \"@next-shared/property-editor\";\nimport { eoIconSchema } from \"./eoIcon.schema\";\nimport { pick } from \"lodash\";\n\nfunction EoIconComponentFactory(React: typeof _React) {\n  return function EoIconComponent(\n    props: EditorComponentProps\n  ): React.ReactElement {\n    const {\n      SchemaFieldComponent,\n      formilySchemaFormatter,\n      scope,\n      form,\n      effects,\n    } = props;\n\n    React.useEffect(() => {\n      const { onSubmit, onAdvancedChange } = effects;\n\n      form.addEffects(\"submit\", () => {\n        onAdvancedChange((advancedMode: boolean, form: any) => {\n          const rawValue = form.getState()?.values ?? {};\n          if (advancedMode) {\n            return {\n              ...(rawValue?.icon ?? {}),\n            };\n          } else {\n            return {\n              icon: pick(rawValue[\"#advanced_form\"], [\n                \"lib\",\n                \"theme\",\n                \"icon\",\n                \"category\",\n                \"prefix\",\n                \"color\",\n              ]),\n            };\n          }\n        });\n        onSubmit((value: any) => {\n          return {\n            ...(value?.icon ?? {}),\n            ...value,\n          };\n        });\n      });\n    }, [form, effects]);\n\n    return React.createElement(SchemaFieldComponent, {\n      schema: formilySchemaFormatter(eoIconSchema as any),\n      scope,\n    });\n  };\n}\n\ncustomEditors.define(\"eo-icon\", EoIconComponentFactory);\n"],"names":["eoIconSchema","name","type","component","props","layout","children","decorator","text","title","customEditors","define","React","SchemaFieldComponent","formilySchemaFormatter","scope","form","effects","useEffect","onSubmit","onAdvancedChange","addEffects","advancedMode","_form$getState","rawValue","getState","values","icon","pick","value","createElement","schema"],"sourceRoot":""}