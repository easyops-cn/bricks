/*! For license information please see eo-dynamic-form-item.fc720c11.js.LICENSE.txt */
(globalThis.webpackChunk_next_bricks_form=globalThis.webpackChunk_next_bricks_form||[]).push([[6842,2052],{2039:(e,t,r)=>{"use strict";r.d(t,{I:()=>a,K:()=>n,NS:()=>i});let n=function(e){return e.UNIQUE="UNIQUE",e}({});const i="bricks/form/dynamic-form-item",a={en:{UNIQUE:"{{ name }} can not repeat!"},zh:{UNIQUE:"{{ name }} 不能重复！"}}},4753:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DynamicFormItem:()=>me,DynamicFormItemComponent:()=>We,getRealValue:()=>he,uniqueValidatorFN:()=>de});var n,i=r(9575),a=r(4586),o=r(4635),s=r(918),l=r(6902),u=r(5536),c=r(6121),d=r(829),h=r(2740),m=r(8769),p=r.n(m),f=r(300),v=r(4295),b=r(9592),A=r(7866),g=(r(6477),r(1030)),y=r(426),w=r(2039),k=r(5502),B=r(3373),E=r.n(B);let x,S,R,M,C,N,W,j,I,F,O,D,T,U,V,q,P,_,z,Q,K,$,G,H,J,L,X,Y,Z,ee,te,re,ne;(0,k.initializeReactI18n)(w.NS,w.I);const{defineElement:ie,property:ae,event:oe}=(0,f.createDecorators)(),se=(0,v.wrapBrick)("eo-icon"),le=(0,v.wrapBrick)("eo-button"),ue=(0,v.wrapBrick)("eo-form",{onValuesChange:"values.change",onValidateSuccess:"validate.success",onValidateError:"validate.error"}),ce=(0,v.wrapBrick)("eo-form-item");function de(e,t,r){return()=>{var n;const i=null==e||null===(n=e.curElement)||void 0===n||null===(n=n.value)||void 0===n?void 0:n.map((e=>e[t.name]));var a;return new Set(i).size!==i.length?(null===(a=t.message)||void 0===a?void 0:a.unique)??r(w.K.UNIQUE,{name:t.label??t.name}):""}}const he=(e,t)=>"function"==typeof e?e(...t):e;let me;var pe=new WeakMap,fe=new WeakMap,ve=new WeakMap,be=new WeakMap,Ae=new WeakMap,ge=new WeakMap,ye=new WeakMap,we=new WeakMap,ke=new WeakMap,Be=new WeakMap,Ee=new WeakMap,xe=new WeakSet,Se=new WeakMap,Re=new WeakMap,Me=new WeakMap,Ce=new WeakMap;class Ne extends y.N{constructor(){super(...arguments),(0,o.A)(this,xe),(0,s.A)(this,pe,S(this)),(0,s.A)(this,fe,(R(this),M(this))),(0,s.A)(this,ve,(C(this),N(this))),(0,s.A)(this,be,(W(this),j(this))),(0,s.A)(this,Ae,(I(this),F(this))),(0,s.A)(this,ge,(O(this),D(this))),(0,s.A)(this,ye,(T(this),U(this))),(0,s.A)(this,we,(V(this),q(this))),(0,s.A)(this,ke,(P(this),_(this))),(0,s.A)(this,Be,(z(this),Q(this))),(0,s.A)(this,Ee,(K(this),$(this))),(0,s.A)(this,Se,(J(this),L(this))),(0,s.A)(this,Re,(Z(this),ee(this))),(0,s.A)(this,Me,(ne(this),e=>{(0,u.A)(xe,this,X).emit(e)})),(0,s.A)(this,Ce,(e=>{(0,u.A)(xe,this,te).emit(e)})),(0,a.A)(this,"handleDynamicFormChange",(e=>{var t;this.value=e,(0,u.A)(xe,this,G).emit(e),null===(t=this.getFormElement())||void 0===t||t.resetValidateState()}))}get name(){return(0,d.A)(pe,this)}set name(e){(0,c.A)(pe,this,e)}get label(){return(0,d.A)(fe,this)}set label(e){(0,c.A)(fe,this,e)}get required(){return(0,d.A)(ve,this)}set required(e){(0,c.A)(ve,this,e)}get value(){return(0,d.A)(be,this)}set value(e){(0,c.A)(be,this,e)}get message(){return(0,d.A)(Ae,this)}set message(e){(0,c.A)(Ae,this,e)}get hideRemoveButton(){return(0,d.A)(ge,this)}set hideRemoveButton(e){(0,c.A)(ge,this,e)}get disabledRemoveButton(){return(0,d.A)(ye,this)}set disabledRemoveButton(e){(0,c.A)(ye,this,e)}get hideAddButton(){return(0,d.A)(we,this)}set hideAddButton(e){(0,c.A)(we,this,e)}get disabledAddButton(){return(0,d.A)(ke,this)}set disabledAddButton(e){(0,c.A)(ke,this,e)}get useBrick(){return(0,d.A)(Be,this)}set useBrick(e){(0,c.A)(Be,this,e)}render(){return p().createElement(We,{formElement:this.getFormElement(),curElement:this,name:this.name,label:this.label,required:this.required,useBrick:this.useBrick,value:this.value,validateState:this.validateState,needValidate:!1,notRender:this.notRender,helpBrick:this.helpBrick,labelBrick:this.labelBrick,trigger:"handleDynamicFormChange",onChange:this.handleDynamicFormChange,onValuesChange:this.handleDynamicFormChange,message:this.message,onAdd:(0,d.A)(Me,this),onRemove:(0,d.A)(Ce,this),hideAddButton:this.hideAddButton,hideRemoveButton:this.hideRemoveButton,disabledAddButton:this.disabledAddButton,disabledRemoveButton:this.disabledRemoveButton})}}function We(e){const{t}=(0,k.useTranslation)(w.NS),{value:r,hideAddButton:n=!1,hideRemoveButton:a=!1,disabledRemoveButton:o=!1,disabledAddButton:s=!1}=e,l=(0,m.useRef)(null),[u,c]=(0,m.useState)(r??[]),[d,h]=(0,m.useState)([]),f=(0,m.useMemo)((()=>d.map((e=>(0,g.omit)(e,"properties.label")))),[d]);(0,m.useEffect)((()=>{(0,g.isEqual)(r,u)||c(r??[])}),[r]),(0,m.useEffect)((()=>{if(e.useBrick){const r=(0,g.flatten)(new Array(e.useBrick));h(r.map((r=>{const{properties:n={}}=r;if(n.unique){let i=[de(e,n,t)];return n.validator&&(i=[...(0,g.flatten)(new Array(n.validator)),...i]),{...r,properties:{...r.properties,validator:i}}}return r})))}}),[e.useBrick,e.curElement]);const v=(0,m.useCallback)(((t,r)=>{var n;null===(n=e.onChange)||void 0===n||n.call(e,u.map(((e,n)=>n===r?t.detail.allValues:e)))}),[e,u]),A=(0,m.useCallback)((t=>{var r,n;const i=u.filter(((e,r)=>r!==t));c(i),null===(r=e.onChange)||void 0===r||r.call(e,i),null===(n=e.onRemove)||void 0===n||n.call(e,{detail:u.find(((e,r)=>r===t)),index:t})}),[e,u]),y=(0,m.useMemo)((()=>he(s,[u])),[s,u]),B=(0,m.useMemo)((()=>he(n,[u])),[n,u]);return p().createElement(ce,(0,i.A)({exportparts:"message"},e,{validator:()=>{const e=l.current,t=null==e?void 0:e.querySelectorAll(".dynamic-form"),r=[];return t.length&&t.forEach((e=>{r.push(e.validate())})),r.every(Boolean)?"":"动态表单校验失败"}}),p().createElement("div",{className:"dynamic-form-wrapper",ref:l},u.map(((e,t)=>{const r=he(a,[e,t]),n=he(o,[e,t]);return p().createElement("div",{className:"dynamic-form-item",key:t},!(0,g.isEmpty)(d)&&p().createElement(ue,{layout:"vertical",formStyle:{flexDirection:"row",alignItems:"flex-start"},className:"dynamic-form",values:e,defaultEmitValuesChange:!1,onValuesChange:e=>v(e,t)},p().createElement(b.ReactUseMultipleBricks,{useBrick:0===t?d:f,data:e}),!r&&p().createElement("div",{className:E()("remove-btn-wrapper",{"remove-btn-disabled-wrapper":n})},p().createElement(se,{lib:"easyops",category:"assets-inventory",icon:"out",className:E()("remove-btn",{"remove-btn-disabled":n}),onClick:()=>A(t)}))))})),p().createElement("div",{className:E()({"add-btn-wrapper-disabled":y})},p().createElement(le,{className:E()("add-btn",{"add-btn-hide":B,"add-btn-disabled":y}),icon:{category:"assets-inventory",icon:"xin",lib:"easyops"},type:"dashed",buttonStyle:{width:"100%",color:y?"var(--text-color-disabled)":""},onClick:()=>{var t;null===(t=e.onAdd)||void 0===t||t.call(e,{detail:{},index:u.length}),c(u.concat({}))}},"添加"))),p().createElement("slot",{name:"helpSlot"}))}n=Ne,({e:[S,R,M,C,N,W,j,I,F,O,D,T,U,V,q,P,_,z,Q,K,$,G,H,J,L,X,Y,Z,ee,te,re,ne],c:[me,x]}=(0,h.A)(n,[ie("eo-dynamic-form-item",{styleTexts:[A.A],alias:["form.dynamic-form-item"]})],[[ae(),1,"name"],[ae(),1,"label"],[ae({type:Boolean}),1,"required"],[ae({attribute:!1}),1,"value"],[ae({attribute:!1}),1,"message"],[ae({attribute:!1}),1,"hideRemoveButton"],[ae({attribute:!1}),1,"disabledRemoveButton"],[ae({attribute:!1}),1,"hideAddButton"],[ae({attribute:!1}),1,"disabledAddButton"],[ae({attribute:!1}),1,"useBrick"],[oe({type:"change"}),1,"changeEvent",e=>(0,d.A)(Ee,e),(e,t)=>(0,c.A)(Ee,e,t)],[oe({type:"row.add"}),1,"addEvent",e=>(0,d.A)(Se,e),(e,t)=>(0,c.A)(Se,e,t)],[oe({type:"row.remove"}),1,"removeEvent",e=>(0,d.A)(Re,e),(e,t)=>(0,c.A)(Re,e,t)]],0,(e=>Ce.has((0,l.A)(e))),y.N)),x()},7866:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(6758),i=r.n(n),a=r(935),o=r.n(a)()(i());o.push([e.id,".dynamic-form-wrapper{border-radius:6px;padding:16px;background:var(--color-fill-bg-base-1)}.remove-btn{cursor:pointer;justify-content:center;display:flex;align-items:center;width:16px;height:16px;border:1px solid;border-radius:50%;line-height:12px;padding:2px;margin-left:8px;color:var(--color-secondary-text)}.remove-btn:hover{color:var(--color-auxiliary-text)}.remove-btn:active{color:var(--color-strong-text)}.remove-btn-wrapper{padding-top:4px}.dynamic-form > *:not(.remove-btn-wrapper){flex:1;margin-right:8px}.add-btn{width:calc(100% - 38px)}.add-btn-wrapper-disabled{cursor:not-allowed}.add-btn-disabled{pointer-events:none}:is(.dynamic-form-item:first-child .dynamic-form:has(*[label])) .remove-btn-wrapper{margin-top:22px}.remove-btn-disabled-wrapper{cursor:not-allowed}.remove-btn-disabled{pointer-events:none;cursor:not-allowed;color:var(--text-color-disabled)}.add-btn-hide{display:none}",""]);const s=o.toString()},935:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);n&&o[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},6758:e=>{"use strict";e.exports=function(e){return e[1]}},3373:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=o(e,a(r)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=o(t,r));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},2740:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(7545),i=r(6902);function a(e,t,r){"symbol"==(0,n.A)(t)&&(t=(t=t.description)?"["+t+"]":"");try{Object.defineProperty(e,"name",{configurable:!0,value:r?r+" "+t:t})}catch(e){}return e}var o=r(1369);function s(e,t,r,s,l,u){var c,d,h,m,p,f,v,b=Symbol.metadata||Symbol.for("Symbol.metadata"),A=Object.defineProperty,g=Object.create,y=[g(null),g(null)],w=t.length;function k(t,r,n){return function(i,a){r&&(a=i,i=e);for(var o=0;o<t.length;o++)a=t[o].apply(i,n?[a]:[]);return n?a:i}}function B(e,t,r,n){if("function"!=typeof e&&(n||void 0!==e))throw new TypeError(t+" must "+(r||"be")+" a function"+(n?"":" or undefined"));return e}function E(e,t,r,i,o,s,l,u,h,m,p){function f(e){if(!p(e))throw new TypeError("Attempted to access private element on non-instance")}var v=[].concat(t[0]),b=t[3],g=!l,w=1===o,E=3===o,x=4===o,S=2===o;function R(t,r,n){return function(i,a){return r&&(a=i,i=e),n&&n(i),M[t].call(i,a)}}if(!g){var M={},C=[],N=E?"get":x||w?"set":"value";if(h?(m||w?M={get:a((function(){return b(this)}),i,"get"),set:function(e){t[4](this,e)}}:M[N]=b,m||a(M[N],i,S?"":N)):m||(M=Object.getOwnPropertyDescriptor(e,i)),!m&&!h){if((d=y[+u][i])&&7!=(d^o))throw Error("Decorating two elements with the same name ("+M[N].name+") is not supported yet");y[+u][i]=o<3?1:o}}for(var W=e,j=v.length-1;j>=0;j-=r?2:1){var I=B(v[j],"A decorator","be",!0),F=r?v[j-1]:void 0,O={},D={kind:["field","accessor","method","getter","setter","class"][o],name:i,metadata:c,addInitializer:function(e,t){if(e.v)throw Error("attempted to call addInitializer after decoration was finished");B(t,"An initializer","be",!0),s.push(t)}.bind(null,O)};if(g)d=I.call(F,W,D),O.v=1,B(d,"class decorators","return")&&(W=d);else if(D.static=u,D.private=h,d=D.access={has:h?p.bind():function(e){return i in e}},x||(d.get=h?S?function(e){return f(e),M.value}:R("get",0,f):function(e){return e[i]}),S||E||(d.set=h?R("set",0,f):function(e,t){e[i]=t}),W=I.call(F,w?{get:M.get,set:M.set}:M[N],D),O.v=1,w){if("object"==(0,n.A)(W)&&W)(d=B(W.get,"accessor.get"))&&(M.get=d),(d=B(W.set,"accessor.set"))&&(M.set=d),(d=B(W.init,"accessor.init"))&&C.unshift(d);else if(void 0!==W)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else B(W,(m?"field":"method")+" decorators","return")&&(m?C.unshift(W):M[N]=W)}return o<2&&l.push(k(C,u,1),k(s,u,0)),m||g||(h?w?l.splice(-1,0,R("get",u),R("set",u)):l.push(S?M[N]:B.call.bind(M[N])):A(e,i,M)),W}function x(e){return A(e,b,{configurable:!0,enumerable:!0,value:c})}return void 0!==u&&(c=u[b]),c=g(null==c?null:c),p=[],f=function(e){e&&p.push(k(e))},v=function(t,n){for(var a=0;a<r.length;a++){var s=r[a],u=s[1],c=7&u;if((8&u)==t&&!c==n){var d=s[2],f=!!s[3],v=16&u;E(t?e:e.prototype,s,v,f?"#"+d:(0,o.A)(d),c,c<2?[]:t?m=m||[]:h=h||[],p,!!t,f,n,t&&f?function(t){return(0,i.A)(t)===e}:l)}}},v(8,0),v(0,0),v(8,1),v(0,1),f(h),f(m),d=p,w||x(e),{e:d,get c(){var r=[];return w&&[x(e=E(e,[t],s,e.name,5,r)),k(r,1)]}}}},2559:(e,t,r)=>{"use strict";function n(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}r.d(t,{A:()=>n})},6902:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(7545);function i(e){if(Object(e)!==e)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==e?(0,n.A)(e):"null"));return e}},2016:(e,t,r)=>{"use strict";function n(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}r.d(t,{A:()=>n})},829:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(2559);function i(e,t){return e.get((0,n.A)(e,t))}},918:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(2016);function i(e,t,r){(0,n.A)(e,t),t.set(e,r)}},6121:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(2559);function i(e,t,r){return e.set((0,n.A)(e,t),r),r}},5536:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(2559);function i(e,t,r){return r((0,n.A)(e,t))}},4635:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(2016);function i(e,t){(0,n.A)(e,t),t.add(e)}},9492:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(2559);function i(e,t,r,i){return t((0,n.A)(e,r),i),i}},4586:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(1369);function i(e,t,r){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},9575:(e,t,r)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{A:()=>n})},1369:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(7545);function i(e){var t=function(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=(0,n.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,n.A)(t)?t:t+""}},7545:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{A:()=>n})},426:(e,t,r)=>{"use strict";r.d(t,{N:()=>j});var n,i=r(4635),a=r(918),o=r(5536),s=r(9492),l=r(6121),u=r(829),c=r(2740),d=r(300),h=r(4295);let m,p,f,v,b,A,g,y,w;const{method:k,property:B}=(0,d.createDecorators)();var E=new WeakMap,x=new WeakSet,S=new WeakMap,R=new WeakMap,M=new WeakMap,C=new WeakMap,N=new WeakMap,W=new WeakMap;class j extends h.ReactNextElement{constructor(){super(...arguments),(0,i.A)(this,x),(0,a.A)(this,E,(m(this),!1)),(0,a.A)(this,S,"normal"),(0,a.A)(this,R,!1),(0,a.A)(this,M,p(this)),(0,a.A)(this,C,(f(this),v(this))),(0,a.A)(this,N,(b(this),A(this))),(0,a.A)(this,W,(g(this),y(this))),w(this)}get isFormItemElement(){return!0}set validateState(e){(0,s.A)(x,D,this,e),this._render()}get validateState(){return(0,o.A)(x,this,O)}set notRender(e){this.hidden=e,(0,s.A)(x,F,this,e),this._render()}get notRender(){return(0,o.A)(x,this,I)}get $bindFormItem(){return(0,o.A)(x,this,T)}set $bindFormItem(e){(0,s.A)(x,U,this,e),this._render()}get helpBrick(){return(0,u.A)(M,this)}set helpBrick(e){(0,l.A)(M,this,e)}get labelBrick(){return(0,u.A)(C,this)}set labelBrick(e){(0,l.A)(C,this,e)}get labelCol(){return(0,u.A)(N,this)}set labelCol(e){(0,l.A)(N,this,e)}get wrapperCol(){return(0,u.A)(W,this)}set wrapperCol(e){(0,l.A)(W,this,e)}setNotRender(e){this.notRender=e}getFormElement(){let e=this;for(;(e=e.parentNode)&&e&&!e.isFormElement;);return e}}function I(e){return(0,u.A)(E,e)}function F(e,t){(0,l.A)(E,e,t)}function O(e){return(0,u.A)(S,e)}function D(e,t){(0,l.A)(S,e,t)}function T(e){return(0,u.A)(R,e)}function U(e,t){(0,l.A)(R,e,t)}n=j,[p,f,v,b,A,g,y,w,m]=(0,c.A)(n,[],[[B({attribute:!1}),1,"helpBrick"],[B({attribute:!1}),1,"labelBrick"],[B({attribute:!1}),1,"labelCol"],[B({attribute:!1}),1,"wrapperCol"],[k(),2,"setNotRender"],[k(),2,"getFormElement"]],0,void 0,h.ReactNextElement).e}}]);
//# sourceMappingURL=eo-dynamic-form-item.fc720c11.js.map