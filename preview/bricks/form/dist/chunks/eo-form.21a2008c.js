"use strict";(globalThis.webpackChunk_next_bricks_form=globalThis.webpackChunk_next_bricks_form||[]).push([[3778],{7331:(t,e,i)=>{i.r(e),i.d(e,{Form:()=>L,FormComponent:()=>ot});var r,n=i(4635),s=i(918),a=i(4586),l=i(6902),o=i(5536),u=i(2559),h=i(6121),c=i(829),d=i(2740),f=i(8769),p=i.n(f),v=i(300),A=i(4295),m=i(4146);let g,b,y,w,V,k,S,F,E,C,M,x,W,j,$,I,z,O,T,P,_,D,R,q,N,G;const{defineElement:B,property:H,event:J,method:K}=(0,v.createDecorators)();let L;var Q=new WeakMap,U=new WeakSet,X=new WeakMap,Y=new WeakMap,Z=new WeakMap,tt=new WeakMap,et=new WeakMap,it=new WeakMap,rt=new WeakMap,nt=new WeakMap,st=new WeakMap;class at extends A.ReactNextElement{constructor(){super(),(0,n.A)(this,U),(0,a.A)(this,"formStore",void g(this)),(0,s.A)(this,Q,void 0),(0,a.A)(this,"defaultEmitValuesChange",!0),(0,s.A)(this,X,y(this)),(0,s.A)(this,Y,(w(this),V(this,"vertical"))),(0,s.A)(this,Z,(k(this),S(this))),(0,s.A)(this,tt,(F(this),E(this,{sm:{span:24},md:{span:24},lg:{span:7},xl:{span:5},xxl:{span:4}}))),(0,s.A)(this,et,(C(this),M(this,{sm:{span:18},md:{span:18},lg:{span:13},xl:{span:16},xxl:{span:18}}))),(0,s.A)(this,it,(x(this),W(this))),(0,a.A)(this,"handleValuesChange",(I(this),t=>{(0,o.A)(U,this,j).emit(t)})),(0,s.A)(this,rt,z(this)),(0,s.A)(this,nt,(P(this),_(this))),(0,s.A)(this,st,(q(this),N(this))),G(this),this.formStore=m.e.getInstance({onValuesChanged:this.handleValuesChange})}get isFormElement(){return!0}set values(t){(0,h.A)(Q,this,t),(0,u.A)(U,this,lt).call(this,t)}get values(){return(0,c.A)(Q,this)}get staticValues(){return(0,c.A)(X,this)}set staticValues(t){(0,h.A)(X,this,t)}get layout(){return(0,c.A)(Y,this)}set layout(t){(0,h.A)(Y,this,t)}get size(){return(0,c.A)(Z,this)}set size(t){(0,h.A)(Z,this,t)}get labelCol(){return(0,c.A)(tt,this)}set labelCol(t){(0,h.A)(tt,this,t)}get wrapperCol(){return(0,c.A)(et,this)}set wrapperCol(t){(0,h.A)(et,this,t)}validate(){return this.formStore.validateFields(((t,e)=>{t?(0,o.A)(U,this,D).emit(e):(0,o.A)(U,this,O).emit({...this.staticValues??{},...e})}))}setInitValue(t,e){e?(e.runInMicrotask&&queueMicrotask((()=>{this.values=t})),e.runInMacrotask&&setTimeout((()=>{this.values=t}))):this.values=t}resetFields(t){this.formStore.resetFields("string"==typeof t?t:void 0)}getFieldsValue(t){return this.formStore.getFieldsValue("string"==typeof t?t:void 0)}get formStyle(){return(0,c.A)(st,this)}set formStyle(t){(0,h.A)(st,this,t)}validateField(t){this.formStore.validateField(t)}resetValidateState(){this.formStore.resetValidateState()}render(){return p().createElement(ot,{layout:this.layout,size:this.size,labelCol:this.labelCol,wrapperCol:this.wrapperCol,formStyle:this.formStyle})}}function lt(t){this.formStore.setInitValue(t,this.defaultEmitValuesChange)}function ot(t){let{layout:e="vertical",formStyle:i}=t;const r=(0,f.useMemo)((()=>{switch(e){case"vertical":case"horizontal":return{display:"flex",flexDirection:"column"};case"inline":return{display:"flex",gap:10};default:return{}}}),[e]);return p().createElement("form",null,p().createElement("slot",{style:{...r,...i||{}}}))}r=at,({e:[y,w,V,k,S,F,E,C,M,x,W,j,$,I,z,O,T,P,_,D,R,q,N,G,g],c:[L,b]}=(0,d.A)(r,[B("eo-form",{alias:["form.general-form"]})],[[H({attribute:!1}),1,"staticValues"],[H(),1,"layout"],[H(),1,"size"],[H({attribute:!1}),1,"labelCol"],[H({attribute:!1}),1,"wrapperCol"],[J({type:"values.change"}),1,"valuesChangeEvent",t=>(0,c.A)(it,t),(t,e)=>(0,h.A)(it,t,e)],[J({type:"validate.success"}),1,"successEvent",t=>(0,c.A)(rt,t),(t,e)=>(0,h.A)(rt,t,e)],[J({type:"validate.error"}),1,"errorEvent",t=>(0,c.A)(nt,t),(t,e)=>(0,h.A)(nt,t,e)],[K(),2,"validate"],[K(),2,"setInitValue"],[K(),2,"resetFields"],[K(),2,"getFieldsValue"],[H({attribute:!1}),1,"formStyle"],[K(),2,"validateField"],[K(),2,"resetValidateState"]],0,(t=>Q.has((0,l.A)(t))),A.ReactNextElement)),b()},2740:(t,e,i)=>{i.d(e,{A:()=>l});var r=i(7545),n=i(6902);function s(t,e,i){"symbol"==(0,r.A)(e)&&(e=(e=e.description)?"["+e+"]":"");try{Object.defineProperty(t,"name",{configurable:!0,value:i?i+" "+e:e})}catch(t){}return t}var a=i(1369);function l(t,e,i,l,o,u){var h,c,d,f,p,v,A,m=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,b=Object.create,y=[b(null),b(null)],w=e.length;function V(e,i,r){return function(n,s){i&&(s=n,n=t);for(var a=0;a<e.length;a++)s=e[a].apply(n,r?[s]:[]);return r?s:n}}function k(t,e,i,r){if("function"!=typeof t&&(r||void 0!==t))throw new TypeError(e+" must "+(i||"be")+" a function"+(r?"":" or undefined"));return t}function S(t,e,i,n,a,l,o,u,d,f,p){function v(t){if(!p(t))throw new TypeError("Attempted to access private element on non-instance")}var A=[].concat(e[0]),m=e[3],b=!o,w=1===a,S=3===a,F=4===a,E=2===a;function C(e,i,r){return function(n,s){return i&&(s=n,n=t),r&&r(n),M[e].call(n,s)}}if(!b){var M={},x=[],W=S?"get":F||w?"set":"value";if(d?(f||w?M={get:s((function(){return m(this)}),n,"get"),set:function(t){e[4](this,t)}}:M[W]=m,f||s(M[W],n,E?"":W)):f||(M=Object.getOwnPropertyDescriptor(t,n)),!f&&!d){if((c=y[+u][n])&&7!=(c^a))throw Error("Decorating two elements with the same name ("+M[W].name+") is not supported yet");y[+u][n]=a<3?1:a}}for(var j=t,$=A.length-1;$>=0;$-=i?2:1){var I=k(A[$],"A decorator","be",!0),z=i?A[$-1]:void 0,O={},T={kind:["field","accessor","method","getter","setter","class"][a],name:n,metadata:h,addInitializer:function(t,e){if(t.v)throw Error("attempted to call addInitializer after decoration was finished");k(e,"An initializer","be",!0),l.push(e)}.bind(null,O)};if(b)c=I.call(z,j,T),O.v=1,k(c,"class decorators","return")&&(j=c);else if(T.static=u,T.private=d,c=T.access={has:d?p.bind():function(t){return n in t}},F||(c.get=d?E?function(t){return v(t),M.value}:C("get",0,v):function(t){return t[n]}),E||S||(c.set=d?C("set",0,v):function(t,e){t[n]=e}),j=I.call(z,w?{get:M.get,set:M.set}:M[W],T),O.v=1,w){if("object"==(0,r.A)(j)&&j)(c=k(j.get,"accessor.get"))&&(M.get=c),(c=k(j.set,"accessor.set"))&&(M.set=c),(c=k(j.init,"accessor.init"))&&x.unshift(c);else if(void 0!==j)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else k(j,(f?"field":"method")+" decorators","return")&&(f?x.unshift(j):M[W]=j)}return a<2&&o.push(V(x,u,1),V(l,u,0)),f||b||(d?w?o.splice(-1,0,C("get",u),C("set",u)):o.push(E?M[W]:k.call.bind(M[W])):g(t,n,M)),j}function F(t){return g(t,m,{configurable:!0,enumerable:!0,value:h})}return void 0!==u&&(h=u[m]),h=b(null==h?null:h),p=[],v=function(t){t&&p.push(V(t))},A=function(e,r){for(var s=0;s<i.length;s++){var l=i[s],u=l[1],h=7&u;if((8&u)==e&&!h==r){var c=l[2],v=!!l[3],A=16&u;S(e?t:t.prototype,l,A,v?"#"+c:(0,a.A)(c),h,h<2?[]:e?f=f||[]:d=d||[],p,!!e,v,r,e&&v?function(e){return(0,n.A)(e)===t}:o)}}},A(8,0),A(0,0),A(8,1),A(0,1),v(d),v(f),c=p,w||F(t),{e:c,get c(){var i=[];return w&&[F(t=S(t,[e],l,t.name,5,i)),V(i,1)]}}}},2559:(t,e,i)=>{function r(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}i.d(e,{A:()=>r})},6902:(t,e,i)=>{i.d(e,{A:()=>n});var r=i(7545);function n(t){if(Object(t)!==t)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==t?(0,r.A)(t):"null"));return t}},2016:(t,e,i)=>{function r(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}i.d(e,{A:()=>r})},829:(t,e,i)=>{i.d(e,{A:()=>n});var r=i(2559);function n(t,e){return t.get((0,r.A)(t,e))}},918:(t,e,i)=>{i.d(e,{A:()=>n});var r=i(2016);function n(t,e,i){(0,r.A)(t,e),e.set(t,i)}},6121:(t,e,i)=>{i.d(e,{A:()=>n});var r=i(2559);function n(t,e,i){return t.set((0,r.A)(t,e),i),i}},5536:(t,e,i)=>{i.d(e,{A:()=>n});var r=i(2559);function n(t,e,i){return i((0,r.A)(t,e))}},4635:(t,e,i)=>{i.d(e,{A:()=>n});var r=i(2016);function n(t,e){(0,r.A)(t,e),e.add(t)}},4586:(t,e,i)=>{i.d(e,{A:()=>n});var r=i(1369);function n(t,e,i){return(e=(0,r.A)(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},1369:(t,e,i)=>{i.d(e,{A:()=>n});var r=i(7545);function n(t){var e=function(t,e){if("object"!=(0,r.A)(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=(0,r.A)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==(0,r.A)(e)?e:e+""}},7545:(t,e,i)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}i.d(e,{A:()=>r})},4146:(t,e,i)=>{i.d(e,{e:()=>g});var r=i(4635),n=i(918),s=i(2559),a=i(829),l=i(6121),o=i(4586),u=i(1030),h=i(3750);let c=0;class d{constructor(t,e){(0,o.A)(this,"field",void 0),(0,o.A)(this,"detail",void 0),this.field=t,this.detail=e}}var f=new WeakMap,p=new WeakMap,v=new WeakMap,A=new WeakMap,m=new WeakSet;class g extends h.G{static getInstance(t){return this.instance.get(c)||(this.uid=c,this.instance.set(this.uid,new g(t)),c+=1),this.instance.get(this.uid)}constructor(t){super(),(0,r.A)(this,m),(0,n.A)(this,f,new Map),(0,n.A)(this,p,void 0),(0,n.A)(this,v,void 0),(0,n.A)(this,A,void 0),(0,l.A)(v,this,{}),(0,l.A)(p,this,t)}setField(t,e){(0,a.A)(f,this).set(t,new d(t,e))}getAllValues(){const t=(0,s.A)(m,this,b).call(this);return Object.fromEntries(Object.entries((0,a.A)(v,this)).map((e=>{let[i,r]=e;return t.includes(i)?[i,r]:[]})).filter((t=>t.length)))}setInitValue(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,l.A)(A,this,t),this.setFieldsValue(t,e)}setFieldsValueByInitData(t){var e;const i=null===(e=(0,a.A)(A,this))||void 0===e?void 0:e[t];(0,u.isNil)(i)||((0,a.A)(v,this)[t]=i,this.publish(`${t}.init.value`,i))}setFieldsValue(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i={...(0,a.A)(v,this)};var r,n;Object.entries(t).forEach((t=>{let[e,r]=t;i[e]=r,(0,a.A)(A,this)&&((0,a.A)(A,this)[e]=r),this.publish(`${e}.init.value`,r)})),(0,l.A)(v,this,i),e&&(null===(r=(0,a.A)(p,this))||void 0===r||null===(n=r.onValuesChanged)||void 0===n||n.call(r,{changedValues:t,allValues:this.getAllValues()}))}resetFields(t){t?(delete(0,a.A)(v,this)[t],this.publish(`${t}.reset.fields`,null)):((0,l.A)(v,this,{}),this.publish("reset.fields",null)),this.resetValidateState()}getFieldsValue(t){return t?(0,a.A)(v,this)[t]:this.getAllValues()}removeField(t){(0,a.A)(f,this).delete(t)}validateFields(t){const e=(0,s.A)(m,this,b).call(this),i=[];if(e.forEach((t=>{const e=(0,a.A)(f,this).get(t);e&&i.push(this.validateField(e.detail))})),i.some((t=>"normal"!==(null==t?void 0:t.type))))return t(!0,i.filter((t=>"normal"!==(null==t?void 0:t.type)))),!1;{const e=this.getAllValues();return t(!1,e),e}}validateField(t){var e;const i="string"==typeof t?null===(e=(0,a.A)(f,this).get(t))||void 0===e?void 0:e.detail:t;if(!i)return;const{name:r,label:n,validate:s}=i,l=(0,a.A)(v,this)[r],o=function(t){return{type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",message:t}},h=()=>n??r,c={name:r,...((t,e)=>{const{required:i,pattern:r,message:n,type:s,min:a,max:l,validator:c}=t,d=h();if("object"==typeof e?(0,u.isEmpty)(e):void 0===e||""===e)return i?o((null==n?void 0:n.required)||`${d}为必填项`):o("","normal");const f=String(e);if(r&&!new RegExp(r).test(f))return o((null==n?void 0:n.pattern)||`${d}没有匹配正则 ${r}`);const p="number"==typeof a,v="number"==typeof l;if(p||v)if("number"===s){const t="number"==typeof e?e:parseFloat(e);if(p&&t<a)return o((null==n?void 0:n.min)||`${d}不能小于 ${a}`);if(v&&t>l)return o((null==n?void 0:n.max)||`${d}不能大于 ${l}`)}else{if(p&&f.length<a)return o((null==n?void 0:n.min)||`${d}至少包含 ${a} 个字符`);if(v&&f.length>l)return o((null==n?void 0:n.max)||`${d}不能超过 ${l} 个字符`)}if(c){let t="",i=[];Array.isArray(c)?i=c:i.push(c);for(const r of i)if(t=r(e),t)break;return"string"==typeof t?o(t,t?"error":"normal"):t}return o("","normal")})(s,l)};return this.publish(`${r}.validate`,c),c}getValueFromEvent(t){if(!t||!t.target)return t;const e=t.target;return"checkbox"===e.type?e.checked:e.value}resetValidateState(){this.publish("reset.validate",null)}onWatch(t,e,i,r){const n=(0,a.A)(f,this).get(t);if(n){const s=this.getValueFromEvent(e),a=Array.isArray(s)?s[0]:s;this.setFieldsValue({[t]:a}),((null==r?void 0:r.needValidate)??1)&&this.validateField(n.detail),null==i||i.apply(this,s)}}onChange(t,e,i,r){const n=(0,a.A)(f,this).get(t);n&&(this.setFieldsValue({[t]:e}),((null==r?void 0:r.needValidate)??1)&&this.validateField(n.detail),null==i||i(e))}}function b(){return[...(0,a.A)(f,this).keys()].filter((t=>{var e;return!(null!==(e=(0,a.A)(f,this).get(t).detail)&&void 0!==e&&e.notRender)}))}(0,o.A)(g,"uid",void 0),(0,o.A)(g,"instance",new Map)},3750:(t,e,i)=>{i.d(e,{G:()=>u});var r=i(918),n=i(6121),s=i(829),a=i(1030),l=new WeakMap,o=new WeakMap;class u{constructor(){(0,r.A)(this,l,{}),(0,r.A)(this,o,0)}publish(t,e){if(!(0,s.A)(l,this)[t])return;const i=(0,s.A)(l,this)[t];let r=i?i.length:0;for(;r--;)i[r].func(t,e)}subscribe(t,e){var i;(0,s.A)(l,this)[t]||((0,s.A)(l,this)[t]=[]);const r=(0,n.A)(o,this,(i=(0,s.A)(o,this),++i)).toString();return(0,s.A)(l,this)[t].push({token:r,func:e}),r}unsubscribe(t){for(const e in(0,s.A)(l,this))(0,s.A)(l,this)[e]&&(0,a.remove)((0,s.A)(l,this)[e],(e=>e.token===t))}}}}]);
//# sourceMappingURL=eo-form.21a2008c.js.map