"use strict";(self.webpackChunk_next_bricks_form=self.webpackChunk_next_bricks_form||[]).push([[1224],{9205:(e,t,i)=>{i.r(t),i.d(t,{Form:()=>z,FormComponent:()=>we});var r,n,a,s,l,o,u,c,h,f,d,v,p,Z,g,m,b,y,w,k,E,V,S,F,j,M,O,C,W,x,P,A,z,T=i(3028),I=i(5866),D=i(3395),_=i(6666),N=i(1815),R=i(6171),q=i(381),B=i(687),G=i(2604),H=i(8657),J=i.n(H),K=i(5366),L=i(4511),Q=i(3292),{defineElement:U,property:X,event:Y,method:$}=(0,K.createDecorators)();n=U("eo-form",{alias:["form.general-form"]}),a=X(),l=X(),u=X({attribute:!1}),h=X({attribute:!1}),d=Y({type:"values.change"}),g=Y({type:"validate.success"}),w=Y({type:"validate.error"}),S=$(),F=$(),j=$(),M=$(),O=X({attribute:!1}),W=$(),x=$();var ee=new WeakMap,te=new WeakSet,ie=new WeakMap,re=new WeakMap,ne=new WeakMap,ae=new WeakMap,se=new WeakMap,le=new WeakMap,oe=new WeakMap,ue=new WeakMap,ce=new WeakMap,he=new WeakMap,fe=new WeakMap;class de extends L.ReactNextElement{constructor(){super(),(0,D.Z)(this,he,{get:ye,set:be}),(0,D.Z)(this,ue,{get:me,set:ge}),(0,D.Z)(this,le,{get:Ze,set:pe}),(0,I.Z)(this,te),(0,_.Z)(this,"formStore",void 0),(0,D.Z)(this,ee,{writable:!0,value:void 0}),(0,_.Z)(this,"defaultEmitValuesChange",!0),(0,D.Z)(this,ie,{writable:!0,value:(P(this),s(this,"vertical"))}),(0,D.Z)(this,re,{writable:!0,value:o(this)}),(0,D.Z)(this,ne,{writable:!0,value:c(this,{sm:{span:24},md:{span:24},lg:{span:7},xl:{span:5},xxl:{span:4}})}),(0,D.Z)(this,ae,{writable:!0,value:f(this,{sm:{span:18},md:{span:18},lg:{span:13},xl:{span:16},xxl:{span:18}})}),(0,D.Z)(this,se,{writable:!0,value:v(this)}),(0,_.Z)(this,"handleValuesChange",(e=>{(0,B.Z)(this,le).emit(e)})),(0,D.Z)(this,oe,{writable:!0,value:m(this)}),(0,D.Z)(this,ce,{writable:!0,value:k(this)}),(0,D.Z)(this,fe,{writable:!0,value:C(this)}),this.formStore=Q.l.getInstance({onValuesChanged:this.handleValuesChange})}get isFormElement(){return!0}set values(e){(0,q.Z)(this,ee,e),(0,R.Z)(this,te,ve).call(this,e)}get values(){return(0,B.Z)(this,ee)}get layout(){return(0,B.Z)(this,ie)}set layout(e){(0,q.Z)(this,ie,e)}get size(){return(0,B.Z)(this,re)}set size(e){(0,q.Z)(this,re,e)}get labelCol(){return(0,B.Z)(this,ne)}set labelCol(e){(0,q.Z)(this,ne,e)}get wrapperCol(){return(0,B.Z)(this,ae)}set wrapperCol(e){(0,q.Z)(this,ae,e)}validate(){return this.formStore.validateFields(((e,t)=>{e?(0,B.Z)(this,he).emit(t):(0,B.Z)(this,ue).emit(t)}))}setInitValue(e){(0,R.Z)(this,te,ve).call(this,e)}resetFields(e){this.formStore.resetFields("string"==typeof e?e:void 0)}getFieldsValue(e){return this.formStore.getFieldsValue("string"==typeof e?e:void 0)}get formStyle(){return(0,B.Z)(this,fe)}set formStyle(e){(0,q.Z)(this,fe,e)}validateField(e){this.formStore.validateField(e)}resetValidateState(){this.formStore.resetValidateState()}render(){return J().createElement(we,{layout:this.layout,size:this.size,labelCol:this.labelCol,wrapperCol:this.wrapperCol,formStyle:this.formStyle})}}function ve(e){this.formStore.setInitValue(e,this.defaultEmitValuesChange)}function pe(e){Z(this,e)}function Ze(){return p(this)}function ge(e){y(this,e)}function me(){return b(this)}function be(e){V(this,e)}function ye(){return E(this)}function we(e){var{layout:t="vertical",formStyle:i}=e,r=(0,H.useMemo)((()=>{switch(t){case"vertical":case"horizontal":return{display:"flex",flexDirection:"column"};case"inline":return{display:"flex",gap:10};default:return{}}}),[t]);return J().createElement("form",null,J().createElement("slot",{style:(0,T.Z)((0,T.Z)({},r),i||{})}))}A=de,({e:[s,o,c,f,v,p,Z,m,b,y,k,E,V,C,P],c:[z,r]}=(0,G.Z)(A,[[a,1,"layout"],[l,1,"size"],[u,1,"labelCol"],[h,1,"wrapperCol"],[d,1,"valuesChangeEvent",e=>(0,B.Z)(e,se),(e,t)=>(0,q.Z)(e,se,t)],[g,1,"successEvent",e=>(0,B.Z)(e,oe),(e,t)=>(0,q.Z)(e,oe,t)],[w,1,"errorEvent",e=>(0,B.Z)(e,ce),(e,t)=>(0,q.Z)(e,ce,t)],[S,2,"validate"],[F,2,"setInitValue"],[j,2,"resetFields"],[M,2,"getFieldsValue"],[O,1,"formStyle"],[W,2,"validateField"],[x,2,"resetValidateState"]],[n],0,(e=>ee.has((0,N.Z)(e))),L.ReactNextElement)),r()},2604:(e,t,i)=>{i.d(t,{Z:()=>p});var r=i(6522),n=i(1815);function a(e,t){return function(i){(function(e,t){if(e.v)throw new Error("attempted to call addInitializer after decoration was finished")})(t),o(i,"An initializer"),e.push(i)}}function s(e,t){if(!e(t))throw new TypeError("Attempted to access private element on non-instance")}function l(e,t,i,r,n,l,o,u,c,h){var f;switch(l){case 1:f="accessor";break;case 2:f="method";break;case 3:f="getter";break;case 4:f="setter";break;default:f="field"}var d,v,p={kind:f,name:u?"#"+i:i,static:o,private:u},Z={v:!1};if(0!==l&&(p.addInitializer=a(n,Z)),u||0!==l&&2!==l)if(2===l)d=function(e){return s(h,e),r.value};else{var g=0===l||1===l;(g||3===l)&&(d=u?function(e){return s(h,e),r.get.call(e)}:function(e){return r.get.call(e)}),(g||4===l)&&(v=u?function(e,t){s(h,e),r.set.call(e,t)}:function(e,t){r.set.call(e,t)})}else d=function(e){return e[i]},0===l&&(v=function(e,t){e[i]=t});var m=u?h.bind():function(e){return i in e};p.access=d&&v?{get:d,set:v,has:m}:d?{get:d,has:m}:{set:v,has:m};try{return e.call(t,c,p)}finally{Z.v=!0}}function o(e,t){if("function"!=typeof e)throw new TypeError(t+" must be a function")}function u(e,t){var i=(0,r.Z)(t);if(1===e){if("object"!==i||null===t)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");void 0!==t.get&&o(t.get,"accessor.get"),void 0!==t.set&&o(t.set,"accessor.set"),void 0!==t.init&&o(t.init,"accessor.init")}else if("function"!==i)throw new TypeError((0===e?"field":5===e?"class":"method")+" decorators must return a function or void 0")}function c(e){return function(){return e(this)}}function h(e){return function(t){e(this,t)}}function f(e,t,i,r,n,a,s,o,f,d){var v,p,Z,g,m,b,y=i[0];r||Array.isArray(y)||(y=[y]),o?v=0===a||1===a?{get:c(i[3]),set:h(i[4])}:3===a?{get:i[3]}:4===a?{set:i[3]}:{value:i[3]}:0!==a&&(v=Object.getOwnPropertyDescriptor(t,n)),1===a?Z={get:v.get,set:v.set}:2===a?Z=v.value:3===a?Z=v.get:4===a&&(Z=v.set);for(var w=r?2:1,k=y.length-1;k>=0;k-=w){var E;void 0!==(g=l(y[k],r?y[k-1]:void 0,n,v,f,a,s,o,Z,d))&&(u(a,g),0===a?E=g:1===a?(E=g.init,m=g.get||Z.get,b=g.set||Z.set,Z={get:m,set:b}):Z=g,void 0!==E&&(void 0===p?p=E:"function"==typeof p?p=[p,E]:p.push(E)))}if(0===a||1===a){if(void 0===p)p=function(e,t){return t};else if("function"!=typeof p){var V=p;p=function(e,t){for(var i=t,r=V.length-1;r>=0;r--)i=V[r].call(e,i);return i}}else{var S=p;p=function(e,t){return S.call(e,t)}}e.push(p)}0!==a&&(1===a?(v.get=Z.get,v.set=Z.set):2===a?v.value=Z:3===a?v.get=Z:4===a&&(v.set=Z),o?1===a?(e.push((function(e,t){return Z.get.call(e,t)})),e.push((function(e,t){return Z.set.call(e,t)}))):2===a?e.push(Z):e.push((function(e,t){return Z.call(e,t)})):Object.defineProperty(t,n,v))}function d(e,t,i){for(var r,a,s,l=[],o=new Map,u=new Map,c=0;c<t.length;c++){var h=t[c];if(Array.isArray(h)){var d,p,Z=h[1],g=h[2],m=h.length>3,b=16&Z,y=!!(8&Z),w=i;if(Z&=7,y?(d=e,0!==Z&&(p=a=a||[]),m&&!s&&(s=function(t){return(0,n.Z)(t)===e}),w=s):(d=e.prototype,0!==Z&&(p=r=r||[])),0!==Z&&!m){var k=y?u:o,E=k.get(g)||0;if(!0===E||3===E&&4!==Z||4===E&&3!==Z)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+g);k.set(g,!(!E&&Z>2)||Z)}f(l,d,h,b,g,Z,y,m,p,w)}}return v(l,r),v(l,a),l}function v(e,t){t&&e.push((function(e){for(var i=0;i<t.length;i++)t[i].call(e);return e}))}function p(e,t,i,r,n){return{e:d(e,t,n),get c(){return function(e,t,i){if(t.length){for(var r=[],n=e,s=e.name,l=i?2:1,o=t.length-1;o>=0;o-=l){var c={v:!1};try{var h=t[o].call(i?t[o-1]:void 0,n,{kind:"class",name:s,addInitializer:a(r,c)})}finally{c.v=!0}void 0!==h&&(u(5,h),n=h)}return[n,function(){for(var e=0;e<r.length;e++)r[e].call(n)}]}}(e,i,r)}}}},1815:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(6522);function n(e){if(Object(e)!==e)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==e?(0,r.Z)(e):"null"));return e}},5863:(e,t,i)=>{function r(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}i.d(t,{Z:()=>r})},175:(e,t,i)=>{function r(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}i.d(t,{Z:()=>r})},687:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(175);function n(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,(0,r.Z)(e,t,"get"))}},3395:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(5863);function n(e,t,i){(0,r.Z)(e,t),t.set(e,i)}},381:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(175);function n(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,(0,r.Z)(e,t,"set"),i),i}},6171:(e,t,i)=>{function r(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}i.d(t,{Z:()=>r})},5866:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(5863);function n(e,t){(0,r.Z)(e,t),t.add(e)}},6666:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(5850);function n(e,t,i){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},3028:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(6666);function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){(0,r.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}},5850:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(6522);function n(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==(0,r.Z)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,r.Z)(t)?t:String(t)}},6522:(e,t,i)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}i.d(t,{Z:()=>r})},3292:(e,t,i)=>{i.d(t,{l:()=>b});var r=i(3028),n=i(5866),a=i(3395),s=i(6171),l=i(687),o=i(381),u=i(6666),c=i(5178),h=i(7134),f=0;class d{constructor(e,t){(0,u.Z)(this,"field",void 0),(0,u.Z)(this,"detail",void 0),this.field=e,this.detail=t}}var v=new WeakMap,p=new WeakMap,Z=new WeakMap,g=new WeakMap,m=new WeakSet;class b extends h.p{static getInstance(e){return this.instance.get(f)||(this.uid=f,this.instance.set(this.uid,new b(e)),f+=1),this.instance.get(this.uid)}constructor(e){super(),(0,n.Z)(this,m),(0,a.Z)(this,v,{writable:!0,value:new Map}),(0,a.Z)(this,p,{writable:!0,value:void 0}),(0,a.Z)(this,Z,{writable:!0,value:void 0}),(0,a.Z)(this,g,{writable:!0,value:void 0}),(0,o.Z)(this,Z,{}),(0,o.Z)(this,p,e)}setField(e,t){(0,l.Z)(this,v).set(e,new d(e,t))}getAllValues(){return(0,l.Z)(this,Z)}setInitValue(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,o.Z)(this,g,e),this.setFieldsValue(e,t)}setFieldsValueByInitData(e){var t,i=null===(t=(0,l.Z)(this,g))||void 0===t?void 0:t[e];(0,c.isNil)(i)||((0,l.Z)(this,Z)[e]=i,this.publish("".concat(e,".init.value"),i))}setFieldsValue(e){var t,i,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=(0,s.Z)(this,m,y).call(this),u=(0,r.Z)({},(0,l.Z)(this,Z));Object.entries(e).forEach((e=>{var[t,i]=e;a.includes(t)&&(u[t]=i,(0,l.Z)(this,g)&&((0,l.Z)(this,g)[t]=i),this.publish("".concat(t,".init.value"),i))})),(0,o.Z)(this,Z,u),n&&(null===(t=(0,l.Z)(this,p))||void 0===t||null===(i=t.onValuesChanged)||void 0===i||i.call(t,{changedValues:e,allValues:this.getAllValues()}))}resetFields(e){e?((0,l.Z)(this,Z)[e]=null,this.publish("".concat(e,".reset.fields"),null)):((0,o.Z)(this,Z,{}),this.publish("reset.fields",null))}getFieldsValue(e){return e?(0,l.Z)(this,Z)[e]:this.getAllValues()}removeField(e){(0,l.Z)(this,v).delete(e)}validateFields(e){var t=(0,s.Z)(this,m,y).call(this),i=[];return t.forEach((e=>{var t=(0,l.Z)(this,v).get(e);t&&i.push(this.validateField(t.detail))})),i.some((e=>"normal"!==(null==e?void 0:e.type)))?(e(!0,i),!1):(e(!1,(0,l.Z)(this,Z)),(0,l.Z)(this,Z))}validateField(e){var t,i="string"==typeof e?null===(t=(0,l.Z)(this,v).get(e))||void 0===t?void 0:t.detail:e;if(i){var{name:r,label:n,validate:a}=i,s=(0,l.Z)(this,Z)[r],o=function(e){return{type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",message:e}},u=()=>null!=n?n:r,h=((e,t)=>{var{required:i,pattern:r,message:n,min:a,max:s,validator:l}=e,h=u();if(i&&("object"==typeof t?(0,c.isEmpty)(t):"number"!=typeof t&&!t))return o((null==n?void 0:n.required)||"".concat(h,"为必填项"));if(r&&!new RegExp(r).test(t))return o((null==n?void 0:n.pattern)||"".concat(h,"没有匹配正则 ").concat(r));if(a&&(!t||t.length<a))return o((null==n?void 0:n.min)||"".concat(h,"至少包含 ").concat(a," 个字符"));if(s&&t&&t.length>s)return o((null==n?void 0:n.max)||"".concat(h,"不能超过 ").concat(s," 个字符"));if(l){var f="",d=[];for(var v of(Array.isArray(l)?d=l:d.push(l),d))if(f=v(t))break;return"string"==typeof f?o(f,f?"error":"normal"):f}return o("","normal")})(a,s);return this.publish("".concat(r,".validate"),h),h}}getValueFromEvent(e){if(!e||!e.target)return e;var t=e.target;return"checkbox"===t.type?t.checked:t.value}resetValidateState(){this.publish("reset.validate",null)}onWatch(e,t,i,r){var n=(0,l.Z)(this,v).get(e);if(n){var a,s=this.getValueFromEvent(t);this.setFieldsValue({[e]:s}),(null===(a=null==r?void 0:r.needValidate)||void 0===a||a)&&this.validateField(n.detail),null==i||i(s)}}onChange(e,t,i,r){var n,a=(0,l.Z)(this,v).get(e);a&&(this.setFieldsValue({[e]:t}),(null===(n=null==r?void 0:r.needValidate)||void 0===n||n)&&this.validateField(a.detail),null==i||i(t))}}function y(){return[...(0,l.Z)(this,v).keys()]}(0,u.Z)(b,"uid",void 0),(0,u.Z)(b,"instance",new Map)},7134:(e,t,i)=>{i.d(t,{p:()=>u});var r=i(3395),n=i(381),a=i(687),s=i(5178),l=new WeakMap,o=new WeakMap;class u{constructor(){(0,r.Z)(this,l,{writable:!0,value:{}}),(0,r.Z)(this,o,{writable:!0,value:0})}publish(e,t){if((0,a.Z)(this,l)[e])for(var i=(0,a.Z)(this,l)[e],r=i?i.length:0;r--;)i[r].func(e,t)}subscribe(e,t){var i;(0,a.Z)(this,l)[e]||((0,a.Z)(this,l)[e]=[]);var r=(0,n.Z)(this,o,(i=(0,a.Z)(this,o),++i)).toString();return(0,a.Z)(this,l)[e].push({token:r,func:t}),r}unsubscribe(e){for(var t in(0,a.Z)(this,l))(0,a.Z)(this,l)[t]&&(0,s.remove)((0,a.Z)(this,l)[t],(t=>t.token===e))}}}}]);
//# sourceMappingURL=eo-form.ab288dca.js.map