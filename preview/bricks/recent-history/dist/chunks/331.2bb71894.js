"use strict";(self.webpackChunk_next_bricks_recent_history=self.webpackChunk_next_bricks_recent_history||[]).push([[331,960],{9331:(e,t,r)=>{r.r(t);var n=r(628),i=r(5866),a=r(3395),s=r(6171),o=r(687),c=r(381),l=r(4366),u=new class{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"brick-next-";this.storage=e,this.prefix=t}setItem(e,t){this.storage.setItem(this.prefix+e,JSON.stringify(t))}getItem(e){return JSON.parse(this.storage.getItem(this.prefix+e))}removeItem(e){return this.storage.removeItem(this.prefix+e)}clear(){return this.storage.clear()}}(localStorage),h=new WeakMap,f=new WeakMap,p=new WeakMap,v=new WeakMap,d=new WeakSet;class m{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;(0,i.Z)(this,d),(0,a.Z)(this,h,{writable:!0,value:void 0}),(0,a.Z)(this,f,{writable:!0,value:void 0}),(0,a.Z)(this,p,{writable:!0,value:void 0}),(0,a.Z)(this,v,{writable:!0,value:void 0}),(0,c.Z)(this,h,e),(0,c.Z)(this,f,"".concat("recent-history","-").concat(e)),(0,c.Z)(this,p,t),u.getItem((0,o.Z)(this,f))||u.setItem((0,o.Z)(this,f),[]);var r=u.getItem((0,o.Z)(this,f));(0,c.Z)(this,v,new l.LRUCacheWithDelete((0,o.Z)(this,p))),r.reverse().forEach((e=>{(0,o.Z)(this,v).set(e.key,e)}))}set(e){(0,o.Z)(this,v).set(e.key,e),(0,s.Z)(this,d,y).call(this)}get(e){var t=(0,o.Z)(this,v).get(e);return(0,s.Z)(this,d,y).call(this),t}getAll(){return[...(0,o.Z)(this,v).values()]}peek(e){return(0,o.Z)(this,v).peek(e)}has(e){return(0,o.Z)(this,v).has(e)}delete(e){var t=(0,o.Z)(this,v).delete(e);return(0,s.Z)(this,d,y).call(this),t}remove(e){var t=(0,o.Z)(this,v).remove(e);return(0,s.Z)(this,d,y).call(this),t}clear(){(0,o.Z)(this,v).clear(),(0,s.Z)(this,d,y).call(this)}}function y(){var e=[...(0,o.Z)(this,v).values()];u.setItem((0,o.Z)(this,f),e),window.dispatchEvent(new CustomEvent("recent-history-change",{detail:{namespace:(0,o.Z)(this,h),list:e}}))}customElements.define("recent-history.get-all-history",(0,n.createProviderClass)((function(e,t){return new m(e,t).getAll()}))),customElements.define("recent-history.push-history",(0,n.createProviderClass)((function(e,t,r){new m(e,t).set(r)}))),customElements.define("recent-history.clear-history",(0,n.createProviderClass)((function(e){new m(e).clear()})));var g=r(6522);function w(e){if(Object(e)!==e)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==e?(0,g.Z)(e):"null"));return e}function b(e,t){return function(r){(function(e,t){if(e.v)throw new Error("attempted to call addInitializer after decoration was finished")})(t),k(r,"An initializer"),e.push(r)}}function Z(e,t){if(!e(t))throw new TypeError("Attempted to access private element on non-instance")}function E(e,t,r,n,i,a,s,o,c,l){var u;switch(a){case 1:u="accessor";break;case 2:u="method";break;case 3:u="getter";break;case 4:u="setter";break;default:u="field"}var h,f,p={kind:u,name:o?"#"+r:r,static:s,private:o},v={v:!1};if(0!==a&&(p.addInitializer=b(i,v)),o||0!==a&&2!==a)if(2===a)h=function(e){return Z(l,e),n.value};else{var d=0===a||1===a;(d||3===a)&&(h=o?function(e){return Z(l,e),n.get.call(e)}:function(e){return n.get.call(e)}),(d||4===a)&&(f=o?function(e,t){Z(l,e),n.set.call(e,t)}:function(e,t){n.set.call(e,t)})}else h=function(e){return e[r]},0===a&&(f=function(e,t){e[r]=t});var m=o?l.bind():function(e){return r in e};p.access=h&&f?{get:h,set:f,has:m}:h?{get:h,has:m}:{set:f,has:m};try{return e.call(t,c,p)}finally{v.v=!0}}function k(e,t){if("function"!=typeof e)throw new TypeError(t+" must be a function")}function I(e,t){var r=(0,g.Z)(t);if(1===e){if("object"!==r||null===t)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");void 0!==t.get&&k(t.get,"accessor.get"),void 0!==t.set&&k(t.set,"accessor.set"),void 0!==t.init&&k(t.init,"accessor.init")}else if("function"!==r)throw new TypeError((0===e?"field":5===e?"class":"method")+" decorators must return a function or void 0")}function T(e){return function(){return e(this)}}function x(e){return function(t){e(this,t)}}function S(e,t,r,n,i,a,s,o,c,l){var u,h,f,p,v,d,m=r[0];n||Array.isArray(m)||(m=[m]),o?u=0===a||1===a?{get:T(r[3]),set:x(r[4])}:3===a?{get:r[3]}:4===a?{set:r[3]}:{value:r[3]}:0!==a&&(u=Object.getOwnPropertyDescriptor(t,i)),1===a?f={get:u.get,set:u.set}:2===a?f=u.value:3===a?f=u.get:4===a&&(f=u.set);for(var y=n?2:1,g=m.length-1;g>=0;g-=y){var w;void 0!==(p=E(m[g],n?m[g-1]:void 0,i,u,c,a,s,o,f,l))&&(I(a,p),0===a?w=p:1===a?(w=p.init,v=p.get||f.get,d=p.set||f.set,f={get:v,set:d}):f=p,void 0!==w&&(void 0===h?h=w:"function"==typeof h?h=[h,w]:h.push(w)))}if(0===a||1===a){if(void 0===h)h=function(e,t){return t};else if("function"!=typeof h){var b=h;h=function(e,t){for(var r=t,n=b.length-1;n>=0;n--)r=b[n].call(e,r);return r}}else{var Z=h;h=function(e,t){return Z.call(e,t)}}e.push(h)}0!==a&&(1===a?(u.get=f.get,u.set=f.set):2===a?u.value=f:3===a?u.get=f:4===a&&(u.set=f),o?1===a?(e.push((function(e,t){return f.get.call(e,t)})),e.push((function(e,t){return f.set.call(e,t)}))):2===a?e.push(f):e.push((function(e,t){return f.call(e,t)})):Object.defineProperty(t,i,u))}function _(e,t){t&&e.push((function(e){for(var r=0;r<t.length;r++)t[r].call(e);return e}))}var A,C,N,M,R,W,z,j,K,O,P,V,D=r(8657),L=r.n(D),B=r(5366),J=r(4511),U=r(9640),q=function(e){return e.RECENT_VISIT="RECENT_VISIT",e}({}),F="bricks/recent-history/recent-visit",G=(r(8161),r(3648)),H=r(1211);(0,U.initializeReactI18n)(F,{en:{RECENT_VISIT:"Recent visits"},zh:{RECENT_VISIT:"最近访问"}});var Q,{defineElement:X,property:Y}=(0,B.createDecorators)(),$=(0,J.wrapBrick)("eo-link"),ee=(0,J.wrapBrick)("eo-tag");C=X("recent-history.recent-visit",{styleTexts:[G.Z]}),N=Y(),R=Y({type:Number}),z=Y({attribute:!1}),K=Y();var te,re,ne,ie=new WeakMap,ae=new WeakMap,se=new WeakMap,oe=new WeakMap;class ce extends J.ReactNextElement{constructor(){super(...arguments),(0,a.Z)(this,ie,{writable:!0,value:(P(this),M(this))}),(0,a.Z)(this,ae,{writable:!0,value:W(this)}),(0,a.Z)(this,se,{writable:!0,value:j(this)}),(0,a.Z)(this,oe,{writable:!0,value:O(this)})}get namespace(){return(0,o.Z)(this,ie)}set namespace(e){(0,c.Z)(this,ie,e)}get capacity(){return(0,o.Z)(this,ae)}set capacity(e){(0,c.Z)(this,ae,e)}get compareKeys(){return(0,o.Z)(this,se)}set compareKeys(e){(0,c.Z)(this,se,e)}get urlTemplate(){return(0,o.Z)(this,oe)}set urlTemplate(e){(0,c.Z)(this,oe,e)}render(){return L().createElement(ue,{namespace:this.namespace,capacity:this.capacity,compareKeys:this.compareKeys,urlTemplate:this.urlTemplate})}}V=ce,({e:[M,W,j,O,P],c:[Q,A]}=(te=V,re=[[N,1,"namespace"],[R,1,"capacity"],[z,1,"compareKeys"],[K,1,"urlTemplate"]],ne=[C],0,void 0,J.ReactNextElement,{e:function(e,t,r){for(var n,i,a,s=[],o=new Map,c=new Map,l=0;l<t.length;l++){var u=t[l];if(Array.isArray(u)){var h,f,p=u[1],v=u[2],d=u.length>3,m=16&p,y=!!(8&p),g=r;if(p&=7,y?(h=e,0!==p&&(f=i=i||[]),d&&!a&&(a=function(t){return w(t)===e}),g=a):(h=e.prototype,0!==p&&(f=n=n||[])),0!==p&&!d){var b=y?c:o,Z=b.get(v)||0;if(!0===Z||3===Z&&4!==p||4===Z&&3!==p)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+v);b.set(v,!(!Z&&p>2)||p)}S(s,h,u,m,v,p,y,d,f,g)}}return _(s,n),_(s,i),s}(te,re,undefined),get c(){return function(e,t,r){if(t.length){for(var n=[],i=e,a=e.name,s=t.length-1;s>=0;s-=1){var o={v:!1};try{var c=t[s].call(void 0,i,{kind:"class",name:a,addInitializer:b(n,o)})}finally{o.v=!0}void 0!==c&&(I(5,c),i=c)}return[i,function(){for(var e=0;e<n.length;e++)n[e].call(i)}]}}(te,ne)}})),A();var le=(e,t)=>null==e?void 0:e.replace(/{{(.*?)}}/g,((e,r)=>(0,H.get)(t,r)));function ue(e){var{namespace:t,capacity:r,compareKeys:n,urlTemplate:i}=e,{t:a}=(0,U.useTranslation)(F),[s,o]=(0,D.useState)([]),c=()=>{var e=new m(t,r).getAll();if(Array.isArray(n)){var i=new Set(n);o(e.filter((e=>i.has(e.key))))}else o(e)};return(0,D.useEffect)((()=>{c()}),[r,n,t]),(0,D.useEffect)((()=>{var e=e=>{e.detail.namespace===t&&c()};return window.addEventListener("recent-history-change",e),()=>{window.removeEventListener("recent-history-change",e)}}),[]),s.length?L().createElement("div",{className:"recent-visit-wrapper"},L().createElement("span",{className:"recent-visit-label"},a(q.RECENT_VISIT)+": "),s.map((e=>L().createElement($,{key:e.key,url:le(i,e)},L().createElement(ee,{color:"blue"},e.name))))):null}},3648:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(9601),i=r.n(n),a=r(2609),s=r.n(a)()(i());s.push([e.id,":host{display:block}:host([hidden]){display:none}*,\n*::before,\n*::after{box-sizing:border-box}.recent-visit-wrapper{display:flex;flex-wrap:wrap;align-items:center;gap:5px}.recent-visit-label{font-size:12px;margin-right:5px}",""]);const o=s.toString()},2609:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(n)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);n&&s[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},9601:e=>{e.exports=function(e){return e[1]}},6522:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:()=>n})}}]);
//# sourceMappingURL=331.2bb71894.js.map