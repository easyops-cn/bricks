"use strict";(self.webpackChunk_next_bricks_recent_history=self.webpackChunk_next_bricks_recent_history||[]).push([[644,960],{9833:(e,t,r)=>{r.d(t,{K:()=>n,NS:()=>i,k:()=>a});var n=function(e){return e.RECENT_VISIT="RECENT_VISIT",e}({}),i="bricks/recent-history/recent-visit",a={en:{RECENT_VISIT:"Recent visits"},zh:{RECENT_VISIT:"最近访问"}}},5935:(e,t,r)=>{r.r(t),r.d(t,{RecentVisit:()=>N,RecentVisitComponent:()=>O});var n,i,a,s,o,c,l,u,h,p,f,v,d=r(3395),m=r(381),g=r(687),y=r(2604),w=r(8657),Z=r.n(w),b=r(5366),k=r(4511),E=r(9640),I=r(9833),T=(r(8161),r(3648)),S=r(5412),x=r(1211);(0,E.initializeReactI18n)(I.NS,I.k);var N,{defineElement:_,property:R}=(0,b.createDecorators)(),A=(0,k.wrapBrick)("eo-link"),C=(0,k.wrapBrick)("eo-tag");i=_("recent-history.recent-visit",{styleTexts:[T.Z]}),a=R(),o=R({type:Number}),l=R({attribute:!1}),h=R();var M=new WeakMap,W=new WeakMap,z=new WeakMap,K=new WeakMap;class j extends k.ReactNextElement{constructor(){super(...arguments),(0,d.Z)(this,M,{writable:!0,value:(f(this),s(this))}),(0,d.Z)(this,W,{writable:!0,value:c(this)}),(0,d.Z)(this,z,{writable:!0,value:u(this)}),(0,d.Z)(this,K,{writable:!0,value:p(this)})}get namespace(){return(0,g.Z)(this,M)}set namespace(e){(0,m.Z)(this,M,e)}get capacity(){return(0,g.Z)(this,W)}set capacity(e){(0,m.Z)(this,W,e)}get compareKeys(){return(0,g.Z)(this,z)}set compareKeys(e){(0,m.Z)(this,z,e)}get urlTemplate(){return(0,g.Z)(this,K)}set urlTemplate(e){(0,m.Z)(this,K,e)}render(){return Z().createElement(O,{namespace:this.namespace,capacity:this.capacity,compareKeys:this.compareKeys,urlTemplate:this.urlTemplate})}}v=j,({e:[s,c,u,p,f],c:[N,n]}=(0,y.Z)(v,[[a,1,"namespace"],[o,1,"capacity"],[l,1,"compareKeys"],[h,1,"urlTemplate"]],[i],0,void 0,k.ReactNextElement)),n();var V=(e,t)=>null==e?void 0:e.replace(/{{(.*?)}}/g,((e,r)=>(0,x.get)(t,r)));function O(e){var{namespace:t,capacity:r,compareKeys:n,urlTemplate:i}=e,{t:a}=(0,E.useTranslation)(I.NS),[s,o]=(0,w.useState)([]),c=()=>{var e=new S.y(t,r).getAll();if(Array.isArray(n)){var i=new Set(n);o(e.filter((e=>i.has(e.key))))}else o(e)};return(0,w.useEffect)((()=>{c()}),[r,n,t]),(0,w.useEffect)((()=>{var e=e=>{e.detail.namespace===t&&c()};return window.addEventListener("recent-history-change",e),()=>{window.removeEventListener("recent-history-change",e)}}),[]),s.length?Z().createElement("div",{className:"recent-visit-wrapper"},Z().createElement("span",{className:"recent-visit-label"},a(I.K.RECENT_VISIT)+": "),s.map((e=>Z().createElement(A,{key:e.key,url:V(i,e)},Z().createElement(C,{color:"blue"},e.name))))):null}},5412:(e,t,r)=>{r.d(t,{y:()=>m});var n=r(5866),i=r(3395),a=r(6171),s=r(687),o=r(381),c=r(2890),l=r(4366),u=new c.o(localStorage),h=new WeakMap,p=new WeakMap,f=new WeakMap,v=new WeakMap,d=new WeakSet;class m{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;(0,n.Z)(this,d),(0,i.Z)(this,h,{writable:!0,value:void 0}),(0,i.Z)(this,p,{writable:!0,value:void 0}),(0,i.Z)(this,f,{writable:!0,value:void 0}),(0,i.Z)(this,v,{writable:!0,value:void 0}),(0,o.Z)(this,h,e),(0,o.Z)(this,p,"".concat("recent-history","-").concat(e)),(0,o.Z)(this,f,t),u.getItem((0,s.Z)(this,p))||u.setItem((0,s.Z)(this,p),[]);var r=u.getItem((0,s.Z)(this,p));(0,o.Z)(this,v,new l.LRUCacheWithDelete((0,s.Z)(this,f))),r.reverse().forEach((e=>{(0,s.Z)(this,v).set(e.key,e)}))}set(e){(0,s.Z)(this,v).set(e.key,e),(0,a.Z)(this,d,g).call(this)}get(e){var t=(0,s.Z)(this,v).get(e);return(0,a.Z)(this,d,g).call(this),t}getAll(){return[...(0,s.Z)(this,v).values()]}peek(e){return(0,s.Z)(this,v).peek(e)}has(e){return(0,s.Z)(this,v).has(e)}delete(e){var t=(0,s.Z)(this,v).delete(e);return(0,a.Z)(this,d,g).call(this),t}remove(e){var t=(0,s.Z)(this,v).remove(e);return(0,a.Z)(this,d,g).call(this),t}clear(){(0,s.Z)(this,v).clear(),(0,a.Z)(this,d,g).call(this)}}function g(){var e=[...(0,s.Z)(this,v).values()];u.setItem((0,s.Z)(this,p),e),window.dispatchEvent(new CustomEvent("recent-history-change",{detail:{namespace:(0,s.Z)(this,h),list:e}}))}},3648:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(9601),i=r.n(n),a=r(2609),s=r.n(a)()(i());s.push([e.id,":host{display:block}:host([hidden]){display:none}*,\n*::before,\n*::after{box-sizing:border-box}.recent-visit-wrapper{display:flex;flex-wrap:wrap;align-items:center;gap:5px}.recent-visit-label{font-size:12px;margin-right:5px}",""]);const o=s.toString()},2609:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(n)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);n&&s[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},9601:e=>{e.exports=function(e){return e[1]}},2604:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(6522),i=r(1815);function a(e,t){return function(r){(function(e,t){if(e.v)throw new Error("attempted to call addInitializer after decoration was finished")})(t),c(r,"An initializer"),e.push(r)}}function s(e,t){if(!e(t))throw new TypeError("Attempted to access private element on non-instance")}function o(e,t,r,n,i,o,c,l,u,h){var p;switch(o){case 1:p="accessor";break;case 2:p="method";break;case 3:p="getter";break;case 4:p="setter";break;default:p="field"}var f,v,d={kind:p,name:l?"#"+r:r,static:c,private:l},m={v:!1};if(0!==o&&(d.addInitializer=a(i,m)),l||0!==o&&2!==o)if(2===o)f=function(e){return s(h,e),n.value};else{var g=0===o||1===o;(g||3===o)&&(f=l?function(e){return s(h,e),n.get.call(e)}:function(e){return n.get.call(e)}),(g||4===o)&&(v=l?function(e,t){s(h,e),n.set.call(e,t)}:function(e,t){n.set.call(e,t)})}else f=function(e){return e[r]},0===o&&(v=function(e,t){e[r]=t});var y=l?h.bind():function(e){return r in e};d.access=f&&v?{get:f,set:v,has:y}:f?{get:f,has:y}:{set:v,has:y};try{return e.call(t,u,d)}finally{m.v=!0}}function c(e,t){if("function"!=typeof e)throw new TypeError(t+" must be a function")}function l(e,t){var r=(0,n.Z)(t);if(1===e){if("object"!==r||null===t)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");void 0!==t.get&&c(t.get,"accessor.get"),void 0!==t.set&&c(t.set,"accessor.set"),void 0!==t.init&&c(t.init,"accessor.init")}else if("function"!==r)throw new TypeError((0===e?"field":5===e?"class":"method")+" decorators must return a function or void 0")}function u(e){return function(){return e(this)}}function h(e){return function(t){e(this,t)}}function p(e,t,r,n,i,a,s,c,p,f){var v,d,m,g,y,w,Z=r[0];n||Array.isArray(Z)||(Z=[Z]),c?v=0===a||1===a?{get:u(r[3]),set:h(r[4])}:3===a?{get:r[3]}:4===a?{set:r[3]}:{value:r[3]}:0!==a&&(v=Object.getOwnPropertyDescriptor(t,i)),1===a?m={get:v.get,set:v.set}:2===a?m=v.value:3===a?m=v.get:4===a&&(m=v.set);for(var b=n?2:1,k=Z.length-1;k>=0;k-=b){var E;void 0!==(g=o(Z[k],n?Z[k-1]:void 0,i,v,p,a,s,c,m,f))&&(l(a,g),0===a?E=g:1===a?(E=g.init,y=g.get||m.get,w=g.set||m.set,m={get:y,set:w}):m=g,void 0!==E&&(void 0===d?d=E:"function"==typeof d?d=[d,E]:d.push(E)))}if(0===a||1===a){if(void 0===d)d=function(e,t){return t};else if("function"!=typeof d){var I=d;d=function(e,t){for(var r=t,n=I.length-1;n>=0;n--)r=I[n].call(e,r);return r}}else{var T=d;d=function(e,t){return T.call(e,t)}}e.push(d)}0!==a&&(1===a?(v.get=m.get,v.set=m.set):2===a?v.value=m:3===a?v.get=m:4===a&&(v.set=m),c?1===a?(e.push((function(e,t){return m.get.call(e,t)})),e.push((function(e,t){return m.set.call(e,t)}))):2===a?e.push(m):e.push((function(e,t){return m.call(e,t)})):Object.defineProperty(t,i,v))}function f(e,t,r){for(var n,a,s,o=[],c=new Map,l=new Map,u=0;u<t.length;u++){var h=t[u];if(Array.isArray(h)){var f,d,m=h[1],g=h[2],y=h.length>3,w=16&m,Z=!!(8&m),b=r;if(m&=7,Z?(f=e,0!==m&&(d=a=a||[]),y&&!s&&(s=function(t){return(0,i.Z)(t)===e}),b=s):(f=e.prototype,0!==m&&(d=n=n||[])),0!==m&&!y){var k=Z?l:c,E=k.get(g)||0;if(!0===E||3===E&&4!==m||4===E&&3!==m)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+g);k.set(g,!(!E&&m>2)||m)}p(o,f,h,w,g,m,Z,y,d,b)}}return v(o,n),v(o,a),o}function v(e,t){t&&e.push((function(e){for(var r=0;r<t.length;r++)t[r].call(e);return e}))}function d(e,t,r,n,i){return{e:f(e,t,i),get c(){return function(e,t,r){if(t.length){for(var n=[],i=e,s=e.name,o=r?2:1,c=t.length-1;c>=0;c-=o){var u={v:!1};try{var h=t[c].call(r?t[c-1]:void 0,i,{kind:"class",name:s,addInitializer:a(n,u)})}finally{u.v=!0}void 0!==h&&(l(5,h),i=h)}return[i,function(){for(var e=0;e<n.length;e++)n[e].call(i)}]}}(e,r,n)}}}},1815:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(6522);function i(e){if(Object(e)!==e)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==e?(0,n.Z)(e):"null"));return e}},6522:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:()=>n})},2890:(e,t,r)=>{r.d(t,{o:()=>n});class n{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"brick-next-";this.storage=e,this.prefix=t}setItem(e,t){this.storage.setItem(this.prefix+e,JSON.stringify(t))}getItem(e){return JSON.parse(this.storage.getItem(this.prefix+e))}removeItem(e){return this.storage.removeItem(this.prefix+e)}clear(){return this.storage.clear()}}}}]);
//# sourceMappingURL=recent-visit.23539bf3.js.map