"use strict";(globalThis.webpackChunk_next_bricks_recent_history=globalThis.webpackChunk_next_bricks_recent_history||[]).push([[849,52],{3849:(e,t,r)=>{var n=r(2681),i=r(4635),s=r(918),a=r(2559),o=r(829),c=r(6121),l=r(4322);const u=new class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"brick-next-";this.storage=e,this.prefix=t}setItem(e,t){this.storage.setItem(this.prefix+e,JSON.stringify(t))}getItem(e){return JSON.parse(this.storage.getItem(this.prefix+e))}removeItem(e){return this.storage.removeItem(this.prefix+e)}clear(){return this.storage.clear()}}(localStorage);var h=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap,d=new WeakSet;class v{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;(0,i.A)(this,d),(0,s.A)(this,h,void 0),(0,s.A)(this,p,void 0),(0,s.A)(this,f,void 0),(0,s.A)(this,m,void 0),(0,c.A)(h,this,e),(0,c.A)(p,this,`recent-history-${e}`),(0,c.A)(f,this,t),u.getItem((0,o.A)(p,this))||u.setItem((0,o.A)(p,this),[]);const r=u.getItem((0,o.A)(p,this));(0,c.A)(m,this,new l.LRUCacheWithDelete((0,o.A)(f,this))),r.reverse().forEach((e=>{(0,o.A)(m,this).set(e.key,e)}))}set(e){(0,o.A)(m,this).set(e.key,e),(0,a.A)(d,this,y).call(this)}get(e){const t=(0,o.A)(m,this).get(e);return(0,a.A)(d,this,y).call(this),t}getAll(){return[...(0,o.A)(m,this).values()]}peek(e){return(0,o.A)(m,this).peek(e)}has(e){return(0,o.A)(m,this).has(e)}delete(e){const t=(0,o.A)(m,this).delete(e);return(0,a.A)(d,this,y).call(this),t}remove(e){const t=(0,o.A)(m,this).remove(e);return(0,a.A)(d,this,y).call(this),t}clear(){(0,o.A)(m,this).clear(),(0,a.A)(d,this,y).call(this)}}function y(){const e=[...(0,o.A)(m,this).values()];u.setItem((0,o.A)(p,this),e),window.dispatchEvent(new CustomEvent("recent-history-change",{detail:{namespace:(0,o.A)(h,this),list:e}}))}customElements.define("recent-history.get-all-history",(0,n.createProviderClass)((function(e,t){return new v(e,t).getAll()}))),customElements.define("recent-history.push-history",(0,n.createProviderClass)((function(e,t,r){new v(e,t).set(r)}))),customElements.define("recent-history.clear-history",(0,n.createProviderClass)((function(e){new v(e).clear()})));var g=r(7545);function A(e){if(Object(e)!==e)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==e?(0,g.A)(e):"null"));return e}function b(e,t,r){"symbol"==(0,g.A)(t)&&(t=(t=t.description)?"["+t+"]":"");try{Object.defineProperty(e,"name",{configurable:!0,value:r?r+" "+t:t})}catch(e){}return e}var w=r(1369),E=r(8769),k=r.n(E),T=r(300),S=r(4295),I=r(7896);let x=function(e){return e.RECENT_VISIT="RECENT_VISIT",e}({});const C="bricks/recent-history/recent-visit";r(6477);var _,N=r(609),j=r(2445);let R,W,M,O,P,z,K,V,D;(0,I.initializeReactI18n)(C,{en:{RECENT_VISIT:"Recent visits"},zh:{RECENT_VISIT:"最近访问"}});const{defineElement:L,property:B}=(0,T.createDecorators)(),J=(0,S.wrapBrick)("eo-link"),U=(0,S.wrapBrick)("eo-tag");let $;var q=new WeakMap,F=new WeakMap,G=new WeakMap,H=new WeakMap;class Q extends S.ReactNextElement{constructor(){super(...arguments),(0,s.A)(this,q,W(this)),(0,s.A)(this,F,(M(this),O(this))),(0,s.A)(this,G,(P(this),z(this))),(0,s.A)(this,H,(K(this),V(this))),D(this)}get namespace(){return(0,o.A)(q,this)}set namespace(e){(0,c.A)(q,this,e)}get capacity(){return(0,o.A)(F,this)}set capacity(e){(0,c.A)(F,this,e)}get compareKeys(){return(0,o.A)(G,this)}set compareKeys(e){(0,c.A)(G,this,e)}get urlTemplate(){return(0,o.A)(H,this)}set urlTemplate(e){(0,c.A)(H,this,e)}render(){return k().createElement(Y,{namespace:this.namespace,capacity:this.capacity,compareKeys:this.compareKeys,urlTemplate:this.urlTemplate})}}_=Q,({e:[W,M,O,P,z,K,V,D],c:[$,R]}=function(e,t,r,n,i,s){var a,o,c,l,u,h,p,f=Symbol.metadata||Symbol.for("Symbol.metadata"),m=Object.defineProperty,d=Object.create,v=[d(null),d(null)],y=t.length;function E(t,r,n){return function(i,s){r&&(s=i,i=e);for(var a=0;a<t.length;a++)s=t[a].apply(i,n?[s]:[]);return n?s:i}}function k(e,t,r,n){if("function"!=typeof e&&(n||void 0!==e))throw new TypeError(t+" must "+(r||"be")+" a function"+(n?"":" or undefined"));return e}function T(e,t,r,n,i,s,c,l,u,h,p){function f(e){if(!p(e))throw new TypeError("Attempted to access private element on non-instance")}var d=[].concat(t[0]),y=t[3],A=!c,w=1===i,T=3===i,S=4===i,I=2===i;function x(t,r,n){return function(i,s){return r&&(s=i,i=e),n&&n(i),C[t].call(i,s)}}if(!A){var C={},_=[],N=T?"get":S||w?"set":"value";if(u?(h||w?C={get:b((function(){return y(this)}),n,"get"),set:function(e){t[4](this,e)}}:C[N]=y,h||b(C[N],n,I?"":N)):h||(C=Object.getOwnPropertyDescriptor(e,n)),!h&&!u){if((o=v[+l][n])&&7!=(o^i))throw Error("Decorating two elements with the same name ("+C[N].name+") is not supported yet");v[+l][n]=i<3?1:i}}for(var j=e,R=d.length-1;R>=0;R-=r?2:1){var W=k(d[R],"A decorator","be",!0),M=r?d[R-1]:void 0,O={},P={kind:["field","accessor","method","getter","setter","class"][i],name:n,metadata:a,addInitializer:function(e,t){if(e.v)throw Error("attempted to call addInitializer after decoration was finished");k(t,"An initializer","be",!0),s.push(t)}.bind(null,O)};if(A)o=W.call(M,j,P),O.v=1,k(o,"class decorators","return")&&(j=o);else if(P.static=l,P.private=u,o=P.access={has:u?p.bind():function(e){return n in e}},S||(o.get=u?I?function(e){return f(e),C.value}:x("get",0,f):function(e){return e[n]}),I||T||(o.set=u?x("set",0,f):function(e,t){e[n]=t}),j=W.call(M,w?{get:C.get,set:C.set}:C[N],P),O.v=1,w){if("object"==(0,g.A)(j)&&j)(o=k(j.get,"accessor.get"))&&(C.get=o),(o=k(j.set,"accessor.set"))&&(C.set=o),(o=k(j.init,"accessor.init"))&&_.unshift(o);else if(void 0!==j)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else k(j,(h?"field":"method")+" decorators","return")&&(h?_.unshift(j):C[N]=j)}return i<2&&c.push(E(_,l,1),E(s,l,0)),h||A||(u?w?c.splice(-1,0,x("get",l),x("set",l)):c.push(I?C[N]:k.call.bind(C[N])):m(e,n,C)),j}function S(e){return m(e,f,{configurable:!0,enumerable:!0,value:a})}return void 0!==s&&(a=s[f]),a=d(null==a?null:a),u=[],h=function(e){e&&u.push(E(e))},(p=function(t,n){for(var i=0;i<r.length;i++){var s=r[i],a=s[1],o=7&a;if((8&a)==t&&!o==n){var h=s[2],p=!!s[3],f=16&a;T(t?e:e.prototype,s,f,p?"#"+h:(0,w.A)(h),o,o<2?[]:t?l=l||[]:c=c||[],u,!!t,p,n,t&&p?function(t){return A(t)===e}:undefined)}}})(8,0),p(0,0),p(8,1),p(0,1),h(c),h(l),o=u,y||S(e),{e:o,get c(){var r=[];return y&&[S(e=T(e,[t],0,e.name,5,r)),E(r,1)]}}}(_,[L("recent-history.recent-visit",{styleTexts:[N.A]})],[[B(),1,"namespace"],[B({type:Number}),1,"capacity"],[B({attribute:!1}),1,"compareKeys"],[B(),1,"urlTemplate"]],0,0,S.ReactNextElement)),R();const X=(e,t)=>null==e?void 0:e.replace(/{{(.*?)}}/g,((e,r)=>(0,j.get)(t,r)));function Y(e){const{namespace:t,capacity:r,compareKeys:n,urlTemplate:i}=e,{t:s}=(0,I.useTranslation)(C),[a,o]=(0,E.useState)([]),c=()=>{const e=new v(t,r).getAll();if(Array.isArray(n)){const t=new Set(n);o(e.filter((e=>t.has(e.key))))}else o(e)};return(0,E.useEffect)((()=>{c()}),[r,n,t]),(0,E.useEffect)((()=>{const e=e=>{e.detail.namespace===t&&c()};return window.addEventListener("recent-history-change",e),()=>{window.removeEventListener("recent-history-change",e)}}),[]),a.length?k().createElement("div",{className:"recent-visit-wrapper"},k().createElement("span",{className:"recent-visit-label"},s(x.RECENT_VISIT)+": "),a.map((e=>k().createElement(J,{key:e.key,url:X(i,e)},k().createElement(U,{outline:!0,tagStyle:{borderRadius:"9999px",color:"var(--antd-text-color)",background:"var(--tag-blue-background)",outlineColor:"var(--tag-blue-border-color)"}},e.name))))):null}},609:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(6758),i=r.n(n),s=r(935),a=r.n(s)()(i());a.push([e.id,":host{display:block}:host([hidden]){display:none}*,\n*::before,\n*::after{box-sizing:border-box}.recent-visit-wrapper{display:flex;flex-wrap:wrap;align-items:center;gap:5px}.recent-visit-label{font-size:12px;margin-right:5px}",""]);const o=a.toString()},935:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);n&&a[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},6758:e=>{e.exports=function(e){return e[1]}},1369:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(7545);function i(e){var t=function(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=(0,n.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,n.A)(t)?t:t+""}},7545:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{A:()=>n})}}]);
//# sourceMappingURL=849.b12d5a60.js.map