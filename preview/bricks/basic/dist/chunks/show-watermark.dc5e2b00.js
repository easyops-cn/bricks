"use strict";(globalThis.webpackChunk_next_bricks_basic=globalThis.webpackChunk_next_bricks_basic||[]).push([[5601],{9996:(t,e,n)=>{n.d(e,{I:()=>a,i:()=>o});const o=3;function r(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const o=document.createElement("canvas"),r=o.getContext("2d"),a=t*n,s=e*n;return o.setAttribute("width",`${a}px`),o.setAttribute("height",`${s}px`),r.save(),[r,o,a,s]}function a(t,e,n,a,s,i,c,l){const[u,h,m,g]=r(a,s,n);if(t instanceof HTMLImageElement)u.drawImage(t,0,0,m,g);else{const{color:e,fontSize:r,fontStyle:a,fontWeight:c,fontFamily:l,textAlign:h}=i,g=Number(r)*n;u.font=`${a} normal ${c} ${g}px/${s}px ${l}`,u.fillStyle=e,u.textAlign=h,u.textBaseline="top";const f=Array.isArray(t)?t:[t];null==f||f.forEach(((t,e)=>{u.fillText(t??"",m/2,e*(g+o*n))}))}const f=Math.PI/180*Number(e),d=Math.max(a,s),[b,p,x]=r(d,d,n);b.translate(x/2,x/2),b.rotate(f),m>0&&g>0&&b.drawImage(h,-m/2,-g/2);let y=0,M=0,w=0,v=0;const A=m/2,k=g/2;[[0-A,0-k],[0+A,0-k],[0+A,0+k],[0-A,0+k]].forEach((t=>{let[e,n]=t;const[o,r]=function(t,e){return[t*Math.cos(f)-e*Math.sin(f),t*Math.sin(f)+e*Math.cos(f)]}(e,n);y=Math.min(y,o),M=Math.max(M,o),w=Math.min(w,r),v=Math.max(v,r)}));const $=y+x/2,I=w+x/2,E=M-y,S=v-w,C=c*n,T=l*n,z=2*(E+C),W=S+T,[_,B]=r(z,W);function L(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_.drawImage(p,$,I,E,S,t,e,E,S)}return L(),L(E+C,-S/2-T/2),L(E+C,+S/2+T/2),[B.toDataURL(),z/n,W/n]}},2035:(t,e,n)=>{n.r(e),n.d(e,{showWaterMark:()=>h});var o=n(5223),r=n(9996),a=n(2681);const s=100,i=100,c=new WeakMap,l=new WeakMap,u=(t,e,n,o)=>{if(n){const r=c.get(n),a=r&&n.contains(r);if(!a){const t=document.createElement("div");c.set(n,t)}const s=c.get(n),i=function(t){return Object.keys(t).map((e=>`${function(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}(e)}: ${t[e]};`)).join(" ")}({...o,backgroundImage:`url('${t}')`,backgroundSize:`${Math.floor(e)}px`});s.getAttribute("style")!==i&&s.setAttribute("style",i),s.hasAttribute("class")&&s.removeAttribute("class"),!a&&n.append(s)}};function h(t){let{zIndex:e=9,rotate:n=-22,width:a,height:h,image:m,content:g,font:f={},style:d,container:b,gap:p=[s,i]}=t;const x="string"==typeof(y=b)?document.querySelector(y):y??document.body;var y;if(!x)return;const M=l.get(x);M&&(l.delete(x),M.disconnect());const{color:w,fontSize:v="14",fontWeight:A="normal",fontStyle:k="normal",fontFamily:$="sans-serif",textAlign:I="center"}=f,[E=s,S=i]=p,C={zIndex:e,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat",...d},T=()=>{const t=document.createElement("canvas").getContext("2d");if(t){const e=1,[s,i]=(t=>{let e=120,n=64;if(!m&&t.measureText){t.font=`${Number(v)}px ${$}`;const o=Array.isArray(g)?g:[g],a=o.map((e=>{const n=t.measureText(e);return[n.width,n.fontBoundingBoxAscent+n.fontBoundingBoxDescent]}));e=Math.ceil(Math.max(...a.map((t=>t[0])))),n=Math.ceil(Math.max(...a.map((t=>t[1]))))*o.length+(o.length-1)*r.i}return[a??e,h??n]})(t),c=t=>{const[a,c]=(0,r.I)(t||"",n,e,s,i,{color:w||("light"===(0,o.getCurrentTheme)()?"rgba(0, 0, 0, 0.15)":"rgba(255, 255, 255, 0.4)"),fontSize:v,fontStyle:k,fontWeight:A,fontFamily:$,textAlign:I},E,S);u(a,c,x,C)};if(m){const t=new Image;t.onload=()=>{c(t)},t.onerror=()=>{c(g)},t.crossOrigin="anonymous",t.referrerPolicy="no-referrer",t.src=m}else c(g)}},z=new MutationObserver((t=>{t.forEach((t=>{(t=>{let e=!1;return t.removedNodes.length&&(e=Array.from(t.removedNodes).some((t=>c.get(x)===t))),"attributes"===t.type&&c.get(x)===t.target&&(e=!0),e})(t)&&T()}))}));z.observe(x,{subtree:!0,childList:!0,attributeFilter:["style","class"]}),l.set(x,z),window.addEventListener("theme.change",T),T()}customElements.define("basic.show-watermark",(0,a.createProviderClass)(h))}}]);
//# sourceMappingURL=show-watermark.dc5e2b00.js.map