"use strict";(globalThis.webpackChunk_next_bricks_basic=globalThis.webpackChunk_next_bricks_basic||[]).push([[3979],{3946:(e,t,r)=>{r.d(t,{e:()=>k});var n=r(8769),i=r.n(n);const o=(0,n.createContext)({previewImageList:[],currentUUid:void 0,onlyPreview:!1,setCurrentUUid:()=>null,registerImage:()=>()=>null});var a=r(4295),l=r(3373),s=r.n(l);const c={translateX:0,translateY:0,scale:1,rotate:0};var d=r(97);const u=(0,a.wrapBrick)("eo-icon"),p=e=>{var t,r;let{visible:a,onClose:l,scaleStep:p=.5}=e;const{transform:m,resetTransform:f,updateTransform:v,dispatchZoomChange:g}=function(){const[e,t]=(0,n.useState)(c),r=e=>{requestAnimationFrame((()=>{t((t=>({...t,...e})))}))};return{transform:e,resetTransform:()=>{t(c)},updateTransform:r,dispatchZoomChange:t=>{let n=e.scale*t;n>50?n=50:n<1&&(n=1),r({scale:n})}}}(),h=(0,n.useRef)(null);(0,n.useEffect)((()=>{a||f(),h.current&&(0,d.lockBodyScroll)(h.current,!!a)}),[a]);const{previewImageList:w,currentUUid:b,setCurrentUUid:y}=(0,n.useContext)(o),k=w.map((e=>e.uuid)),x=k.indexOf(b),E=[{icon:i().createElement(u,{lib:"antd",theme:"outlined",icon:"close"}),onClick:l,type:"close"},{icon:i().createElement(u,{lib:"antd",theme:"outlined",icon:"zoom-in"}),onClick:()=>{g(1+p)},type:"zoom-in",disabled:m.scale>=50},{icon:i().createElement(u,{lib:"antd",theme:"outlined",icon:"zoom-out"}),onClick:()=>{g(1-p)},type:"zoom-out",disabled:m.scale<=1},{icon:i().createElement(u,{lib:"antd",theme:"outlined",icon:"rotate-right"}),onClick:()=>{v({rotate:m.rotate+90})},type:"rotate-right"},{icon:i().createElement(u,{lib:"antd",theme:"outlined",icon:"rotate-left"}),onClick:()=>{v({rotate:m.rotate-90})},type:"rotate-left"}];return i().createElement("div",{className:"preview-root",ref:h,style:{visibility:a?"visible":"hidden"}},i().createElement("div",{className:"preview-mask"}),i().createElement("div",{className:"preview-wrap"},i().createElement("div",{className:"preview-image-wrap",onClick:e=>{e.target===e.currentTarget&&(null==l||l())}},i().createElement("img",{className:"preview-image",draggable:!1,src:null===(t=w[x])||void 0===t?void 0:t.src,alt:null===(r=w[x])||void 0===r?void 0:r.alt,style:{transform:`translate3d(${m.translateX}px, ${m.translateY}px, 0) scale3d(${m.scale}, ${m.scale}, 1) rotate(${m.rotate}deg)`}}))),i().createElement("div",{className:"preview-operations"},i().createElement("div",{className:s()("preview-switch","preview-switch-left",{"preview-switch-disabled":x<=0}),onClick:()=>{y(k[x-1<=0?0:x-1])}},i().createElement(u,{lib:"antd",theme:"outlined",icon:"left"})),i().createElement("div",{className:s()("preview-switch","preview-switch-right",{"preview-switch-disabled":x>=w.length-1}),onClick:()=>{const e=x+1>=w.length-1?w.length-1:x+1;y(k[e])}},i().createElement(u,{lib:"antd",theme:"outlined",icon:"right"})),i().createElement("div",{className:"preview-operations-bar"},i().createElement("div",{className:"preview-operations-progress"},`${x+1} / ${w.length}`),E.map((e=>{let{icon:t,type:r,disabled:n,onClick:o}=e;return i().createElement("div",{"data-testid":`preview-operations-button-${r}`,className:s()("preview-operations-button",{"preview-operations-button-disabled":!!n}),onClick:o,key:r},t)})))))},m=new Map,f=e=>new Promise(((t,r)=>{const n=new Image;n.onload=()=>t(!0),n.onerror=()=>t(!1),n.src=e}));let v=0;const g=`data:image/svg+xml;base64,${window.btoa('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 180" style="background: rgb(238, 240, 244);"><g transform="translate(-12, -12)"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" color="current" x="160" y="90"><g fill="currentColor" fill-rule="nonzero"><path d="M21.042 2.11c1.19 0 2.156.966 2.156 2.156v15.288c0 1.19-.966 2.156-2.156 2.156H2.925a2.157 2.157 0 0 1-2.156-2.156V4.266c0-1.192.965-2.157 2.156-2.157h18.117Zm0 1.5H2.925a.656.656 0 0 0-.656.656v15.288c0 .361.294.656.656.656h18.117a.657.657 0 0 0 .656-.656V4.266a.657.657 0 0 0-.656-.657Z" style="&#10;  fill: #9FAECF;&#10;"/><path d="M9.516 5.344a2.298 2.298 0 1 1-.002 4.595 2.298 2.298 0 0 1 .002-4.595ZM19.847 18.117H4.123a.469.469 0 0 1-.406-.703l1.868-4.453c.722-1.25 2.527-1.25 3.249 0l.864 1.5a.938.938 0 0 0 1.657-.063l2.818-5.87c.51-1.063 2.027-1.063 2.536.003l3.56 8.916c.15.31-.078.67-.422.67Z" style="&#10;  fill: #57689C;&#10;"/></g></svg></g></svg>')}`,h=(0,a.wrapBrick)("eo-icon");function w(e){let{index:t,src:r,fallback:a,placeholder:l,alt:s,width:c,height:d,style:u,onClick:p,preview:w=!0}=e;const b=(0,n.useMemo)((()=>[r,a,g]),[r,a]),{status:y,src:k}=function(e){const[t,r]=i().useState(),[o,a]=i().useState();return(0,n.useEffect)((()=>{const t=[].concat(e).filter(Boolean);a(void 0),t.length?(r("loading"),(e=>new Promise(((t,r)=>{(async()=>{for(const r of e)if(m.has(r)||m.set(r,f(r)),await m.get(r))return void t(r);r(e[e.length-1])})()})))(t).then((e=>{r("normal"),a(e)})).catch((e=>{r("error"),a(e)}))):r("normal")}),[e]),{status:t,src:o}}(b),[x]=i().useState(++v),{onlyPreview:E,registerImage:A}=(0,n.useContext)(o);return(0,n.useEffect)((()=>A(x,{uuid:x,src:k,preview:w,index:t,alt:s})),[]),(0,n.useEffect)((()=>{A(x,{uuid:x,src:k,preview:w,index:t,alt:s})}),[k,w,s,t]),E?null:i().createElement(i().Fragment,null,i().createElement("div",{className:"image-wrapper",onClick:()=>null==p?void 0:p(x,w),style:{width:c,height:d}},i().createElement("img",{className:"image",src:k,alt:s,width:c,height:d,style:u}),"loading"===y&&i().createElement("div",{"aria-hidden":"true",className:"image-placeholder"},l),!!w&&i().createElement("div",{className:"image-mask"},i().createElement("div",{className:"image-mask-info"},i().createElement(h,{lib:"antd",theme:"outlined",icon:"eye",className:"image-mask-info-icon"}),"预览"))))}var b=r(1030);const{Provider:y}=o,k=(0,n.forwardRef)((function(e,t){let{imgList:r,width:o,height:a,onlyPreview:l,onVisibleChange:s}=e;const[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(void 0),f=(e,t)=>{t&&(m(e),d(!0),null==s||s(!0))},[v,g]=(0,n.useState)(new Map),h=Array.from(v.values()).filter((e=>!!e.preview)).sort(((e,t)=>e.index-t.index));return(0,n.useImperativeHandle)(t,(()=>({openPreview:e=>{var t,r;(0,b.isNil)(e)?m(null===(t=h[0])||void 0===t?void 0:t.uuid):m(null===(r=h.find((t=>t.index===e)))||void 0===r?void 0:r.uuid),d(!0),null==s||s(!0)},closePreview:()=>{d(!1),null==s||s(!1)}}))),i().createElement(i().Fragment,null,i().createElement(y,{value:{previewImageList:h,currentUUid:u,onlyPreview:l,setCurrentUUid:m,registerImage:(e,t)=>(g((r=>new Map(r).set(e,t))),()=>{g((t=>{const r=new Map(t);return r.delete(e)?r:t}))})}},null==r?void 0:r.map(((e,t)=>i().createElement(w,{key:t,index:t,src:e.src,fallback:e.fallback,placeholder:e.placeholder,alt:e.alt,width:e.width||o,height:e.height||a,style:e.style,preview:e.preview,onClick:f}))),i().createElement(p,{visible:c,onClose:()=>{d(!1),null==s||s(!1)}})))}))},3526:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(6758),i=r.n(n),o=r(935),a=r.n(o)()(i());a.push([e.id,"body.disable-scroll{overflow:hidden;padding-right:var(--body-scroll-lock-size)}",""]);const l=a},3939:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(6758),i=r.n(n),o=r(935),a=r.n(o)()(i());a.push([e.id,".image-wrapper{position:relative}.image{vertical-align:middle}.image-placeholder{position:absolute;top:0;right:0;bottom:0;left:0}.image-wrapper:hover .image-mask{opacity:1}.image-mask{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:14px;color:#fff;background:rgba(0,0,0,0.5);cursor:pointer;opacity:0;transition:opacity 0.3s}.image-mask-info{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:0 4px}.image-mask-info-icon{margin-right:4px;vertical-align:middle}",""]);const l=a.toString()},8743:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(6758),i=r.n(n),o=r(935),a=r.n(o)()(i());a.push([e.id,".preview-mask{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1000;background-color:var(--antd-modal-mask-bg)}.preview-wrap{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1000}.preview-image-wrap{position:absolute;inset:0;display:flex;justify-content:center;align-items:center}.preview-image{max-width:100%;max-height:100%;vertical-align:middle;transition:transform 0.3s cubic-bezier(0.215,0.61,0.355,1) 0s;cursor:grab;-webkit-user-select:none;user-select:none}.preview-operations{position:fixed;z-index:1080}.preview-switch{font-size:18px;width:40px;height:40px;position:fixed;top:50%;transform:translateY(-50%);border-radius:50%;display:flex;align-items:center;justify-content:center;z-index:1081;background:rgba(0,0,0,0.1);color:#fff;cursor:pointer;transition:background,color 0.3s}.preview-switch:not(.preview-switch-disabled):hover{background:rgba(0,0,0,0.2)}.preview-switch-disabled{color:rgba(255,255,255,0.25);background:none;cursor:not-allowed}.preview-switch-left{left:12px}.preview-switch-right{right:12px}.preview-operations-bar{position:fixed;left:0;right:0;top:0;font-size:14px;color:#fff;background:rgba(0,0,0,0.1);display:flex;flex-direction:row-reverse;align-items:center}.preview-operations-progress{position:absolute;left:50%;transform:translateX(-50%)}.preview-operations-button{font-size:18px;margin-left:12px;padding:12px;cursor:pointer;transition:background,color 0.3s}.preview-operations-button:last-of-type{margin-left:0}.preview-operations-button:hover{background:rgba(0,0,0,0.2)}.preview-operations-button-disabled{color:rgba(255,255,255,0.25);pointer-events:none}",""]);const l=a.toString()},8280:(e,t,r)=>{var n=r(2591),i=r.n(n),o=r(1740),a=r.n(o),l=r(8128),s=r.n(l),c=r(855),d=r.n(c),u=r(3051),p=r.n(u),m=r(3656),f=r.n(m),v=r(3526),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p(),i()(v.A,g),v.A&&v.A.locals&&v.A.locals},2740:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(7545),i=r(6902);function o(e,t,r){"symbol"==(0,n.A)(t)&&(t=(t=t.description)?"["+t+"]":"");try{Object.defineProperty(e,"name",{configurable:!0,value:r?r+" "+t:t})}catch(e){}return e}var a=r(1369);function l(e,t,r,l,s,c){var d,u,p,m,f,v,g,h=Symbol.metadata||Symbol.for("Symbol.metadata"),w=Object.defineProperty,b=Object.create,y=[b(null),b(null)],k=t.length;function x(t,r,n){return function(i,o){r&&(o=i,i=e);for(var a=0;a<t.length;a++)o=t[a].apply(i,n?[o]:[]);return n?o:i}}function E(e,t,r,n){if("function"!=typeof e&&(n||void 0!==e))throw new TypeError(t+" must "+(r||"be")+" a function"+(n?"":" or undefined"));return e}function A(e,t,r,i,a,l,s,c,p,m,f){function v(e){if(!f(e))throw new TypeError("Attempted to access private element on non-instance")}var g=[].concat(t[0]),h=t[3],b=!s,k=1===a,A=3===a,C=4===a,S=2===a;function z(t,r,n){return function(i,o){return r&&(o=i,i=e),n&&n(i),N[t].call(i,o)}}if(!b){var N={},P=[],j=A?"get":C||k?"set":"value";if(p?(m||k?N={get:o((function(){return h(this)}),i,"get"),set:function(e){t[4](this,e)}}:N[j]=h,m||o(N[j],i,S?"":j)):m||(N=Object.getOwnPropertyDescriptor(e,i)),!m&&!p){if((u=y[+c][i])&&7!=(u^a))throw Error("Decorating two elements with the same name ("+N[j].name+") is not supported yet");y[+c][i]=a<3?1:a}}for(var T=e,U=g.length-1;U>=0;U-=r?2:1){var I=E(g[U],"A decorator","be",!0),$=r?g[U-1]:void 0,M={},O={kind:["field","accessor","method","getter","setter","class"][a],name:i,metadata:d,addInitializer:function(e,t){if(e.v)throw Error("attempted to call addInitializer after decoration was finished");E(t,"An initializer","be",!0),l.push(t)}.bind(null,M)};if(b)u=I.call($,T,O),M.v=1,E(u,"class decorators","return")&&(T=u);else if(O.static=c,O.private=p,u=O.access={has:p?f.bind():function(e){return i in e}},C||(u.get=p?S?function(e){return v(e),N.value}:z("get",0,v):function(e){return e[i]}),S||A||(u.set=p?z("set",0,v):function(e,t){e[i]=t}),T=I.call($,k?{get:N.get,set:N.set}:N[j],O),M.v=1,k){if("object"==(0,n.A)(T)&&T)(u=E(T.get,"accessor.get"))&&(N.get=u),(u=E(T.set,"accessor.set"))&&(N.set=u),(u=E(T.init,"accessor.init"))&&P.unshift(u);else if(void 0!==T)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else E(T,(m?"field":"method")+" decorators","return")&&(m?P.unshift(T):N[j]=T)}return a<2&&s.push(x(P,c,1),x(l,c,0)),m||b||(p?k?s.splice(-1,0,z("get",c),z("set",c)):s.push(S?N[j]:E.call.bind(N[j])):w(e,i,N)),T}function C(e){return w(e,h,{configurable:!0,enumerable:!0,value:d})}return void 0!==c&&(d=c[h]),d=b(null==d?null:d),f=[],v=function(e){e&&f.push(x(e))},g=function(t,n){for(var o=0;o<r.length;o++){var l=r[o],c=l[1],d=7&c;if((8&c)==t&&!d==n){var u=l[2],v=!!l[3],g=16&c;A(t?e:e.prototype,l,g,v?"#"+u:(0,a.A)(u),d,d<2?[]:t?m=m||[]:p=p||[],f,!!t,v,n,t&&v?function(t){return(0,i.A)(t)===e}:s)}}},g(8,0),g(0,0),g(8,1),g(0,1),v(p),v(m),u=f,k||C(e),{e:u,get c(){var r=[];return k&&[C(e=A(e,[t],l,e.name,5,r)),x(r,1)]}}}},2559:(e,t,r)=>{function n(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}r.d(t,{A:()=>n})},6902:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(7545);function i(e){if(Object(e)!==e)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==e?(0,n.A)(e):"null"));return e}},2016:(e,t,r)=>{function n(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}r.d(t,{A:()=>n})},829:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(2559);function i(e,t){return e.get((0,n.A)(e,t))}},918:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(2016);function i(e,t,r){(0,n.A)(e,t),t.set(e,r)}},6121:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(2559);function i(e,t,r){return e.set((0,n.A)(e,t),r),r}},5536:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(2559);function i(e,t,r){return r((0,n.A)(e,t))}},4635:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(2016);function i(e,t){(0,n.A)(e,t),t.add(e)}},4586:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(1369);function i(e,t,r){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},1369:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(7545);function i(e){var t=function(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=(0,n.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,n.A)(t)?t:t+""}},7545:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{A:()=>n})}}]);
//# sourceMappingURL=3979.01c2b42f.js.map