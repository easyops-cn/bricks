{"version":3,"file":"chunks/editors/eo-select.2f4168f5.js","mappings":"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","sources":["webpack:///./src/editors/eo-select/eoSelect.schema.tsx","webpack:///./src/editors/eo-select/index.tsx"],"sourcesContent":["export const eoSelectSchema = {\n  name: \"layout\",\n  type: \"void\",\n  component: {\n    name: \"FormLayout\",\n    props: {\n      layout: \"vertical\",\n    },\n  },\n  children: [\n    {\n      name: \"categoryTitle_item\",\n      type: \"void\",\n      decorator: {\n        name: \"CategoryTitle\",\n        props: {\n          text: \"表单项\",\n        },\n      },\n    },\n    {\n      name: \"name\",\n      title: \"字段名\",\n      type: \"string\",\n    },\n    {\n      name: \"label\",\n      title: \"标签\",\n      type: \"string\",\n    },\n    {\n      name: \"value\",\n      title: \"值\",\n      type: \"string\",\n      component: {\n        name: \"CodeEditor\",\n      },\n      decorator: \"FormItemWithoutAdvanced\",\n    },\n    {\n      name: \"disabled\",\n      title: \"禁用\",\n      type: \"boolean\",\n    },\n    {\n      name: \"categoryTitle_input\",\n      type: \"void\",\n      decorator: {\n        name: \"CategoryTitle\",\n        props: {\n          text: \"选择框\",\n        },\n      },\n    },\n    {\n      name: \"options\",\n      title: \"选项列表\",\n      component: {\n        name: \"CodeEditor\",\n      },\n      decorator: \"FormItemWithoutAdvanced\",\n    },\n    {\n      name: \"mode\",\n      title: \"类型\",\n      type: \"string\",\n      component: {\n        name: \"Select\",\n        props: {\n          placeholder: \"请选择选择框类型\",\n          allowClear: true,\n          options: [\n            { label: \"标签\", value: \"tag\" },\n            { label: \"多个\", value: \"multiple\" },\n          ],\n        },\n      },\n      \"x-reactions\": [\n        {\n          target: \"maxTagCount\",\n          fulfill: {\n            state: {\n              visible: \"{{!!$self.value}}\",\n            },\n          },\n        },\n        {\n          target: \"tokenSeparators\",\n          fulfill: {\n            state: {\n              visible: `{{$self.value == \"tag\"}}`,\n            },\n          },\n        },\n      ],\n    },\n    {\n      name: \"maxTagCount\",\n      title: \"最多显示tag数量\",\n      component: {\n        name: \"NumberPicker\",\n      },\n      decorator: \"FormItem\",\n      type: \"number\",\n    },\n    {\n      name: \"tokenSeparators\",\n      title: \"自动分词的分隔符\",\n      type: \"string\",\n    },\n    {\n      name: \"placeholder\",\n      title: \"占位文本\",\n      type: \"string\",\n    },\n    {\n      name: \"clearable\",\n      title: \"显示清除按钮\",\n      type: \"boolean\",\n    },\n    {\n      name: \"groupBy\",\n      title: \"分组字段\",\n      type: \"string\",\n    },\n    {\n      name: \"fieldLabel\",\n      title: \"选项显示字段\",\n      type: \"string\",\n      component: {\n        name: \"Input\",\n        props: {\n          placeholder: \"选项中显示文字的字段\",\n        },\n      },\n    },\n    {\n      name: \"fieldValue\",\n      title: \"选项值字段\",\n      type: \"string\",\n      component: {\n        name: \"Input\",\n        props: {\n          placeholder: \"选项中选择后得到的字段\",\n        },\n      },\n    },\n    {\n      name: \"inputStyle\",\n      title: \"选择框样式\",\n      component: {\n        name: \"CodeEditor\",\n      },\n      decorator: \"FormItemWithoutAdvanced\",\n    },\n    {\n      name: \"categoryTitle_validator\",\n      type: \"void\",\n      decorator: {\n        name: \"CategoryTitle\",\n        props: {\n          text: \"校验\",\n        },\n      },\n    },\n    {\n      name: \"required\",\n      title: \"必填\",\n      type: \"boolean\",\n      component: {\n        props: {\n          size: \"small\",\n        },\n      },\n      \"x-reactions\": [\n        {\n          target: \"requiredValidatorText\",\n          fulfill: {\n            state: {\n              visible: \"{{$self.value}}\",\n            },\n          },\n        },\n      ],\n    },\n    {\n      name: \"requiredValidatorText\",\n      title: \"必填提示文字\",\n      type: \"string\",\n    },\n  ],\n};\n","import type _React from \"react\";\nimport { customEditors } from \"@next-core/runtime\";\nimport type { EditorComponentProps } from \"@next-shared/property-editor\";\nimport { eoSelectSchema } from \"./eoSelect.schema\";\n\nfunction EoSelectComponentFactory(React: typeof _React) {\n  return function EoSelectComponent(\n    props: EditorComponentProps\n  ): React.ReactElement {\n    const {\n      SchemaFieldComponent,\n      formilySchemaFormatter,\n      advancedMode,\n      scope,\n      form,\n      effects,\n    } = props;\n\n    React.useEffect(() => {\n      form.setInitialValues({\n        mode: \"\",\n        required: false,\n      });\n    }, [form]);\n\n    React.useEffect(() => {\n      const { onSubmit } = effects;\n      form.addEffects(\"formEffect\", () => {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        onSubmit((value) => {\n          if (value.fieldLabel || value.fieldValue) {\n            const { fieldLabel, fieldValue, ...newValue } = value;\n            return {\n              ...newValue,\n              fields: { label: fieldLabel, value: fieldValue },\n            };\n          }\n          return { ...value };\n        });\n      });\n    }, []);\n\n    return React.createElement(SchemaFieldComponent, {\n      schema: formilySchemaFormatter(eoSelectSchema as any, advancedMode!),\n      scope,\n    });\n  };\n}\n\ncustomEditors.define(\"eo-select\", EoSelectComponentFactory);\n"],"names":["eoSelectSchema","name","type","component","props","layout","children","decorator","text","title","placeholder","allowClear","options","label","value","target","fulfill","state","visible","size","customEditors","define","React","SchemaFieldComponent","formilySchemaFormatter","advancedMode","scope","form","effects","useEffect","setInitialValues","mode","required","onSubmit","addEffects","fieldLabel","fieldValue","newValue","fields","createElement","schema"],"sourceRoot":""}