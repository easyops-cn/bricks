{"version":3,"file":"chunks/editors/eo-descriptions.ea47d1f3.js","mappings":"qJAAO,MAAMA,EAAiB,CAC5BC,KAAM,SACNC,KAAM,OACNC,UAAW,CACTF,KAAM,aACNG,MAAO,CACLC,OAAQ,aAGZC,SAAU,CACR,CACEL,KAAM,sBACNC,KAAM,OACNK,UAAW,CACTN,KAAM,gBACNG,MAAO,CACLI,KAAM,QAIZ,CACEP,KAAM,mBACNQ,MAAO,KACPP,KAAM,UAER,CACED,KAAM,OACNQ,MAAO,KACPP,KAAM,SACNC,UAAW,aACXI,UAAW,2BAEb,CACEN,KAAM,aACNQ,MAAO,OACPP,KAAM,SACNC,UAAW,CACTF,KAAM,SACNG,MAAO,CACLM,YAAa,QACbC,YAAY,IAGhBJ,UAAW,CACTH,MAAO,CACLQ,QAAS,8BAIf,CACEX,KAAM,sBACNC,KAAM,OACNK,UAAW,CACTN,KAAM,gBACNG,MAAO,CACLI,KAAM,QAIZ,CACEP,KAAM,WACNQ,MAAO,SACPP,KAAM,UACNC,UAAW,CACTC,MAAO,CACLS,KAAM,QACNC,cAAc,KAIpB,CACEb,KAAM,WACNQ,MAAO,OACPP,KAAM,WAER,CACED,KAAM,SACNQ,MAAO,KACPP,KAAM,SACNC,UAAW,eACXI,UAAW,YAEb,CACEN,KAAM,SACNQ,MAAO,OACPP,KAAM,SACNK,UAAW,CACTN,KAAM,WACNG,MAAO,CACLC,OAAQ,eAGZU,KAAM,CACJ,CACEC,MAAO,aACPC,MAAO,cAET,CACED,MAAO,WACPC,MAAO,aAGXd,UAAW,CACTF,KAAM,cACNG,MAAO,CACLS,KAAM,QACNK,WAAY,SACZJ,aAAc,gBAIpB,CACEb,KAAM,aACNQ,MAAO,WACPP,KAAM,SACNC,UAAW,aACXI,UAAW,4B,0DCjEjBY,EAAAA,cAAcC,OAAO,mBA7CrB,SAAkCC,GAChC,OAAO,SACLjB,GAEA,MAAM,qBACJkB,EAAoB,uBACpBC,EAAsB,MACtBC,EAAK,KACLC,EAAI,QACJC,GACEtB,EACEuB,EAAcN,EAAMO,SA2B1B,OAzBAP,EAAMQ,WAAU,KACd,MAAM,SAAEC,GAAaJ,EAErBD,EAAKM,WAAW,UAAU,KACxBD,GAAUb,IACDe,EAAAA,EAAAA,MAAKf,EAAO,CAAC,UACpB,GACF,GACD,CAACS,EAASD,IAEbJ,EAAMQ,WAAU,KAEd,MAAM,SAAEI,EAAW,IAAOT,EAC1BG,EAAYO,QAAUD,aAAQ,EAARA,EAAUE,KAAKC,IAAS,IACzCA,EACHpB,MAAOoB,aAAI,EAAJA,EAAMnC,KACbgB,MAAOmB,aAAI,EAAJA,EAAMnB,UAEfQ,EAAKY,MAAM,cAAcC,MAAMC,IAC7BA,EAAMC,kBAAkB,CACtBC,QAASd,EAAYO,SACrB,GACF,GACD,CAACV,IAEGH,EAAMqB,cAAcpB,EAAsB,CAC/CqB,OAAQpB,EAAuBvB,EAAAA,GAC/BwB,SAEJ,CACF,G","sources":["webpack:///./src/editors/eo-descriptions/eoDescriptions.schema.tsx","webpack:///./src/editors/eo-descriptions/index.tsx"],"sourcesContent":["export const eoButtonSchema = {\n  name: \"layout\",\n  type: \"void\",\n  component: {\n    name: \"FormLayout\",\n    props: {\n      layout: \"vertical\",\n    },\n  },\n  children: [\n    {\n      name: \"categoryTitle_basic\",\n      type: \"void\",\n      decorator: {\n        name: \"CategoryTitle\",\n        props: {\n          text: \"基础\",\n        },\n      },\n    },\n    {\n      name: \"descriptionTitle\",\n      title: \"标题\",\n      type: \"string\",\n    },\n    {\n      name: \"list\",\n      title: \"列表\",\n      type: \"string\",\n      component: \"CodeEditor\",\n      decorator: \"FormItemWithoutAdvanced\",\n    },\n    {\n      name: \"dataSource\",\n      title: \"选择数据\",\n      type: \"string\",\n      component: {\n        name: \"Select\",\n        props: {\n          placeholder: \"请选择数据\",\n          allowClear: true,\n        },\n      },\n      decorator: {\n        props: {\n          tooltip: \"可以通过<% DATA.XXX %>的形式被读取\",\n        },\n      },\n    },\n    {\n      name: \"categoryTitle_style\",\n      type: \"void\",\n      decorator: {\n        name: \"CategoryTitle\",\n        props: {\n          text: \"外观\",\n        },\n      },\n    },\n    {\n      name: \"showCard\",\n      title: \"展示卡片背景\",\n      type: \"boolean\",\n      component: {\n        props: {\n          size: \"small\",\n          defaultValue: true,\n        },\n      },\n    },\n    {\n      name: \"bordered\",\n      title: \"展示边框\",\n      type: \"boolean\",\n    },\n    {\n      name: \"column\",\n      title: \"列数\",\n      type: \"number\",\n      component: \"NumberPicker\",\n      decorator: \"FormItem\",\n    },\n    {\n      name: \"layout\",\n      title: \"布局模式\",\n      type: \"string\",\n      decorator: {\n        name: \"FormItem\",\n        props: {\n          layout: \"horizontal\",\n        },\n      },\n      enum: [\n        {\n          label: \"Horizontal\",\n          value: \"horizontal\",\n        },\n        {\n          label: \"Vertical\",\n          value: \"vertical\",\n        },\n      ],\n      component: {\n        name: \"Radio.Group\",\n        props: {\n          size: \"small\",\n          optionType: \"button\",\n          defaultValue: \"horizontal\",\n        },\n      },\n    },\n    {\n      name: \"hideGroups\",\n      title: \"隐藏的描述列表项\",\n      type: \"string\",\n      component: \"CodeEditor\",\n      decorator: \"FormItemWithoutAdvanced\",\n    },\n  ],\n};\n","import type _React from \"react\";\nimport { customEditors } from \"@next-core/runtime\";\nimport type { EditorComponentProps } from \"@next-shared/property-editor\";\nimport { eoButtonSchema } from \"./eoDescriptions.schema\";\nimport { omit } from \"lodash\";\n\nfunction EoButtonComponentFactory(React: typeof _React) {\n  return function EoButtonComponent(\n    props: EditorComponentProps\n  ): React.ReactElement {\n    const {\n      SchemaFieldComponent,\n      formilySchemaFormatter,\n      scope,\n      form,\n      effects,\n    } = props;\n    const dataListRef = React.useRef<any>();\n\n    React.useEffect(() => {\n      const { onSubmit } = effects;\n\n      form.addEffects(\"submit\", () => {\n        onSubmit((value: any) => {\n          return omit(value, [\"link\"]);\n        });\n      });\n    }, [effects, form]);\n\n    React.useEffect(() => {\n      // 初始化data\n      const { dataList = [] } = scope;\n      dataListRef.current = dataList?.map((item: any) => ({\n        ...item,\n        label: item?.name,\n        value: item?.value,\n      }));\n      form.query(\"dataSource\").take((field: any) => {\n        field.setComponentProps({\n          options: dataListRef.current,\n        });\n      });\n    }, [scope]);\n\n    return React.createElement(SchemaFieldComponent, {\n      schema: formilySchemaFormatter(eoButtonSchema as any),\n      scope,\n    });\n  };\n}\n\ncustomEditors.define(\"eo-descriptions\", EoButtonComponentFactory);\n"],"names":["eoButtonSchema","name","type","component","props","layout","children","decorator","text","title","placeholder","allowClear","tooltip","size","defaultValue","enum","label","value","optionType","customEditors","define","React","SchemaFieldComponent","formilySchemaFormatter","scope","form","effects","dataListRef","useRef","useEffect","onSubmit","addEffects","omit","dataList","current","map","item","query","take","field","setComponentProps","options","createElement","schema"],"sourceRoot":""}