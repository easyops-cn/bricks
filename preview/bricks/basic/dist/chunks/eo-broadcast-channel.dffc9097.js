"use strict";(globalThis.webpackChunk_next_bricks_basic=globalThis.webpackChunk_next_bricks_basic||[]).push([[3871,2052],{6384:(e,t,n)=>{n.r(t),n.d(t,{BroadcastChannelComponent:()=>x,EoBroadcastChannel:()=>B,LegacyBroadcastChannelComponent:()=>D});var r,o=n(4635),a=n(918),i=n(6902),c=n(5536),s=n(6121),u=n(829),l=n(2740),f=n(8769),d=n.n(f),h=n(300),v=n(4295),p=n(6333),m=n(797);let g,b,y,A,w,E,k,j;const{defineElement:S,property:C,method:M,event:T}=(0,h.createDecorators)(),x=(0,f.forwardRef)(D);let B;var O=new WeakMap,P=new WeakMap,R=new WeakSet,_=new WeakMap,W=new WeakMap;class z extends v.ReactNextElement{constructor(){super(...arguments),(0,o.A)(this,R),(0,a.A)(this,O,(g(this),y(this))),(0,a.A)(this,P,(A(this),w(this))),(0,a.A)(this,_,(j(this),e=>{(0,c.A)(R,this,E).emit(e)})),(0,a.A)(this,W,(0,f.createRef)())}get channel(){return(0,u.A)(O,this)}set channel(e){(0,s.A)(O,this,e)}postMessage(e){var t;null===(t=(0,u.A)(W,this).current)||void 0===t||t.postMessage(e)}render(){return d().createElement(x,{ref:(0,u.A)(W,this),channel:this.channel,onMessage:(0,u.A)(_,this)})}}function D(e,t){let{channel:n,onMessage:r}=e;const o=(0,f.useRef)(),a=(0,f.useRef)();return(0,f.useImperativeHandle)(t,(()=>({postMessage(e){var t;return null===(t=o.current)||void 0===t?void 0:t.postMessage(e)}}))),(0,f.useEffect)((()=>{const e=e=>{r(window.BroadcastChannel?e.data:e)};return(async t=>{a.current=await(0,p.k)(),o.current=n?new a.current(n):void 0,null===(t=o.current)||void 0===t||t.addEventListener("message",e)})(),()=>{var t,n;null===(t=o.current)||void 0===t||t.close(),null===(n=o.current)||void 0===n||n.removeEventListener("message",e)}}),[n,r]),null}r=z,({e:[y,A,w,E,k,j,g],c:[B,b]}=(0,l.A)(r,[S("eo-broadcast-channel",{styleTexts:[m.A]})],[[C(),1,"channel"],[T({type:"message"}),1,"messageEvent",e=>(0,u.A)(P,e),(e,t)=>(0,s.A)(P,e,t)],[M(),2,"postMessage"]],0,(e=>W.has((0,i.A)(e))),v.ReactNextElement)),b()},6333:(e,t,n)=>{async function r(){return window.BroadcastChannel?window.BroadcastChannel:(await n.e(747).then(n.bind(n,747))).BroadcastChannel}n.d(t,{k:()=>r})},797:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(6758),o=n.n(r),a=n(935),i=n.n(a)()(o());i.push([e.id,":host{display:none}",""]);const c=i.toString()},935:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(i[s]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);r&&i[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},6758:e=>{e.exports=function(e){return e[1]}},2740:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(7545),o=n(6902);function a(e,t,n){"symbol"==(0,r.A)(t)&&(t=(t=t.description)?"["+t+"]":"");try{Object.defineProperty(e,"name",{configurable:!0,value:n?n+" "+t:t})}catch(e){}return e}var i=n(1369);function c(e,t,n,c,s,u){var l,f,d,h,v,p,m,g=Symbol.metadata||Symbol.for("Symbol.metadata"),b=Object.defineProperty,y=Object.create,A=[y(null),y(null)],w=t.length;function E(t,n,r){return function(o,a){n&&(a=o,o=e);for(var i=0;i<t.length;i++)a=t[i].apply(o,r?[a]:[]);return r?a:o}}function k(e,t,n,r){if("function"!=typeof e&&(r||void 0!==e))throw new TypeError(t+" must "+(n||"be")+" a function"+(r?"":" or undefined"));return e}function j(e,t,n,o,i,c,s,u,d,h,v){function p(e){if(!v(e))throw new TypeError("Attempted to access private element on non-instance")}var m=[].concat(t[0]),g=t[3],y=!s,w=1===i,j=3===i,S=4===i,C=2===i;function M(t,n,r){return function(o,a){return n&&(a=o,o=e),r&&r(o),T[t].call(o,a)}}if(!y){var T={},x=[],B=j?"get":S||w?"set":"value";if(d?(h||w?T={get:a((function(){return g(this)}),o,"get"),set:function(e){t[4](this,e)}}:T[B]=g,h||a(T[B],o,C?"":B)):h||(T=Object.getOwnPropertyDescriptor(e,o)),!h&&!d){if((f=A[+u][o])&&7!=(f^i))throw Error("Decorating two elements with the same name ("+T[B].name+") is not supported yet");A[+u][o]=i<3?1:i}}for(var O=e,P=m.length-1;P>=0;P-=n?2:1){var R=k(m[P],"A decorator","be",!0),_=n?m[P-1]:void 0,W={},z={kind:["field","accessor","method","getter","setter","class"][i],name:o,metadata:l,addInitializer:function(e,t){if(e.v)throw Error("attempted to call addInitializer after decoration was finished");k(t,"An initializer","be",!0),c.push(t)}.bind(null,W)};if(y)f=R.call(_,O,z),W.v=1,k(f,"class decorators","return")&&(O=f);else if(z.static=u,z.private=d,f=z.access={has:d?v.bind():function(e){return o in e}},S||(f.get=d?C?function(e){return p(e),T.value}:M("get",0,p):function(e){return e[o]}),C||j||(f.set=d?M("set",0,p):function(e,t){e[o]=t}),O=R.call(_,w?{get:T.get,set:T.set}:T[B],z),W.v=1,w){if("object"==(0,r.A)(O)&&O)(f=k(O.get,"accessor.get"))&&(T.get=f),(f=k(O.set,"accessor.set"))&&(T.set=f),(f=k(O.init,"accessor.init"))&&x.unshift(f);else if(void 0!==O)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else k(O,(h?"field":"method")+" decorators","return")&&(h?x.unshift(O):T[B]=O)}return i<2&&s.push(E(x,u,1),E(c,u,0)),h||y||(d?w?s.splice(-1,0,M("get",u),M("set",u)):s.push(C?T[B]:k.call.bind(T[B])):b(e,o,T)),O}function S(e){return b(e,g,{configurable:!0,enumerable:!0,value:l})}return void 0!==u&&(l=u[g]),l=y(null==l?null:l),v=[],p=function(e){e&&v.push(E(e))},m=function(t,r){for(var a=0;a<n.length;a++){var c=n[a],u=c[1],l=7&u;if((8&u)==t&&!l==r){var f=c[2],p=!!c[3],m=16&u;j(t?e:e.prototype,c,m,p?"#"+f:(0,i.A)(f),l,l<2?[]:t?h=h||[]:d=d||[],v,!!t,p,r,t&&p?function(t){return(0,o.A)(t)===e}:s)}}},m(8,0),m(0,0),m(8,1),m(0,1),p(d),p(h),f=v,w||S(e),{e:f,get c(){var n=[];return w&&[S(e=j(e,[t],c,e.name,5,n)),E(n,1)]}}}},2559:(e,t,n)=>{function r(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}n.d(t,{A:()=>r})},6902:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(7545);function o(e){if(Object(e)!==e)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==e?(0,r.A)(e):"null"));return e}},2016:(e,t,n)=>{function r(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}n.d(t,{A:()=>r})},829:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(2559);function o(e,t){return e.get((0,r.A)(e,t))}},918:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(2016);function o(e,t,n){(0,r.A)(e,t),t.set(e,n)}},6121:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(2559);function o(e,t,n){return e.set((0,r.A)(e,t),n),n}},5536:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(2559);function o(e,t,n){return n((0,r.A)(e,t))}},4635:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(2016);function o(e,t){(0,r.A)(e,t),t.add(e)}},1369:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(7545);function o(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=(0,r.A)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,r.A)(t)?t:t+""}},7545:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})}}]);
//# sourceMappingURL=eo-broadcast-channel.dffc9097.js.map