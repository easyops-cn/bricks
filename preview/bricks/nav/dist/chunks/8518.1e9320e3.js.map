{"version":3,"file":"chunks/8518.1e9320e3.js","mappings":"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","sources":["webpack:///./src/nav-menu/ThreeLevelMenuPopoverContent.tsx","webpack:///./src/nav-menu/i18n.ts","webpack:///./src/nav-menu/site-map/constants.ts","webpack:///./src/nav-menu/site-map/CollectService.ts","webpack:///./src/nav-menu/site-map/ItemTag.tsx","webpack:///./src/nav-menu/site-map/processor.ts","webpack:///./src/nav-menu/site-map/GroupItem.tsx","webpack:///./src/nav-menu/site-map/SiteMapItem.tsx","webpack:///./src/nav-menu/utils.tsx","webpack:///./src/nav-menu/host-context.css","webpack:///./src/nav-menu/nav-menu.shadow.css","webpack:///./src/nav-menu/site-map/GroupItem.shadow.css","webpack:///./src/nav-menu/site-map/ItemTag.shadow.css","webpack:///./src/nav-menu/site-map/SiteMapItem.shadow.css","webpack:///./src/nav-menu/host-context.css?ac7e","webpack:///../../src/menu.ts"],"sourcesContent":["import React, { useMemo, useState, useRef } from \"react\";\nimport classnames from \"classnames\";\nimport { renderLinkCom } from \"./utils.js\";\nimport { uniq } from \"lodash\";\nimport type {\n  SidebarMenuGroup,\n  SidebarMenuItem,\n  SidebarMenuSimpleItem,\n} from \"@next-shared/general/types\";\nimport { wrapBrick } from \"@next-core/react-element\";\nimport type { ReactNextElement } from \"@next-core/react-element\";\nimport type { Popover, PopoverProps } from \"@next-bricks/basic/popover\";\nimport type {\n  GeneralIcon,\n  GeneralIconProps,\n} from \"@next-bricks/icons/general-icon\";\nimport { JsonStorage } from \"@next-shared/general/JsonStorage\";\nimport { K, NS, locales } from \"./i18n.js\";\nimport { useTranslation, initializeReactI18n } from \"@next-core/i18n/react\";\n\ninitializeReactI18n(NS, locales);\nconst WrappedPopover = wrapBrick<Popover, PopoverProps>(\"eo-popover\");\ninterface SearchProps {\n  value?: string;\n  placeholder?: string;\n  autoFocus?: boolean;\n  clearable?: boolean;\n  trim?: boolean;\n  debounceTime?: number;\n}\n\ninterface SearchEvents {\n  change: CustomEvent<string>;\n  search: CustomEvent<string>;\n}\n\ninterface SearchEventsMap {\n  onChange: \"change\";\n  onSearch: \"search\";\n}\nconst WrappedSearch = wrapBrick<\n  ReactNextElement,\n  SearchProps,\n  SearchEvents,\n  SearchEventsMap\n>(\"eo-search\", {\n  onChange: \"change\",\n  onSearch: \"search\",\n});\n\nconst WrappedIcon = wrapBrick<GeneralIcon, GeneralIconProps>(\"eo-icon\");\n\ninterface ThreeLevelMenuPopoverContentProps {\n  menuItem: SidebarMenuGroup;\n  selectedKey: string[];\n}\nconst LOCAL_STORAGE_PREFIX = \"threeLevelCategoryMenu\";\nconst maxVisitorLength = 6;\nexport function ThreeLevelMenuPopoverContent(\n  props: ThreeLevelMenuPopoverContentProps\n): React.ReactElement {\n  const { t } = useTranslation(NS);\n  const { menuItem, selectedKey } = props;\n  const items = menuItem.items as SidebarMenuGroup[];\n  const [searchResult, setSearchResult] = useState<SidebarMenuSimpleItem[]>([]);\n  const [searchKey, setSearchKey] = useState(\"\");\n  const triggerRef = useRef<HTMLDivElement>(null);\n  const nameSpace = `${LOCAL_STORAGE_PREFIX}_${menuItem.title}`;\n  const storage = useMemo(() => new JsonStorage(localStorage), []);\n  const searchHistory = (storage.getItem(nameSpace) as string[]) || [];\n\n  const handleSearch = (e: CustomEvent<string>) => {\n    setSearchKey(e.detail);\n    if (e.detail) {\n      const list = uniq([e.detail, ...searchHistory]);\n      if (list.length > maxVisitorLength) {\n        list.pop();\n      }\n      storage.setItem(nameSpace, list);\n      setSearchResult(\n        items\n          .flatMap((i) => (i.items as SidebarMenuSimpleItem[]) || [])\n          .filter((i) =>\n            (i.text as string)\n              .toLowerCase()\n              .includes((e.detail as string).trim().toLowerCase())\n          )\n      );\n    } else {\n      setSearchResult([]);\n    }\n  };\n\n  const popoverTriggerClick = () => {\n    triggerRef.current?.click();\n  };\n\n  return (\n    <div className={\"three-level-menu-container\"}>\n      <div\n        className=\"three-level-menu-search-container\"\n        onClick={(e) => {\n          e.stopPropagation();\n        }}\n      >\n        <WrappedSearch\n          placeholder={t(K.SEARCH_BY_MENU_NAME) as string}\n          onSearch={handleSearch}\n          onFocus={popoverTriggerClick}\n          onBlur={popoverTriggerClick}\n        />\n        <WrappedPopover\n          trigger=\"click\"\n          placement={\"bottom-start\"}\n          anchorDisplay=\"block\"\n          distance={0}\n        >\n          <div slot=\"anchor\" ref={triggerRef}></div>\n          {\n            <div className=\"three-level-menu-search-result\">\n              {!!searchResult.length &&\n                searchResult.map((i) => renderLinkCom(i, { width: \"100%\" }))}\n              {searchKey && !searchResult.length && (\n                <div\n                  style={{\n                    height: \"100px\",\n                    textAlign: \"center\",\n                    lineHeight: \"100px\",\n                  }}\n                >\n                  {t(K.NO_DATA)}\n                </div>\n              )}\n            </div>\n          }\n        </WrappedPopover>\n      </div>\n      {!!searchHistory.length && (\n        <div className=\"three-level-menu-search-history-container\">\n          <div className=\"three-level-menu-search-history-title\">\n            {t(K.SEARCH_HISTORY)}\n            <WrappedIcon\n              lib=\"antd\"\n              theme=\"outlined\"\n              icon=\"delete\"\n              className=\"three-level-menu-search-history-icon\"\n            />\n          </div>\n          <div>\n            {searchHistory.map((h) => (\n              <span key={h} className=\"three-level-menu-search-history-text\">\n                {h}\n              </span>\n            ))}\n          </div>\n        </div>\n      )}\n      <div\n        className={\"three-level-menu-item-container\"}\n        style={{\n          gridTemplateColumns: `repeat(${\n            items.length > 4 ? 4 : items.length\n          },1fr)`,\n        }}\n      >\n        {items.map((item: SidebarMenuGroup, index: number) => (\n          <div key={index}>\n            <div className=\"three-level-menu-item-title-container\">\n              <span className=\"three-level-menu-item-title-icon\"></span>\n              <span className=\"three-level-menu-item-title\">{item.title}</span>\n            </div>\n            {item.items?.map((i) => (\n              <span\n                key={i.key}\n                className={classnames({\n                  active: i.key ? selectedKey.includes(i.key) : false,\n                })}\n              >\n                {renderLinkCom(i as SidebarMenuSimpleItem, { width: \"100%\" })}\n              </span>\n            ))}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","export enum K {\n  SEARCH_BY_MENU_NAME = \"SEARCH_BY_MENU_NAME\",\n  SEARCH_HISTORY = \"SEARCH_HISTORY\",\n  NO_DATA = \"NO_DATA\",\n  QUICK_ACCESS = \"QUICK_ACCESS\",\n  REMOVE_ITEM_FROM_QUICK_ACCESS = \"REMOVE_ITEM_FROM_QUICK_ACCESS\",\n  ADD_ITEM_TO_QUICK_ACCESS = \"ADD_ITEM_TO_QUICK_ACCESS\",\n  NO_DATA_TIPS_IN_QUICK_ACCESS = \"NO_DATA_TIPS_IN_QUICK_ACCESS\",\n  SITE_MAP_SEARCH_RECOMMEND = \"SITE_MAP_SEARCH_RECOMMEND\",\n  MAX_COLLECT_COUNT_TIPS = \"MAX_COLLECT_COUNT_TIPS\",\n  NO_DATA_SEARCH_INFO = \"NO_DATA_SEARCH_INFO\",\n  SEARCH_ITEM_PLACEHOLDER = \"SEARCH_ITEM_PLACEHOLDER\",\n}\n\nconst en: Locale = {\n  SEARCH_BY_MENU_NAME: \"Search by menu name\",\n  SEARCH_HISTORY: \"Search history\",\n  NO_DATA: \"No data\",\n  QUICK_ACCESS: \"Quick Access\",\n  REMOVE_ITEM_FROM_QUICK_ACCESS: \"Remove from Quick Access\",\n  ADD_ITEM_TO_QUICK_ACCESS: \"Add to Quick Access\",\n  NO_DATA_TIPS_IN_QUICK_ACCESS:\n    \"No quick access resources have been added yet. Please add from the list below or after searching\",\n  SITE_MAP_SEARCH_RECOMMEND: \"Search recommend\",\n  MAX_COLLECT_COUNT_TIPS: \"Need to delete some favorites in order to add\",\n  NO_DATA_SEARCH_INFO: \"The search result is empty, please enter again\",\n  SEARCH_ITEM_PLACEHOLDER: \"Please enter keywords to search\",\n};\n\nconst zh: Locale = {\n  SEARCH_BY_MENU_NAME: \"通过菜单名称搜索\",\n  SEARCH_HISTORY: \"历史搜索\",\n  NO_DATA: \"暂无数据\",\n  QUICK_ACCESS: \"快捷访问\",\n  REMOVE_ITEM_FROM_QUICK_ACCESS: \"从快捷访问移除\",\n  ADD_ITEM_TO_QUICK_ACCESS: \"添加至快捷访问\",\n  NO_DATA_TIPS_IN_QUICK_ACCESS: \"暂未添加快捷访问资源，从下方列表或搜索后添加\",\n  SITE_MAP_SEARCH_RECOMMEND: \"搜索推荐\",\n  MAX_COLLECT_COUNT_TIPS: \"需删除部分收藏，才能添加\",\n  NO_DATA_SEARCH_INFO: \"搜索结果为空，请重新输入\",\n  SEARCH_ITEM_PLACEHOLDER: \"请输入关键词搜索\",\n};\n\nexport const NS = \"bricks/nav/nav-menu\";\n\nexport const locales = { en, zh };\n\ntype Locale = { [key in K]: string };\n","import React from \"react\";\n\nexport enum DRAG_DIRECTION {\n  Left = \"left\",\n  Right = \"right\",\n}\n\nexport interface ContextOfDragProps {\n  groupId: string;\n  direction?: DRAG_DIRECTION;\n  overElement?: HTMLElement;\n  allowDrag?: boolean;\n  onAllowDrag?: (enable: boolean) => void;\n  onDragStart?: (e: React.DragEvent) => void;\n  onDragOver?: (e: React.DragEvent) => void;\n  onDragEnd?: (e: React.DragEvent) => void;\n  onFavoriteUpdate?: (list: any[]) => void;\n}\n\nexport const collectModule = \"sidebarMenuCollect\";\n\nexport const DragContext = React.createContext<ContextOfDragProps>(\n  {} as ContextOfDragProps\n);\n","import type { SidebarMenuSimpleItem } from \"@next-shared/general/types\";\nimport {\n  MyCollectionApi_listMyCollection,\n  MyCollectionApi_ListMyCollectionResponseBody,\n  MyCollectionApi_upsertMyCollection,\n} from \"@next-api-sdk/user-service-sdk\";\nimport { DRAG_DIRECTION, collectModule } from \"./constants.js\";\nimport { cloneDeep } from \"lodash\";\nimport { handleHttpError } from \"@next-core/runtime\";\n\nexport class CollectService {\n  private maxCollectLength: number;\n  private collectMap: Map<string, SidebarMenuSimpleItem[]> = new Map();\n  private collectPromise: Map<string, Promise<SidebarMenuSimpleItem[]>> =\n    new Map();\n\n  constructor(maxCollectLength?: number) {\n    this.maxCollectLength = maxCollectLength ?? 10;\n  }\n\n  public getFavoritesById(id: string): SidebarMenuSimpleItem[] {\n    return cloneDeep(this.collectMap.get(id)) ?? [];\n  }\n\n  public async fetchFavorites(id: string): Promise<SidebarMenuSimpleItem[]> {\n    const cachedPromise = this.collectPromise.get(id);\n    if (cachedPromise) {\n      const collectList = this.collectMap.get(id);\n\n      return collectList ? collectList : cachedPromise;\n    }\n\n    const favoritesPromise = MyCollectionApi_listMyCollection({\n      module: collectModule,\n      collectionName: id,\n    }).then((result) => {\n      const list = result.payloads\n        ?.map((item) => item.extInfo)\n        .filter(Boolean) as SidebarMenuSimpleItem[];\n      this.collectMap.set(id, list);\n\n      return list;\n    }) as Promise<SidebarMenuSimpleItem[]>;\n\n    this.collectPromise.set(id, favoritesPromise);\n\n    return favoritesPromise;\n  }\n\n  public setItemAsFavorite(id: string, item: SidebarMenuSimpleItem): void {\n    const list = this.getFavoritesById(id);\n\n    if (list.length >= this.maxCollectLength) {\n      list.pop();\n    }\n\n    list.unshift(item);\n    this.updateFavoriteItems(id, list);\n  }\n\n  public updateFavoriteItems(id: string, list: SidebarMenuSimpleItem[]): void {\n    try {\n      this.collectMap.set(id, list);\n      MyCollectionApi_upsertMyCollection({\n        module: collectModule,\n        collectionName: id,\n        payloads: list?.map((item) => ({\n          name: item.text,\n          url: item.to,\n          extInfo: item,\n        })) as MyCollectionApi_ListMyCollectionResponseBody[\"payloads\"],\n      });\n    } catch (error) {\n      // istanbul ignore next\n      handleHttpError(error);\n    }\n  }\n\n  private equalItem(\n    prevItem: SidebarMenuSimpleItem,\n    item: SidebarMenuSimpleItem\n  ): boolean {\n    return prevItem.text === item.text && prevItem.to === item.to;\n  }\n\n  public removeItemFromFavorite(id: string, item: SidebarMenuSimpleItem): void {\n    const list = this.getFavoritesById(id);\n    const index = list.findIndex((row) => this.equalItem(row, item));\n    // istanbul ignore else\n    if (index !== -1) {\n      list.splice(index, 1);\n      this.updateFavoriteItems(id, list);\n    }\n  }\n\n  public isCollected(id: string, item: SidebarMenuSimpleItem): boolean {\n    const list = this.getFavoritesById(id);\n    return list.some((row) => this.equalItem(row, item));\n  }\n\n  public toggleFavorite(id: string, item: SidebarMenuSimpleItem): void {\n    if (this.isCollected(id, item)) {\n      this.removeItemFromFavorite(id, item);\n    } else {\n      if (this.checkMaxCapacity(id)) return;\n      this.setItemAsFavorite(id, item);\n    }\n  }\n\n  public moveFavoriteTo(\n    id: string,\n    option: {\n      from: SidebarMenuSimpleItem;\n      to: SidebarMenuSimpleItem;\n      direction: DRAG_DIRECTION;\n    }\n  ): SidebarMenuSimpleItem[] {\n    const { from, to, direction } = option;\n\n    const list = this.getFavoritesById(id);\n    if (this.equalItem(from, to)) return list;\n\n    const fromIndex = list.findIndex((row) => this.equalItem(row, from));\n\n    // istanbul ignore else\n    if (fromIndex !== -1) {\n      list.splice(fromIndex, 1);\n\n      const toIndex = list.findIndex((row) => this.equalItem(row, to));\n\n      //  istanbul ignore else\n      if (toIndex !== -1) {\n        if (direction === DRAG_DIRECTION.Left) {\n          list.splice(toIndex, 0, from);\n        } else {\n          list.splice(toIndex + 1, 0, from);\n        }\n\n        this.updateFavoriteItems(id, list);\n      }\n    }\n\n    return list;\n  }\n\n  checkMaxCapacity(groupId: string): boolean {\n    return this.getFavoritesById(groupId).length >= this.maxCollectLength;\n  }\n}\n\nexport const collectService = new CollectService();\n","import React, {\n  useMemo,\n  useCallback,\n  useRef,\n  useState,\n  useEffect,\n  useContext,\n  DragEvent,\n} from \"react\";\nimport { wrapBrick } from \"@next-core/react-element\";\nimport { Link, LinkProps } from \"@next-bricks/basic/link\";\n\nimport { EoTooltip, ToolTipProps } from \"@next-bricks/basic/tooltip\";\nimport classNames from \"classnames\";\nimport { SidebarMenuSimpleItem } from \"@next-shared/general/types\";\nimport { K, NS, locales } from \"../i18n.js\";\nimport { collectService } from \"./CollectService.js\";\nimport { useTranslation, initializeReactI18n } from \"@next-core/i18n/react\";\nimport { DRAG_DIRECTION, DragContext } from \"./constants.js\";\n\nimport type {\n  GeneralIcon,\n  GeneralIconProps,\n} from \"@next-bricks/icons/general-icon\";\ninitializeReactI18n(NS, locales);\nconst WrappedLink = wrapBrick<Link, LinkProps>(\"eo-link\");\nconst WrappedIcon = wrapBrick<GeneralIcon, GeneralIconProps>(\"eo-icon\");\nconst WrappedTooltip = wrapBrick<EoTooltip, ToolTipProps>(\"eo-tooltip\");\n\ninterface CellItemProps {\n  data: SidebarMenuSimpleItem;\n  suffix?: React.ReactNode;\n  className?: string;\n}\n\nexport type OnFavoriteCallback = (collectList: SidebarMenuSimpleItem[]) => void;\n\ninterface PlaceholderCompProps {\n  data: SidebarMenuSimpleItem;\n  direction: DRAG_DIRECTION;\n  onDragOver?: (e: DragEvent) => void;\n}\nexport function PlaceholderDropComp({\n  data,\n  onDragOver,\n  direction,\n}: PlaceholderCompProps) {\n  const { groupId, onFavoriteUpdate } = useContext(DragContext);\n  const handleDrop = (e: DragEvent) => {\n    const formData = JSON.parse(e.dataTransfer.getData(\"application/json\"));\n\n    const newDataList = collectService.moveFavoriteTo(groupId, {\n      from: formData,\n      to: data,\n      direction,\n    });\n\n    onFavoriteUpdate?.(newDataList);\n  };\n\n  return (\n    <div\n      className=\"indicate-wrapper\"\n      data-direction={direction}\n      data-to={data.to}\n      onDragEnter={(e) =>\n        ((e.target as HTMLElement).style.background = \"var(--palette-blue-1)\")\n      }\n      onDragLeave={(e) =>\n        ((e.target as HTMLElement).style.background = \"transparent\")\n      }\n      data-text={data.text}\n      onDragOver={onDragOver}\n      onDrop={handleDrop}\n    />\n  );\n}\n\nexport function ItemTag(props: CellItemProps): React.ReactElement {\n  const { data, suffix, className } = props;\n\n  const {\n    allowDrag,\n    onDragStart,\n    overElement,\n    direction,\n    onDragEnd,\n    onDragOver,\n  } = useContext(DragContext);\n  const containerRef = useRef<any>(null);\n\n  const [isDragIng, setIsDragIng] = useState(false);\n\n  const isActive = useMemo(\n    () =>\n      overElement &&\n      overElement.dataset.to == data.to &&\n      overElement.dataset.text === overElement.dataset.text,\n    [overElement, data]\n  );\n\n  const handleDragStart = (e: React.DragEvent) => {\n    if (!allowDrag) {\n      e.preventDefault();\n    } else {\n      setIsDragIng(true);\n      e.dataTransfer?.setData(\"application/json\", JSON.stringify(data));\n      onDragStart?.(e);\n    }\n  };\n\n  const handleDragEnd = (e: React.DragEvent) => {\n    setIsDragIng(false);\n    onDragEnd?.(e);\n  };\n\n  const handleOver = (e: React.DragEvent) => {\n    e.dataTransfer.dropEffect = \"none\";\n    onDragOver?.(e);\n  };\n\n  return (\n    <>\n      {isActive && direction === DRAG_DIRECTION.Left && (\n        <PlaceholderDropComp\n          data={data}\n          onDragOver={onDragOver}\n          direction={DRAG_DIRECTION.Left}\n        />\n      )}\n      <WrappedLink\n        data-to={data.to}\n        data-text={data.text}\n        ref={containerRef}\n        draggable\n        onDragStart={handleDragStart}\n        onDragEnd={handleDragEnd}\n        onDragOver={handleOver}\n        className={classNames(\"tag-container\", className, {\n          \"is-drag\": isDragIng,\n        })}\n        url={data.to as string}\n        href={data.href}\n        target={data.target as LinkProps[\"target\"]}\n      >\n        <span className=\"tag-text ellipsis\" title={data.text}>\n          {data.text}\n        </span>\n        <span className=\"tag-suffix\" onClick={(e) => e.preventDefault()}>\n          {suffix}\n        </span>\n      </WrappedLink>\n\n      {isActive && direction === DRAG_DIRECTION.Right && (\n        <PlaceholderDropComp\n          data={data}\n          onDragOver={onDragOver}\n          direction={DRAG_DIRECTION.Right}\n        />\n      )}\n    </>\n  );\n}\n\ninterface QuickVisitTagProps extends CellItemProps {\n  groupId: string;\n  onFavorite?: OnFavoriteCallback;\n}\n\nexport function QuickVisitItem(props: QuickVisitTagProps): React.ReactElement {\n  const { t } = useTranslation(NS);\n  const { onAllowDrag } = useContext(DragContext);\n  const { data, onFavorite, groupId } = props;\n  const suffixRef = useRef<any>();\n  const iconRef = useRef<any>();\n\n  const handleRemove = useCallback(() => {\n    collectService.removeItemFromFavorite(groupId, data);\n    onFavorite?.(collectService.getFavoritesById(groupId));\n  }, [groupId, data, onFavorite]);\n\n  const handleMouseDown = () => {\n    onAllowDrag?.(true);\n  };\n\n  useEffect(() => {\n    const icon = iconRef.current;\n    icon.addEventListener(\"click\", handleRemove);\n\n    return () => {\n      icon.removeEventListener(\"click\", handleRemove);\n    };\n  }, [handleRemove]);\n\n  useEffect(() => {\n    const suffix = suffixRef.current;\n    const handleClick = (e: MouseEvent) => {\n      e.preventDefault();\n    };\n    suffix.addEventListener(\"click\", handleClick);\n\n    return () => {\n      suffix.removeEventListener(\"click\", handleClick);\n    };\n  }, []);\n\n  const suffixGroups = useMemo(\n    () => (\n      <div className=\"operation\" ref={suffixRef}>\n        <WrappedTooltip\n          content={t(K.REMOVE_ITEM_FROM_QUICK_ACCESS)!}\n          hoist\n          placement=\"bottom\"\n          className=\"close\"\n        >\n          <WrappedIcon lib=\"antd\" icon=\"close\" ref={iconRef} />\n        </WrappedTooltip>\n        <span className=\"drag-wrapper\" onMouseDown={handleMouseDown}>\n          :::\n        </span>\n      </div>\n    ),\n    [t, handleRemove]\n  );\n\n  return (\n    <ItemTag className=\"visit-container\" suffix={suffixGroups} data={data} />\n  );\n}\n\ninterface StarIconProps {\n  onFavorite?: OnFavoriteCallback;\n  className?: string;\n  groupId: string;\n  data: SidebarMenuSimpleItem;\n  active?: boolean;\n}\n\nexport function StarIcon({\n  onFavorite,\n  className,\n  groupId,\n  data,\n  active,\n}: StarIconProps): React.ReactElement {\n  const { t } = useTranslation(NS);\n  const iconRef = useRef<any>();\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n    collectService.toggleFavorite(groupId, data);\n    onFavorite?.(collectService.getFavoritesById(groupId));\n  };\n\n  useEffect(() => {\n    // workaround for prevent Link jump when click.\n    const icon = iconRef.current;\n    icon.addEventListener(\"click\", handleClick);\n\n    return () => {\n      icon.removeEventListener(\"click\", handleClick);\n    };\n  }, []);\n\n  return (\n    <WrappedTooltip\n      content={\n        active\n          ? t(K.REMOVE_ITEM_FROM_QUICK_ACCESS)!\n          : collectService.checkMaxCapacity(groupId)\n            ? t(K.MAX_COLLECT_COUNT_TIPS)!\n            : t(K.ADD_ITEM_TO_QUICK_ACCESS)!\n      }\n      className={classNames(\"star-icon\", className)}\n    >\n      <WrappedIcon\n        ref={iconRef}\n        className={classNames({ active })}\n        lib=\"antd\"\n        icon=\"star\"\n        {...(active ? { theme: \"filled\" } : {})}\n      />\n    </WrappedTooltip>\n  );\n}\n\ninterface RecommendItemProps extends CellItemProps {\n  active?: boolean;\n  groupId: string;\n  onFavorite?: OnFavoriteCallback;\n}\n\nexport function RecommendItem(props: RecommendItemProps): React.ReactElement {\n  const { data, className, groupId, onFavorite, active } = props;\n\n  const suffixGroups = useMemo(\n    () => (\n      <StarIcon\n        groupId={groupId}\n        active={active}\n        className=\"star\"\n        data={data}\n        onFavorite={onFavorite}\n      />\n    ),\n    [data, groupId, onFavorite, active]\n  );\n\n  return (\n    <ItemTag\n      className={classNames(\"recommend-container\", className)}\n      suffix={suffixGroups}\n      data={data}\n    />\n  );\n}\n","import {\n  SidebarMenuItem,\n  SidebarMenuGroup,\n  SidebarMenuSimpleItem,\n} from \"@next-shared/general/types\";\n\nfunction walkMenuItem(item: SidebarMenuItem, list: SidebarMenuSimpleItem[]) {\n  if (\n    (item as SidebarMenuGroup).type === \"group\" &&\n    Array.isArray((item as SidebarMenuGroup).items)\n  ) {\n    walkMenuItems((item as SidebarMenuGroup).items, list);\n  } else {\n    list.push(item as SidebarMenuSimpleItem);\n  }\n}\n\nfunction walkMenuItems(\n  items: SidebarMenuItem[],\n  list: SidebarMenuSimpleItem[]\n): void {\n  for (const item of items) {\n    walkMenuItem(item, list);\n  }\n}\n\nexport function flatMenuItems(item: SidebarMenuItem): SidebarMenuSimpleItem[] {\n  const list: SidebarMenuSimpleItem[] = [];\n\n  walkMenuItem(item, list);\n\n  return list;\n}\n\nexport function processGroupItems(groups: SidebarMenuGroup[]): Array<{\n  groupFrom: string;\n  groups: SidebarMenuGroup[];\n}> {\n  const groupCategoryMap = new Map<string, SidebarMenuGroup[]>();\n  const categoryOrder = new Set<string>();\n\n  groups?.forEach((item) => {\n    const from = item.groupFrom ?? \"default\";\n    categoryOrder.add(from);\n\n    const value = groupCategoryMap.get(from);\n\n    if (!value) {\n      groupCategoryMap.set(from, [item]);\n    } else {\n      value!.push(item);\n    }\n  });\n\n  return Array.from(categoryOrder).map((key) => ({\n    groupFrom: key,\n    groups: groupCategoryMap!.get(key)!,\n  }));\n}\n","import React, { useEffect, useState } from \"react\";\nimport type {\n  SidebarMenuSimpleItem,\n  SidebarMenuGroup,\n} from \"@next-shared/general/types\";\nimport { wrapBrick } from \"@next-core/react-element\";\nimport { StarIcon, OnFavoriteCallback } from \"./ItemTag.js\";\nimport { Link, LinkProps } from \"@next-bricks/basic/link\";\nimport { collectService } from \"./CollectService.js\";\nimport { processGroupItems } from \"./processor.js\";\nimport classNames from \"classnames\";\n\nconst WrappedLink = wrapBrick<Link, LinkProps>(\"eo-link\");\n\ninterface GroupViewProps {\n  groups: SidebarMenuGroup[];\n  groupId: string;\n  selectedKey?: string[];\n  onFavorite: OnFavoriteCallback;\n}\n\nexport const itemColumnWidth = 240;\n\nexport function GroupView(props: GroupViewProps): React.ReactElement {\n  const { groupId, selectedKey, onFavorite } = props;\n  const groupMenus = processGroupItems(props.groups);\n\n  return (\n    <div className=\"group-view\">\n      {groupMenus.map((item, index) => {\n        return (\n          <div key={index}>\n            {index !== 0 && <div className=\"divider\" />}\n            {item.groupFrom === \"default\" ? (\n              <DefaultGroup\n                groupId={groupId}\n                selectedKey={selectedKey}\n                groups={item.groups}\n                onFavorite={onFavorite}\n              />\n            ) : (\n              <CustomGroup\n                groupId={groupId}\n                selectedKey={selectedKey}\n                groups={item.groups}\n                onFavorite={onFavorite}\n              />\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\ninterface BaseGroupProps {\n  groupId: string;\n  selectedKey?: string[];\n  onFavorite: OnFavoriteCallback;\n  groups: SidebarMenuGroup[];\n}\nexport function DefaultGroup(props: BaseGroupProps): React.ReactElement {\n  const { groupId, onFavorite, selectedKey, groups } = props;\n\n  const groupRef = React.useRef<HTMLDivElement>(null);\n  const [columnCount, setColumnCount] = useState<number>();\n\n  useEffect(() => {\n    // istanbul ignore next\n    const resizeObserver = new ResizeObserver((entries) => {\n      for (const entry of entries) {\n        if (entry.target === groupRef.current) {\n          const width = entry.contentRect.width;\n\n          if (width) {\n            setColumnCount(Math.floor(width / itemColumnWidth));\n          }\n        }\n      }\n    });\n\n    resizeObserver.observe(groupRef.current as HTMLDivElement);\n\n    return () => resizeObserver.disconnect();\n  }, []);\n\n  return (\n    <div\n      className=\"group\"\n      ref={groupRef}\n      style={\n        (columnCount as number) < groups?.length\n          ? { columnCount, columnWidth: itemColumnWidth }\n          : {\n              display: \"grid\",\n              gridTemplateColumns: `repeat(auto-fit, ${itemColumnWidth}px)`,\n            }\n      }\n    >\n      {groups.map((group) => (\n        <div key={group.key} className=\"group-item\">\n          <div className=\"title\">{group.title}</div>\n          <div className=\"content\">\n            {group.items.map((item) => (\n              <GroupItem\n                key={item.key}\n                groupId={groupId}\n                selectedKey={selectedKey}\n                data={item as SidebarMenuSimpleItem}\n                onFavorite={onFavorite}\n              />\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport function CustomGroup(props: BaseGroupProps): React.ReactElement {\n  const { groupId, onFavorite, selectedKey, groups } = props;\n\n  return (\n    <div className=\"custom-group\">\n      {groups.map((group) => (\n        <div key={group.key}>\n          <div className=\"title\">{group.title}</div>\n          <div\n            className=\"custom-content\"\n            style={{\n              display: \"grid\",\n              gridTemplateColumns: `repeat(auto-fit, ${itemColumnWidth}px)`,\n            }}\n          >\n            {group.items.map((item) => (\n              <GroupItem\n                key={item.key}\n                selectedKey={selectedKey}\n                groupId={groupId}\n                data={item as SidebarMenuSimpleItem}\n                onFavorite={onFavorite}\n              />\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\ninterface GroupItemProps {\n  data: SidebarMenuSimpleItem;\n  selectedKey?: string[];\n  groupId: string;\n  onFavorite: OnFavoriteCallback;\n}\nexport function GroupItem(props: GroupItemProps): React.ReactElement {\n  const { data, groupId, onFavorite, selectedKey } = props;\n\n  return (\n    <WrappedLink\n      key={data.key}\n      icon={data.icon}\n      url={data.to as string}\n      href={data.href}\n      target={data.target as LinkProps[\"target\"]}\n      className={classNames(\"item-link\", {\n        active: selectedKey?.includes(data.key as string),\n      })}\n    >\n      <span className=\"ellipsis\" title={data.text}>\n        {data.text}\n      </span>\n      <span className=\"icon-wrapper\">\n        <StarIcon\n          active={collectService.isCollected(groupId, data)}\n          groupId={groupId}\n          data={data}\n          onFavorite={onFavorite}\n        />\n      </span>\n    </WrappedLink>\n  );\n}\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport type {\n  SidebarMenuGroup,\n  SidebarMenuSimpleItem,\n} from \"@next-shared/general/types\";\nimport { wrapBrick } from \"@next-core/react-element\";\nimport { QuickVisitItem, RecommendItem } from \"./ItemTag.js\";\nimport { GroupView } from \"./GroupItem.js\";\nimport type {\n  GeneralIcon,\n  GeneralIconProps,\n} from \"@next-bricks/icons/general-icon\";\nimport { K, NS } from \"../i18n.js\";\nimport { DragContext } from \"./constants.js\";\nimport { useTranslation } from \"@next-core/i18n/react\";\nimport { collectService } from \"./CollectService.js\";\nimport { flatMenuItems } from \"./processor.js\";\nimport { DRAG_DIRECTION } from \"./constants.js\";\nimport classNames from \"classnames\";\nimport { throttle, debounce } from \"lodash\";\n\nconst WrappedIcon = wrapBrick<GeneralIcon, GeneralIconProps>(\"eo-icon\");\n\nexport interface InputEvents {\n  change: CustomEvent<string>;\n}\n\nexport interface InputEventsMap {\n  onValueChange: \"change\";\n}\n\nconst WrappedInput = wrapBrick<any, any, InputEvents, InputEventsMap>(\n  \"eo-input\",\n  {\n    onValueChange: \"change\",\n  }\n);\n\ninterface SiteMapItemProps {\n  menuGroup: SidebarMenuGroup;\n  selectedKey?: string[];\n  visible?: boolean;\n}\n\nexport function findDropElement(element: HTMLElement): HTMLElement | undefined {\n  let node = element;\n\n  while (node) {\n    if (node.draggable || node.className === \"indicate-wrapper\") {\n      return node;\n    }\n\n    node = node.parentElement as HTMLElement;\n  }\n}\n\nexport function isValidDragAction(\n  dragElement: HTMLElement,\n  dropElement: HTMLElement\n): boolean {\n  return (\n    dragElement &&\n    dropElement &&\n    !(\n      dragElement.dataset.to === dropElement.dataset.to &&\n      dragElement.dataset.text === dropElement.dataset.text\n    )\n  );\n}\n\nexport function SiteMapItem(props: SiteMapItemProps) {\n  const { t } = useTranslation(NS);\n  const { menuGroup, selectedKey, visible } = props;\n  const groupId = menuGroup.groupId as string;\n\n  const [favoriteList, setFavoriteList] = useState<SidebarMenuSimpleItem[]>([]);\n  const flatItems = useMemo(() => flatMenuItems(menuGroup), [menuGroup]);\n  const [q, setQ] = useState<string>();\n  const [filter, setFilters] = useState<SidebarMenuSimpleItem[]>([]);\n  const [dragElement, setDragElement] = useState<HTMLElement>();\n  const [overElement, setOverElement] = useState<HTMLElement>();\n  const [allowDrag, setAllowDrag] = useState<boolean>();\n  const [direction, setDirection] = useState<DRAG_DIRECTION>();\n  const [initialized, setInitialized] = useState(false);\n\n  useEffect(() => {\n    if (visible && !initialized) {\n      setInitialized(true);\n    }\n  }, [visible, initialized]);\n\n  const handleFavorite = (collectList: SidebarMenuSimpleItem[]) => {\n    setFavoriteList(collectList);\n  };\n\n  const handleSearch = useCallback(\n    (e: CustomEvent<string>): void => {\n      const v = e.detail;\n      setQ(e.detail);\n\n      setFilters(\n        !v\n          ? flatItems\n          : flatItems.filter((item) =>\n              item.text.toLowerCase().includes(e.detail.toLowerCase())\n            )\n      );\n    },\n    [flatItems]\n  );\n\n  const debouncedHandleSearch = useMemo(\n    () => debounce(handleSearch, 200),\n    [handleSearch]\n  );\n\n  const handleDragStart = (e: React.DragEvent): void => {\n    setDragElement(e.target as HTMLElement);\n  };\n\n  const handleDragOver = useMemo(\n    () =>\n      throttle((e: React.DragEvent): void => {\n        e.preventDefault();\n\n        const dropElement = findDropElement(e.target as HTMLElement);\n        setOverElement(dropElement);\n\n        if (\n          dropElement &&\n          isValidDragAction(dropElement, dragElement as HTMLElement)\n        ) {\n          if (dropElement.className === \"indicate-wrapper\") {\n            setDirection(dropElement.dataset.direction as DRAG_DIRECTION);\n          } else {\n            const { width, left } = dropElement.getBoundingClientRect();\n\n            const right = e.clientX > left + width / 2;\n            setDirection(right ? DRAG_DIRECTION.Right : DRAG_DIRECTION.Left);\n          }\n        } else {\n          setDirection(undefined);\n        }\n      }),\n    [dragElement]\n  );\n\n  const handleDragEnd = (): void => {\n    setDragElement(undefined);\n    setDirection(undefined);\n    setAllowDrag(false);\n  };\n\n  const handleAllowDrag = (enable: boolean): void => {\n    setAllowDrag(enable);\n  };\n\n  useEffect(() => {\n    (async () => {\n      if (visible) {\n        const list = await collectService.fetchFavorites(groupId);\n        setFavoriteList(list);\n      }\n    })();\n  }, [groupId, visible]);\n\n  return (\n    initialized && (\n      <div className=\"site-map\">\n        <div className=\"search-wrapper\">\n          <WrappedInput\n            className=\"search-input\"\n            style={{ width: \"100%\" }}\n            onValueChange={debouncedHandleSearch}\n            placeholder={t(K.SEARCH_ITEM_PLACEHOLDER)}\n          >\n            <WrappedIcon slot=\"prefix\" lib=\"antd\" icon=\"search\" />\n          </WrappedInput>\n        </div>\n\n        {!q && (\n          <div>\n            {favoriteList.length !== 0 && (\n              <div\n                className={classNames(\"visit-access\", {\n                  hasData: favoriteList.length,\n                })}\n              >\n                <span className=\"title\">{t(K.QUICK_ACCESS)}</span>\n                <DragContext.Provider\n                  value={{\n                    groupId,\n                    overElement,\n                    direction,\n                    allowDrag,\n                    onDragStart: handleDragStart,\n                    onDragOver: handleDragOver,\n                    onDragEnd: handleDragEnd,\n                    onAllowDrag: handleAllowDrag,\n                    onFavoriteUpdate: handleFavorite,\n                  }}\n                >\n                  <div className=\"tag-wrapper\">\n                    {favoriteList.map((item) => (\n                      <QuickVisitItem\n                        onFavorite={handleFavorite}\n                        groupId={groupId}\n                        key={item.key}\n                        data={item}\n                      />\n                    ))}\n                  </div>\n                </DragContext.Provider>\n              </div>\n            )}\n\n            <GroupView\n              groupId={groupId}\n              selectedKey={selectedKey}\n              groups={menuGroup.items as SidebarMenuGroup[]}\n              onFavorite={handleFavorite}\n            />\n          </div>\n        )}\n\n        {q && (\n          <div className=\"search-panel\">\n            <span className=\"title\">{t(K.SITE_MAP_SEARCH_RECOMMEND)}</span>\n            {filter.length ? (\n              <div className=\"recommend-wrapper\">\n                {filter.map((item) => (\n                  <RecommendItem\n                    key={item.key}\n                    groupId={groupId}\n                    data={item}\n                    onFavorite={handleFavorite}\n                    active={collectService.isCollected(groupId, item)}\n                  />\n                ))}\n              </div>\n            ) : (\n              <div className=\"no-data-tips\">{t(K.NO_DATA_SEARCH_INFO)}</div>\n            )}\n          </div>\n        )}\n      </div>\n    )\n  );\n}\n","import React from \"react\";\nimport { wrapBrick } from \"@next-core/react-element\";\nimport type {\n  SidebarMenuGroup,\n  SidebarMenuItem,\n  SidebarMenuSimpleItem,\n} from \"@next-shared/general/types\";\nimport type { Link, LinkProps } from \"@next-bricks/basic/link\";\nimport type {\n  GeneralIcon,\n  GeneralIconProps,\n} from \"@next-bricks/icons/general-icon\";\nconst WrappedIcon = wrapBrick<GeneralIcon, GeneralIconProps>(\"eo-icon\");\n\nconst WrappedLinkItem = wrapBrick<Link, LinkProps>(\"eo-link\");\n\nexport function isGroup(item: SidebarMenuItem): item is SidebarMenuGroup {\n  return item.type === \"group\";\n}\n\nexport function isSubMenu(\n  item: SidebarMenuGroup,\n  groupAsSubMenu?: boolean\n): item is SidebarMenuGroup {\n  return Boolean(\n    item.type === \"subMenu\" || (groupAsSubMenu && item.type === \"group\")\n  );\n}\n\nexport function isSimple(item: SidebarMenuItem): item is SidebarMenuSimpleItem {\n  return item.type === \"default\" || !item.type;\n}\n\nexport const renderLinkCom = (\n  item: SidebarMenuSimpleItem,\n  linkStyle?: React.CSSProperties,\n  labelStyle?: React.CSSProperties\n): React.ReactElement => {\n  return (\n    <WrappedLinkItem\n      type=\"plain\"\n      key={item.key}\n      url={item.to as string}\n      href={item.href}\n      target={item.target as LinkProps[\"target\"]}\n      style={linkStyle}\n    >\n      <span className=\"menu-item-label\" style={{ ...labelStyle }}>\n        {item.text}\n      </span>\n    </WrappedLinkItem>\n  );\n};\n\nexport const renderSpanCom = (\n  item: SidebarMenuGroup,\n  subMenu?: boolean,\n  style?: React.CSSProperties\n): React.ReactElement => {\n  return (\n    <span key={item.key} className=\"menu-item-label\" style={{ ...style }}>\n      {item.title}\n      {subMenu && <WrappedIcon lib=\"fa\" icon=\"angle-right\" />}\n    </span>\n  );\n};\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:root{--eo-three-level-menu-search-input-background:linear-gradient(90deg,#e8eef6 0%,rgba(233,234,243,0) 100%);--eo-three-level-menu-hover-color:#6bb3ff;--eo-three-level-menu-title-color:#0b5ad9;--eo-three-level-menu-active-color:#1a7aff;--eo-three-level-menu-search-tag-color:rgb(89,89,89);--eo-three-level-menu-search-tag-background:rgb(245,245,245)}html[data-theme=\"dark\"],\nhtml[data-theme=\"dark-v2\"]{--eo-three-level-menu-search-input-background:linear-gradient(124deg,rgba(255,255,255,0.36) 0%,rgba(255,255,255,0) 100%);--eo-three-level-menu-hover-color:rgba(54,95,175,0.85);--eo-three-level-menu-title-color:#6597e8;--eo-three-level-menu-active-color:#3f75dd;--eo-three-level-menu-search-tag-color:rgb(140,140,140);--eo-three-level-menu-search-tag-background:rgb(107,107,107)}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:host{display:inline-block;background:none}:host::part(menu-item),\neo-link{display:block}eo-menu-item{margin:4px 0}.sub-menu-wrapper eo-menu-item:first-child,\n.group-wrapper eo-menu-item:first-child{margin-top:0}.sub-menu-wrapper eo-menu-item:last-child{margin-bottom:0}.nav-menu-wrapper{display:flex;align-items:center;gap:8px;white-space:nowrap}.popover .sub-menu-item-label{padding:2px 0px;color:var(--color-normal-text)}.popover.subprime{display:block;width:100%}.sub-menu-wrapper{min-width:160px;max-height:calc(100vh - 100px);background-color:var(--antd-dropdown-menu-bg);padding:12px 0;border-radius:6px;box-shadow:0px 4px 12px 0px rgba(17,37,64,0.08);overflow-x:hidden;overflow-y:auto}.overflow-menu-wrapper{display:flex;flex-direction:column}.sub-menu-wrapper > eo-menu-item{display:block;width:100%}.sub-menu-wrapper > eo-menu-item .menu-item-label,\n.sub-menu-wrapper > eo-popover .menu-item-label,\n.sub-menu-wrapper > .group-wrapper > eo-popover .menu-item-label,\n.sub-menu-wrapper > .group-wrapper > eo-menu-item .menu-item-label{display:block;width:100%;padding:7px 24px;box-sizing:border-box;line-height:22px;color:var(--color-normal-text)}.sub-menu-wrapper > eo-popover.subprime .menu-item-label,\n.sub-menu-wrapper > .group-wrapper > eo-popover.subprime .menu-item-label{display:flex;justify-content:space-between;align-items:center}.sub-menu-wrapper .menu-item-label{border-radius:0}.menu-item-label{display:inline-block;cursor:pointer;border-radius:4px;padding:1px 8px;line-height:22px;color:var(--nav-menu-item-label-color)}.menu-item-label:hover{background-color:var(--top-menu-item-hover-bg)}.group-label{padding-left:16px;font-size:12px;color:var(--palette-gray-7);padding:8px 16px;line-height:20px;margin-top:4px}.sub-menu-wrapper .group-label:first-child{margin-top:0px}.sub-menu-wrapper eo-menu-item[active] .menu-item-label{background:var(--top-menu-item-selected-bg);color:var(--color-brand);font-weight:500}.three-level-menu-container{max-width:980px;max-height:510px;overflow:auto;min-width:160px}.three-level-menu-item-container{display:grid;gap:20px;margin-top:13px;padding:5px 10px}.three-level-menu-item-title-container{display:flex;align-items:center}.three-level-menu-item-title-icon{width:4px;height:4px;background-color:var(--eo-three-level-menu-title-color);margin-right:4px;transform:rotate(45deg)}.three-level-menu-item-title{font-size:14px;font-family:PingFang-SC-Medium,PingFang-SC;font-weight:500;color:var(--eo-three-level-menu-title-color)}.three-level-menu-container .menu-item-label{margin-top:4px;margin-left:4px;padding:4px;width:100%}.three-level-menu-container .active .menu-item-label{color:var(--eo-three-level-menu-active-color)}.three-level-menu-search-result .menu-item-label{margin:0px}.three-level-menu-container .menu-item-label:hover{color:var(--eo-three-level-menu-hover-color)}.three-level-menu-popover .sub-menu-wrapper{padding-top:0px}.three-level-menu-search-container{background:var(--eo-three-level-menu-search-input-background);padding:5px 10px}.three-level-menu-search-result{min-width:187px;max-width:328px;max-height:324px;background-color:var(--antd-dropdown-menu-bg);box-shadow:0px 4px 12px 0px rgba(17,37,64,0.08);overflow:scroll}.three-level-menu-search-history-container{padding:5px 10px}.three-level-menu-search-history-text{background:var(--eo-three-level-menu-search-tag-background);border-radius:2px;font-size:7px;line-height:11px;display:inline-block;height:11px;padding:4px;color:var(--eo-three-level-menu-search-tag-color);margin-right:8px}.three-level-menu-search-history-title{color:#8c8c8c;margin:10px 0;display:flex;align-items:center}.three-level-menu-search-history-icon{margin-left:5px}.sub-menu-sit-map-wrapper{box-sizing:border-box;width:calc(100vw);padding:0 60px 24px;max-height:520px;background-color:var(--antd-dropdown-menu-bg);border-radius:6px;box-shadow:0px 4px 12px 0px rgba(17,37,64,0.08);overflow-x:hidden;overflow-y:auto}.overflow-menu-item{position:absolute;opacity:0;height:0;pointer-events:none}.in-group-site-map{width:auto;padding:0 20px}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:is(.group,.custom-group) .item-link{font-weight:400}:is(:is(.group,.custom-group) .item-link):hover{background-color:var(--color-fill-bg-base-1)}:is(:is(.group,.custom-group) .item-link):hover::part(link){color:var(--color-brand-hover)}:is(:is(.group,.custom-group) .item-link):hover::part(icon){color:var(--color-brand-hover)}.active:is(:is(.group,.custom-group) .item-link)::part(link),.active:is(:is(.group,.custom-group) .item-link)::part(icon){color:var(--palette-blue-8)}:is(.group,.custom-group) .item-link::part(link){padding:8px 12px 8px 24px;display:flex;gap:4px;color:var(--color-header-text)}:is(.group,.custom-group) .item-link::part(icon){color:var(--color-normal-text)}:is(.group,.custom-group) .title{padding:8px 16px 8px 24px;font-size:16px;font-weight:500;position:relative}:is(:is(.group,.custom-group) .title)::before{content:\"\";position:absolute;width:6px;height:6px;top:17px;left:9px;transform:rotate(45deg);background:var(--color-secondary-text)}:is(:is(.group,.custom-group) .content,:is(.group,.custom-group) .custom-content) .icon-wrapper{color:var(--color-secondary-text);font-size:16px;display:none;margin-left:auto}:is(:is(:is(.group,.custom-group) .content,:is(.group,.custom-group) .custom-content) .item-link:hover) .icon-wrapper{display:block}:is(:is(:is(:is(.group,.custom-group) .content,:is(.group,.custom-group) .custom-content) .item-link:hover) .icon-wrapper):hover{color:var(--color-brand-hover)}:is(.group,.custom-group) .content{display:flex;flex-direction:column}:is(.group,.custom-group) .group-item{page-break-inside:avoid;break-inside:avoid}.group-view{min-height:300px}.group-view .divider{height:2px;background:var(--color-text-divider-line);margin:16px 0}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tag-container::part(link){display:flex;-webkit-user-select:none;user-select:none;-webkit-user-drag:none;-moz-user-select:none;justify-content:space-between;background-color:var(--color-fill-bg-base-1);border-radius:2px;padding:1px 6px}.tag-container .tag-text{color:var(--color-normal-text);font-weight:400}.tag-container:hover .tag-text{color:var(--color-brand-hover)}.tag-container .tag-suffix{display:inline-flex;font-size:12px;gap:4px;align-items:center;color:var(--color-secondary-text)}.tag-container.is-drag{opacity:0.4}.indicate-wrapper{border:1px dashed var(--color-brand-hover);border-radius:4px;height:20px;margin:2px 0}.close{display:inline-flex;margin-top:2px;padding:0 2px}.close:hover{color:var(--color-error)}.drag-wrapper{cursor:move}.drag-wrapper:hover{color:var(--color-brand-hover)}.star-icon{display:flex;alignitems:center;color:var(--color-secondary-text)}.star-icon:hover{color:var(--color-brand-hover)}.star-icon .active{color:var(--palette-yellow-6)}.recommend-container:hover .star{display:inline-flex}.recommend-container .star{font-size:13px;display:none}.visit-container:hover .operation{display:inline-flex;align-items:center}.visit-container .operation{display:none}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___.toString();\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.site-map .search-wrapper{position:sticky;top:0;z-index:9999;padding-top:24px;padding-bottom:16px;background:var(--antd-dropdown-menu-bg)}.site-map .search-input::part(affix-wrapper){border:none;border-bottom:1px solid var(--antd-input-border-color);border-radius:0px;background:transparent}:is(.site-map .visit-access,.site-map .search-panel) .title{display:inline-block;padding:2px 16px 2px 24px;font-weight:500;line-height:24px;position:relative}:is(:is(.site-map .visit-access,.site-map .search-panel) .title)::before{content:\"\";position:absolute;width:6px;height:6px;top:10px;left:9px;border-radius:50%;background:var(--color-secondary-text)}:is(.site-map .visit-access,.site-map .search-panel) .no-data-tips{display:flex;margin:16px 0 32px;align-items:center;justify-content:center;color:var(--color-secondary-text)}.hasData:is(.site-map .visit-access){display:flex}.site-map .visit-access{margin-bottom:8px}:is(.site-map .visit-access) .tag-wrapper{flex:1;display:grid;grid-template-columns:repeat(auto-fit,200px);gap:8px}.site-map .ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}:is(.site-map .search-panel) .recommend-wrapper{margin-top:16px;display:grid;grid-template-columns:repeat(auto-fit,200px);gap:8px}`, \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___.toString();\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./host-context.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].use[2]!./host-context.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Location, parsePath } from \"history\";\nimport { matchPath } from \"@next-core/runtime\";\nimport type {\n  SidebarMenuSimpleItem,\n  SidebarMenuItem,\n  SidebarMenuGroup,\n} from \"./types.js\";\nimport { isObject } from \"lodash\";\n\nexport function isGroup(item: SidebarMenuItem): item is SidebarMenuGroup {\n  return item.type === \"group\";\n}\n\nexport function isSubMenu(\n  item: SidebarMenuItem,\n  groupAsSubMenu?: boolean\n): item is SidebarMenuGroup {\n  return Boolean(\n    item.type === \"subMenu\" || (groupAsSubMenu && item.type === \"group\")\n  );\n}\n\nexport function initMenuItemAndMatchCurrentPathKeys(\n  menuItems: SidebarMenuItem[],\n  pathname: string,\n  search: string,\n  parentCursor: string\n): {\n  selectedKeys: string[];\n  openedKeys: string[];\n  matchedKeys: string[];\n} {\n  const selectedKeys: string[] = [];\n  const openedKeys: string[] = [];\n  const matchedKeys: string[] = [];\n\n  let cursor = 0;\n  menuItems &&\n    menuItems.forEach((item) => {\n      // key的格式最终为0,1,2,0.1,0.2,0.1.1,0.1.2\n      item.key =\n        parentCursor === \"\" ? `${cursor}` : `${parentCursor}.${cursor}`;\n      if (isGroup(item) || isSubMenu(item)) {\n        const tmp = initMenuItemAndMatchCurrentPathKeys(\n          item.items,\n          pathname,\n          search,\n          item.key\n        );\n        selectedKeys.push(...tmp.selectedKeys);\n        if (tmp.selectedKeys.length || item.defaultExpanded) {\n          openedKeys.push(item.key);\n        }\n        openedKeys.push(...tmp.openedKeys);\n        matchedKeys.push(...tmp.matchedKeys);\n      } else {\n        if (matchMenuItem(item, pathname, search)) {\n          selectedKeys.push(String(item.key));\n\n          const keyPath = item.key.split(\".\");\n\n          for (let i = 0; i < keyPath.length; i++) {\n            matchedKeys.push(keyPath.slice(0, i + 1).join(\".\"));\n          }\n        }\n      }\n      cursor += 1;\n    });\n  if (selectedKeys.length && parentCursor !== \"\") {\n    openedKeys.push(parentCursor);\n  }\n  return {\n    selectedKeys: selectedKeys,\n    openedKeys: openedKeys,\n    matchedKeys: matchedKeys,\n  };\n}\n\nfunction getMatchOfSearch(\n  currentSearch: string,\n  toSearch: string | undefined\n): boolean {\n  const current = new URLSearchParams(currentSearch);\n  const to = new URLSearchParams(toSearch);\n  for (const [key, value] of to.entries()) {\n    // Allow `?k=` to match `?` (when `k` doesn't exist)\n    if ((current.get(key) ?? \"\") !== value) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function matchMenuItem(\n  item: SidebarMenuSimpleItem,\n  pathname: string,\n  search: string\n): boolean {\n  if (!item.to) return false;\n  const to = typeof item.to === \"object\" ? item.to : parsePath(item.to);\n\n  // Regex taken from: https://github.com/pillarjs/path-to-regexp/blob/master/index.js#L202\n  const escapedPath = to.pathname!.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n\n  let match = !!matchPath(pathname, {\n    path: escapedPath,\n    exact: item.exact,\n  });\n\n  if (match && item.activeMatchSearch) {\n    match = getMatchOfSearch(search, to.search);\n  }\n\n  if (!match && Array.isArray(item.activeIncludes)) {\n    for (const include of item.activeIncludes) {\n      let paths: string[];\n      let exact: boolean | undefined = true;\n\n      if (isObject(include)) {\n        paths = Array.isArray(include.path) ? include.path : [include.path];\n        exact = include.exact;\n      } else {\n        paths = [include];\n      }\n\n      for (const path of paths) {\n        let parsedPath: Location | undefined;\n        const hasSearch = path.includes(\"?\");\n\n        if (hasSearch) {\n          parsedPath = parsePath(path);\n        }\n        match = !!matchPath(pathname, {\n          path: hasSearch ? parsedPath!.pathname : path,\n          exact,\n        });\n\n        if (match && parsedPath?.search) {\n          match = getMatchOfSearch(search, parsedPath.search);\n        }\n\n        if (match) {\n          break;\n        }\n      }\n\n      if (match) {\n        break;\n      }\n    }\n  }\n\n  if (match && Array.isArray(item.activeExcludes)) {\n    for (const include of item.activeExcludes) {\n      let paths: string[];\n      let exact: boolean | undefined = true;\n\n      if (isObject(include)) {\n        paths = Array.isArray(include.path) ? include.path : [include.path];\n        exact = include.exact;\n      } else {\n        paths = [include];\n      }\n\n      for (const path of paths) {\n        match = !matchPath(pathname, {\n          path,\n          exact,\n        });\n\n        if (!match) {\n          break;\n        }\n      }\n\n      if (!match) {\n        break;\n      }\n    }\n  }\n\n  return match;\n}\n"],"names":["initializeReactI18n","NS","locales","WrappedPopover","wrapBrick","WrappedSearch","onChange","onSearch","WrappedIcon","LOCAL_STORAGE_PREFIX","maxVisitorLength","ThreeLevelMenuPopoverContent","props","useTranslation","menuItem","selectedKey","items","searchResult","setSearchResult","useState","searchKey","setSearchKey","triggerRef","useRef","nameSpace","title","storage","useMemo","JsonStorage","localStorage","searchHistory","getItem","popoverTriggerClick","_triggerRef$current","current","click","React","className","onClick","e","stopPropagation","placeholder","t","K","SEARCH_BY_MENU_NAME","detail","list","uniq","length","pop","setItem","flatMap","i","filter","text","toLowerCase","includes","trim","onFocus","onBlur","trigger","placement","anchorDisplay","distance","slot","ref","map","renderLinkCom","width","style","height","textAlign","lineHeight","NO_DATA","SEARCH_HISTORY","lib","theme","icon","h","key","gridTemplateColumns","item","index","_item$items","classnames","active","en","QUICK_ACCESS","REMOVE_ITEM_FROM_QUICK_ACCESS","ADD_ITEM_TO_QUICK_ACCESS","NO_DATA_TIPS_IN_QUICK_ACCESS","SITE_MAP_SEARCH_RECOMMEND","MAX_COLLECT_COUNT_TIPS","NO_DATA_SEARCH_INFO","SEARCH_ITEM_PLACEHOLDER","zh","DRAG_DIRECTION","collectModule","DragContext","collectService","constructor","maxCollectLength","_defineProperty","Map","this","getFavoritesById","id","cloneDeep","collectMap","get","fetchFavorites","cachedPromise","collectPromise","favoritesPromise","MyCollectionApi_listMyCollection","module","collectionName","then","result","_result$payloads","payloads","extInfo","Boolean","set","setItemAsFavorite","unshift","updateFavoriteItems","MyCollectionApi_upsertMyCollection","name","url","to","error","handleHttpError","equalItem","prevItem","removeItemFromFavorite","findIndex","row","splice","isCollected","some","toggleFavorite","checkMaxCapacity","moveFavoriteTo","option","from","direction","fromIndex","toIndex","Left","groupId","WrappedLink","WrappedTooltip","PlaceholderDropComp","_ref","data","onDragOver","onFavoriteUpdate","useContext","onDragEnter","target","background","onDragLeave","onDrop","formData","JSON","parse","dataTransfer","getData","newDataList","ItemTag","suffix","allowDrag","onDragStart","overElement","onDragEnd","containerRef","isDragIng","setIsDragIng","isActive","dataset","draggable","_e$dataTransfer","setData","stringify","preventDefault","dropEffect","classNames","href","Right","QuickVisitItem","onAllowDrag","onFavorite","suffixRef","iconRef","handleRemove","useCallback","handleMouseDown","useEffect","addEventListener","removeEventListener","handleClick","suffixGroups","content","hoist","onMouseDown","StarIcon","_ref2","_extends","RecommendItem","walkMenuItem","type","Array","isArray","walkMenuItems","push","itemColumnWidth","GroupView","groupMenus","groups","groupCategoryMap","categoryOrder","Set","forEach","groupFrom","add","value","processGroupItems","DefaultGroup","CustomGroup","groupRef","columnCount","setColumnCount","resizeObserver","ResizeObserver","entries","entry","contentRect","Math","floor","observe","disconnect","columnWidth","display","group","GroupItem","WrappedInput","onValueChange","SiteMapItem","menuGroup","visible","favoriteList","setFavoriteList","flatItems","flatMenuItems","q","setQ","setFilters","dragElement","setDragElement","setOverElement","setAllowDrag","setDirection","initialized","setInitialized","handleFavorite","collectList","handleSearch","v","debouncedHandleSearch","debounce","handleDragOver","throttle","dropElement","element","node","parentElement","findDropElement","isValidDragAction","left","getBoundingClientRect","right","clientX","undefined","hasData","Provider","handleDragEnd","enable","WrappedLinkItem","isGroup","isSubMenu","groupAsSubMenu","linkStyle","labelStyle","renderSpanCom","subMenu","___CSS_LOADER_EXPORT___","toString","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","initMenuItemAndMatchCurrentPathKeys","menuItems","pathname","search","parentCursor","selectedKeys","openedKeys","matchedKeys","cursor","tmp","defaultExpanded","parsePath","escapedPath","replace","match","matchPath","path","exact","activeMatchSearch","getMatchOfSearch","activeIncludes","include","paths","isObject","_parsedPath","parsedPath","hasSearch","activeExcludes","matchMenuItem","String","keyPath","split","slice","join","currentSearch","toSearch","URLSearchParams"],"sourceRoot":""}