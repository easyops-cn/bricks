"use strict";(globalThis.webpackChunk_next_bricks_nav=globalThis.webpackChunk_next_bricks_nav||[]).push([[1890,1369,2052],{3028:(e,t,n)=>{n.r(t),n.d(t,{EasyopsNavbarAlerts:()=>w,EasyopsNavbarAlertsComponent:()=>E,WrappedIcon:()=>h,WrappedLink:()=>b});var r,o=n(2740),i=n(8769),a=n.n(i),c=n(300),s=n(4295),l=n(5223),u=n(9592),f=n(2144),d=(n(6477),n(4612)),p=n(6238),m=n.n(p),g=n(7061);let v;const h=(0,s.wrapBrick)("eo-icon"),b=(0,s.wrapBrick)("eo-link"),{defineElement:y}=(0,c.createDecorators)();let w;class x extends s.ReactNextElement{render(){return a().createElement(E,null)}}r=x,[w,v]=(0,o.A)(r,[y("nav.easyops-navbar-alerts",{styleTexts:[g.A]})],[],0,void 0,s.ReactNextElement).c,v();const A=new d.G(localStorage);function E(){const[e,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)(null),o=(0,u.useCurrentApp)(),c=(0,i.useMemo)((()=>`license:${f.auth.getAuth().org}`),[]),s=(0,i.useMemo)((()=>{var t;const n=f.auth.getAuth(),r=null===(t=n.license)||void 0===t?void 0:t.validDaysLeft;let o;return e?null:r&&r<=15&&n.isAdmin&&(o=A.getItem(c),!o||m()().unix()>o)?r:null}),[c,e]);(0,i.useEffect)((()=>{const e=e=>{const t=e.detail.renderTime,{loadTime:n,loadInfoPage:i}=(0,l.getRuntime)().getMiscSettings();null!=o&&o.isBuildPush&&n>0&&t>n&&r({renderTime:S(t),suggestTime:S(n),suggestUrl:i})};return window.addEventListener("route.render",e),()=>{window.removeEventListener("route.render",e)}}),[o]);const d=(0,i.useCallback)((()=>{A.setItem(c,m()().unix()+86400),t(!0)}),[c]);return a().createElement(a().Fragment,null,n&&a().createElement(k,{text:`您的页面存在性能问题, 当前页面渲染时间 ${n.renderTime} 秒, 规定阈值为: ${n.suggestTime} 秒, 您已超过。请您针对该页面进行性能优化！`,type:"warning",link:n.suggestUrl?{label:"建议解决思路",url:n.suggestUrl}:void 0}),null!==s&&a().createElement(k,{text:`离 License 过期还有 ${s} 天`,type:"info",closable:!0,onClose:d}))}function k(e){let{text:t,type:n,closable:r,link:o,onClose:i}=e;return a().createElement("div",{className:`alert ${n}`},a().createElement("span",{className:"text"},t),o&&a().createElement(b,{className:"link",href:o.url,target:"_blank"},o.label),r&&a().createElement(h,{lib:"antd",icon:"close",className:"icon",role:"button",onClick:i}))}function S(e){return Math.floor(100*e)/1e5}},7061:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(6758),o=n.n(r),i=n(935),a=n.n(i)()(o());a.push([e.id,":host{display:block}:host([hidden]){display:none}.alert{height:32px;padding:0 20px;display:flex;justify-content:center;align-items:center}.text{color:var(--antd-text-color);min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.icon{margin-left:20px;cursor:pointer;color:#8c8c8c}.info{background-color:var(--palette-blue-1)}.warning{background-color:var(--palette-amber-1)}",""]);const c=a.toString()},935:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(a[s]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},6758:e=>{e.exports=function(e){return e[1]}},2740:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(7545),o=n(6902);function i(e,t,n){"symbol"==(0,r.A)(t)&&(t=(t=t.description)?"["+t+"]":"");try{Object.defineProperty(e,"name",{configurable:!0,value:n?n+" "+t:t})}catch(e){}return e}var a=n(1369);function c(e,t,n,c,s,l){var u,f,d,p,m,g,v,h=Symbol.metadata||Symbol.for("Symbol.metadata"),b=Object.defineProperty,y=Object.create,w=[y(null),y(null)],x=t.length;function A(t,n,r){return function(o,i){n&&(i=o,o=e);for(var a=0;a<t.length;a++)i=t[a].apply(o,r?[i]:[]);return r?i:o}}function E(e,t,n,r){if("function"!=typeof e&&(r||void 0!==e))throw new TypeError(t+" must "+(n||"be")+" a function"+(r?"":" or undefined"));return e}function k(e,t,n,o,a,c,s,l,d,p,m){function g(e){if(!m(e))throw new TypeError("Attempted to access private element on non-instance")}var v=[].concat(t[0]),h=t[3],y=!s,x=1===a,k=3===a,S=4===a,T=2===a;function j(t,n,r){return function(o,i){return n&&(i=o,o=e),r&&r(o),I[t].call(o,i)}}if(!y){var I={},N=[],C=k?"get":S||x?"set":"value";if(d?(p||x?I={get:i((function(){return h(this)}),o,"get"),set:function(e){t[4](this,e)}}:I[C]=h,p||i(I[C],o,T?"":C)):p||(I=Object.getOwnPropertyDescriptor(e,o)),!p&&!d){if((f=w[+l][o])&&7!=(f^a))throw Error("Decorating two elements with the same name ("+I[C].name+") is not supported yet");w[+l][o]=a<3?1:a}}for(var O=e,P=v.length-1;P>=0;P-=n?2:1){var _=E(v[P],"A decorator","be",!0),L=n?v[P-1]:void 0,$={},D={kind:["field","accessor","method","getter","setter","class"][a],name:o,metadata:u,addInitializer:function(e,t){if(e.v)throw Error("attempted to call addInitializer after decoration was finished");E(t,"An initializer","be",!0),c.push(t)}.bind(null,$)};if(y)f=_.call(L,O,D),$.v=1,E(f,"class decorators","return")&&(O=f);else if(D.static=l,D.private=d,f=D.access={has:d?m.bind():function(e){return o in e}},S||(f.get=d?T?function(e){return g(e),I.value}:j("get",0,g):function(e){return e[o]}),T||k||(f.set=d?j("set",0,g):function(e,t){e[o]=t}),O=_.call(L,x?{get:I.get,set:I.set}:I[C],D),$.v=1,x){if("object"==(0,r.A)(O)&&O)(f=E(O.get,"accessor.get"))&&(I.get=f),(f=E(O.set,"accessor.set"))&&(I.set=f),(f=E(O.init,"accessor.init"))&&N.unshift(f);else if(void 0!==O)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else E(O,(p?"field":"method")+" decorators","return")&&(p?N.unshift(O):I[C]=O)}return a<2&&s.push(A(N,l,1),A(c,l,0)),p||y||(d?x?s.splice(-1,0,j("get",l),j("set",l)):s.push(T?I[C]:E.call.bind(I[C])):b(e,o,I)),O}function S(e){return b(e,h,{configurable:!0,enumerable:!0,value:u})}return void 0!==l&&(u=l[h]),u=y(null==u?null:u),m=[],g=function(e){e&&m.push(A(e))},v=function(t,r){for(var i=0;i<n.length;i++){var c=n[i],l=c[1],u=7&l;if((8&l)==t&&!u==r){var f=c[2],g=!!c[3],v=16&l;k(t?e:e.prototype,c,v,g?"#"+f:(0,a.A)(f),u,u<2?[]:t?p=p||[]:d=d||[],m,!!t,g,r,t&&g?function(t){return(0,o.A)(t)===e}:s)}}},v(8,0),v(0,0),v(8,1),v(0,1),g(d),g(p),f=m,x||S(e),{e:f,get c(){var n=[];return x&&[S(e=k(e,[t],c,e.name,5,n)),A(n,1)]}}}},6902:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(7545);function o(e){if(Object(e)!==e)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==e?(0,r.A)(e):"null"));return e}},1369:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(7545);function o(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=(0,r.A)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,r.A)(t)?t:t+""}},7545:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},4612:(e,t,n)=>{n.d(t,{G:()=>r});class r{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"brick-next-";this.storage=e,this.prefix=t}setItem(e,t){this.storage.setItem(this.prefix+e,JSON.stringify(t))}getItem(e){return JSON.parse(this.storage.getItem(this.prefix+e))}removeItem(e){return this.storage.removeItem(this.prefix+e)}clear(){return this.storage.clear()}}}}]);
//# sourceMappingURL=easyops-navbar-alerts.2a7aa348.js.map