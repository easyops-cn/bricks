{"version":3,"file":"chunks/1438.1f2e5715.js","mappings":"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","sources":["webpack:///../../node_modules/@microsoft/fetch-event-source/lib/esm/fetch.js","webpack:///../../node_modules/@microsoft/fetch-event-source/lib/esm/parse.js","webpack:///../../node_modules/file-saver/dist/FileSaver.min.js","webpack:///../../node_modules/@next-core/utils/dist/esm/general/createProviderClass.js","webpack:///../../node_modules/@next-core/utils/dist/esm/general/createSSEStream.js","webpack:///../../node_modules/@next-core/utils/dist/esm/general/deepFreeze.js","webpack:///../../node_modules/@next-core/utils/dist/esm/general/hasOwnProperty.js","webpack:///../../node_modules/@next-core/utils/dist/esm/general/isObject.js","webpack:///../../node_modules/@next-core/utils/dist/esm/general/JsonStorage.js","webpack:///../../node_modules/@next-core/utils/dist/esm/general/unwrapProvider.js"],"sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n};\r\nimport { getBytes, getLines, getMessages } from './parse';\r\nexport const EventStreamContentType = 'text/event-stream';\r\nconst DefaultRetryInterval = 1000;\r\nconst LastEventId = 'last-event-id';\r\nexport function fetchEventSource(input, _a) {\r\n    var { signal: inputSignal, headers: inputHeaders, onopen: inputOnOpen, onmessage, onclose, onerror, openWhenHidden, fetch: inputFetch } = _a, rest = __rest(_a, [\"signal\", \"headers\", \"onopen\", \"onmessage\", \"onclose\", \"onerror\", \"openWhenHidden\", \"fetch\"]);\r\n    return new Promise((resolve, reject) => {\r\n        const headers = Object.assign({}, inputHeaders);\r\n        if (!headers.accept) {\r\n            headers.accept = EventStreamContentType;\r\n        }\r\n        let curRequestController;\r\n        function onVisibilityChange() {\r\n            curRequestController.abort();\r\n            if (!document.hidden) {\r\n                create();\r\n            }\r\n        }\r\n        if (!openWhenHidden) {\r\n            document.addEventListener('visibilitychange', onVisibilityChange);\r\n        }\r\n        let retryInterval = DefaultRetryInterval;\r\n        let retryTimer = 0;\r\n        function dispose() {\r\n            document.removeEventListener('visibilitychange', onVisibilityChange);\r\n            window.clearTimeout(retryTimer);\r\n            curRequestController.abort();\r\n        }\r\n        inputSignal === null || inputSignal === void 0 ? void 0 : inputSignal.addEventListener('abort', () => {\r\n            dispose();\r\n            resolve();\r\n        });\r\n        const fetch = inputFetch !== null && inputFetch !== void 0 ? inputFetch : window.fetch;\r\n        const onopen = inputOnOpen !== null && inputOnOpen !== void 0 ? inputOnOpen : defaultOnOpen;\r\n        async function create() {\r\n            var _a;\r\n            curRequestController = new AbortController();\r\n            try {\r\n                const response = await fetch(input, Object.assign(Object.assign({}, rest), { headers, signal: curRequestController.signal }));\r\n                await onopen(response);\r\n                await getBytes(response.body, getLines(getMessages(id => {\r\n                    if (id) {\r\n                        headers[LastEventId] = id;\r\n                    }\r\n                    else {\r\n                        delete headers[LastEventId];\r\n                    }\r\n                }, retry => {\r\n                    retryInterval = retry;\r\n                }, onmessage)));\r\n                onclose === null || onclose === void 0 ? void 0 : onclose();\r\n                dispose();\r\n                resolve();\r\n            }\r\n            catch (err) {\r\n                if (!curRequestController.signal.aborted) {\r\n                    try {\r\n                        const interval = (_a = onerror === null || onerror === void 0 ? void 0 : onerror(err)) !== null && _a !== void 0 ? _a : retryInterval;\r\n                        window.clearTimeout(retryTimer);\r\n                        retryTimer = window.setTimeout(create, interval);\r\n                    }\r\n                    catch (innerErr) {\r\n                        dispose();\r\n                        reject(innerErr);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        create();\r\n    });\r\n}\r\nfunction defaultOnOpen(response) {\r\n    const contentType = response.headers.get('content-type');\r\n    if (!(contentType === null || contentType === void 0 ? void 0 : contentType.startsWith(EventStreamContentType))) {\r\n        throw new Error(`Expected content-type to be ${EventStreamContentType}, Actual: ${contentType}`);\r\n    }\r\n}\r\n//# sourceMappingURL=fetch.js.map","export async function getBytes(stream, onChunk) {\r\n    const reader = stream.getReader();\r\n    let result;\r\n    while (!(result = await reader.read()).done) {\r\n        onChunk(result.value);\r\n    }\r\n}\r\nexport function getLines(onLine) {\r\n    let buffer;\r\n    let position;\r\n    let fieldLength;\r\n    let discardTrailingNewline = false;\r\n    return function onChunk(arr) {\r\n        if (buffer === undefined) {\r\n            buffer = arr;\r\n            position = 0;\r\n            fieldLength = -1;\r\n        }\r\n        else {\r\n            buffer = concat(buffer, arr);\r\n        }\r\n        const bufLength = buffer.length;\r\n        let lineStart = 0;\r\n        while (position < bufLength) {\r\n            if (discardTrailingNewline) {\r\n                if (buffer[position] === 10) {\r\n                    lineStart = ++position;\r\n                }\r\n                discardTrailingNewline = false;\r\n            }\r\n            let lineEnd = -1;\r\n            for (; position < bufLength && lineEnd === -1; ++position) {\r\n                switch (buffer[position]) {\r\n                    case 58:\r\n                        if (fieldLength === -1) {\r\n                            fieldLength = position - lineStart;\r\n                        }\r\n                        break;\r\n                    case 13:\r\n                        discardTrailingNewline = true;\r\n                    case 10:\r\n                        lineEnd = position;\r\n                        break;\r\n                }\r\n            }\r\n            if (lineEnd === -1) {\r\n                break;\r\n            }\r\n            onLine(buffer.subarray(lineStart, lineEnd), fieldLength);\r\n            lineStart = position;\r\n            fieldLength = -1;\r\n        }\r\n        if (lineStart === bufLength) {\r\n            buffer = undefined;\r\n        }\r\n        else if (lineStart !== 0) {\r\n            buffer = buffer.subarray(lineStart);\r\n            position -= lineStart;\r\n        }\r\n    };\r\n}\r\nexport function getMessages(onId, onRetry, onMessage) {\r\n    let message = newMessage();\r\n    const decoder = new TextDecoder();\r\n    return function onLine(line, fieldLength) {\r\n        if (line.length === 0) {\r\n            onMessage === null || onMessage === void 0 ? void 0 : onMessage(message);\r\n            message = newMessage();\r\n        }\r\n        else if (fieldLength > 0) {\r\n            const field = decoder.decode(line.subarray(0, fieldLength));\r\n            const valueOffset = fieldLength + (line[fieldLength + 1] === 32 ? 2 : 1);\r\n            const value = decoder.decode(line.subarray(valueOffset));\r\n            switch (field) {\r\n                case 'data':\r\n                    message.data = message.data\r\n                        ? message.data + '\\n' + value\r\n                        : value;\r\n                    break;\r\n                case 'event':\r\n                    message.event = value;\r\n                    break;\r\n                case 'id':\r\n                    onId(message.id = value);\r\n                    break;\r\n                case 'retry':\r\n                    const retry = parseInt(value, 10);\r\n                    if (!isNaN(retry)) {\r\n                        onRetry(message.retry = retry);\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction concat(a, b) {\r\n    const res = new Uint8Array(a.length + b.length);\r\n    res.set(a);\r\n    res.set(b, a.length);\r\n    return res;\r\n}\r\nfunction newMessage() {\r\n    return {\r\n        data: '',\r\n        event: '',\r\n        id: '',\r\n        retry: undefined,\r\n    };\r\n}\r\n//# sourceMappingURL=parse.js.map","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","import { saveAs } from \"file-saver\";\nexport function createProviderClass(api) {\n  return class extends HTMLElement {\n    get $$typeof() {\n      return \"provider\";\n    }\n    resolve() {\n      return api(...arguments);\n    }\n    async saveAs(filename) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      const blob = await api(...args);\n      saveAs(blob, filename);\n    }\n  };\n}\n//# sourceMappingURL=createProviderClass.js.map","import { fetchEventSource } from \"@microsoft/fetch-event-source\";\n/**\n * 将 SSE 事件流转换为异步迭代器。\n */\nexport async function createSSEStream(url, options) {\n  // Reference https://github.com/withspectrum/callback-to-async-iterator/blob/master/src/index.js\n  const pushQueue = [];\n  const pullQueue = [];\n  let disposed = false;\n  let closed = false;\n  const {\n    converter,\n    ...fetchOptions\n  } = options ?? {};\n  await new Promise((resolve, reject) => {\n    fetchEventSource(url, {\n      ...fetchOptions,\n      openWhenHidden: true,\n      async onopen(response) {\n        if (response.ok) {\n          resolve(null);\n        } else {\n          // eslint-disable-next-line no-console\n          console.error(\"open error\", response.statusText);\n          throw new Error(response.statusText);\n        }\n      },\n      onmessage(msg) {\n        // istanbul ignore next\n        if (process.env.NODE_ENV === \"development\") {\n          // eslint-disable-next-line no-console\n          console.debug(\"[EventSource]\", msg);\n        }\n        let data;\n        let reason;\n        let ok = true;\n        try {\n          data = (converter ?? defaultConverter)(msg.data, msg.event);\n        } catch (e) {\n          ok = false;\n          reason = e;\n        }\n        if (pullQueue.length > 0) {\n          const [resolve, reject] = pullQueue.shift();\n          ok ? resolve(data) : reject(reason);\n        } else {\n          pushQueue.push(ok ? {\n            ok: true,\n            data: data\n          } : {\n            ok: false,\n            reason\n          });\n        }\n      },\n      onclose() {\n        closed = true;\n        earlyDone();\n      },\n      onerror(err) {\n        throw err;\n      }\n    }).catch(reason => {\n      reject(reason);\n      bailout(reason);\n    });\n  });\n  function bailout(reason) {\n    pullQueue.forEach(_ref => {\n      let [_resolve, reject] = _ref;\n      return reject(reason);\n    });\n    dispose();\n  }\n  function earlyDone() {\n    pullQueue.forEach(_ref2 => {\n      let [resolve] = _ref2;\n      return resolve({\n        value: undefined,\n        done: true\n      });\n    });\n  }\n  function dispose() {\n    disposed = true;\n    pullQueue.length = 0;\n    pushQueue.length = 0;\n  }\n  return {\n    next() {\n      return disposed ? this.return() : new Promise((resolve, reject) => {\n        if (pushQueue.length > 0) {\n          const result = pushQueue.shift();\n          if (result.ok) {\n            resolve(result.data);\n          } else {\n            reject(result.reason);\n          }\n        } else if (closed) {\n          dispose();\n          resolve({\n            value: undefined,\n            done: true\n          });\n        } else {\n          pullQueue.push([resolve, reject]);\n        }\n      });\n    },\n    return() {\n      earlyDone();\n      dispose();\n      return Promise.resolve({\n        value: undefined,\n        done: true\n      });\n    },\n    throw(error) {\n      earlyDone();\n      dispose();\n      return Promise.reject(error);\n    },\n    [Symbol.asyncIterator]() {\n      return this;\n    }\n  };\n}\nfunction defaultConverter(data, event) {\n  if (event === \"error\") {\n    var _value;\n    // eslint-disable-next-line no-console\n    console.error(\"Received error event:\", data);\n    let value;\n    try {\n      value = JSON.parse(data);\n    } catch {\n      // Ignore\n    }\n    throw new Error(typeof ((_value = value) === null || _value === void 0 ? void 0 : _value.error) === \"string\" ? value.error : data);\n  }\n\n  // By default, `data: [DONE]` indicates the end of the stream\n  if (data === \"[DONE]\") {\n    return {\n      value: undefined,\n      done: true\n    };\n  }\n  if (data.startsWith(\"[ERROR]\")) {\n    // eslint-disable-next-line no-console\n    console.error(\"Received error message:\", data);\n    throw new Error(data);\n  }\n  try {\n    const value = JSON.parse(data);\n    return {\n      value,\n      done: false\n    };\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error(\"Failed to parse message:\", data);\n    throw e;\n  }\n}\n//# sourceMappingURL=createSSEStream.js.map","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n\n/** @internal */\nexport function deepFreeze(object) {\n  // Retrieve the property names defined on object\n  const propNames = Object.getOwnPropertyNames(object);\n\n  // Freeze properties before freezing self\n\n  for (const name of propNames) {\n    const value = object[name];\n    if (value && typeof value === \"object\") {\n      deepFreeze(value);\n    }\n  }\n  return Object.freeze(object);\n}\n//# sourceMappingURL=deepFreeze.js.map","export function hasOwnProperty(object, property) {\n  return Object.prototype.hasOwnProperty.call(object, property);\n}\n//# sourceMappingURL=hasOwnProperty.js.map","// Ref https://github.com/lodash/lodash/blob/4.17.11/lodash.js#L11744\nexport function isObject(value) {\n  const type = typeof value;\n  return value != null && (type == \"object\" || type == \"function\");\n}\n//# sourceMappingURL=isObject.js.map","// This is copied from\n// [@next-libs/storage](https://github.com/easyops-cn/next-libs/tree/master/libs/storage),\n// and the types is refined.\n// The usage of JsonStorage from @next-libs/storage should be deprecated,\n// and migrated to from @next-core/brick-utils.\nexport class JsonStorage {\n  constructor(storage) {\n    let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"brick-next-\";\n    this.storage = storage;\n    this.prefix = prefix;\n  }\n  setItem(name, value) {\n    this.storage.setItem(this.prefix + name, JSON.stringify(value));\n  }\n  getItem(name) {\n    return JSON.parse(this.storage.getItem(this.prefix + name) ?? \"null\");\n  }\n  removeItem(name) {\n    return this.storage.removeItem(this.prefix + name);\n  }\n  clear() {\n    return this.storage.clear();\n  }\n}\n//# sourceMappingURL=JsonStorage.js.map","const pool = new Map();\nfunction getProviderBrick(provider) {\n  let brick = pool.get(provider);\n  if (brick) {\n    return brick;\n  }\n  brick = document.createElement(provider);\n  pool.set(provider, brick);\n  return brick;\n}\nexport function unwrapProvider(provider) {\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    const brick = getProviderBrick(provider);\n    return brick.resolve(...args);\n  };\n}\n//# sourceMappingURL=unwrapProvider.js.map"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","EventStreamContentType","DefaultRetryInterval","LastEventId","fetchEventSource","input","_a","signal","inputSignal","headers","inputHeaders","onopen","inputOnOpen","onmessage","onclose","onerror","openWhenHidden","fetch","inputFetch","rest","Promise","resolve","reject","assign","curRequestController","onVisibilityChange","abort","document","hidden","create","accept","addEventListener","retryInterval","retryTimer","dispose","removeEventListener","window","clearTimeout","defaultOnOpen","async","AbortController","response","stream","onChunk","reader","getReader","result","read","done","value","getBytes","body","onLine","buffer","position","fieldLength","discardTrailingNewline","arr","undefined","a","b","res","Uint8Array","set","concat","bufLength","lineStart","lineEnd","subarray","getLines","onId","onRetry","onMessage","message","data","event","id","retry","decoder","TextDecoder","line","field","decode","valueOffset","parseInt","isNaN","getMessages","err","aborted","interval","setTimeout","innerErr","contentType","get","startsWith","Error","c","d","XMLHttpRequest","open","responseType","onload","g","console","error","send","status","dispatchEvent","MouseEvent","createEvent","initMouseEvent","f","self","global","navigator","test","userAgent","saveAs","HTMLAnchorElement","h","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","revokeObjectURL","msSaveOrOpenBlob","autoBom","warn","type","Blob","title","innerText","HTMLElement","safari","FileReader","k","onloadend","replace","readAsDataURL","l","m","module","exports","createProviderClass","api","$$typeof","arguments","filename","_len","args","Array","_key","blob","createSSEStream","url","options","pushQueue","pullQueue","disposed","closed","converter","fetchOptions","earlyDone","forEach","_ref2","ok","statusText","msg","reason","defaultConverter","shift","push","catch","_ref","_resolve","bailout","next","this","return","throw","Symbol","asyncIterator","_value","JSON","parse","deepFreeze","object","propNames","getOwnPropertyNames","freeze","property","isObject","JsonStorage","constructor","storage","prefix","setItem","stringify","getItem","removeItem","clear","pool","Map","unwrapProvider","provider","brick","getProviderBrick"],"sourceRoot":""}