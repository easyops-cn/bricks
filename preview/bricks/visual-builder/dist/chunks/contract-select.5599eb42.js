/*! For license information please see contract-select.5599eb42.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_next_bricks_visual_builder=globalThis.webpackChunk_next_bricks_visual_builder||[]).push([[3046,4586,2052],{1722:(e,t,n)=>{n.d(t,{I:()=>a,K:()=>r,NS:()=>i});let r=function(e){return e.CONTRACT_OPTIONS_TIPS_PREFIX="CONTRACT_OPTIONS_TIPS_PREFIX",e.CONTRACT_OPTIONS_TIPS_SUFFIX="CONTRACT_OPTIONS_TIPS_SUFFIX",e.CONTRACT_VALIDATE_MESSAGE="CONTRACT_VALIDATE_MESSAGE",e}({});const i="bricks/visual-builder/contract-select",a={en:{CONTRACT_OPTIONS_TIPS_PREFIX:"Only the first",CONTRACT_OPTIONS_TIPS_SUFFIX:"items are displayed, please search for more results",CONTRACT_VALIDATE_MESSAGE:"Please fill in the correct contract name "},zh:{CONTRACT_OPTIONS_TIPS_PREFIX:"仅展示前",CONTRACT_OPTIONS_TIPS_SUFFIX:"项,更多结果请搜索",CONTRACT_VALIDATE_MESSAGE:"请填写正确的契约名称"}}},4680:(e,t,n)=>{n.r(t),n.d(t,{EoContractSelect:()=>U,EoContractSelectComponent:()=>re,checkContractRule:()=>ne});var r,i=n(4586),a=n(4635),o=n(918),s=n(6902),c=n(5536),l=n(6121),u=n(829),h=n(2740),f=n(8769),d=n.n(f),p=n(300),A=n(4295),v=n(9592),m=(n(6477),n(6213)),g=n(1030),S=n(426),b=n(3065),T=n(1722),y=n(5502),C=n(8799),E=n(2480);let w,_,N,I,O,k,P,R,x,F,B,M,W,j,z;(0,y.initializeReactI18n)(T.NS,T.I);const{defineElement:X,property:D,event:L}=(0,p.createDecorators)(),$=(0,A.wrapBrick)("eo-form-item"),q=(0,A.wrapBrick)("eo-auto-complete",{onChange:"change"});let U;var G=new WeakMap,V=new WeakMap,K=new WeakMap,H=new WeakMap,J=new WeakMap,Q=new WeakMap,Y=new WeakSet;class Z extends S.N{constructor(){super(...arguments),(0,a.A)(this,Y),(0,o.A)(this,G,_(this)),(0,o.A)(this,V,(N(this),I(this))),(0,o.A)(this,K,(O(this),k(this))),(0,o.A)(this,H,(P(this),R(this))),(0,o.A)(this,J,(x(this),F(this))),(0,o.A)(this,Q,(B(this),M(this))),(0,i.A)(this,"handleChange",(z(this),e=>{(0,c.A)(Y,this,W).emit(e)}))}get name(){return(0,u.A)(G,this)}set name(e){(0,l.A)(G,this,e)}get required(){return(0,u.A)(V,this)}set required(e){(0,l.A)(V,this,e)}get label(){return(0,u.A)(K,this)}set label(e){(0,l.A)(K,this,e)}get value(){return(0,u.A)(H,this)}set value(e){(0,l.A)(H,this,e)}get suffix(){return(0,u.A)(J,this)}set suffix(e){(0,l.A)(J,this,e)}render(){return d().createElement($,{exportparts:"message",curElement:this,formElement:this.getFormElement(),name:this.name,label:this.label,required:this.required,labelBrick:this.labelBrick,helpBrick:this.helpBrick,notRender:this.notRender,trigger:"handleChange",validator:ne},d().createElement(re,{value:this.value,suffix:this.suffix,validateState:this.validateState,onChange:this.handleChange}))}}function ee(e){if("string"!=typeof e)return{name:"",version:""};const[t,n]=e.split(":");return{name:t,version:n}}function te(e){return/.*@.*:\d+\.\d+\.\d+/.test(e)}function ne(e){return(0,g.isNil)(e)||te(e)?"":C.i18n.t(`${T.NS}:${T.K.CONTRACT_VALIDATE_MESSAGE}`)}function re(e){let{value:t,inputStyle:n,validateState:r,suffix:i,onChange:a}=e;const[o,s]=(0,f.useState)(),[c,l]=(0,f.useState)(20),u=(0,b.E)({q:o,pageSize:c}),[h,p]=(0,f.useState)(ee(t)),[A,m]=(0,f.useState)([]);(0,f.useEffect)((()=>{p(ee(t))}),[t]);const S=(0,f.useMemo)((()=>(0,g.debounce)((e=>{s(e)}),200)),[]);return d().createElement("div",{className:"contract-wrapper"},d().createElement(q,{className:"contract-selector",options:null==u?void 0:u.map((e=>({value:e.fullContractName,label:e.fullContractName}))),value:h.name,inputStyle:n,validateState:r,onChange:e=>{const t=e.detail;if(te(t))p(ee(t)),null==a||a(t);else{var n;const e=null===(n=u.find((e=>e.fullContractName===t)))||void 0===n?void 0:n.version,r=(null==e?void 0:e[0])??"";m(e),p({name:t,version:r}),null==a||a(`${t}:${r}`)}S(t)}},d().createElement(E.L,{onBlur:e=>l(e),slot:"options-toolbar"})),d().createElement(q,{className:"version-selector",value:h.version,validateState:r,options:null==A?void 0:A.map((e=>({value:e,label:e}))),onChange:e=>{const t=e.detail;p({name:h.name,version:t}),null==a||a(`${h.name}:${t}`)}}),null!=i&&i.useBrick?d().createElement(v.ReactUseMultipleBricks,i):null)}r=Z,({e:[_,N,I,O,k,P,R,x,F,B,M,W,j,z],c:[U,w]}=(0,h.A)(r,[X("visual-builder.contract-select",{styleTexts:[m.A]})],[[D(),1,"name"],[D({type:Boolean}),1,"required"],[D(),1,"label"],[D({attribute:!1}),1,"value"],[D({attribute:!1}),1,"suffix"],[L({type:"change"}),1,"changeEvent",e=>(0,u.A)(Q,e),(e,t)=>(0,l.A)(Q,e,t)]],0,(e=>Y.has((0,s.A)(e))),S.N)),w()},2480:(e,t,n)=>{n.d(t,{L:()=>u});var r=n(8769),i=n.n(r),a=n(1722),o=n(5502),s=n(4295);(0,o.initializeReactI18n)(a.NS,a.I);const c=(0,s.wrapBrick)("eo-icon"),l=(0,s.wrapBrick)("eo-input",{onChange:"change"});function u(e){const{itemsCount:t=20,onBlur:n}=e,[s,u]=(0,r.useState)(t),{t:h}=(0,o.useTranslation)(a.NS),[f,d]=(0,r.useState)(!1);return i().createElement("div",{className:"options-tips",slot:e.slot},h(a.K.CONTRACT_OPTIONS_TIPS_PREFIX)," ",f?i().createElement(l,{autoFocus:!0,inputStyle:{width:65},value:String(s),onBlur:()=>{d(!1),null==n||n(s)},onChange:e=>{u(Number(e.detail))}}):i().createElement("span",null,s," ",i().createElement(c,{icon:"edit",lib:"antd",onClick:()=>{d(!0)}}))," ",h(a.K.CONTRACT_OPTIONS_TIPS_SUFFIX))}},3065:(e,t,n)=>{n.d(t,{E:()=>a});var r=n(8769),i=n(4244);function a(e){let{pageSize:t=20,q:n=""}=e;const[a,o]=(0,r.useState)([]),[s,c]=(0,r.useState)(n),[l,u]=(0,r.useState)(t);return(0,r.useEffect)((()=>{c(n)}),[n]),(0,r.useEffect)((()=>{u(t)}),[t]),(0,r.useEffect)((()=>{(async()=>{try{const{list:e}=await(0,i.f)({page:1,pageSize:l,fullContractName:s},{interceptorParams:{ignoreLoadingBar:!0}});o(e)}catch(e){console.error(e),o([])}})()}),[s,l]),a}},6213:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(6758),i=n.n(r),a=n(935),o=n.n(a)()(i());o.push([e.id,":host{display:inline-block}:host([hidden]){display:none}.contract-wrapper{display:flex;gap:4px}.contract-selector{flex:1}.version-selector{width:100px}.options-tips{padding:0px 10px;font-weight:400;color:#999;white-space:nowrap;font-style:italic}",""]);const s=o.toString()},935:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},6758:e=>{e.exports=function(e){return e[1]}},2740:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(7545),i=n(6902);function a(e,t,n){"symbol"==(0,r.A)(t)&&(t=(t=t.description)?"["+t+"]":"");try{Object.defineProperty(e,"name",{configurable:!0,value:n?n+" "+t:t})}catch(e){}return e}var o=n(1369);function s(e,t,n,s,c,l){var u,h,f,d,p,A,v,m=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,S=Object.create,b=[S(null),S(null)],T=t.length;function y(t,n,r){return function(i,a){n&&(a=i,i=e);for(var o=0;o<t.length;o++)a=t[o].apply(i,r?[a]:[]);return r?a:i}}function C(e,t,n,r){if("function"!=typeof e&&(r||void 0!==e))throw new TypeError(t+" must "+(n||"be")+" a function"+(r?"":" or undefined"));return e}function E(e,t,n,i,o,s,c,l,f,d,p){function A(e){if(!p(e))throw new TypeError("Attempted to access private element on non-instance")}var v=[].concat(t[0]),m=t[3],S=!c,T=1===o,E=3===o,w=4===o,_=2===o;function N(t,n,r){return function(i,a){return n&&(a=i,i=e),r&&r(i),I[t].call(i,a)}}if(!S){var I={},O=[],k=E?"get":w||T?"set":"value";if(f?(d||T?I={get:a((function(){return m(this)}),i,"get"),set:function(e){t[4](this,e)}}:I[k]=m,d||a(I[k],i,_?"":k)):d||(I=Object.getOwnPropertyDescriptor(e,i)),!d&&!f){if((h=b[+l][i])&&7!=(h^o))throw Error("Decorating two elements with the same name ("+I[k].name+") is not supported yet");b[+l][i]=o<3?1:o}}for(var P=e,R=v.length-1;R>=0;R-=n?2:1){var x=C(v[R],"A decorator","be",!0),F=n?v[R-1]:void 0,B={},M={kind:["field","accessor","method","getter","setter","class"][o],name:i,metadata:u,addInitializer:function(e,t){if(e.v)throw Error("attempted to call addInitializer after decoration was finished");C(t,"An initializer","be",!0),s.push(t)}.bind(null,B)};if(S)h=x.call(F,P,M),B.v=1,C(h,"class decorators","return")&&(P=h);else if(M.static=l,M.private=f,h=M.access={has:f?p.bind():function(e){return i in e}},w||(h.get=f?_?function(e){return A(e),I.value}:N("get",0,A):function(e){return e[i]}),_||E||(h.set=f?N("set",0,A):function(e,t){e[i]=t}),P=x.call(F,T?{get:I.get,set:I.set}:I[k],M),B.v=1,T){if("object"==(0,r.A)(P)&&P)(h=C(P.get,"accessor.get"))&&(I.get=h),(h=C(P.set,"accessor.set"))&&(I.set=h),(h=C(P.init,"accessor.init"))&&O.unshift(h);else if(void 0!==P)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else C(P,(d?"field":"method")+" decorators","return")&&(d?O.unshift(P):I[k]=P)}return o<2&&c.push(y(O,l,1),y(s,l,0)),d||S||(f?T?c.splice(-1,0,N("get",l),N("set",l)):c.push(_?I[k]:C.call.bind(I[k])):g(e,i,I)),P}function w(e){return g(e,m,{configurable:!0,enumerable:!0,value:u})}return void 0!==l&&(u=l[m]),u=S(null==u?null:u),p=[],A=function(e){e&&p.push(y(e))},v=function(t,r){for(var a=0;a<n.length;a++){var s=n[a],l=s[1],u=7&l;if((8&l)==t&&!u==r){var h=s[2],A=!!s[3],v=16&l;E(t?e:e.prototype,s,v,A?"#"+h:(0,o.A)(h),u,u<2?[]:t?d=d||[]:f=f||[],p,!!t,A,r,t&&A?function(t){return(0,i.A)(t)===e}:c)}}},v(8,0),v(0,0),v(8,1),v(0,1),A(f),A(d),h=p,T||w(e),{e:h,get c(){var n=[];return T&&[w(e=E(e,[t],s,e.name,5,n)),y(n,1)]}}}},2559:(e,t,n)=>{function r(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}n.d(t,{A:()=>r})},6330:(e,t,n)=>{function r(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,c,"next",e)}function c(e){r(o,i,a,s,c,"throw",e)}s(void 0)}))}}n.d(t,{A:()=>i})},6902:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(7545);function i(e){if(Object(e)!==e)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==e?(0,r.A)(e):"null"));return e}},2016:(e,t,n)=>{function r(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}n.d(t,{A:()=>r})},829:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(2559);function i(e,t){return e.get((0,r.A)(e,t))}},918:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(2016);function i(e,t,n){(0,r.A)(e,t),t.set(e,n)}},6121:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(2559);function i(e,t,n){return e.set((0,r.A)(e,t),n),n}},5536:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(2559);function i(e,t,n){return n((0,r.A)(e,t))}},4635:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(2016);function i(e,t){(0,r.A)(e,t),t.add(e)}},9492:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(2559);function i(e,t,n,i){return t((0,r.A)(e,n),i),i}},4586:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(1369);function i(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1369:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(7545);function i(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=(0,r.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,r.A)(t)?t:t+""}},7545:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},4244:(e,t,n)=>{n.d(t,{f:()=>a});var r=n(6330),i=n(108),a=function(){var e=(0,r.A)((function*(e,t){return(yield i.http.post("api/gateway/next_builder.contract_center.SearchContract/api/v1/contract/search",e,t)).data}));return function(t,n){return e.apply(this,arguments)}}()},426:(e,t,n)=>{n.d(t,{N:()=>R});var r,i=n(4635),a=n(918),o=n(5536),s=n(9492),c=n(6121),l=n(829),u=n(2740),h=n(300),f=n(4295);let d,p,A,v,m,g,S,b,T;const{method:y,property:C}=(0,h.createDecorators)();var E=new WeakMap,w=new WeakSet,_=new WeakMap,N=new WeakMap,I=new WeakMap,O=new WeakMap,k=new WeakMap,P=new WeakMap;class R extends f.ReactNextElement{constructor(){super(...arguments),(0,i.A)(this,w),(0,a.A)(this,E,(d(this),!1)),(0,a.A)(this,_,"normal"),(0,a.A)(this,N,!1),(0,a.A)(this,I,p(this)),(0,a.A)(this,O,(A(this),v(this))),(0,a.A)(this,k,(m(this),g(this))),(0,a.A)(this,P,(S(this),b(this))),T(this)}get isFormItemElement(){return!0}set validateState(e){(0,s.A)(w,M,this,e),this._render()}get validateState(){return(0,o.A)(w,this,B)}set notRender(e){this.hidden=e,(0,s.A)(w,F,this,e),this._render()}get notRender(){return(0,o.A)(w,this,x)}get $bindFormItem(){return(0,o.A)(w,this,W)}set $bindFormItem(e){(0,s.A)(w,j,this,e),this._render()}get helpBrick(){return(0,l.A)(I,this)}set helpBrick(e){(0,c.A)(I,this,e)}get labelBrick(){return(0,l.A)(O,this)}set labelBrick(e){(0,c.A)(O,this,e)}get labelCol(){return(0,l.A)(k,this)}set labelCol(e){(0,c.A)(k,this,e)}get wrapperCol(){return(0,l.A)(P,this)}set wrapperCol(e){(0,c.A)(P,this,e)}setNotRender(e){this.notRender=e}getFormElement(){let e=this;for(;(e=e.parentNode)&&e&&!e.isFormElement;);return e}}function x(e){return(0,l.A)(E,e)}function F(e,t){(0,c.A)(E,e,t)}function B(e){return(0,l.A)(_,e)}function M(e,t){(0,c.A)(_,e,t)}function W(e){return(0,l.A)(N,e)}function j(e,t){(0,c.A)(N,e,t)}r=R,[p,A,v,m,g,S,b,T,d]=(0,u.A)(r,[],[[C({attribute:!1}),1,"helpBrick"],[C({attribute:!1}),1,"labelBrick"],[C({attribute:!1}),1,"labelCol"],[C({attribute:!1}),1,"wrapperCol"],[y(),2,"setNotRender"],[y(),2,"getFormElement"]],0,void 0,f.ReactNextElement).e}}]);
//# sourceMappingURL=contract-select.5599eb42.js.map