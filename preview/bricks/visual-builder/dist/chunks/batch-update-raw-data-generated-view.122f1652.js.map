{"version":3,"file":"chunks/batch-update-raw-data-generated-view.122f1652.js","mappings":";mOAYOA,eAAeC,EACpBC,GAEA,OAAOC,QAAQC,WACbF,EAAYG,KAAIC,IAAA,IAAC,eAAEC,KAAmBC,GAAOF,EAAA,OAC3CG,EAAAA,EAAAA,GAA2B,kCAAmC,IACzDD,EACHE,KAAM,CAACH,IACP,IAGR,CAEAI,eAAeC,OACb,uDACAC,EAAAA,EAAAA,qBAAoBZ,oBC3BtB,SAASa,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GACpE,IACE,IAAIC,EAAOP,EAAIK,GAAKC,GAChBE,EAAQD,EAAKC,KACnB,CAAE,MAAOC,GAEP,YADAP,EAAOO,EAET,CACIF,EAAKG,KACPT,EAAQO,GAERpB,QAAQa,QAAQO,GAAOG,KAAKR,EAAOC,EAEvC,CACe,SAASQ,EAAkBC,GACxC,OAAO,WACL,IAAIC,EAAOC,KACTC,EAAOC,UACT,OAAO,IAAI7B,SAAQ,SAAUa,EAASC,GACpC,IAAIF,EAAMa,EAAGK,MAAMJ,EAAME,GACzB,SAASb,EAAMK,GACbT,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQI,EAClE,CACA,SAASJ,EAAOe,GACdpB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASe,EACnE,CACAhB,OAAMiB,EACR,GACF,CACF,yECpBW1B,EAA0C,WACnD,IAAIH,GAAO,QAAkB,UAAW8B,EAAUC,EAAMC,GACtD,aAA+E,EAAAC,KAAKC,KAAK,sDAAsDC,OAAOL,EAAU,aAAcC,EAAMC,IACpL,IACF,IACA,OAAO,SAAoCI,EAAIC,EAAKC,GAClD,OAAOtC,EAAK2B,MAAMH,KAAME,UAC1B,CACF,CARqD","sources":["webpack:///./src/data-providers/batch-update-raw-data-generated-view.ts","webpack:///../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack:///../../node_modules/@next-api-sdk/cmdb-sdk/dist/esm/api/cmdb/instance/createInstance.js"],"sourcesContent":["import { createProviderClass } from \"@next-core/utils/general\";\nimport { InstanceApi_createInstance } from \"@next-api-sdk/cmdb-sdk\";\n\nexport interface GeneratedView {\n  attrInstanceId: string;\n  input: string;\n  output: string;\n  list: unknown[];\n  defaultVisualWeight?: number;\n  systemPromptVersion?: string;\n}\n\nexport async function batchUpdateRawDataGeneratedView(\n  generations: GeneratedView[]\n): Promise<unknown> {\n  return Promise.allSettled(\n    generations.map(({ attrInstanceId, ...props }) =>\n      InstanceApi_createInstance(\"RAW_DATA_GENERATED_VIEW@EASYOPS\", {\n        ...props,\n        attr: [attrInstanceId],\n      })\n    )\n  );\n}\n\ncustomElements.define(\n  \"visual-builder.batch-update-raw-data-generated-view\",\n  createProviderClass(batchUpdateRawDataGeneratedView)\n);\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { http } from \"@next-core/http\";\n\n/** 创建实例 */\n\n/**\n * @description 创建实例 (body为实例信息,字段限制参考模型定义,支持关系创建)\n * @endpoint POST /v2/object/:objectId/instance\n */\nexport var InstanceApi_createInstance = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (objectId, data, options) {\n    return (/**! @contract easyops.api.cmdb.instance.CreateInstance@1.1.0 */(yield http.post(\"api/gateway/cmdb.instance.CreateInstance/v2/object/\".concat(objectId, \"/instance\"), data, options)).data\n    );\n  });\n  return function InstanceApi_createInstance(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n//# sourceMappingURL=createInstance.js.map"],"names":["async","batchUpdateRawDataGeneratedView","generations","Promise","allSettled","map","_ref","attrInstanceId","props","InstanceApi_createInstance","attr","customElements","define","createProviderClass","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","objectId","data","options","http","post","concat","_x","_x2","_x3"],"sourceRoot":""}