"use strict";(globalThis.webpackChunk_next_bricks_visual_builder=globalThis.webpackChunk_next_bricks_visual_builder||[]).push([[4291],{4291:(i,e,n)=>{n.r(e),n.d(e,{pipes:()=>t,utils:()=>r});var r={};n.r(r),n.d(r,{convertUnitValueByPrecision:()=>Ti,formatUnitValue:()=>Gi});var t={};function s(i,e){return i+e}function a(i){return"0"!==i&&Boolean(i)}n.r(t),n.d(t,{add:()=>s,atobUnicode:()=>ji,bool:()=>o,boolean:()=>a,btoaUnicode:()=>Ii,cmdbInstanceShowName:()=>d,countBy:()=>c,datetime:()=>p,deltaTime:()=>v,divide:()=>B,equal:()=>m,find:()=>g,findIndex:()=>h,findLast:()=>M,findLastIndex:()=>w,get:()=>k,graphTree:()=>S,groupBy:()=>P,groupByToIndex:()=>L,includes:()=>C,join:()=>N,json:()=>A,jsonStringify:()=>x,keyBy:()=>j,map:()=>I,mapToArray:()=>O,mergeArrayByKey:()=>R,multiply:()=>D,not:()=>E,nullish:()=>U,number:()=>H,parseTimeRange:()=>Y,randomString:()=>q,reverse:()=>F,round:()=>xi,slice:()=>J,sort:()=>W,split:()=>z,string:()=>V,substr:()=>Q,substring:()=>X,subtract:()=>Z,ternary:()=>$,uniq:()=>ii,unitFormat:()=>Li,yaml:()=>Ni,yamlStringify:()=>Ai});var o=a;function d(i){if(Array.isArray(i)){var e=i[0]||"-",n=i.slice(1,i.length).join(",");return n?e+"("+n+")":e}return i}var u=n(1030);function c(i,e){return(0,u.countBy)(i,e)}var l=n(155),y=n.n(l);function p(i,e){return y()(i).format(e)}function f(i){return"object"==typeof i&&null!==i}function b(i,e){return"number"==typeof i?y()(i):y()(i,e)}function v(i,e,n){if(void 0===e&&(e=!0),void 0===n&&(n="YYYY-MM-DD HH:mm:ss"),!i)return"";if(f(i)&&i.startTime&&i.endTime){var r=b(i.startTime,n),t=b(i.endTime,n);return y().duration(t.diff(r)).humanize(e)}var s=b(f(i)?i.startTime||i.endTime:i,n);return y().duration(s.diff(y()())).humanize(e)}function B(i,e){return i/e}function m(i,e){return(0,u.isEqual)(i,e)}function g(i,e,n){return(0,u.find)(i,e,n)}function h(i,e,n){return(0,u.findIndex)(i,e,n)}function M(i,e,n){return(0,u.findLast)(i,e,n)}function w(i,e,n){return(0,u.findLastIndex)(i,e,n)}function k(i,e,n){return(0,u.get)(i,e,n)}function S(i,e){var n,r;if(!i)return[];var t=null==e?void 0:e.sort,s=(0,u.groupBy)(i.edges,"out"),a=function(e){var n=s[e.instanceId];if((0,u.forEach)(n,(function(n){var r=n.out_name,t=(0,u.find)(i.vertices,["instanceId",n.in]);if(t){var s=a(t);e[r]?e[r].push(s):e[r]=[s]}})),t){var r=(0,u.uniq)((0,u.map)(n,"out_name"));(0,u.forEach)(r,(function(i){(0,u.isEmpty)(e[i])||(e[i]=(0,u.orderBy)(e[i],(function(i){var e;return null!==(e=(0,u.get)(i,t.key))&&void 0!==e?e:-1/0}),-1===t.order?"desc":"asc"))}))}return e};return null!==(r=null===(n=i.topic_vertices)||void 0===n?void 0:n.map((function(i){return a(i)})))&&void 0!==r?r:[]}function P(i,e){return(0,u.groupBy)(i,e)}var K,T,G=n(5608);function L(i,e,n){var r=i;if(!(0,u.isNil)(e)&&!(0,u.isNil)(n)){var t=(0,u.groupBy)(i,e),s=(0,u.keys)(t).sort();r=r.map((function(i){var r=(0,G.Cl)({},i);return(0,u.set)(r,n,(0,u.indexOf)(s,(0,u.get)(i,e))),r}))}return r}function C(i,e){return i.includes(e)}function N(i,e){return void 0===e&&(e=","),Array.isArray(i)?i.join(e):""}function A(i){if((0,u.isNil)(i))return i;try{return JSON.parse(i)}catch(i){return void console.error(i)}}function x(i,e){void 0===e&&(e=2);try{return JSON.stringify(i,null,e)}catch(i){return void console.error(i)}}function j(i,e){return(0,u.keyBy)(i,e)}function I(i,e){return Array.isArray(i)?i.map((function(i){return(0,u.get)(i,e)})):[]}function O(i,e,n){return"object"==typeof i&&i?Object.entries(i).map((function(i){var r,t=i[0],s=i[1];return(r={})[e]=t,r[n]=s,r})):[]}function R(i,e){return i.reduce((function(i,n){return Object.values((0,u.mergeWith)((0,u.keyBy)(i,e),(0,u.keyBy)(n,e),_))}),[])}function _(i,e){if((0,u.isArray)(i))return i.concat(e)}function D(i,e){return i*e}function E(i){return!i}function U(i,e){return null!=i?i:e}function H(i){return Number(i)}function Y(i){if("now/d"===i)return+y()().startOf("day");if("now/y"===i)return+y()().startOf("year");var e=/^now-(\d+)(\w+)/.exec(i);if(null!==e){var n=e[1],r=e[2];return+y()().subtract(n,r)}return i?+i:+y()()}function q(i,e){i=i>0?i:8,e="string"==typeof e?e:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var n="",r=0;r<i;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n}function F(i){return Array.isArray(i)?i.slice().reverse():[]}function J(i,e,n){return i.slice(e,n)}function W(i,e){return Array.isArray(i)?(0,u.sortBy)(i,e):[]}function z(i,e){return"string"==typeof i?i.split(e):[]}function V(i){return null==i?"":String(i)}function Q(i,e,n){return"string"==typeof i?i.substr(e,n):""}function X(i,e,n){return"string"==typeof i?i.substring(e,n):""}function Z(i,e){return i-e}function $(i,e,n){return i?e:n}function ii(i){return(0,u.uniq)(i)}!function(i){i.Time="time",i.Byte="byte",i.Bibyte="bibyte",i.BitRate="bitRate",i.ByteRate="byteRate"}(K||(K={})),function(i){i.Percent1="percent(1)",i.Percent100="percent(100)"}(T||(T={}));var ei,ni=[T.Percent1,T.Percent100];!function(i){i.Bytes="bytes",i.Kilobytes="kilobytes",i.Megabytes="megabytes",i.Gigabytes="gigabytes",i.Terabytes="terabytes",i.Petabytes="petabytes",i.Bibytes="bibytes",i.Kibibytes="kibibytes",i.Mebibytes="mebibytes",i.Gibibytes="gibibytes",i.Tebibytes="tebibytes",i.Pebibytes="pebibytes",i.b="b",i.B="B",i.KB="KB",i.MB="MB",i.GB="GB"}(ei||(ei={}));var ri,ti=[{id:ei.Bytes,alias:["B","bytes(B)"],divisor:1,display:"B"},{id:ei.Kilobytes,alias:["KB","kilobytes(KB)"],divisor:1e3,display:"KB"},{id:ei.Megabytes,alias:["MB","megabytes(MB)"],divisor:Math.pow(1e3,2),display:"MB"},{id:ei.Gigabytes,alias:["GB","gigabytes(GB)"],divisor:Math.pow(1e3,3),display:"GB"},{id:ei.Terabytes,alias:["TB","terabytes(TB)"],divisor:Math.pow(1e3,4),display:"TB"},{id:ei.Petabytes,alias:["PB","petabytes(PB)"],divisor:Math.pow(1e3,5),display:"PB"}],si=[{id:ei.Bibytes,alias:["B","bibytes(B)"],divisor:1,display:"B"},{id:ei.Kibibytes,alias:["KiB","kibibytes(KiB)"],divisor:1024,display:"KiB"},{id:ei.Mebibytes,alias:["MiB","mebibytes(MiB)"],divisor:Math.pow(1024,2),display:"MiB"},{id:ei.Gibibytes,alias:["GiB","gibibytes(GiB)"],divisor:Math.pow(1024,3),display:"GiB"},{id:ei.Tebibytes,alias:["TiB","tebibytes(TiB)"],divisor:Math.pow(1024,4),display:"TiB"},{id:ei.Pebibytes,alias:["PiB","pebibytes(PiB)"],divisor:Math.pow(1024,5),display:"PiB"}],ai=[{id:ei.b,divisor:1,display:"b"},{id:ei.B,divisor:8,display:"B"},{id:ei.KB,divisor:8192,display:"KB"},{id:ei.MB,divisor:8388608,display:"MB"},{id:ei.GB,divisor:8589934592,display:"GB"}];!function(i){i.BitsPerSecond="bits/sec",i.KilobitsPerSecond="kilobits/sec",i.MegabitsPerSecond="megabits/sec",i.GigabitsPerSecond="gigabits/sec",i.BytesPerSecond="bytes/sec",i.KilobytesPerSecond="kilobytes/sec",i.MegabytesPerSecond="megabytes/sec",i.GigabytesPerSecond="gigabytes/sec",i.bps="bps",i.Bps="Bps",i.KBps="KBps",i.MBps="MBps",i.GBps="GBps"}(ri||(ri={}));var oi,di=[{id:ri.BitsPerSecond,alias:["bps","bits/sec(bps)"],divisor:1,display:"bps"},{id:ri.KilobitsPerSecond,alias:["Kbps","kilobits/sec(Kbps)"],divisor:1024,display:"Kbps"},{id:ri.MegabitsPerSecond,alias:["Mbps","megabits/sec(Mbps)"],divisor:1048576,display:"Mbps"},{id:ri.GigabitsPerSecond,alias:["Gbps","gigabits/sec(Gbps)"],divisor:1073741824,display:"Gbps"}],ui=[{id:ri.BytesPerSecond,alias:["Bps","bytes/sec(Bps)"],divisor:8,display:"Bps"},{id:ri.KilobytesPerSecond,alias:["KBps","kilobytes/sec(KBps)"],divisor:8192,display:"KBps"},{id:ri.MegabytesPerSecond,alias:["MBps","megabytes/sec(MBps)"],divisor:8388608,display:"MBps"},{id:ri.GigabytesPerSecond,alias:["GBps","gigabytes/sec(GBps)"],divisor:8589934592,display:"GBps"}],ci=[{id:ri.bps,divisor:1,display:"bps"},{id:ri.Bps,divisor:8,display:"Bps"},{id:ri.KBps,divisor:8192,display:"KBps"},{id:ri.MBps,divisor:8388608,display:"MBps"},{id:ri.GBps,divisor:8589934592,display:"GBps"}];!function(i){i.Nanosecond="nanoseconds",i.Microsecond="microseconds",i.Milliseconds="milliseconds",i.Seconds="seconds",i.Minutes="minutes",i.Hours="hours",i.Days="days",i.Weeks="weeks",i.Months="months",i.Years="years",i.ms="ms",i.s="s",i.min="min",i.hour="hour",i.day="day",i.week="week"}(oi||(oi={}));var li,yi,pi=[{id:oi.Nanosecond,alias:["ns","nanoseconds(ns)"],divisor:1,display:"ns"},{id:oi.Microsecond,alias:["μs","microseconds(μs)"],divisor:1e3,display:"μs"},{id:oi.Milliseconds,alias:["ms","milliseconds(ms)"],divisor:1e6,display:"ms"},{id:oi.Seconds,alias:["s","seconds(s)"],divisor:1e9,display:"s"},{id:oi.Minutes,alias:["min","minutes(min)"],divisor:6e10,display:"min"},{id:oi.Hours,alias:["hour","hours(hour)"],divisor:36e11,display:"hour"},{id:oi.Days,alias:["day","days(day)"],divisor:864e11,display:"day"},{id:oi.Weeks,alias:["week","weeks(week)"],divisor:6048e11,display:"week"},{id:oi.Months,alias:["month","months(month)"],divisor:2592e12,display:"month"},{id:oi.Years,alias:["year","years(year)"],divisor:31536e12,display:"year"}];oi.ms,oi.s,oi.min,oi.hour,oi.day,oi.week,(li={})[K.Time]=pi,li[K.Byte]=ti,li[K.Bibyte]=si,li[K.BitRate]=di,li[K.ByteRate]=ui,function(i){i.None="none",i.K="K",i.M="M",i.B="B",i.T="T"}(yi||(yi={}));var fi,bi,vi=[{id:yi.None,divisor:1,display:""},{id:yi.K,divisor:1e3,display:"K"},{id:yi.M,divisor:1e6,display:"M"},{id:yi.B,divisor:1e9,display:"B"},{id:yi.T,divisor:1e12,display:"T"}],Bi=function(i,e){return i.id.toLocaleLowerCase()===(null==e?void 0:e.toLocaleLowerCase())||i.alias&&i.alias.map((function(i){return i.toLocaleLowerCase()})).includes(e)},mi=function(i,e){return i.id.toLocaleLowerCase()===(null==e?void 0:e.toLocaleLowerCase())||i.alias&&i.alias.includes(e)},gi=[pi],hi=[].concat.apply([],gi.map((function(i){return(0,G.aN)(i.map((function(i){return i.id})),[].concat.apply([],i.map((function(i){return i.alias?i.alias:[]}))))}))),Mi=[ti,si,ai],wi=[].concat.apply([],Mi.map((function(i){return(0,G.aN)(i.map((function(i){return i.id})),[].concat.apply([],i.map((function(i){return i.alias?i.alias:[]}))))}))),ki=[di,ui,ci],Si=[].concat.apply([],ki.map((function(i){return(0,G.aN)(i.map((function(i){return i.id})),[].concat.apply([],i.map((function(i){return i.alias?i.alias:[]}))))}))),Pi=function(i,e,n){var r=0,t=Math.sign(i),s=Math.abs(i);if(e){var a=vi.findIndex((function(i){return i.id.toLocaleLowerCase()===e.toLocaleLowerCase()}));-1!==a&&(r=a)}for(var o=vi[r],d=r+1;d<vi.length&&s/(vi[d].divisor/vi[r].divisor)>=1;++d)o=vi[d];return o.id===yi.None?(t*s).toFixed(null!=n?n:2):(s/(o.divisor/vi[r].divisor)*t).toFixed(null!=n?n:2)+o.display};!function(i){i.None="none",i.Short="short",i.Percent="percent",i.Time="time",i.Data="data",i.DataRate="data_rate"}(bi||(bi={}));var Ki=((fi={})[bi.None]=[],fi[bi.Short]=[],fi[bi.Percent]=ni,fi[bi.Time]=hi,fi[bi.Data]=wi,fi[bi.DataRate]=Si,fi),Ti=function(i,e){return void 0===e?i.toString():i.toFixed(e)},Gi=function(i,e){if(!e)return[Pi(i),null];var n=e.type;n||(e.unit?(n=bi.Short,Object.entries(Ki).map((function(i){var r=i[0];i[1].map((function(i){return i.toLocaleLowerCase()})).includes(e.unit.toLocaleLowerCase())&&(n=r)}))):n=bi.None);var r=void 0===(null==e?void 0:e.precision)?2:e.precision;switch(n){case bi.Percent:var t=function(i,e){return e&&e.toLocaleLowerCase()===T.Percent100.toLocaleLowerCase()?i:100*i}(i,e.unit);return[Ti(t,r)+"%",null];case bi.Time:var s=function(i,e,n){var r=0,t=2,s=-1;if(e)for(var a=function(i){var a=-1,o=-1;if(gi[i].forEach((function(i,r){Bi(i,e)&&(a=r),Bi(i,n)&&(o=r)})),-1!==a)return r=i,t=a,s=o,"break"},o=0;o<gi.length&&"break"!==a(o);++o);else n&&(s=gi[r].findIndex((function(i){return Bi(i,n)})));var d=gi[r],u=d[t],c=u;if(-1===s)for(o=t+1;o<d.length&&i/(d[o].divisor/u.divisor)>=1;++o)c=d[o];else c=d[s];return n&&-1===s&&console.warn('Cannot convert unit "'+(e||u.display)+'" to "'+n+'"'),[i/(c.divisor/u.divisor),c.display]}(i,e.unit,e.targetUnit),a=s[0],o=s[1];return[""+Ti(a,void 0===(null==e?void 0:e.precision)?1:e.precision),o];case bi.Data:var d=function(i,e,n){var r=Mi.length-1,t=0,s=-1,a=Math.sign(i),o=Math.abs(i);if(e)for(var d=function(i){var a=-1,o=-1;if(Mi[i].forEach((function(i,r){mi(i,e)&&(a=r),mi(i,n)&&(o=r)})),-1!==a)return r=i,t=a,s=o,"break"},u=0;u<Mi.length&&"break"!==d(u);++u);else n&&(s=Mi[r].findIndex((function(i){return mi(i,n)})));var c=Mi[r],l=c[t],y=l;if(-1===s)for(u=t+1;u<c.length&&o/(c[u].divisor/l.divisor)>=1;++u)y=c[u];else y=c[s];return n&&-1===s&&console.warn('Cannot convert unit "'+(e||l.display)+'" to "'+n+'"'),[o/(y.divisor/l.divisor)*a,y.display]}(i,e.unit,e.targetUnit),u=d[0],c=d[1];return[""+Ti(u,r),c];case bi.DataRate:var l=function(i,e,n){var r=ki.length-1,t=0,s=-1,a=Math.sign(i),o=Math.abs(i);if(e)for(var d=function(i){var a=-1,o=-1;if(ki[i].forEach((function(i,r){Bi(i,e)&&(a=r),Bi(i,n)&&(o=r)})),-1!==a)return r=i,t=a,s=o,"break"},u=0;u<ki.length&&"break"!==d(u);++u);else n&&(s=ki[r].findIndex((function(i){return Bi(i,n)})));var c=ki[r],l=c[t],y=l;if(-1===s)for(u=t+1;u<c.length&&o/(c[u].divisor/l.divisor)>=1;++u)y=c[u];else y=c[s];return n&&-1===s&&console.warn('Cannot convert unit "'+(e||l.display)+'" to "'+n+'"'),[o/(y.divisor/l.divisor)*a,y.display]}(i,e.unit,e.targetUnit),y=l[0],p=l[1];return[""+Ti(y,r),p];case bi.None:return[Ti(i,r),""];default:return[Pi(i,e.unit,r),e.unit]}};function Li(i,e,n,r){return void 0===n&&(n=2),Gi(i,{unit:e,precision:n,targetUnit:r})}var Ci=n(1204);function Ni(i){var e;try{e=(0,Ci.safeLoad)(i,{schema:Ci.JSON_SCHEMA,json:!0})}catch(i){console.error(i)}return e}function Ai(i,e,n){var r;void 0===e&&(e=2);try{r=(0,Ci.safeDump)(i,{indent:e,schema:Ci.JSON_SCHEMA,skipInvalid:!0,noRefs:!0,noCompatMode:!0,sortKeys:null==n?void 0:n.sortKeys})}catch(i){console.error(i)}return r}function xi(i,e){return(0,u.round)(i,e)}function ji(i){return decodeURIComponent(atob(i).split("").map((function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function Ii(i){return btoa(encodeURIComponent(i).replace(/%([0-9A-F]{2})/g,(function(i,e){return String.fromCharCode(Number("0x"+e))})))}},5608:(i,e,n)=>{n.d(e,{Cl:()=>r,aN:()=>t});var r=function(){return r=Object.assign||function(i){for(var e,n=1,r=arguments.length;n<r;n++)for(var t in e=arguments[n])Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t]);return i},r.apply(this,arguments)};function t(){for(var i=0,e=0,n=arguments.length;e<n;e++)i+=arguments[e].length;var r=Array(i),t=0;for(e=0;e<n;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,t++)r[t]=s[a];return r}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError}}]);
//# sourceMappingURL=4291.da2890c6.js.map