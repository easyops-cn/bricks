/*! For license information please see pre-generated-preview.6c286032.js.LICENSE.txt */
(globalThis.webpackChunk_next_bricks_visual_builder=globalThis.webpackChunk_next_bricks_visual_builder||[]).push([[105,2052],{9191:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PreGeneratedPreview:()=>N,PreGeneratedPreviewComponent:()=>V});var n,o=r(918),i=r(6121),a=r(829),s=r(2740),c=r(8769),l=r.n(c),u=r(300),d=r(4295),p=(r(6477),r(3373)),f=r.n(p),h=r(5223),v=r(1732),b=r(3078),m=r(4014),g=r(8918);let y,w,k,A,x,S,_,E,P,j,C;const{defineElement:T,property:M}=(0,u.createDecorators)();let N;var O=new WeakMap,z=new WeakMap,B=new WeakMap,D=new WeakMap,I=new WeakMap;class W extends d.ReactNextElement{constructor(){super(...arguments),(0,o.A)(this,O,w(this)),(0,o.A)(this,z,(k(this),A(this))),(0,o.A)(this,B,(x(this),S(this))),(0,o.A)(this,D,(_(this),E(this))),(0,o.A)(this,I,(P(this),j(this))),C(this)}get generations(){return(0,a.A)(O,this)}set generations(e){(0,i.A)(O,this,e)}get category(){return(0,a.A)(z,this)}set category(e){(0,i.A)(z,this,e)}get theme(){return(0,a.A)(B,this)}set theme(e){(0,i.A)(B,this,e)}get uiVersion(){return(0,a.A)(D,this)}set uiVersion(e){(0,i.A)(D,this,e)}get app(){return(0,a.A)(I,this)}set app(e){(0,i.A)(I,this,e)}render(){return l().createElement(V,{generations:this.generations,category:this.category,theme:this.theme,uiVersion:this.uiVersion,app:this.app})}}function V(e){let{generations:t,category:r,theme:n,uiVersion:o,app:i}=e;const a=(0,c.useRef)(),[s,u]=(0,c.useState)(!1),[d,p]=(0,c.useState)(!1),m=(0,c.useCallback)((()=>{const e=()=>{var t;const r=null===(t=a.current)||void 0===t?void 0:t.contentWindow;null!=r&&r._preview_only_render?u(!0):setTimeout(e,100)};e()}),[]);return(0,c.useEffect)((()=>{if(!s)return;const e=h.__secret_internals.getBrickPackagesById("bricks/visual-builder");if(!e)throw new Error("Cannot find preview agent package: bricks/visual-builder");const t=a.current.contentWindow._preview_only_inject,r={...e,filePath:`${location.origin}${(0,h.getBasePath)()}${window.PUBLIC_ROOT??""}${e.filePath}`};Promise.allSettled(["visual-builder.pre-generated-table-view","visual-builder.pre-generated-container"].map((e=>t(e,r,void 0,!0)))).then((()=>{p(!0)}))}),[s]),(0,c.useEffect)((()=>{var e;if(!d)return;const s=null===(e=a.current)||void 0===e||null===(e=e.contentWindow)||void 0===e?void 0:e._preview_only_render;if(!s)return;const c=new Map,l=new Map;for(const e of t){let t=c.get(e.propertyId);t||c.set(e.propertyId,t=new Map);let r=t.get(e.rwType);r||t.set(e.rwType,r=new Map),r.set(e.displayLevel??0,e),l.set(e.propertyId,e.mockData)}const u=[{brick:"div",properties:{textContent:"属性",className:"head-cell"}},{brick:"div",properties:{textContent:"类别",className:"head-cell"}},{brick:"div",properties:{textContent:"展示等级",className:"head-cell last-col-cell",style:{gridColumn:"span 5",textAlign:"center"}}}],p={brick:"visual-builder.pre-generated-table-view",properties:{style:{gridTemplateColumns:"120px 80px repeat(5, 1fr)"}},children:u};let h=0;for(const[e,t]of c){let n=0;const o=h===c.size-1;for(const[i,a]of t){if(0===n){let r;for(const t of a.values()){r=t.propertyName??e;break}u.push({brick:"div",properties:{textContent:r,className:f()("body-cell",{"last-row-cell":o}),style:{gridRow:`span ${t.size}`}}})}const s=o&&n===t.size-1;u.push({brick:"div",properties:{textContent:i,className:f()("body-cell",{"last-row-cell":s})}});for(let t=-2;t<3;t++){var m;const n=a.get(t),o=(null==n?void 0:n.category)??r;let i;if(null!=n&&null!==(m=n.mockData)&&void 0!==m&&m.length){const t=n.mockData[Math.floor(Math.random()*n.mockData.length)];switch(o){case"detail-item":case"form-item":case"card-item":i={[e]:t};break;case"table-column":i={cellData:t}}}const c=[].concat((null==n?void 0:n.storyboard)??[]).filter((e=>!!(0,b.isObject)(e)||(console.error("Unexpected type of storyboard:",typeof e),!1)));let l;switch(c.forEach(R),o){case"form-item":l={brick:"eo-form",properties:{layout:"inline",values:i,className:"form-container"},children:c.map((e=>({...e,errorBoundary:!0})))};break;case"card-item":l={brick:":forEach",dataSource:[i],children:c.map((e=>({...e,errorBoundary:!0})))};break;default:l={brick:"visual-builder.pre-generated-container",properties:{useBrick:c,dataSource:i},errorBoundary:!0}}u.push({brick:"div",properties:{className:f()("body-cell",{"last-col-cell":2===t,"last-row-cell":s})},children:[{...l,errorBoundary:!0}]})}n++}h++}s("yaml",{yaml:(0,v.safeDump)(p,{schema:v.JSON_SCHEMA,skipInvalid:!0,noRefs:!0,noCompatMode:!0})},{app:i,theme:n,uiVersion:o,styleText:g.A})}),[i,d,t,n,o,r]),l().createElement("div",{className:f()("container")},l().createElement("iframe",{ref:a,src:`${(0,h.getBasePath)()}_brick-preview-v3_/preview/`,loading:"lazy",onLoad:m}))}function R(e){var t;null!==(t=e.properties)&&void 0!==t&&t.prefix&&(console.error("Unexpected readonly property of 'prefix' in:",e),delete e.properties.prefix)}n=W,({e:[w,k,A,x,S,_,E,P,j,C],c:[N,y]}=(0,s.A)(n,[T("visual-builder.pre-generated-preview",{styleTexts:[m.A]})],[[M({attribute:!1}),1,"generations"],[M(),1,"category"],[M(),1,"theme"],[M(),1,"uiVersion"],[M(),1,"app"]],0,void 0,d.ReactNextElement)),y()},8918:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(6758),o=r.n(n),i=r(935),a=r.n(i)()(o());a.push([e.id,"body{background-color:transparent}#preview-root{padding:0;height:auto;max-height:100vh;overflow-y:auto;border:1px solid var(--theme-gray-border-color);border-radius:4px;background:var(--body-background)}.head-cell{position:sticky;top:0;z-index:1;font-weight:bold}.head-cell,\n.body-cell{background:var(--body-background)}.last-col-cell{border-right-color:transparent}.last-row-cell{border-bottom-color:transparent}.form-container > ::part(message){display:none}",""]);const s=a.toString()},4014:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(6758),o=r.n(n),i=r(935),a=r.n(i)()(o());a.push([e.id,":host{display:block}:host([hidden]){display:none}*{box-sizing:border-box}.container,\niframe{width:100%;height:100%;border-radius:4px}.container{position:relative}iframe{display:block;border:none;margin:0;padding:0;transform-origin:0% 0%;-webkit-user-select:none;user-select:none}",""]);const s=a.toString()},935:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);n&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),r&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=r):u[2]=r),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},6758:e=>{"use strict";e.exports=function(e){return e[1]}},3373:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=a(e,i(r)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=a(t,r));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},2740:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(7545),o=r(6902);function i(e,t,r){"symbol"==(0,n.A)(t)&&(t=(t=t.description)?"["+t+"]":"");try{Object.defineProperty(e,"name",{configurable:!0,value:r?r+" "+t:t})}catch(e){}return e}var a=r(1369);function s(e,t,r,s,c,l){var u,d,p,f,h,v,b,m=Symbol.metadata||Symbol.for("Symbol.metadata"),g=Object.defineProperty,y=Object.create,w=[y(null),y(null)],k=t.length;function A(t,r,n){return function(o,i){r&&(i=o,o=e);for(var a=0;a<t.length;a++)i=t[a].apply(o,n?[i]:[]);return n?i:o}}function x(e,t,r,n){if("function"!=typeof e&&(n||void 0!==e))throw new TypeError(t+" must "+(r||"be")+" a function"+(n?"":" or undefined"));return e}function S(e,t,r,o,a,s,c,l,p,f,h){function v(e){if(!h(e))throw new TypeError("Attempted to access private element on non-instance")}var b=[].concat(t[0]),m=t[3],y=!c,k=1===a,S=3===a,_=4===a,E=2===a;function P(t,r,n){return function(o,i){return r&&(i=o,o=e),n&&n(o),j[t].call(o,i)}}if(!y){var j={},C=[],T=S?"get":_||k?"set":"value";if(p?(f||k?j={get:i((function(){return m(this)}),o,"get"),set:function(e){t[4](this,e)}}:j[T]=m,f||i(j[T],o,E?"":T)):f||(j=Object.getOwnPropertyDescriptor(e,o)),!f&&!p){if((d=w[+l][o])&&7!=(d^a))throw Error("Decorating two elements with the same name ("+j[T].name+") is not supported yet");w[+l][o]=a<3?1:a}}for(var M=e,N=b.length-1;N>=0;N-=r?2:1){var O=x(b[N],"A decorator","be",!0),z=r?b[N-1]:void 0,B={},D={kind:["field","accessor","method","getter","setter","class"][a],name:o,metadata:u,addInitializer:function(e,t){if(e.v)throw Error("attempted to call addInitializer after decoration was finished");x(t,"An initializer","be",!0),s.push(t)}.bind(null,B)};if(y)d=O.call(z,M,D),B.v=1,x(d,"class decorators","return")&&(M=d);else if(D.static=l,D.private=p,d=D.access={has:p?h.bind():function(e){return o in e}},_||(d.get=p?E?function(e){return v(e),j.value}:P("get",0,v):function(e){return e[o]}),E||S||(d.set=p?P("set",0,v):function(e,t){e[o]=t}),M=O.call(z,k?{get:j.get,set:j.set}:j[T],D),B.v=1,k){if("object"==(0,n.A)(M)&&M)(d=x(M.get,"accessor.get"))&&(j.get=d),(d=x(M.set,"accessor.set"))&&(j.set=d),(d=x(M.init,"accessor.init"))&&C.unshift(d);else if(void 0!==M)throw new TypeError("accessor decorators must return an object with get, set, or init properties or undefined")}else x(M,(f?"field":"method")+" decorators","return")&&(f?C.unshift(M):j[T]=M)}return a<2&&c.push(A(C,l,1),A(s,l,0)),f||y||(p?k?c.splice(-1,0,P("get",l),P("set",l)):c.push(E?j[T]:x.call.bind(j[T])):g(e,o,j)),M}function _(e){return g(e,m,{configurable:!0,enumerable:!0,value:u})}return void 0!==l&&(u=l[m]),u=y(null==u?null:u),h=[],v=function(e){e&&h.push(A(e))},b=function(t,n){for(var i=0;i<r.length;i++){var s=r[i],l=s[1],u=7&l;if((8&l)==t&&!u==n){var d=s[2],v=!!s[3],b=16&l;S(t?e:e.prototype,s,b,v?"#"+d:(0,a.A)(d),u,u<2?[]:t?f=f||[]:p=p||[],h,!!t,v,n,t&&v?function(t){return(0,o.A)(t)===e}:c)}}},b(8,0),b(0,0),b(8,1),b(0,1),v(p),v(f),d=h,k||_(e),{e:d,get c(){var r=[];return k&&[_(e=S(e,[t],s,e.name,5,r)),A(r,1)]}}}},2559:(e,t,r)=>{"use strict";function n(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}r.d(t,{A:()=>n})},6902:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(7545);function o(e){if(Object(e)!==e)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==e?(0,n.A)(e):"null"));return e}},2016:(e,t,r)=>{"use strict";function n(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}r.d(t,{A:()=>n})},829:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(2559);function o(e,t){return e.get((0,n.A)(e,t))}},918:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(2016);function o(e,t,r){(0,n.A)(e,t),t.set(e,r)}},6121:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(2559);function o(e,t,r){return e.set((0,n.A)(e,t),r),r}},1369:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(7545);function o(e){var t=function(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=(0,n.A)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,n.A)(t)?t:t+""}},7545:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{A:()=>n})}}]);
//# sourceMappingURL=pre-generated-preview.6c286032.js.map