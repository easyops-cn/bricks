"use strict";(self.webpackChunk_next_core_preview=self.webpackChunk_next_core_preview||[]).push([[321],{2247:(e,t,r)=>{r.r(t);var n=r(3028),a=r(4795),o=r(2418),i=r(9304),s=r(9169),l=(r(516),r(1211));function c(e,t){var r;null!==(r=t.options)&&void 0!==r&&null!==(r=r.interceptorParams)&&void 0!==r&&r.ignoreLoadingBar||window.dispatchEvent(new Event(e))}i.http.interceptors.request.use((e=>(c("request.start",e),e))),i.http.interceptors.response.use((function(e,t){return c("request.end",t),e}),(function(e,t){return c("request.end",t),Promise.reject(e)}));var u=document.querySelector("#global-loading-bar");u.classList.add("rendered");var d=!1,p=0;function f(){var e=p>0;e!==d&&(d=e,u.classList[e?"add":"remove"]("loading"))}window.addEventListener("request.start",(()=>{p++,f()})),window.addEventListener("request.end",(()=>{p>0&&(p--,f())}));var v,h=(0,o.createRuntime)(),m=document.querySelector("#preview-root"),g=document.querySelector("#portal-mount-point"),y=(0,o.unstable_createRoot)(m,{portal:g,scope:"page",unknownBricks:"silent"}),b=i.http.get(window.BOOTSTRAP_FILE,{responseType:"json"}).then((e=>{h.initialize(window.BOOTSTRAP_FILE_FIELD?(0,l.get)(e,window.BOOTSTRAP_FILE_FIELD):e)})),E=!1;function w(e){return S.apply(this,arguments)}function S(){return S=(0,a.Z)((function*(e){E=!0;try{var{type:t,sources:r,options:n}=e;yield function(e,t){return A.apply(this,arguments)}(t,r,n)}finally{if(E=!1,v){var a=v;v=void 0,w(a)}}})),S.apply(this,arguments)}window._preview_only_render=(e,t,r)=>{E?v={type:e,sources:t,options:r}:w({type:e,sources:t,options:r})};var k=!1;function A(){return A=(0,a.Z)((function*(e,t){var{yaml:r,html:n}=t,{theme:a,uiVersion:i,context:l,functions:c,templates:u,i18n:d,styleText:p,templatesAreArrayOfYaml:f}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(k||(k=!0,document.body.classList.add("bootstrap-ready"),(0,o.applyTheme)("light"===a?a:"dark-v2")),document.body.classList.remove("bootstrap-error"),"html"===e){(0,o.applyTheme)("light"===a?a:"dark-v2"),(0,o.setUIVersion)(i);var v=(new DOMParser).parseFromString(n,"text/html"),E=new Set;for(var w of v.body.querySelectorAll("*"))if(w.tagName.includes("-")){var S=w.tagName.toLowerCase();E.add(S)}else if("SCRIPT"===w.tagName){var A=w.text.matchAll(/\bdocument\.createElement\(\s*"([a-zA-Z0-9.]+-[-a-zA-Z0-9.]+)"\s*\)/g);for(var P of A)E.add(P[1])}yield b,yield h.loadBricks(E),m.replaceChildren(),g.replaceChildren();var x=[],C=v.querySelectorAll("script");for(var Z of C){var O=document.createElement("script");O.text=Z.text,O.type="module",x.push(O),Z.remove()}m.append(...v.head.querySelectorAll("style"),...v.body.childNodes,...x)}else{var T=r?(0,s.safeLoad)(r,{schema:s.JSON_SCHEMA,json:!0}):null,R=[].concat(null!=T?T:[]);p&&R.push({brick:"style",portal:!0,properties:{textContent:p}});var B=I(l),L=I(c),M=I(u,f),_=I(d);yield b,yield y.render(R,{theme:"light"===a?a:"dark-v2",uiVersion:i,context:B,functions:L,templates:M,i18n:_})}}catch(e){console.error("Render failed:",e),document.body.classList.add("bootstrap-error"),g.textContent="",m.textContent="Render failed: ".concat(String(e))}})),A.apply(this,arguments)}function I(e,t){return"string"==typeof e?(0,s.safeLoad)(e,{schema:s.JSON_SCHEMA,json:!0}):t?e.map((e=>"string"==typeof e.yaml?(0,n.Z)((0,n.Z)({},(0,s.safeLoad)(e.yaml,{schema:s.JSON_SCHEMA,json:!0})),{},{name:e.name}):e)):e}},9309:(e,t,r)=>{r.r(t),r.d(t,{cook:()=>F,isEvaluable:()=>K,isTrackAll:()=>G,precook:()=>V,precookFunction:()=>W,preevaluate:()=>q,shouldAllowRecursiveEvaluations:()=>z});var n=r(6666);class a{constructor(){(0,n.Z)(this,"VariableEnvironment",void 0),(0,n.Z)(this,"LexicalEnvironment",void 0),(0,n.Z)(this,"Function",void 0)}}class o{constructor(e){(0,n.Z)(this,"OuterEnv",void 0),(0,n.Z)(this,"bindingMap",new Map),this.OuterEnv=e}HasBinding(e){return this.bindingMap.has(e)}CreateMutableBinding(e,t){return this.bindingMap.set(e,{mutable:!0,deletable:t}),h(void 0)}CreateImmutableBinding(e,t){return this.bindingMap.set(e,{strict:t}),h(void 0)}InitializeBinding(e,t){var r=this.bindingMap.get(e);return Object.assign(r,{initialized:!0,value:t}),h(void 0)}SetMutableBinding(e,t,r){var n=this.bindingMap.get(e);if(!n.initialized)throw new ReferenceError("".concat(e," is not initialized"));if(!n.mutable)throw new TypeError("Assignment to constant variable");return n.value=t,h(void 0)}GetBindingValue(e,t){var r=this.bindingMap.get(e);if(!r.initialized)throw new ReferenceError("".concat(e," is not initialized"));return r.value}}class i extends o{}class s extends o{}var l=Symbol.for("SourceNode"),c=Symbol.for("FormalParameters"),u=Symbol.for("ECMAScriptCode"),d=Symbol.for("Environment"),p=Symbol.for("IsConstructor");class f{constructor(e,t,r){(0,n.Z)(this,"Base",void 0),(0,n.Z)(this,"ReferenceName",void 0),(0,n.Z)(this,"Strict",void 0),this.Base=e,this.ReferenceName=t,this.Strict=r}}class v{constructor(e,t){(0,n.Z)(this,"Type",void 0),(0,n.Z)(this,"Value",void 0),this.Type=e,this.Value=t}}function h(e){return new v("normal",e)}var m=Symbol("empty completion");function g(e){var t=new Set,r=e=>{if(Array.isArray(e))for(var n of e)r(n);else if(e)switch(e.type){case"Identifier":return void t.add(e.name);case"VariableDeclaration":return r(e.declarations);case"VariableDeclarator":case"FunctionDeclaration":return r(e.id);case"ArrayPattern":return r(e.elements);case"AssignmentPattern":return r(e.left);case"ObjectPattern":return r(e.properties);case"Property":return r(e.value);case"RestElement":return r(e.argument)}};return r(e),Array.from(t)}function y(e){var t=e=>{if(Array.isArray(e))return e.some(t);if(e)switch(e.type){case"ArrayPattern":return t(e.elements);case"AssignmentPattern":return!0;case"ObjectPattern":return t(e.properties);case"Property":return e.computed||t(e.value);case"RestElement":return t(e.argument)}};return t(e)}function b(e,t){var r=[],n={var:t.var},a=(e,t)=>{if(Array.isArray(e))for(var o of e)a(o,t);else if(e){switch(e.type){case"FunctionDeclaration":return void(Number(!t.var)^Number(t.topLevel)&&r.push(e));case"VariableDeclaration":return void(Number(!t.var)^Number("var"===e.kind)&&r.push(e));case"SwitchCase":return void a(e.consequent,n);case"CatchClause":return void a(e.body,n)}if(t.var)switch(e.type){case"BlockStatement":case"DoWhileStatement":case"WhileStatement":return void a(e.body,n);case"IfStatement":return a(e.consequent,n),void a(e.alternate,n);case"ForStatement":return a(e.init,n),void a(e.body,n);case"ForInStatement":case"ForOfStatement":return a(e.left,n),void a(e.body,n);case"SwitchStatement":return void a(e.cases,n);case"TryStatement":return a(e.block,n),a(e.handler,n),void a(e.finalizer,n)}}};return a(e,t),r}function E(e){return"unresolvable"!==e.Base&&!(e.Base instanceof o)}function w(e,t){return e.Base.InitializeBinding(e.ReferenceName,t)}function S(e,t,r){if(null==t)return e;var n=Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t));for(var a of n)if(!r.has(a)){var o=Object.getOwnPropertyDescriptor(t,a);null!=o&&o.enumerable&&(e[a]=t[a])}return e}function k(e,t){var r="const"===e.kind;for(var n of g(e))r?t.CreateImmutableBinding(n,!0):t.CreateMutableBinding(n,!1)}function A(e){return"normal"===e.Type||"continue"==e.Type}function I(e,t){return e.Value!==m?e:new v(e.Type,t)}function P(e){if(e instanceof v&&(e=e.Value),!(e instanceof f))return e;if("unresolvable"===e.Base)throw new ReferenceError("".concat(e.ReferenceName," is not defined"));return e.Base instanceof o?e.Base.GetBindingValue(e.ReferenceName,e.Strict):e.Base[e.ReferenceName]}function x(e){return"symbol"==typeof e?e:String(e)}function C(e,t){return e[t]}function Z(e,t){if("unresolvable"===e.Base)throw new ReferenceError("".concat(e.ReferenceName," is not defined"));return e.Base instanceof o?e.Base.SetMutableBinding(e.ReferenceName,t,e.Strict):(e.Base[e.ReferenceName]=t,h(void 0))}function O(e){if(t=e,!(Array.isArray(t)||null!=t&&"function"==typeof t[Symbol.iterator]))throw new TypeError("".concat(typeof e," is not iterable"));var t;return e[Symbol.iterator]()}function T(e){if(null==e)throw new TypeError("Cannot destructure properties of undefined or null")}function R(e,t,r){return e?e.HasBinding(t)?new f(e,t,r):R(e.OuterEnv,t,r):new f("unresolvable",t,r)}function B(e,t,r){switch(t){case"+":return e+r;case"-":return e-r;case"/":return e/r;case"%":return e%r;case"*":return e*r;case"**":return e**r;case"==":return e==r;case"===":return e===r;case"!=":return e!=r;case"!==":return e!==r;case">":return e>r;case"<":return e<r;case">=":return e>=r;case"<=":return e<=r}throw new SyntaxError("Unsupported binary operator `".concat(t,"`"))}var L=new WeakSet([Function,Object,Function.prototype,Object.prototype,function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}()]);function M(e){if(L.has(e))throw new TypeError("Cannot access reserved objects such as `Function`.")}var _=new WeakSet([Array,Map,Set,URLSearchParams,WeakMap,WeakSet,RegExp]);function F(e,t){var r,{rules:n,globalVariables:o={},hooks:L={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},F="FunctionDeclaration"!==e.type,U=new i(null),N=new a;N.VariableEnvironment=U,N.LexicalEnvironment=U;var j=[N];for(var[V,D]of Object.entries(o))U.CreateImmutableBinding(V,!0),U.InitializeBinding(V,D);var $=new WeakMap;function H(e,r){var n,a,o;switch(null===(n=L.beforeEvaluate)||void 0===n||n.call(L,e),e.type){case"ArrayExpression":var s=[];for(var l of e.elements)if(l)if("SpreadElement"===l.type){var c=P(H(l.argument));s.push(...c)}else s.push(P(H(l)));else s.length+=1;return h(s);case"ArrowFunctionExpression":return de(e),h(oe(e,W().LexicalEnvironment,!1));case"BinaryExpression":var u=P(H(e.left)),d=H(e.right).Value,y=P(d);if(F&&"|>"===e.operator){if("function"!=typeof y){var b=t.substring(e.right.start,e.right.end);throw new TypeError("".concat(b," is not a function"))}var C;return d instanceof f&&E(d)&&(C=d.Base),h(y.call(C,u))}return h(B(u,e.operator,y));case"CallExpression":var T=H(e.callee,r).Value,R=P(T);return null==R&&(e.optional||null!=r&&r.skipped)?(r.skipped=!0,h(void 0)):(M(R),te(R,T,e.arguments,e.callee));case"ChainExpression":return H(e.expression,{});case"ConditionalExpression":return h(P(H(P(H(e.test))?e.consequent:e.alternate)));case"Identifier":return h(q(e.name));case"Literal":if(e.regex){if(null===e.value)throw new SyntaxError("Invalid regular expression: ".concat(e.raw));if(e.regex.flags.includes("u"))throw new SyntaxError("Unsupported unicode flag in regular expression: ".concat(e.raw))}return h(e.value);case"LogicalExpression":var U=P(H(e.left));switch(e.operator){case"&&":return h(U&&P(H(e.right)));case"||":return h(U||P(H(e.right)));case"??":return h(null!=U?U:P(H(e.right)));default:throw new SyntaxError("Unsupported logical operator '".concat(e.operator,"'"))}case"MemberExpression":var N=P(H(e.object,r).Value);if(null==N&&(e.optional||null!=r&&r.skipped))return r.skipped=!0,h(void 0);M(N);var j=e.computed?function(e,t,r){var n=x(P(H(t)));return new f(e,n,!0)}(N,e.property):function(e,t,r){var n=t.name;return new f(e,n,!0)}(N,e.property);return M(j),h(j);case"NewExpression":return function(e,r){var n=P(H(e)),a=re(r);if("function"!=typeof n||!1===n[p]){var o=t.substring(e.start,e.end);throw new TypeError("".concat(o," is not a constructor"))}if(!function(e){return _.has(e)||e===Date}(n)){var i=t.substring(e.start,e.end);throw new TypeError("".concat(i," is not an allowed constructor"))}return h(new n(...a))}(e.callee,e.arguments);case"ObjectExpression":var V={};for(var D of e.properties)if("SpreadElement"===D.type)S(V,P(H(D.argument)),new Set);else{if("init"!==D.kind)throw new SyntaxError("Unsupported object getter/setter");var $=D.computed||"Identifier"!==D.key.type?se(D.key):D.key.name;if("__proto__"===$)throw new TypeError("Setting '__proto__' property is not allowed");V[$]=P(H(D.value))}return h(V);case"SequenceExpression":var J;for(var Q of e.expressions)J=h(P(H(Q)));return J;case"TemplateLiteral":var X=[e.quasis[0].value.cooked],ae=0;for(var le of e.expressions){var ce=P(H(le));X.push(String(ce)),X.push(e.quasis[ae+=1].value.cooked)}return h(X.join(""));case"TaggedTemplateExpression":var ue=H(e.tag).Value,pe=P(ue);return M(pe),te(pe,ue,e.quasi,e.tag);case"UnaryExpression":var fe=H(e.argument).Value;if(!F&&"delete"===e.operator){if(!(fe instanceof f))return h(!0);if(E(fe))return h(delete fe.Base[fe.ReferenceName])}return"typeof"===e.operator?fe instanceof f&&"unresolvable"===fe.Base?h("undefined"):h(typeof P(fe)):h(function(e,t){switch(t){case"!":return!e;case"+":return+e;case"-":return-e;case"void":return}throw new SyntaxError("Unsupported unary operator `".concat(t,"`"))}(P(fe),e.operator))}if(!F)switch(e.type){case"AssignmentExpression":if("="===e.operator){if("ArrayPattern"!==e.left.type&&"ObjectPattern"!==e.left.type){var ve=H(e.left).Value,he=P(H(e.right));return Z(ve,he),h(he)}var me=P(H(e.right));return Y(e.left,me),h(me)}var ge=H(e.left).Value,ye=P(ge),be=P(H(e.right)),Ee=function(e,t,r){switch(t){case"+=":case"-=":case"*=":case"/=":case"%=":case"**=":return B(e,t.substr(0,t.length-1),r)}throw new SyntaxError("Unsupported assignment operator `".concat(t,"`"))}(ye,e.operator,be);return Z(ge,Ee),h(Ee);case"BlockStatement":if(!e.body.length)return h(m);var we=W().LexicalEnvironment,Se=new i(we);ee(e.body,Se),W().LexicalEnvironment=Se;var ke=ne(e.body);return W().LexicalEnvironment=we,ke;case"BreakStatement":return new v("break",m);case"ContinueStatement":return new v("continue",m);case"EmptyStatement":case"FunctionDeclaration":return h(m);case"DoWhileStatement":return K(function(e){for(var t;;){var r=H(e.body);if(!A(r))return I(r,t);if(r.Value!==m&&(t=r.Value),!P(H(e.test)))return h(t)}}(e));case"ExpressionStatement":case"TSAsExpression":return H(e.expression);case"ForInStatement":case"ForOfStatement":return K(function(e){var t=e.left,r="VariableDeclaration"===t.type?"var"===t.kind?"varBinding":"lexicalBinding":"assignment",n="lexicalBinding"===r?g(t):[],a="ForInStatement"===e.type?"enumerate":"iterate",o=function(e,t,r){var n=W(),a=n.LexicalEnvironment;if(e.length>0){var o=new i(a);for(var s of e)o.CreateMutableBinding(s,!1);n.LexicalEnvironment=o}var l=H(t);n.LexicalEnvironment=a;var c=P(l);if("enumerate"===r){if(null==c)return new v("break",m);var u=function*(e){for(var t in e)yield t}(c);return h(u)}return h(O(c))}(n,e.right,a);return"normal"!==o.Type?o:function(e,t,r,n,a){for(var o,s="assignment"===a?e:e.declarations[0].id,l=W().LexicalEnvironment,c="ObjectPattern"===s.type||"ArrayPattern"===s.type;;){var{done:u,value:d}=r.next();if(u)return h(o);var p=void 0,f=void 0;if("lexicalBinding"===a){if(k(e,f=new i(l)),W().LexicalEnvironment=f,!c){var[v]=g(s);p=q(v)}}else c||(p=H(s).Value);c?"assignment"===a?Y(s,d):ie(s,d,"varBinding"===a?void 0:f):"lexicalBinding"===a?w(p,d):Z(p,d);var y=H(t);if(W().LexicalEnvironment=l,!A(y)){var b=I(y,o);if("enumerate"!==n&&void 0!==r.return){var E=r.return();if(!E||!["object","function"].includes(typeof E))throw new TypeError("Iterator result is not an object")}return b}y.Value!==m&&(o=y.Value)}}(t,e.body,o.Value,a,r)}(e));case"ForStatement":return K(function(e){var t;if("VariableDeclaration"===(null===(t=e.init)||void 0===t?void 0:t.type)){if("var"===e.init.kind)return H(e.init),G(e.test,e.update,e.body,[]);var r=W().LexicalEnvironment,n=new i(r),a="const"===e.init.kind,o=g(e.init);for(var s of o)a?n.CreateImmutableBinding(s,!0):n.CreateMutableBinding(s,!1);W().LexicalEnvironment=n,H(e.init);var l=a?[]:Array.from(o),c=G(e.test,e.update,e.body,l);return W().LexicalEnvironment=r,c}return e.init&&P(H(e.init)),G(e.test,e.update,e.body,[])}(e));case"FunctionExpression":return de(e),h(function(e){var t=W().LexicalEnvironment;if(e.id){var r=e.id.name,n=new i(t);n.CreateImmutableBinding(r,!1);var a=oe(e,n,!0);return n.InitializeBinding(r,a),a}return oe(e,t,!0)}(e));case"IfStatement":return P(H(e.test))?(null!==(a=L.beforeBranch)&&void 0!==a&&a.call(L,e,"if"),I(H(e.consequent),void 0)):(null!==(o=L.beforeBranch)&&void 0!==o&&o.call(L,e,"else"),e.alternate?I(H(e.alternate),void 0):h(void 0));case"ReturnStatement":var Ae;return e.argument&&(Ae=P(H(e.argument))),new v("return",Ae);case"ThrowStatement":throw P(H(e.argument));case"UpdateExpression":var Ie=H(e.argument).Value,Pe=Number(P(Ie)),xe="++"===e.operator?Pe+1:Pe-1;return Z(Ie,xe),h(e.prefix?xe:Pe);case"SwitchCase":return ne(e.consequent);case"SwitchStatement":var Ce=P(H(e.discriminant)),Ze=W().LexicalEnvironment,Oe=new i(Ze);ee(e.cases,Oe),W().LexicalEnvironment=Oe;var Te=function(e,t){var r,n=e.findIndex((e=>!e.test)),a=n>=0,o=a?e.slice(0,n):e,i=!1;for(var s of o)if(i||(i=z(s,t)),i){var l=H(s);if(l.Value!==m&&(r=l.Value),"normal"!==l.Type)return I(l,r)}if(!a)return h(r);var c=!1,u=e.slice(n+1);if(!i)for(var d of u)if(c||(c=z(d,t)),c){var p=H(d);if(p.Value!==m&&(r=p.Value),"normal"!==p.Type)return I(p,r)}if(c)return h(r);var f=H(e[n]);if(f.Value!==m&&(r=f.Value),"normal"!==f.Type)return I(f,r);for(var v of u){var g=H(v);if(g.Value!==m&&(r=g.Value),"normal"!==g.Type)return I(g,r)}return h(r)}(e.cases,Ce);return W().LexicalEnvironment=Ze,K(Te);case"TryStatement":var Re;try{Re=H(e.block)}catch(t){if(!e.handler)throw t;var Be;null===(Be=L.beforeEvaluate)||void 0===Be||Be.call(L,e.handler),Re=function(e,t){if(!e.param)return H(e.body);var r=W().LexicalEnvironment,n=new i(r);for(var a of g(e.param))n.CreateMutableBinding(a,!1);W().LexicalEnvironment=n,ie(e.param,t,n);var o=H(e.body);return W().LexicalEnvironment=r,o}(e.handler,t)}finally{if(e.finalizer){var Le=H(e.finalizer);"normal"!==Le.Type&&(Re=Le)}}return Re;case"VariableDeclaration":var Me;for(var _e of e.declarations)if(_e.init)if("Identifier"===_e.id.type){var Fe=q(_e.id.name),Ue=P(H(_e.init));Me="var"===e.kind?Z(Fe,Ue):w(Fe,Ue)}else{var Ne=P(H(_e.init));Me=ie(_e.id,Ne,"var"===e.kind?void 0:W().LexicalEnvironment)}else Me="var"===e.kind?h(m):w(q(_e.id.name),void 0);return Me;case"WhileStatement":return K(function(e){for(var t;;){if(!P(H(e.test)))return h(t);var r=H(e.body);if(!A(r))return I(r,t);r.Value!==m&&(t=r.Value)}}(e))}throw new SyntaxError("Unsupported node type `".concat(e.type,"`"))}function W(){return j[j.length-1]}function q(e,t){return t||(t=W().LexicalEnvironment),R(t,e,!0)}function K(e){return"break"===e.Type?e.Value===m?h(void 0):h(e.Value):e}function z(e,t){return t===P(H(e.test))}function G(e,t,r,n){var a;for(J(n);;){if(e&&!P(H(e)))return h(a);var o=H(r);if(!A(o))return I(o,a);o.Value&&(a=o.Value),J(n),t&&P(H(t))}}function J(e){if(0!==e.length){var t=W().LexicalEnvironment,r=t.OuterEnv,n=new i(r);for(var a of e){n.CreateMutableBinding(a,!1);var o=t.GetBindingValue(a,!1);n.InitializeBinding(a,o)}W().LexicalEnvironment=n}}function Y(e,t){if("ObjectPattern"===e.type)return T(t),e.properties.length>0&&function(e,t){var r=new Set;for(var n of e)if("Property"===n.type){var a=n.computed||"Identifier"!==n.key.type?se(n.key):n.key.name,o="AssignmentPattern"===n.value.type?n.value.left:n.value;if("Identifier"===o.type){var i=q(o.name),s=C(t,a);"AssignmentPattern"===n.value.type&&void 0===s&&(s=P(H(n.value.right))),Z(i,s),r.add(a)}else Q(n.value,t,a),r.add(a)}else X(n,t,r)}(e.properties,t),h(m);var r=O(t);return function(e,t){var r=h(m);for(var n of e)if(n){var a="RestElement"===n.type?n.argument:"AssignmentPattern"===n.type?n.left:n,o="ArrayPattern"===a.type||"ObjectPattern"===a.type,i=void 0;o||(i=H(a).Value);var s=void 0;if("RestElement"!==n.type){var{done:l,value:c}=t.next(),u=l?void 0:c;s="AssignmentPattern"===n.type&&void 0===u?P(H(n.right)):u}else{s=[];for(var d=0;;){var{done:p,value:f}=t.next();if(p)break;s[d]=f,d++}}r=o?Y(a,s):Z(i,s)}else t.next(),r=h(m);return r}(e.elements,r)}function Q(e,t,r){var n,a="AssignmentPattern"===e.type?e.left:e,o="ArrayPattern"===a.type||"ObjectPattern"===a.type;o||(n=H(a).Value);var i,s=C(t,r);return i="AssignmentPattern"===e.type&&void 0===s?P(H(e.right)):s,o?Y(a,i):Z(n,i)}function X(e,t,r){return Z(H(e.argument).Value,S({},t,r))}function ee(e,t){var r=b(e,{var:!1,topLevel:!1});for(var n of r){var a="VariableDeclaration"===n.type&&"const"===n.kind;for(var o of g(n))a?t.CreateImmutableBinding(o,!0):t.CreateMutableBinding(o,!1);if("FunctionDeclaration"===n.type){var[i]=g(n),s=ae(n,t);t.InitializeBinding(i,s)}}}function te(e,r,n,a){var o;r instanceof f&&E(r)&&(o=r.Base);var i=re(n);if("function"!=typeof e){var s=t.substring(a.start,a.end);throw new TypeError("".concat(s," is not a function"))}var l=e.apply(o,i);return M(l),h(l)}function re(e){var t=[];if(Array.isArray(e))for(var r of e)if("SpreadElement"===r.type){var n=P(H(r.argument));t.push(...n)}else t.push(P(H(r)));else for(var a of(t.push(function(e){var t=$.get(e);if(t)return t;var r=e.quasis.map((e=>e.value.raw)),n=e.quasis.map((e=>e.value.cooked));return Object.freeze(r),Object.defineProperty(n,"raw",{value:r,writable:!1,enumerable:!1,configurable:!1}),Object.freeze(n),$.set(e,n),n}(e)),e.expressions))t.push(P(H(a)));return t}function ne(e){var t=h(m);for(var r of e){var n=H(r);if("normal"!==n.Type)return n;t=I(t,n.Value)}return t}function ae(e,t){return oe(e,t,!0)}function oe(e,t,r){var o=function(){return function(e,t){var r;null===(r=L.beforeCall)||void 0===r||r.call(L,e[l]),function(e){var t=new a;t.Function=e;var r=new s(e[d]);t.VariableEnvironment=r,t.LexicalEnvironment=r,j.push(t)}(e);var o=function(e,t){return function(e,t,r){return function(e,t){for(var r=W(),a=e[u],o=e[c],s=g(o),l=y(o),d=b(a,{var:!0,topLevel:!0}),p=g(d),f=[],v=[],h=d.length-1;h>=0;h--){var m=d[h];if("FunctionDeclaration"===m.type){de(m);var[E]=g(m);f.includes(E)||(f.unshift(E),v.unshift(m))}else if(null!=n&&n.noVar)throw new SyntaxError("Var declaration is not recommended, use `let` or `const` instead")}var w,S=r.LexicalEnvironment;for(var k of s)S.CreateMutableBinding(k,!1);if(ce(o,O(t),S),l)for(var A of(w=new i(S),r.VariableEnvironment=w,p)){w.CreateMutableBinding(A,!1);var I=void 0;s.includes(A)&&!f.includes(A)&&(I=S.GetBindingValue(A,!1)),w.InitializeBinding(A,I)}else{for(var P of p)s.includes(P)||(S.CreateMutableBinding(P,!1),S.InitializeBinding(P,void 0));w=S}var x=w;r.LexicalEnvironment=x;var C=b(a,{var:!1,topLevel:!0});for(var Z of C)for(var T of g(Z))"const"===Z.kind?x.CreateImmutableBinding(T,!0):x.CreateMutableBinding(T,!1);for(var R of v){var[B]=g(R),L=ae(R,x);w.SetMutableBinding(B,L,!1)}}(t,r),Array.isArray(e)?ne(e):new v("return",P(H(e)))}(e[u],e,t)}(e,t);if(j.pop(),"return"===o.Type)return o.Value}(o,arguments)};return Object.defineProperties(o,{[l]:{value:e},[c]:{value:e.params},[u]:{value:"BlockStatement"===e.body.type?e.body.body:e.body},[d]:{value:t},[p]:{value:r}}),o}function ie(e,t,r){switch(e.type){case"Identifier":return function(e,t,r){return r.InitializeBinding(e,t),h(m)}(e.name,t,r);case"ObjectPattern":return T(t),function(e,t,r){var n=new Set;for(var a of e){if("RestElement"===a.type)return le(a,t,r,n);if(a.computed||"Identifier"!==a.key.type){var o=se(a.key);ue(a.value,t,r,o),n.add(o)}else ue(a.value,t,r,a.key.name),n.add(a.key.name)}return h(m)}(e.properties,t,r);case"ArrayPattern":var n=O(t);return ce(e.elements,n,r)}}function se(e){return x(P(H(e)))}function le(e,t,r,n){var a=q(e.argument.name,r),o=S({},t,n);return r?w(a,o):Z(a,o)}function ce(e,t,r){if(0===e.length)return h(m);var n;for(var a of e)if(a)if("RestElement"===a.type)if("Identifier"===a.argument.type)for(var o=q(a.argument.name,r),i=[],s=0;;){var{done:l,value:c}=t.next();if(l){n=r?w(o,i):Z(o,i);break}i[s]=c,s++}else for(var u=[],d=0;;){var{done:p,value:f}=t.next();if(p){n=ie(a.argument,u,r);break}u[d]=f,d++}else{var v="AssignmentPattern"===a.type?a.left:a;switch(v.type){case"ObjectPattern":case"ArrayPattern":var g=void 0,{done:y,value:b}=t.next();y||(g=b),"AssignmentPattern"===a.type&&void 0===g&&(g=P(H(a.right))),n=ie(v,g,r);break;case"Identifier":var E=q(v.name,r),S=void 0,{done:k,value:A}=t.next();k||(S=A),"AssignmentPattern"===a.type&&void 0===S&&(S=P(H(a.right))),n=r?w(E,S):Z(E,S)}}else t.next(),n=h(m);return n}function ue(e,t,r,n){if("Identifier"===e.type||"AssignmentPattern"===e.type&&"Identifier"===e.left.type){var a=q("Identifier"===e.type?e.name:e.left.name,r),o=C(t,n);return"AssignmentPattern"===e.type&&void 0===o&&(o=P(H(e.right))),r?w(a,o):Z(a,o)}var i=C(t,n);return"AssignmentPattern"===e.type&&void 0===i&&(i=P(H(e.right))),ie("AssignmentPattern"===e.type?e.left:e,i,r)}function de(e){if(e.async||e.generator)throw new SyntaxError("".concat(e.async?"Async":"Generator"," function is not allowed"));if(F&&!e.expression)throw new SyntaxError("Only an `Expression` is allowed in `ArrowFunctionExpression`'s body")}if(F)return P(H(e));null===(r=L.beforeEvaluate)||void 0===r||r.call(L,e),de(e);var[pe]=g(e);U.CreateImmutableBinding(pe,!0);var fe=ae(e,U);return U.InitializeBinding(pe,fe),fe}var U=r(3028);class N{constructor(){(0,n.Z)(this,"VariableEnvironment",void 0),(0,n.Z)(this,"LexicalEnvironment",void 0)}}class j{constructor(e){(0,n.Z)(this,"OuterEnv",void 0),(0,n.Z)(this,"bindingSet",new Set),this.OuterEnv=e}HasBinding(e){return this.bindingSet.has(e)}CreateBinding(e){this.bindingSet.add(e)}}function V(e){var{expressionOnly:t,visitors:r,withParent:n,hooks:a={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=new Set,i=[],s=new j(null),l=new N;function c(){return i[i.length-1]}function u(e,t,r){for(var n of t)d(e[n],null==r?void 0:r.concat({node:e,key:n}))}function d(e,n){if(Array.isArray(e))e.forEach(((e,t)=>{d(e,n?n.slice(0,-1).concat((0,U.Z)((0,U.Z)({},n[n.length-1]),{},{index:t})):n)}));else if(e){var i,s;switch(null===(i=a.beforeVisit)||void 0===i||i.call(a,e,n),function(e){var t,n;r&&(t=r,n=e.type,Object.prototype.hasOwnProperty.call(t,n))&&r[e.type](e)}(e),e.type){case"Identifier":var l;return D=e.name,void(f(c().LexicalEnvironment,D)||(null===(l=a.beforeVisitGlobal)||void 0===l||l.call(a,e,n),o.add(e.name)));case"ArrayExpression":case"ArrayPattern":return void u(e,["elements"],n);case"ArrowFunctionExpression":return void h(m(e,c().LexicalEnvironment),n);case"AssignmentPattern":case"BinaryExpression":case"LogicalExpression":return void u(e,["left","right"],n);case"CallExpression":case"NewExpression":return void u(e,["callee","arguments"],n);case"ChainExpression":return void u(e,["expression"],n);case"ConditionalExpression":return void u(e,["test","consequent","alternate"],n);case"MemberExpression":return u(e,["object"],n),void(e.computed&&u(e,["property"],n));case"ObjectExpression":case"ObjectPattern":return void u(e,["properties"],n);case"Property":return e.computed&&u(e,["key"],n),void u(e,["value"],n);case"RestElement":case"SpreadElement":case"UnaryExpression":return void u(e,["argument"],n);case"SequenceExpression":case"TemplateLiteral":return void u(e,["expressions"],n);case"TaggedTemplateExpression":return void u(e,["tag","quasi"],n);case"Literal":return}if(!t)switch(e.type){case"AssignmentExpression":return void u(e,["right","left"],n);case"BlockStatement":if(!e.body.length)return;var y=c(),b=y.LexicalEnvironment,E=new j(b);return v(e.body,E),y.LexicalEnvironment=E,u(e,["body"],n),void(y.LexicalEnvironment=b);case"BreakStatement":case"ContinueStatement":case"EmptyStatement":return;case"CatchClause":var w=c(),S=w.LexicalEnvironment,k=new j(S);return p(e.param,k),w.LexicalEnvironment=k,u(e,["param","body"],n),void(w.LexicalEnvironment=S);case"DoWhileStatement":return void u(e,["body","test"],n);case"ExpressionStatement":case"TSAsExpression":return void u(e,["expression"],n);case"ForInStatement":case"ForOfStatement":var A="VariableDeclaration"===e.left.type&&"var"!==e.left.kind,I=c(),P=I.LexicalEnvironment;if(A){var x=new j(P);p(e.left,x),I.LexicalEnvironment=x}if(u(e,["right"],n),I.LexicalEnvironment=P,A){var C=new j(P);p(e.left,C),I.LexicalEnvironment=C}return u(e,["left","body"],n),void(I.LexicalEnvironment=P);case"ForStatement":var Z,O="VariableDeclaration"===(null===(Z=e.init)||void 0===Z?void 0:Z.type)&&"var"!==e.init.kind,T=c(),R=T.LexicalEnvironment;if(O){var B=new j(R);p(e.init,B),T.LexicalEnvironment=B}return u(e,["init","test","body","update"],n),void(T.LexicalEnvironment=R);case"FunctionDeclaration":var[L]=g(e),M=c().LexicalEnvironment,_=m(e,M);return M.CreateBinding(L),void h(_,n);case"FunctionExpression":return void h(function(e){var t=c().LexicalEnvironment;if(!e.id)return m(e,t);var r=e.id.name,n=new j(t);return n.CreateBinding(r),m(e,n)}(e),n);case"IfStatement":return void u(e,["test","consequent","alternate"],n);case"ReturnStatement":case"ThrowStatement":case"UpdateExpression":return void u(e,["argument"],n);case"SwitchCase":return void u(e,["test","consequent"],n);case"SwitchStatement":u(e,["discriminant"],n);var F=c(),N=F.LexicalEnvironment,V=new j(N);return v(e.cases,V),F.LexicalEnvironment=V,u(e,["cases"],n),void(F.LexicalEnvironment=N);case"TryStatement":return void u(e,["block","handler","finalizer"],n);case"VariableDeclaration":return void u(e,["declarations"],n);case"VariableDeclarator":return void u(e,["id","init"],n);case"WhileStatement":return void u(e,["test","body"],n)}(null===(s=a.beforeVisitUnknown)||void 0===s?void 0:s.call(a,e,n))||console.warn("Unsupported node type `".concat(e.type,"`"))}var D}function p(e,t){for(var r of g(e))t.CreateBinding(r)}function f(e,t){return!!e&&(e.HasBinding(t)||f(e.OuterEnv,t))}function v(e,t){p(b(e,{var:!1,topLevel:!1}),t)}function h(e,t){var r,n,a;r=e,n=new N,a=new j(r.Environment),n.VariableEnvironment=a,n.LexicalEnvironment=a,i.push(n),function(e,t){var r,n=c(),a=e.ECMAScriptCode,o=e.FormalParameters,i=y(o),s=g(b(a,{var:!0,topLevel:!0})),l=n.LexicalEnvironment;if(p(o,l),d(o,null==t?void 0:t.concat({node:e.Function,key:"params"})),i)for(var u of(r=new j(l),n.VariableEnvironment=r,s))r.CreateBinding(u);else{for(var f of s)l.CreateBinding(f);r=l}var v=r;n.LexicalEnvironment=v,p(b(a,{var:!1,topLevel:!0}),v)}(e,t),d(e.ECMAScriptCode,null==t?void 0:t.concat({node:e.Function,key:"body"}).concat("BlockStatement"===e.Function.body.type?{node:e.Function.body,key:"body"}:[])),i.pop()}function m(e,t){return{Function:e,FormalParameters:e.params,ECMAScriptCode:"BlockStatement"===e.body.type?e.body.body:e.body,Environment:t}}return l.VariableEnvironment=s,l.LexicalEnvironment=s,i.push(l),d(e,n?[]:void 0),o}var D=r(2159),$=r(8242),H=["typescript"];function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{typescript:r}=t,n=(0,D.Z)(t,H),a=function(e){var{typescript:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,$.parse)(e,{plugins:["estree",t&&"typescript"].filter(Boolean),strictMode:!0,attachComment:!1}).program.body,n=t?[]:r;if(t)for(var a of r)if(a.type.startsWith("TS")){if(/Enum|Import|Export/.test(a.type))throw new SyntaxError("Unsupported TypeScript syntax: ".concat(a.type))}else n.push(a);if(0===n.length)throw new SyntaxError("Function declaration not found");if(n.length>1||"FunctionDeclaration"!==n[0].type)throw new SyntaxError("Expect a single function declaration at top level, but received: ".concat(n.map((e=>'"'.concat(e.type,'"'))).join(", ")));return n[0]}(e,{typescript:r});return{function:a,attemptToVisitGlobals:V(a,n)}}function q(e,t){var r=[],n=e.replace(/^\s*<%[~=]?\s|\s%>\s*$/g,(e=>(r.push(e),""))),a=function(e){return(0,$.parseExpression)(e,{plugins:["estree",["pipelineOperator",{proposal:"minimal"}]],attachComment:!1})}(n);return{expression:a,attemptToVisitGlobals:V(a,(0,U.Z)((0,U.Z)({},t),{},{expressionOnly:!0})),source:n,prefix:r[0],suffix:r[1]}}function K(e){return/^\s*<%[~=]?\s/.test(e)&&/\s%>\s*$/.test(e)}function z(e){return/^\s*<%~\s/.test(e)}function G(e){return/^\s*<%=\s/.test(e)&&/\s%>\s*$/.test(e)}},3075:(e,t,r)=>{r.r(t),r.d(t,{HttpAbortError:()=>H,HttpFetchError:()=>V,HttpParseError:()=>$,HttpResponseError:()=>D,createHttpInstance:()=>K,defaultAdapter:()=>z,fetch:()=>j,http:()=>W,isHttpAbortError:()=>q});var n={};r.r(n),r.d(n,{HttpAbortError:()=>g,HttpFetchError:()=>v,HttpParseError:()=>m,HttpResponseError:()=>h,createHttpInstance:()=>U,defaultAdapter:()=>Z,fetch:()=>a,getUrlWithParams:()=>x,http:()=>F,isHttpAbortError:()=>I});var a=(e,t)=>{var r=new Request(e,Object.assign({credentials:"same-origin"},t));return self.fetch(r)},o=r(5866),i=r(3395),s=r(6666),l=r(687),c=r(6171),u=r(381),d=r(3028),p=r(2159),f=r(4795);class v extends Error{constructor(e){super(e),this.name="HttpFetchError",Error.captureStackTrace&&Error.captureStackTrace(this,v)}}class h extends Error{constructor(e,t){super(e.statusText),(0,s.Z)(this,"response",void 0),(0,s.Z)(this,"responseJson",void 0),this.name="HttpResponseError",Error.captureStackTrace&&Error.captureStackTrace(this,h),this.response=e,this.responseJson=t}}class m extends Error{constructor(e){super(e.statusText),(0,s.Z)(this,"response",void 0),this.name="HttpParseError",Error.captureStackTrace&&Error.captureStackTrace(this,m),this.response=e}}class g extends Error{constructor(e){super(e),this.name="HttpAbortError"}}class y{constructor(){(0,s.Z)(this,"handlers",[])}use(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}forEach(e){this.handlers.forEach((t=>{null!==t&&e(t)}))}}var b=["params","responseType","interceptorParams","observe","noAbortOnRouteChange","useCache"],E=["params","headers","responseType","interceptorParams","observe","noAbortOnRouteChange","useCache"],w=["body","method"];function S(e){return null==e}var k=document.querySelector("base"),A=k?k.href:location.origin+"/",I=e=>e instanceof DOMException&&20===e.code,P=function(){var e=(0,f.Z)((function*(e,t,r){return new Promise(function(){var n=(0,f.Z)((function*(n,o){var i;r.url=e;var{responseType:s}=r.options||{};s||(s="json");try{i=yield a(e,t)}catch(e){return void o(I(e)?new g(e.toString()):new v(e.toString()))}if(i.ok){var l;try{l=yield i[s]()}catch(e){return void o(I(e)?new g(e.toString()):new m(i))}n({status:i.status,statusText:i.statusText,headers:i.headers,data:l})}else{var c;try{c=yield i.json()}catch(e){}o(new h(i,c))}}));return function(e,t){return n.apply(this,arguments)}}())}));return function(t,r,n){return e.apply(this,arguments)}}(),x=(e,t)=>{if(t){var r=new URL(e,A);t instanceof URLSearchParams?t.forEach((function(e,t){r.searchParams.append(t,e)})):Object.entries(t).forEach((e=>{var[t,n]=e;Array.isArray(n)?n.forEach((e=>{r.searchParams.append(t,S(e)?"":e)})):r.searchParams.append(t,S(n)?"":n)}));var{href:n}=r;return n.startsWith(A)?n.substr(A.length):n}return e},C=(e,t)=>{if(void 0!==e){var r=new Headers(t||{}),n="Content-Type",a=e;return r.has(n)||("string"==typeof e?r.set(n,"application/x-www-form-urlencoded"):e instanceof FormData||(r.set(n,"application/json"),a=JSON.stringify(e))),{body:a,headers:r}}return{headers:t}},Z=e=>{var{url:t,method:r,data:n}=e;return["DELETE","GET","HEAD"].includes(e.method)?((e,t,r)=>{var n=r.options||{},{params:a,responseType:o,interceptorParams:i,observe:s,noAbortOnRouteChange:l,useCache:c}=n,u=(0,p.Z)(n,b);return P(x(t,a),(0,d.Z)((0,d.Z)({},u),{},{method:e}),r)})(r,t,e):((e,t,r,n)=>{var a=n.options||{},{params:o,headers:i,responseType:s,interceptorParams:l,observe:c,noAbortOnRouteChange:u,useCache:f}=a,v=(0,p.Z)(a,E);return P(x(t,o),(0,d.Z)((0,d.Z)({},v),{},{method:e},C(r,i)),n)})(r,t,n,e)},O=new WeakMap,T=new WeakSet;class R{constructor(e){var t=this;(0,o.Z)(this,T),(0,s.Z)(this,"interceptors",void 0),(0,i.Z)(this,O,{writable:!0,value:Z}),(0,s.Z)(this,"request",function(){var e=(0,f.Z)((function*(e,r,n){var a=r||{},{body:o,method:i}=a,s=(0,p.Z)(a,w);return(0,c.Z)(t,T,B).call(t,{url:e,data:o,method:i||"GET",options:(0,d.Z)((0,d.Z)({},n||{}),s)})}));return function(t,r,n){return e.apply(this,arguments)}}()),(0,s.Z)(this,"simpleRequest",(function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,c.Z)(t,T,B).call(t,{url:r,method:e,options:n})})),(0,s.Z)(this,"requestWithBody",(function(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,c.Z)(t,T,B).call(t,{url:r,method:e,data:n,options:a})})),this.interceptors={request:new y,response:new y},null!=e&&e.adapter&&(0,u.Z)(this,O,e.adapter)}getUrlWithParams(e,t){return x(e,t)}getBodyAndHeaders(e,t){return C(e,t)}get(e,t){return(0,c.Z)(this,T,B).call(this,{url:e,method:"GET",options:t})}delete(e,t){return(0,c.Z)(this,T,B).call(this,{url:e,method:"DELETE",options:t})}head(e,t){return(0,c.Z)(this,T,B).call(this,{url:e,method:"HEAD",options:t})}post(e,t,r){return(0,c.Z)(this,T,B).call(this,{url:e,method:"POST",data:t,options:r})}put(e,t,r){return(0,c.Z)(this,T,B).call(this,{url:e,method:"PUT",data:t,options:r})}patch(e,t,r){return(0,c.Z)(this,T,B).call(this,{url:e,method:"PATCH",data:t,options:r})}}function B(e){var t=[],r=Promise.resolve(e);for(this.interceptors.request.forEach((e=>{t.push(e.fulfilled,e.rejected)})),t.push((e=>(0,l.Z)(this,O).call(this,e)),void 0),this.interceptors.response.forEach((r=>{t.push((t=>{var n;return null===(n=r.fulfilled)||void 0===n?void 0:n.call(r,t,e)}),(t=>{var n;return null===(n=r.rejected)||void 0===n?void 0:n.call(r,t,e)}))})),t.push((t=>{var r;return"response"===(null===(r=e.options)||void 0===r?void 0:r.observe)?t:t.data}),void 0);t.length;)r=r.then(t.shift(),t.shift());return r}var L,M,_,F=new R;function U(e){F=new R(e)}var{dll:N}=window;M=N&&null!==(L=window.BRICK_NEXT_VERSIONS)&&void 0!==L&&null!==(L=L["brick-container"])&&void 0!==L&&L.startsWith("2.")&&(_=N("JxWY"))?_:n;var{fetch:j,HttpFetchError:V,HttpResponseError:D,HttpParseError:$,HttpAbortError:H,http:W,isHttpAbortError:q,createHttpInstance:K,defaultAdapter:z}=M},7257:(e,t,r)=>{r.r(t),r.d(t,{i18n:()=>d,i18nText:()=>u,initializeI18n:()=>l});var n=r(8974),a=r(206),o=r(6473),i=!1,s=new Set;function l(e,t){if(i||(i=!0,a.i18n.use(o.default).init({fallbackLng:"zh",debug:!1,supportedLngs:["zh","en"],nonExplicitSupportedLngs:!0,interpolation:{escapeValue:!1},react:{useSuspense:!1},compatibilityJSON:"v3",resources:{}})),e&&t&&!s.has(e))for(var[r,n]of(s.add(e),Object.entries(t)))a.i18n.addResourceBundle(r,e,n)}var c=r(5905);function u(e){var t;if(e){var r=null!==(t=a.i18n.language)&&void 0!==t?t:"zh-CN";if((0,c.hasOwnProperty)(e,r))return e[r];var n=r.split("-")[0];if(n!==r)return(0,c.hasOwnProperty)(e,n)?e[n]:void 0;var o="".concat(n,"-");for(var i of Object.keys(e))if(i.startsWith(o))return e[i]}}var d=n.default},9461:(e,t,r)=>{r.r(t),r.d(t,{inject:()=>k,transform:()=>S,transformAndInject:()=>A});var n=r(5178),a=r(4701),o=function(e){return e[e.Initial=0]="Initial",e[e.ExpectField=1]="ExpectField",e[e.ExpectOptionalBeginDefault=2]="ExpectOptionalBeginDefault",e[e.ExpectDefaultValue=3]="ExpectDefaultValue",e[e.ExpectOptionalBeginPipe=4]="ExpectOptionalBeginPipe",e[e.ExpectPipeIdentifier=5]="ExpectPipeIdentifier",e[e.ExpectOptionalBeginPipeParameter=6]="ExpectOptionalBeginPipeParameter",e[e.ExpectPipeParameter=7]="ExpectPipeParameter",e[e.ExpectPlaceholderEnd=8]="ExpectPlaceholderEnd",e}({}),i=function(e){return e.Raw="Raw",e.BeginPlaceHolder="BeginPlaceHolder",e.Field="Field",e.BeginDefault="BeginDefault",e.LiteralString="LiteralString",e.BeginPipe="BeginPipe",e.PipeIdentifier="PipeIdentifier",e.BeginPipeParameter="BeginPipeParameter",e.EndPlaceHolder="EndPlaceHolder",e.JsonValue="JsonValue",e}({}),s=function(e){return e[e.Array=0]="Array",e[e.Object=1]="Object",e[e.String=2]="String",e[e.Others=3]="Others",e}({});function l(e){return new RegExp("(".concat([].concat(e).map((e=>(0,n.escapeRegExp)(e))).join("|"),")\\{"))}function c(e){var t,r=w(e),n=null===(t=r.match(e.beginPlaceholder))||void 0===t?void 0:t[0],a=n?r.indexOf(n):-1;if(a>=0&&n&&"{"!==r.charAt(a+n.length)){var s=e.cursor+a;a>0&&e.tokens.push({type:i.Raw,value:r.substring(0,a)}),e.tokens.push({type:i.BeginPlaceHolder,loc:{start:s,end:s+n.length},value:n.substring(0,n.length-1)}),e.cursor+=a+n.length,e.status=o.ExpectField}else e.tokens.push({type:i.Raw,value:r}),e.cursor=e.raw.length}function u(e){e.cursor+=w(e).match(/^[ \r\n\t]*/)[0].length}function d(e){var[t]=w(e).match(/^(?:[\*\x2D\.0-9A-\[\]_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*/);e.tokens.push({type:i.Field,value:t}),e.cursor+=t.length,e.status=o.ExpectOptionalBeginDefault}function p(e){"="===w(e).charAt(0)?(e.tokens.push({type:i.BeginDefault}),e.cursor+=1,e.status=o.ExpectDefaultValue):e.status=o.ExpectOptionalBeginPipe}function f(e){E(e,o.ExpectOptionalBeginPipe)}function v(e){"|"===w(e).charAt(0)?(e.tokens.push({type:i.BeginPipe}),e.cursor+=1,e.status=o.ExpectPipeIdentifier):e.status=o.ExpectPlaceholderEnd}function h(e){var t=w(e).match(/^[a-zA-Z]\w*/);if(!t)throw new Error("Expected a pipe identifier at index ".concat(e.cursor," near: ").concat(JSON.stringify(e.raw.substring(e.cursor))));var r=t[0];e.tokens.push({type:i.PipeIdentifier,value:r}),e.cursor+=r.length,e.status=o.ExpectOptionalBeginPipeParameter}function m(e){":"===w(e).charAt(0)?(e.tokens.push({type:i.BeginPipeParameter}),e.cursor+=1,e.status=o.ExpectPipeParameter):e.status=o.ExpectOptionalBeginPipe}function g(e){E(e,o.ExpectOptionalBeginPipeParameter)}function y(e){if("}"!==w(e).charAt(0))throw new Error("Expected a placeholder end '}' at index ".concat(e.cursor," near: ").concat(JSON.stringify(e.raw.substring(e.cursor))));e.tokens.push({type:i.EndPlaceHolder,loc:{start:e.cursor,end:e.cursor+1}}),e.cursor+=1,e.status=o.Initial}var b=new Map([["false",!1],["null",null],["true",!0]]);function E(e,t){var r=w(e);if(/[0-9[{"]/.test(r.charAt(0))||/-[0-9]/.test(r.substring(0,2)))!function(e,t){for(var r=w(e),n=r.charAt(0),a="["===n?s.Array:"{"===n?s.Object:'"'===n?s.String:s.Others,o=0,l=0,c=0,u=!1,d=!1,p=!1;o<r.length;){var f=r.charAt(o);if(d)d=!1;else if(u)'"'===f?u=!1:"\\"===f&&(d=!0);else switch(f){case"[":c+=1;break;case"{":l+=1;break;case"]":c-=1;break;case"}":l-=1;break;case'"':u=!0}switch(o+=1,a){case s.Array:p=!c;break;case s.Object:p=!l;break;case s.String:p=!u;break;default:p=o<r.length&&/[^a-z0-9E.+-]/.test(r.charAt(o))}if(p)break}if(!p)throw new Error("Failed to match a JSON value at index ".concat(e.cursor," near: ").concat(JSON.stringify(e.raw.substring(e.cursor))));e.tokens.push({type:i.JsonValue,value:JSON.parse(r.substring(0,o))}),e.cursor+=o,e.status=t}(e,t);else{var[n]=w(e).match(/^(?:[\x2D0-9A-Z_a-z\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*/);b.has(n)?e.tokens.push({type:i.JsonValue,value:b.get(n)}):e.tokens.push({type:i.LiteralString,value:n}),e.cursor+=n.length,e.status=t}}function w(e){return e.raw.substring(e.cursor)}function S(e,t){return I(e,"@",t)}function k(e,t){return I(e,"$",t)}function A(e,t){return I(e,["@","$"],t)}function I(e,t,r){if(!function(e,t){return l(t).test(e)}(e,t))return e;var s,b,E=(s=r.data,function(e){var t=e.field?(0,n.get)(s,e.field):s;return void 0===t&&(t=e.defaultValue),(0,a.processPipes)(t,e.pipes)}),w=function(e,t){return function(r){var o,i,s=r.field.match(/^(?:(QUERY(?:_ARRAY)?|EVENT|query|event|APP|HASH|ANCHOR|SYS|FLAGS|CTX)\.)?(.+)$/);if(!s)return t.substring(r.loc.start,r.loc.end);var l,[,c,u]=s;!c&&/^[A-Z_]+$/.test(u)&&(c=u,u="*");var d={SYS:"sys",FLAGS:"flags"};switch(c){case"QUERY":case"query":l="*"===u?e.query:e.query.has(u)?e.query.get(u):void 0;break;case"QUERY_ARRAY":l=e.query.has(u)?e.query.getAll(u):void 0;break;case"EVENT":case"event":if(void 0===e.event)return t.substring(r.loc.start,r.loc.end);l="*"===u?e.event:(0,n.get)(e.event,u);break;case"APP":l="*"===u?null!==(o=e.overrideApp)&&void 0!==o?o:e.app:(0,n.get)(null!==(i=e.overrideApp)&&void 0!==i?i:e.app,u);break;case"HASH":l=e.location.hash;break;case"SYS":case"FLAGS":l="*"===u?e[d[c]]:(0,n.get)(e[d[c]],u);break;case"ANCHOR":var p=e.location.hash?e.location.hash.substr(1):null;l="*"===u?p:(0,n.get)(p,u);break;case"CTX":var f=t.substring(r.loc.start,r.loc.end);return console.error('CTX is not supported in placeholder any more: "'.concat(f,'"')),f;default:if(!e.match)return t.substring(r.loc.start,r.loc.end);l=e.match.params[u]}return void 0===l&&(l=r.defaultValue),(0,a.processPipes)(l,r.pipes)}}(r,e);return b=function(e,t){return function(e){var t,r={type:"InjectableString",elements:[]};function n(r){return r===e[0].type&&(t=e.shift(),!0)}function a(r){if(t=e.shift(),Array.isArray(r)?!r.includes(t.type):r!==t.type)throw new Error("Expected token: ".concat(r,", received token: ").concat(t.type))}for(;e.length>0;)if(n(i.Raw))r.elements.push({type:"RawString",value:t.value});else{a(i.BeginPlaceHolder);var o=t.loc.start,s=t.value;a(i.Field);var l={type:"Placeholder",symbol:s,field:t.value,defaultValue:void 0,pipes:[],loc:{start:o,end:o}};for(r.elements.push(l),n(i.BeginDefault)&&(a([i.JsonValue,i.LiteralString]),l.defaultValue=t.value);n(i.BeginPipe);){a(i.PipeIdentifier);var c={type:"PipeCall",identifier:t.value,parameters:[]};for(l.pipes.push(c);n(i.BeginPipeParameter);)a([i.JsonValue,i.LiteralString]),c.parameters.push(t.value)}a(i.EndPlaceHolder),l.loc.end=t.loc.end}return r}(function(e,t){for(var r={beginPlaceholder:l(t),raw:e,cursor:0,status:o.Initial,tokens:[]};r.cursor<e.length;)switch(r.status){case o.Initial:c(r);break;case o.ExpectField:u(r),d(r);break;case o.ExpectOptionalBeginDefault:u(r),p(r);break;case o.ExpectDefaultValue:u(r),f(r);break;case o.ExpectOptionalBeginPipe:u(r),v(r);break;case o.ExpectPipeIdentifier:u(r),h(r);break;case o.ExpectOptionalBeginPipeParameter:u(r),m(r);break;case o.ExpectPipeParameter:u(r),g(r);break;case o.ExpectPlaceholderEnd:u(r),y(r)}if(r.status!==o.Initial)throw new Error("Expected a placeholder end '}' at the end");return r.tokens}(e,t))}(e,t).elements.map((e=>"RawString"===e.type?e.value:"$"===e.symbol?w(e):E(e))),1===b.length?b[0]:b.join("")}},9519:(e,t,r)=>{r.r(t),r.d(t,{enqueueStableLoadBricks:()=>m,enqueueStableLoadProcessors:()=>g,flushStableLoadBricks:()=>h,loadBricksImperatively:()=>y,loadProcessorsImperatively:()=>E,loadScript:()=>i,loadSharedModule:()=>u,loadStyle:()=>s});var n=r(3028),a=new Map;function o(e,t,r,i){if(Array.isArray(t))return Promise.all(t.map((t=>o(e,t,r))));var s=r&&!/^https?:/.test(t)?"".concat(r).concat(t):t,l=a.get(s);if(l)return l;var c=new Promise(((t,r)=>{var a=()=>{window.dispatchEvent(new Event("request.end"))},o=document.createElement("style"===e?"link":"script");"script"===e?Object.assign(o,(0,n.Z)((0,n.Z)({type:"text/javascript",async:!0},i),{},{src:s})):Object.assign(o,(0,n.Z)((0,n.Z)({rel:"stylesheet"},i),{},{href:s})),o.onload=()=>{t(s),a()},o.onerror=e=>{r(e),a()};var l=document.currentScript||document.getElementsByTagName("script")[0];l.parentNode.insertBefore(o,l),window.dispatchEvent(new Event("request.start"))}));return a.set(s,c),c}function i(e,t,r){return o("script",e,t,r)}function s(e,t,r){return o("style",e,t,r)}var l,c=r(4795);function u(e,t){return d.apply(this,arguments)}function d(){return(d=(0,c.Z)((function*(e,t){yield r.I("default");var n=window[e];return yield n.init(r.S.default),(yield n.get(t))()}))).apply(this,arguments)}var p,f=!1,v=new Promise((e=>{l=e}));function h(){f||l()}function m(e,t){return C(P("bricks",e,t))}function g(e,t){return C(P("processors",e,t))}function y(e,t){return b.apply(this,arguments)}function b(){return(b=(0,c.Z)((function*(e,t){var r=P("bricks",e,t);return h(),C(r)}))).apply(this,arguments)}function E(e,t){var r=P("processors",e,t);return h(),C(r)}var w="v2-adapter.load-bricks";function S(e,t,r){var n=new Map,a=new Set,o=t=>{var i;if(!a.has(t)){var s,l,c;if(a.add(t),"processors"===e||t.includes(".")){[l,c]=t.split(".");var u="bricks/".concat("processors"===e?l.replace(/[A-Z]/g,(e=>"-".concat(e[0].toLocaleLowerCase()))).replace(/_[0-9]/g,(e=>"-".concat(e[1]))):l);s=r.get(u)}else for(var d of(c=t,r.values())){var p;if(null!==(p=d.elements)&&void 0!==p&&p.some((e=>e===c))){s=d;break}}if(s){var f=n.get(s);f||(f=[],n.set(s,f)),f.push({fullName:t,lastName:c});var v=null===(i=s.dependencies)||void 0===i?void 0:i[t];if(v)for(var h of v)o(h)}else console.error("Package for ".concat(t," not found."))}};for(var i of t)o(i);return n}function k(e,t,r){return A.apply(this,arguments)}function A(){return(A=(0,c.Z)((function*(e,t,r){var n="".concat("processors"===e?"./processors/":"./").concat(r.lastName);try{yield u(t,n)}catch(t){throw console.error(t),new Error("Load ".concat(e,' of "').concat(r.fullName,'" failed'))}}))).apply(this,arguments)}function I(e,t,r){return t.map(function(){var t=(0,c.Z)((function*(t){var n;return yield i(t.filePath,null!==(n=window.PUBLIC_ROOT)&&void 0!==n?n:""),yield v,Promise.all(r.get(t).map((r=>k(e,t.id,r))))}));return function(e){return t.apply(this,arguments)}}())}function P(e,t,r){return x.apply(this,arguments)}function x(){return x=(0,c.Z)((function*(e,t,r){var n=new Map;for(var a of r){var o,s=null!==(o=a.id)&&void 0!==o?o:O(a.filePath);n.set(s,a)}var u,d,v=S(e,t,n),h=[],m=[];for(var g of v.keys())g.id?"bricks/basic"===g.id?u=g:m.push(g):(h.push(g),(d=n.get("bricks/v2-adapter"))||console.error("Using v2 bricks, but v2-adapter not found"));var y,b=d,E=u;if(E){var A,P=i(E.filePath,null!==(A=window.PUBLIC_ROOT)&&void 0!==A?A:"");f||(f=!0,P.then((()=>Promise.resolve())).then(l)),y=P.then((()=>Promise.all(v.get(E).map((t=>k(e,E.id,t))))))}var x=[y].concat(I(e,m,v));if(b&&h.length>0){if(!p){var C=S("bricks",[w],n),Z=[...C.keys()],T=function(){var e=(0,c.Z)((function*(){return yield Promise.all(I("bricks",Z,C)),document.createElement(w)}));return function(){return e.apply(this,arguments)}}();p=T()}x.push(p.then((t=>Promise.all(h.map((n=>{var a=O(n.filePath).split("/")[1];return t.resolve(b.filePath,n.filePath,"bricks"===e?v.get(n).map((e=>"".concat(a,".").concat(e.lastName))):[],n.dll,r)}))))))}yield Promise.all(x)})),x.apply(this,arguments)}function C(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,c.Z)((function*(e){window.dispatchEvent(new Event("request.start"));try{yield e}finally{window.dispatchEvent(new Event("request.end"))}}))).apply(this,arguments)}function O(e){return e.split("/").slice(0,2).join("/")}},2666:(e,t,r)=>{r.r(t),r.d(t,{pipes:()=>n.pipes,processPipes:()=>o,utils:()=>n.utils});var n=r(665),a=new Map(Array.from(Object.entries(n.pipes)));function o(e,t){if(0===t.length)return e;var r=e;for(var n of t){var o=a.get(n.identifier);if(!o)return void console.warn("Unknown pipe: ".concat(n.identifier));r=o(r,...n.parameters)}return r}},3681:(e,t,r)=>{r.r(t),r.d(t,{Dialog:()=>Kt,Notification:()=>tr,StoryboardFunctionRegistryFactory:()=>he,__secret_internals:()=>n,__test_only:()=>{},applyTheme:()=>ne,authenticate:()=>La,batchSetAppsLocalTheme:()=>ae,checkIfByTransform:()=>Et,checkIfOfComputed:()=>yt,createHistory:()=>x,createRuntime:()=>Sa,customProcessors:()=>M,customTemplates:()=>Re,fetchByProvider:()=>Ua,getAuth:()=>Ma,getBasePath:()=>m,getCssPropertyValue:()=>ue,getCurrentMode:()=>le,getCurrentTheme:()=>re,getHistory:()=>C,getPageInfo:()=>Vn,getRuntime:()=>ka,getV2RuntimeFromDll:()=>P,handleHttpError:()=>er,httpErrorToString:()=>Gt,isLoggedIn:()=>Fa,isUnauthenticatedError:()=>Jt,logout:()=>_a,matchPath:()=>Rt,registerWidgetFunctions:()=>Fe,registerWidgetI18n:()=>j,setUIVersion:()=>Wn,unstable_createRoot:()=>ja});var n={};r.r(n),r.d(n,{getAddedContracts:()=>ao,getAllContextValues:()=>to,getBrickPackagesById:()=>ro,getContextValue:()=>eo,getRenderId:()=>no,legacyDoTransform:()=>Wa,mountUseBrick:()=>$a,renderUseBrick:()=>Va,unmountUseBrick:()=>Ha,updateSnippetPreviewSettings:()=>Qa,updateStoryboard:()=>qa,updateStoryboardByRoute:()=>Ka,updateStoryboardBySnippet:()=>Ya,updateStoryboardByTemplate:()=>za,updateTemplatePreviewSettings:()=>Ga});var a=r(3028),o=r(4795),i=r(5866),s=r(3395),l=r(6171),c=r(381),u=r(687),d=r(9161),p=r(9153),f=r(5905),v=r(8874),h=(r(8525),r(7857));function m(){var e=document.querySelector("base");return e?e.getAttribute("href"):"/"}var g=r(2159),y=r(5178);function b(e,t){var r=(0,y.orderBy)(e,(e=>{var t,r;return null!==(t=null===(r=e.app.homepage)||void 0===r?void 0:r.length)&&void 0!==t?t:0}),"desc");for(var n of r){var a=n.app.homepage;if("string"==typeof a&&"/"===a[0]&&E(a,t))return n}}function E(e,t){return"/"===e?t===e:"".concat(t.replace(/\/+$/,""),"/").startsWith("".concat(e.replace(/\/+$/,""),"/"))}function w(e){var t;return!e||(null===(t=ka().getCurrentApp())||void 0===t?void 0:t.id)!==e.app.id&&!window.STANDALONE_MICRO_APPS&&e.app.standaloneMode}var S,k=["extraQuery","clear","keepHash"],A=!1;function I(e,t){t(!(A=!confirm(e)))}function P(){var e,{dll:t}=window;if(t&&null!==(e=window.BRICK_NEXT_VERSIONS)&&void 0!==e&&null!==(e=e["brick-container"])&&void 0!==e&&e.startsWith("2."))return t("tYg3")}function x(){if(!S){var e=(0,h.createBrowserHistory)({basename:m().replace(/\/$/,""),getUserConfirmation:I});Object.assign(e,function(e){var t,{push:r,replace:n}=e;function o(e,t,n){A=!1,r(e,t),null==n||n(A)}function i(e,t,r){A=!1,n(e,t),null==r||r(A)}function s(t){return function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,{extraQuery:s,clear:l,keepHash:c}=n,u=(0,g.Z)(n,k),d=new URLSearchParams(l?"":e.location.search),p={};for(var[f,v]of(Object.assign(p,r,s),Object.entries(p)))if(Array.isArray(v))for(var h of(d.delete(f),v))d.append(f,h);else null==v||""===v?d.delete(f):d.set(f,v);("push"===t?o:i)("?".concat(d.toString()).concat(c?e.location.hash:""),u,a)}}return(0,a.Z)({pushQuery:s("push"),replaceQuery:s("replace"),pushAnchor:function(t,r,n){o((0,a.Z)((0,a.Z)({},e.location),{},{key:void 0,hash:t,state:(0,a.Z)({notify:!1},r)}),void 0,n)},reload:function(t){i((0,a.Z)((0,a.Z)({},e.location),{},{state:(0,a.Z)((0,a.Z)({},e.location.state),{},{notify:!0})}),void 0,t)},setBlockMessage:function(e){t=e},getBlockMessage:function(){return t},unblock:function(){t=void 0}},function(e){var{push:t,replace:r}=e;function n(n){return function(a,o,i){var s,l="string"==typeof a;return"string"==typeof(s=l?(0,h.parsePath)(a).pathname:a.pathname)&&s.startsWith("/")&&w(function(e){var t,r;return b(null!==(t=null===(r=ma)||void 0===r?void 0:r.storyboards)&&void 0!==t?t:[],e)}(s))?location["push"===n?"assign":"replace"](l?m()+a.substring(1):e.createHref(a)):("push"===n?t:r)(a,o,i)}}return{push:n("push"),replace:n("replace")}}((0,a.Z)((0,a.Z)({},e),{},{push:o,replace:i})))}(e)),S=e}return S}var C=function(){var e=P();if(e)return e.getHistory}()||function(){return S},Z=r(9304),O=r(3647),T=r(8599),R=r(2574),B=r(3051),L=new WeakMap,M=function(){var e=P();if(e)return Object.freeze({define:(t,r)=>e.getRuntime().registerCustomProcessor(t,r)})}()||new class{constructor(){(0,s.Z)(this,L,{writable:!0,value:new Map})}define(e,t){var[r,n]=e.split("."),a=(0,u.Z)(this,L).get(r);if(a||(a=new Map,(0,u.Z)(this,L).set(r,a)),a.has(n))throw new Error('Custom processor of "'.concat(e,'" already registered'));a.set(n,t)}get(e){return(0,u.Z)(this,L).get(e)}};function _(e){var{app:t,meta:r}=e;if(null!=r&&r.i18n){var n=F("app",t.id),a=[];return Object.entries(r.i18n).forEach((e=>{var[t,r]=e;d.i18n.addResourceBundle(t,n,r),a.push(t)})),()=>{for(var e of a)d.i18n.removeResourceBundle(e,n)}}}function F(e,t){return"".concat(e,"/").concat(t)}function U(e){return d.i18n.getFixedT(null,F("widget",e))}var N,j=function(){var e=P();if(e)return function(t,r){return e.getRuntime().registerWidgetI18n(t,r)}}()||function(e,t){var r=F("widget",e);Object.entries(t).forEach((e=>{var[t,n]=e;d.i18n.addResourceBundle(t,r,n)}))},V="brick-next-devtools-panel",D="devtools-frame-active-change",$="devtools-panel-change",H=!0;function W(e,t){var r=q();if(r&&("evaluation"!==e||H&&(!N||"Evaluations"===N))){var n=()=>{var n;null===(n=r.emit)||void 0===n||n.call(r,{type:e,payload:t})};"function"==typeof window.requestIdleCallback?window.requestIdleCallback(n):setTimeout(n,0)}}function q(){return window.__BRICK_NEXT_DEVTOOLS_HOOK__}var K=()=>{throw new Error("Can't modify read-only proxy object")},z={set:K,defineProperty:K,deleteProperty:K,setPrototypeOf:K};function G(e){return new Proxy(e,z)}function J(e){var{get:t,ownKeys:r}=e;return q()?G(Object.fromEntries(r(null).map((e=>[e,t(null,e,null)])))):new Proxy(Object.freeze({}),{get:t})}var Y="light",Q=new f.JsonStorage(localStorage),X="apps-theme";function ee(e){if("dark"!==e&&"light"!==e&&"dark-v2"!==e)throw new Error("Unsupported theme: ".concat(e));Y=e}function te(){return Y}function re(){return document.documentElement.dataset.theme}function ne(e){e?ee(e):e=te(),e!==re()&&(document.documentElement.dataset.theme=e,window.dispatchEvent(new CustomEvent("theme.change",{detail:e})))}function ae(e){Q.setItem(X,(0,a.Z)((0,a.Z)({},oe()),e))}function oe(){var e,t;try{t=Q.getItem(X)}catch(e){console.error("JSON parse error inside `getLocalAppsTheme()`")}return null!==(e=t)&&void 0!==e?e:{}}var ie="default";function se(e){if("dashboard"!==e&&"default"!==e)throw new Error("Unsupported mode: ".concat(e));ie=e}function le(){return document.documentElement.dataset.mode}function ce(e){e?se(e):e=ie,e!==le()&&(document.documentElement.dataset.mode=e,window.dispatchEvent(new CustomEvent("mode.change",{detail:e})))}function ue(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement;return r&&(null===(t=window.getComputedStyle(r))||void 0===t?void 0:t.getPropertyValue(e))||""}function de(e,t){var r={};for(var n of e){var a=pe(n,t);void 0!==a&&(r[n]=a)}return r}function pe(e,t){var r,n,a,{collectCoverage:o,widgetId:i,widgetVersion:s,app:l,appendI18nNamespace:c,storyboardFunctions:u,isStoryboardFunction:p}=t;switch(e){case"BASE_URL":return o?"/next":m().replace(/\/$/,"");case"FN":return u;case"IMG":return o?{get:e=>"mock/images/".concat(e)}:i?null==ya||null===(r=ya.images)||void 0===r?void 0:r.widgetImagesFactory(i,s):null==ya||null===(n=ya.images)||void 0===n?void 0:n.imagesFactory(l.id,l.isBuildPush,l.currentVersion);case"I18N":return o?y.identity:i?U(i):d.i18n.getFixedT(null,[c,F("app",l.id)].filter(Boolean));case"I18N_TEXT":return o?fe:d.i18nText;case"PERMISSIONS":return G({check:o?ve:null==ya||null===(a=ya.checkPermissions)||void 0===a?void 0:a.checkPermissions});case"THEME":return G({getTheme:o?()=>"light":te});case"console":return p?G(console):void 0;case"location":return o?{href:"http://localhost:3000/functions/test",origin:"http://localhost:3000",host:"localhost:3000",hostname:"localhost"}:{href:location.href,origin:location.origin,host:location.host,hostname:location.hostname}}}function fe(e){return null==e?void 0:e.en}function ve(){return!0}function he(){var e,{widgetId:t,widgetVersion:r,collectCoverage:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=new Map,i=new Proxy(Object.freeze({}),{get:(a,s)=>function(a){var s,l=o.get(a);if(l){if(l.processed)return l.cooked;n&&(s=n.createCollector(a));var c=(0,O.precookFunction)(l.source,{typescript:l.typescript,hooks:s&&{beforeVisit:s.beforeVisit}});return l.cooked=(0,O.cook)(c.function,l.source,{rules:{noVar:!0},globalVariables:(0,B.supply)(c.attemptToVisitGlobals,de(c.attemptToVisitGlobals,{collectCoverage:n,widgetId:t,widgetVersion:r,app:e,storyboardFunctions:i,isStoryboardFunction:!0}),!!n),hooks:s&&{beforeEvaluate:s.beforeEvaluate,beforeCall:s.beforeCall,beforeBranch:s.beforeBranch}}),l.processed=!0,l.cooked}}(s)});return{storyboardFunctions:i,registerStoryboardFunctions:function(t,r){if(r&&(e=r),o.clear(),Array.isArray(t))for(var a of t){var i=(0,T.collectMemberUsageInFunction)(a,"FN",!!n),s=(0,T.collectMemberUsageInFunction)(a,"PERMISSIONS",!!n).has("check");o.set(a.name,{source:a.source,typescript:a.typescript,deps:i,hasPermissionsCheck:s})}},updateStoryboardFunction(e,t){var r=(0,a.Z)((0,a.Z)({},t),{},{name:e}),n=(0,T.collectMemberUsageInFunction)(r,"FN",!0),i=(0,T.collectMemberUsageInFunction)(r,"PERMISSIONS",!0).has("check");o.set(e,{source:t.source,typescript:t.typescript,deps:n,hasPermissionsCheck:i})},checkPermissionsUsage(e){var t=new Set,r=e=>{if(!t.has(e)){t.add(e);var n=o.get(e);return!!n&&(n.hasPermissionsCheck||[...n.deps].some(r))}return!1};return e.some(r)}}}var{storyboardFunctions:me,registerStoryboardFunctions:ge,checkPermissionsUsage:ye}=he(),be=r(761),Ee=function(e){return e.xLarge="xLarge",e.large="large",e.medium="medium",e.small="small",e.xSmall="xSmall",e}({}),we=new Map([[Ee.xLarge,"1920px"],[Ee.large,"1600px"],[Ee.medium,"1280px"],[Ee.small,"1024px"],[Ee.xSmall,0]]),Se=new be.Z,ke={},Ae={};function Ie(e,t){var r=!1;for(var[n]of(ke[t]=e.matches,we))if(ke[n]&&Ae.breakpoint!==n){Ae.breakpoint=n,r=!0;break}r&&Se.dispatchEvent(new CustomEvent("change",{detail:Ae}))}we.forEach(((e,t)=>{var r=window.matchMedia("(min-width: ".concat(e,")"));Ie(r,t),r.addEventListener?r.addEventListener("change",(e=>{Ie(e,t)})):r.addListener((e=>{Ie(e,t)}))}));var Pe=()=>Ae;function xe(e){return function(t){var r,n="local"===e?localStorage:sessionStorage;return JSON.parse(null!==(r=n.getItem(t))&&void 0!==r?r:"null")}}function Ce(e){var t,r;return!(null===(t=e?e.flags:null===(r=ka())||void 0===r?void 0:r.getFeatureFlags())||void 0===t||!t["brick-next-v3-strict-mode"])}function Ze(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var o=0===n.length?"":",";e?console.error("".concat(t," is dropped in v3 strict mode").concat(o),...n):console.warn("".concat(t," is deprecated in v3 and will be dropped in strict mode").concat(o),...n)}var Oe=new Set(["prefix"]),Te=new WeakMap,Re=function(){var e=P();if(e)return Object.freeze({define:(t,r)=>e.getRuntime().registerCustomTemplate(t,r)})}()||new class{constructor(){(0,s.Z)(this,Te,{writable:!0,value:new Map})}define(e,t){var r,n,o,i,s=(0,u.Z)(this,Te).has(e);s?console.warn('Custom template of "'.concat(e,'" already registered.')):(s=!!customElements.get(e))&&console.warn('Custom template of "'.concat(e,'" already defined by customElements.'));var l=Ce(),c=null!==(r=null===(n=t.proxy)||void 0===n?void 0:n.properties)&&void 0!==r?r:{},d=[],p=[];for(var[f,v]of Object.entries(c))v.asVariable?(Ze(l,"Template `asVariable`",e,f),l||p.push(f)):v.mergeProperty||v.refTransform?console.error("Template `mergeProperty` and `refTransform` are dropped in v3:",e,f):v.ref&&d.push([f,v]);var h=(0,a.Z)((0,a.Z)({},t),{},{proxy:(0,a.Z)((0,a.Z)({},t.proxy),{},{properties:Object.fromEntries(d)}),state:(t.state?l?t.state:t.state.map((e=>(0,a.Z)({expose:!0},e))):[]).concat(p.map((e=>({name:e,expose:!0}))))});(0,u.Z)(this,Te).set(e,(0,a.Z)((0,a.Z)({},h),{},{name:e}));var m,g,b=(m=h.state,(0,y.uniq)(null!==(g=null==m?void 0:m.filter((e=>e.expose)).map((e=>e.name)))&&void 0!==g?g:[])),E=Object.entries(null!==(o=null===(i=h.proxy)||void 0===i?void 0:i.methods)&&void 0!==o?o:{}),w=b.concat(d.map((e=>e[0]))),S=E.map((e=>e[0])),k=w.concat(S).filter((e=>e in HTMLElement.prototype&&!Oe.has(e)));if(k.length>0&&(Ze(l,"Using native HTMLElement properties as template properties or methods",e,...k),l))throw new Error('In custom template "'.concat(e,'", ').concat(k.map((e=>'"'.concat(e,'"'))).join(", ")," are native HTMLElement properties, and should be avoid to be used as brick properties or methods."));if(!s){class t extends HTMLElement{get $$typeof(){return"custom-template"}static get _dev_only_definedProperties(){return w}static get _dev_only_definedMethods(){return S}$$getElementByRef(e){var t;return null===(t=this.$$tplStateStore)||void 0===t||null===(t=t.hostBrick)||void 0===t||null===(t=t.tplHostMetadata)||void 0===t||null===(t=t.internalBricksByRef.get(e))||void 0===t?void 0:t.element}connectedCallback(){var e=this.shadowRoot;e||(e=this.attachShadow({mode:"open"}));var t=document.createDocumentFragment(),r=document.createElement("style");r.textContent=":host{display:block}:host([hidden]){display:none}";var n=document.createElement("slot");t.appendChild(r),t.appendChild(n),e.appendChild(t)}disconnectedCallback(){this.shadowRoot&&(this.shadowRoot.textContent="")}}var A=function(r){if(d.some((e=>e[0]===r)))return console.error('Cannot define an exposed state that is also a proxy property: "'.concat(r,'" in ').concat(e)),1;Object.defineProperty(t.prototype,r,{get(){return this.$$tplStateStore.getValue(r)},set(e){var t;null===(t=this.$$tplStateStore)||void 0===t||t.updateValue(r,e,"replace")},enumerable:!0})};for(var I of b)A(I);var P=function(e,r){Object.defineProperty(t.prototype,e,{get(){var t;return this.$$getElementByRef(r.ref)[null!==(t=r.refProperty)&&void 0!==t?t:e]},set(t){var n,a,o=null===(n=this.$$getElementByRef)||void 0===n?void 0:n.call(this,r.ref);o&&(o[null!==(a=r.refProperty)&&void 0!==a?a:e]=t)},enumerable:!0})};for(var[x,C]of d)P(x,C);var Z=function(e,r){Object.defineProperty(t.prototype,e,{value(){var t;this.$$getElementByRef(r.ref)[null!==(t=r.refMethod)&&void 0!==t?t:e](...arguments)},enumerable:!0})};for(var[O,T]of E)Z(O,T);customElements.define(e,t)}}get(e){return(0,u.Z)(this,Te).get(e)}};function Be(e,t,r){var{tplStateStoreId:n,tplStateStoreMap:a}=e;if(!n)throw new Error('Using "'.concat(t,'" outside of a custom template').concat(null!=r?r:""));var o=a.get(n);if(!o)throw new Error('Template state store is not found when using "'.concat(t,'"').concat(null!=r?r:"",".\nThis is a bug of Brick Next, please report it."));return o}function Le(e,t,r){var n=Be(e,t,r).hostBrick.element;if(!n)throw new Error('Template host element is gone when using "'.concat(t,'"').concat(null!=r?r:"",".\nThis is a bug of Brick Next, please report it."));return n}var Me=new Map,_e=new Proxy(Object.freeze({}),{get:(e,t)=>Me.get(t)}),Fe=function(){var e=P();if(e)return function(t,r,n){return e.getRuntime().registerWidgetFunctions(t,r,n)}}()||function(e,t,r){if(Me.has(e))throw new Error('Widget functions of "'.concat(e,'" already registered'));var{storyboardFunctions:n,registerStoryboardFunctions:a}=he({widgetId:e,widgetVersion:r});Me.set(e,n),a(t)},Ue=r(953);function Ne(e,t){var r=Ba(e);if(!r&&null!=ya&&ya.checkInstalledApps&&(r=ya.checkInstalledApps.getCheckedApp(e)),!r||"running"===r.installStatus)return!1;if(!t||!r.currentVersion)return!0;var n=t.match(/^([><]=?|=)(.*)$/);try{if(!n)throw new TypeError("Invalid match version: ".concat(t));return(0,Ue.q)(r.currentVersion,n[2],n[1])}catch(e){console.error(e)}return!1}function je(e,t,r){var{formStateStoreId:n,formStateStoreMap:a}=e;if(!n)throw new Error('Using "'.concat(t,'" outside of form renderer').concat(null!=r?r:""));var o=a.get(n);if(!o)throw new Error('Form state store is not found when using "'.concat(t,'"').concat(null!=r?r:"",".\nThis is a bug of Brick Next, please report it."));return o}var Ve=new Map;function De(e){return $e.apply(this,arguments)}function $e(){return $e=(0,o.Z)((function*(e){var t,r=null==ya||null===(t=ya.flowApi)||void 0===t?void 0:t.isFlowApiProvider(e);r&&(e=ya.flowApi.FLOW_API_PROVIDER);var n=Ve.get(e);if(n)return n;if(e.includes("-")&&!customElements.get(e))if(r)ya.flowApi.registerFlowApiProvider();else if(yield(0,p.loadBricksImperatively)([e],Za()),!customElements.get(e))throw new Error('Provider not defined: "'.concat(e,'".'));return n=document.createElement(e),Ve.set(e,n),n})),$e.apply(this,arguments)}var He=new WeakSet;function We(e){if((0,f.isObject)(e)&&!qe(e))if(He.add(e),Array.isArray(e))e.forEach(We);else{var t=Object.getPrototypeOf(e);t&&t.constructor!==Object||Object.values(e).forEach(We)}}function qe(e){return He.has(e)}var Ke=new Map;function ze(e,t,r){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,o.Z)((function*(e,t,r){var{useProvider:n,method:o="resolve",args:i=[],onReject:s}=e,{provider:l,field:c}=e;if(l&&!n)throw new Error("You're using \"provider: ".concat(l,'" which is dropped in v3, please use "useProvider" instead'));var u=null!=c;if(u){var d=Ce();if(Ze(d,"`resolve.field`"),d)throw new Error("Using deprecated `resolve.field`")}var p,[f,v]=yield Promise.all([De(n),ut(i,t)]),h=null==r?void 0:r.renderId,m=Je(f,n,o,v,r,i,!!h&&h!==Oa()),{transform:g}=e;try{var b=yield m;We(p=u?(0,y.get)(b,c):b)}catch(e){if(!function(e){return!(null==e||!e.transform)}(s))throw e;g=s.transform,p=e}return g?"string"==typeof g?{[g]:p}:ut(g,(0,a.Z)((0,a.Z)({},t),{},{data:p})):p}))).apply(this,arguments)}function Je(e,t,r,n,a,o,i){return Ye.apply(this,arguments)}function Ye(){return Ye=(0,o.Z)((function*(e,t,r,n,a,i,s){var l,c;try{l=JSON.stringify({useProvider:t,method:r,args:n})}catch(e){if(!i)throw e;l=JSON.stringify({useProvider:t,method:r,originalArgs:i})}return"reload"!==(null==a?void 0:a.cache)&&(c=Ke.get(l)),c||(c=(0,o.Z)((function*(){var a,o=null!=ya&&null!==(a=ya.flowApi)&&void 0!==a&&a.isFlowApiProvider(t)?yield ya.flowApi.getArgsOfFlowApi(t,n,r):n;return e.resolve(...o)}))(),s||Ke.set(l,c)),c})),Ye.apply(this,arguments)}var Qe=Symbol.for("pre.evaluated.raw"),Xe=Symbol.for("pre.evaluated.context");function et(e){return!(null==e||!e[Qe])}function tt(e){return e[Qe]}function rt(e){return"string"==typeof e?(0,O.shouldAllowRecursiveEvaluations)(e):(0,O.shouldAllowRecursiveEvaluations)(e[Qe])}var nt=new WeakSet([SyntaxError,TypeError,ReferenceError]);function at(e){return nt.has(e.constructor)?e.constructor:TypeError}function ot(){return(ot=(0,o.Z)((function*(e,t,r){var{blockingList:n,run:a}=it(e,t,r,!0);return yield Promise.all(n),a()}))).apply(this,arguments)}function it(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=[];if("string"!=typeof e){var i=(0,y.omit)(t,["pendingPermissionsPreCheck","tplStateStoreMap","tplStateStoreScope","formStateStoreMap","formStateStoreScope"]);t=(0,a.Z)((0,a.Z)({},e[Xe]),i),e=e[Qe]}var s,l={usedArgs:new Set},c={usedArgs:new Set};try{s=(0,O.preevaluate)(e,{withParent:!0,hooks:{beforeVisitGlobal(e,t){(0,T.collectAppGetMenuUsage)(l,e,t),(0,T.collectInstalledAppsHasUsage)(c,e,t)}}})}catch(t){var u="".concat(t.message,', in "').concat(e,'"');throw new(at(t))(u)}if(l.hasNonStaticUsage)throw new Error('Non-static usage of "APP.getMenu" is prohibited in v3, check your expression: "'.concat(e,'"'));if(c.hasNonStaticUsage)throw new Error('Non-static usage of "INSTALLED_APPS.has" is prohibited in v3, check your expression: "'.concat(e,'"'));var d,v,h,m,g={},{attemptToVisitGlobals:b}=s;if(r.lazy||b.has("EVENT")&&!(0,f.hasOwnProperty)(t,"event")||b.has("DATA")&&!(0,f.hasOwnProperty)(t,"data"))return{blockingList:o,run:()=>Object.keys(t).length>0?{[Qe]:e,[Xe]:t}:e};var E,w,S=Ce(t);(b.has("STATE")||!S&&b.has("TPL"))&&(m=Be(t,"STATE",': "'.concat(e,'"'))),b.has("FORM_STATE")&&(w=je(t,"FORM_STATE",': "'.concat(e,'"')));var k=q();if(n||k){if(b.has("CTX")&&(d=(0,T.strictCollectMemberUsage)(e,"CTX"),n&&o.push(t.ctxStore.waitFor(d))),m){if(h=(0,T.strictCollectMemberUsage)(e,"STATE"),!S){var A=(0,T.strictCollectMemberUsage)(e,"TPL");for(var I of A)h.add(I)}n&&o.push(m.waitFor(h))}w&&(E=(0,T.strictCollectMemberUsage)(e,"FORM_STATE"),n&&o.push(w.waitFor(E))),b.has("PROCESSORS")&&(v=(0,T.strictCollectMemberUsage)(e,"PROCESSORS",2),n&&o.push((0,p.loadProcessorsImperatively)(v,Za())))}if(n){var P,x=b.has("PERMISSIONS");if(!x&&b.has("FN")){var C=[...(0,T.strictCollectMemberUsage)(e,"FN")];x=ye(C)}if(x&&o.push(...t.pendingPermissionsPreCheck),l.usedArgs.size>0&&null!=ya&&ya.menu){var Z=[...l.usedArgs];o.push(Promise.all(Z.map((e=>ya.menu.fetchMenuById(e,t,{getStoryboardByAppId:Ra,resolveData:ze,asyncComputeRealValue:ut})))))}c.usedArgs.size>0&&o.push(null==ya||null===(P=ya.checkInstalledApps)||void 0===P?void 0:P.waitForCheckingApps([...c.usedArgs]))}return{blockingList:o,run(){var r,n,o,i,{app:l,location:c,query:u,match:p,flags:k,sys:A,ctxStore:I,data:P,event:x}=t,C=null!==(r=t.overrideApp)&&void 0!==r?r:l;for(var Z of b)switch(Z){case"ANCHOR":g[Z]=c.hash?c.hash.substring(1):null;break;case"APP":g[Z]=(0,a.Z)((0,a.Z)({},(0,y.cloneDeep)(C)),{},{getMenu:null==ya||null===(n=ya.menu)||void 0===n?void 0:n.getMenuById});break;case"CTX":g[Z]=J({get:(e,t)=>I.getValue(t),ownKeys:()=>Array.from(d)});break;case"DATA":g[Z]=P;break;case"EVENT":g[Z]=x;break;case"FLAGS":g[Z]=G(k);break;case"FORM_STATE":g[Z]=J({get:(e,t)=>w.getValue(t),ownKeys:()=>Array.from(E)});break;case"HASH":g[Z]=c.hash;break;case"INSTALLED_APPS":g[Z]=G({has:Ne});break;case"ITEM":case"INDEX":var T="ITEM"===Z?"forEachItem":"forEachIndex";(0,f.hasOwnProperty)(t,T)?g[Z]=t[T]:console.error("Using `".concat(Z,'` but no `:forEach` is found, check your expression: "').concat(e,'"'));break;case"LOCAL_STORAGE":g[Z]=G({getItem:xe("local")});break;case"MEDIA":g[Z]=G(Pe());break;case"MISC":g[Z]=ka().getMiscSettings();break;case"PARAMS":g[Z]=new URLSearchParams(u);break;case"PATH":g[Z]=G(null!==(o=null==p?void 0:p.params)&&void 0!==o?o:{});break;case"PATH_NAME":g[Z]=c.pathname;break;case"PROCESSORS":g[Z]=J({get(e,t){var r=M.get(t);if(!r)throw new Error("'PROCESSORS.".concat(t,"' is not registered! Have you installed the relevant brick package?"));return J({get:(e,t)=>r.get(t),ownKeys:()=>Array.from(r.keys())})},ownKeys(){var e=new Set;for(var t of v){var r=t.split(".")[0];e.add(r)}return Array.from(e)}});break;case"QUERY":g[Z]=Object.fromEntries(Array.from(u.keys()).map((e=>[e,u.get(e)])));break;case"QUERY_ARRAY":g[Z]=Object.fromEntries(Array.from(u.keys()).map((e=>[e,u.getAll(e)])));break;case"SESSION_STORAGE":g[Z]=G({getItem:xe("session")});break;case"TPL":if(Ze(S,'Using "TPL" in expression','check your expression: "'.concat(e,'"')),S)break;case"STATE":g[Z]=J({get:(e,t)=>m.getValue(t),ownKeys:()=>Array.from(h)});break;case"SYS":g[Z]=G(null!=A?A:{});break;case"__WIDGET_FN__":g[Z]=_e;break;case"__WIDGET_IMG__":g[Z]=null==ya||null===(i=ya.images)||void 0===i?void 0:i.widgetImagesFactory;break;case"__WIDGET_I18N__":g[Z]=U}Object.assign(g,de(s.attemptToVisitGlobals,{storyboardFunctions:me,app:t.app,appendI18nNamespace:t.appendI18nNamespace}));try{var R=(0,O.cook)(s.expression,s.source,{globalVariables:(0,B.supply)(s.attemptToVisitGlobals,g)});return W("evaluation",{raw:e,context:g,result:R}),R}catch(t){var L="".concat(t.message,', in "').concat(e,'"');throw new(at(t))(L)}}}}var st=function(e){return e[e.INITIAL=0]="INITIAL",e[e.USE_BRICK=1]="USE_BRICK",e[e.USE_BRICK_ITEM=2]="USE_BRICK_ITEM",e[e.USE_BRICK_PROPERTIES=3]="USE_BRICK_PROPERTIES",e[e.USE_BRICK_TRANSFORM=4]="USE_BRICK_TRANSFORM",e[e.USE_BRICK_EVENTS=5]="USE_BRICK_EVENTS",e[e.USE_BRICK_IF=6]="USE_BRICK_IF",e[e.USE_BRICK_SLOTS=7]="USE_BRICK_SLOTS",e[e.USE_BRICK_SLOTS_ITEM=8]="USE_BRICK_SLOTS_ITEM",e[e.USE_BRICK_SLOTS_ITEM_BRICKS=9]="USE_BRICK_SLOTS_ITEM_BRICKS",e[e.USE_BRICK_SLOTS_ITEM_BRICKS_ITEM=10]="USE_BRICK_SLOTS_ITEM_BRICKS_ITEM",e[e.USE_BRICK_LIFECYCLE=11]="USE_BRICK_LIFECYCLE",e[e.USE_BRICK_DATA_SOURCE=12]="USE_BRICK_DATA_SOURCE",e}({});function lt(e){switch(e){case st.USE_BRICK_PROPERTIES:case st.USE_BRICK_TRANSFORM:case st.USE_BRICK_EVENTS:case st.USE_BRICK_IF:case st.USE_BRICK_LIFECYCLE:case st.USE_BRICK_DATA_SOURCE:return!0}return!1}function ct(e,t,r){if(lt(e))return e;if(t)switch(e){case st.USE_BRICK:return st.USE_BRICK_ITEM;case st.USE_BRICK_SLOTS_ITEM_BRICKS:return st.USE_BRICK_SLOTS_ITEM_BRICKS_ITEM}else switch(e){case st.INITIAL:if("useBrick"===r)return st.USE_BRICK;break;case st.USE_BRICK:case st.USE_BRICK_ITEM:case st.USE_BRICK_SLOTS_ITEM_BRICKS_ITEM:switch(r){case"properties":return st.USE_BRICK_PROPERTIES;case"transform":return st.USE_BRICK_TRANSFORM;case"dataSource":return st.USE_BRICK_DATA_SOURCE;case"events":return st.USE_BRICK_EVENTS;case"slots":return st.USE_BRICK_SLOTS;case"children":return st.USE_BRICK_SLOTS_ITEM_BRICKS;case"if":return st.USE_BRICK_IF;case"lifeCycle":return st.USE_BRICK_LIFECYCLE}break;case st.USE_BRICK_SLOTS:return st.USE_BRICK_SLOTS_ITEM;case st.USE_BRICK_SLOTS_ITEM:if("bricks"===r)return st.USE_BRICK_SLOTS_ITEM_BRICKS}return st.INITIAL}function ut(e,t){return dt.apply(this,arguments)}function dt(){return dt=(0,o.Z)((function*(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=et(e);if(n||"string"==typeof e){var a,o=r.$$lazyForUseBrick&&lt(r.$$stateOfUseBrick),i=o;return n||(0,O.isEvaluable)(e)?(a=yield function(e,t,r){return ot.apply(this,arguments)}(e,t,{lazy:o}),i=rt(e)):a=o?e:((0,f.hasOwnProperty)(t,"data")?r.noInject?R.transform:R.transformAndInject:r.noInject?vt:R.inject)(e,t),i||We(a),a}if(!(0,f.isObject)(e)||qe(e)||"function"==typeof e)return e;if(Array.isArray(e)){var s=ft(r,!0);return Promise.all(e.map((e=>ut(e,t,s))))}return Object.fromEntries((yield Promise.all(Object.entries(e).map((e=>{var[n,a]=e;return Promise.all([ut(n,t),ut(a,t,ft(r,!1,n))])})))).concat(r.ignoreSymbols?[]:Object.getOwnPropertySymbols(e).map((t=>[t,e[t]]))))})),dt.apply(this,arguments)}function pt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=et(e);if(n||"string"==typeof e){var a,o=r.$$lazyForUseBrick&&lt(r.$$stateOfUseBrick),i=o;return n||(0,O.isEvaluable)(e)?(a=function(e,t,r){var{run:n}=it(e,t,void 0,!1);return n()}(e,t),i=rt(e)):a=o?e:((0,f.hasOwnProperty)(t,"data")?r.noInject?R.transform:R.transformAndInject:r.noInject?vt:R.inject)(e,t),i||We(a),a}if(!(0,f.isObject)(e)||qe(e)||"function"==typeof e)return e;if(Array.isArray(e)){var s=ft(r,!0);return e.map((e=>pt(e,t,s)))}return Object.fromEntries(Object.entries(e).map((e=>{var[n,a]=e;return[pt(n,t),pt(a,t,ft(r,!1,n))]})).concat(r.ignoreSymbols?[]:Object.getOwnPropertySymbols(e).map((t=>[t,e[t]]))))}function ft(e,t,r){return e.$$lazyForUseBrick?(0,a.Z)((0,a.Z)({},e),{},{$$stateOfUseBrick:ct(e.$$stateOfUseBrick,t,r)}):e}function vt(e){return e}function ht(e,t){return mt.apply(this,arguments)}function mt(){return(mt=(0,o.Z)((function*(e,t){return!(0,f.hasOwnProperty)(e,"if")||!!("string"==typeof e.if||et(e.if)?yield ut(e.if,t):e.if)}))).apply(this,arguments)}function gt(e,t){return!(0,f.hasOwnProperty)(e,"if")||!!("string"==typeof e.if||et(e.if)?pt(e.if,t):e.if)}function yt(e){return!(0,f.hasOwnProperty)(e,"if")||!!e.if}function bt(){return(bt=(0,o.Z)((function*(e,t){return(0,f.isObject)(e.if)&&!et(e.if)?yt(yield ze(e.if,t)):ht(e,t)}))).apply(this,arguments)}var Et=function(){var e=P();if(e)return e.looseCheckIfByTransform}()||function(e,t){return gt(e,{data:t})};function wt(e){var t=!1,r=!1,n=!1;if("string"==typeof e?(0,O.isEvaluable)(e):et(e)){var a="string"==typeof e?e:tt(e);if((0,O.isTrackAll)(a)){var o=(0,T.trackAll)(a);o&&(t=o.context,r=o.state,n=o.formState)}else t=(0,T.track)(a,"track context","CTX"),r=(0,T.track)(a,"track state","STATE"),n=(0,T.track)(a,"track formstate","FORM_STATE")}return{contextNames:t,stateNames:r,formStateNames:n}}function St(e,t){return kt.apply(this,arguments)}function kt(){return(kt=(0,o.Z)((function*(e,t){for(var[r,n,a]of e)if(r===t){var o=yield n;if(void 0!==o||!a)return o}}))).apply(this,arguments)}function At(e){return It.apply(this,arguments)}function It(){return(It=(0,o.Z)((function*(e){var t={};for(var[r,n,a]of e){var o=yield n;void 0===o&&a||!("style"!==r&&"dataset"!==r||(0,f.isObject)(o))||(t[r]=o)}return t}))).apply(this,arguments)}function Pt(e,t){if(t)for(var[r,n]of Object.entries(t))switch(r){case"style":case"dataset":for(var[a,o]of Object.entries(n))e[r][a]=o;break;case"constructor":case"__proto__":case"innerHTML":throw new Error("set `".concat(r,"` is prohibited"));default:e[r]=n}}function xt(e,t,r){var n=function(e,t){return(0,f.isObject)(e)?Object.fromEntries(Object.entries(e).map((e=>{var[r,n]=e,a=pt(n,t,{$$lazyForUseBrick:!0,$$stateOfUseBrick:"useBrick"===r?st.USE_BRICK:st.INITIAL});if("style"!==r&&"dataset"!==r||(0,f.isObject)(a))return[r,a]})).filter(Boolean)):{}}(t,r);Array.isArray(e)||(e=[e]),e.forEach((e=>{Pt(e,n)}))}var Ct=r(6903),Zt=new Map,Ot=1e4,Tt=0;function Rt(e,t){var{path:r,exact:n=!1,strict:a=!1,sensitive:o=!0}=t;return(Array.isArray(r)?r:[r]).reduce(((t,r)=>{if(t)return t;var{regexp:i,keys:s}=function(e,t){var r="".concat(t.end).concat(t.strict).concat(t.sensitive),n=Zt.get(r);n||Zt.set(r,n=new Map);var a=n.get(e);if(a)return a;var o=[],i={regexp:(0,Ct.Bo)(e,o,t),keys:o};return Tt<Ot&&(n.set(e,i),Tt++),i}(r,{end:n,strict:a,sensitive:o}),l=i.exec(e);if(!l)return null;var[c,...u]=l,d=e===c;return n&&!d?null:{path:r,url:"/"===r&&""===c?"/":c,isExact:d,params:s.reduce(((e,t,r)=>(e[t.name]=u[r],e)),{})}}),null)}function Bt(){return(Bt=(0,o.Z)((function*(e,t){for(var r of e){if("string"!=typeof r.path)throw console.error("Invalid route with invalid path:",r),new Error("Invalid route with invalid type of path: ".concat(typeof r.path));var n=Lt(r,t.app.homepage,t.location.pathname);if(n&&(yield ht(r,t)))return t.app.noAuthGuard||r.public||null==ya||!ya.auth||ya.auth.isLoggedIn()?{match:n,route:r}:"unauthenticated"}return"missed"}))).apply(this,arguments)}function Lt(e,t,r){return Rt(r,{path:e.path.replace(/^\$\{APP.homepage\}/,t),exact:e.exact})}var Mt,_t=Symbol.for("tpl.asyncComputedPropsFromHost"),Ft=Symbol.for("tpl.stateStoreId"),Ut=Symbol.for("tpl.externalForEachItem"),Nt=Symbol.for("tpl.externalForEachIndex"),jt=r(6666),Vt=new Set,Dt=function(e){return e.REQUEST_FAILED="REQUEST_FAILED",e.SOMETHING_WENT_WRONG="SOMETHING_WENT_WRONG",e.LOGIN_TIMEOUT_MESSAGE="LOGIN_TIMEOUT_MESSAGE",e.NETWORK_ERROR="NETWORK_ERROR",e}({}),$t={[Dt.REQUEST_FAILED]:"Request Failed",[Dt.SOMETHING_WENT_WRONG]:"Something went wrong!",[Dt.LOGIN_TIMEOUT_MESSAGE]:"You haven't logged in or your login session has expired. Login right now?",[Dt.NETWORK_ERROR]:"Network error, please check your network."},Ht={[Dt.REQUEST_FAILED]:"请求失败",[Dt.SOMETHING_WENT_WRONG]:"出现了一些问题！",[Dt.LOGIN_TIMEOUT_MESSAGE]:"您还未登录或登录信息已过期，现在重新登录？",[Dt.NETWORK_ERROR]:"网络错误，请检查您的网络连接。"},Wt="core/runtime",qt={en:$t,zh:Ht},Kt=Object.freeze({show:function(e){return Mt?Mt.resolve(e):"confirm"===e.type?confirm(e.content)?new Promise((e=>setTimeout((()=>{e()}),1))):new Promise(((e,t)=>setTimeout((()=>{t()}),1))):(alert(e.content),new Promise((e=>setTimeout((()=>{e()}),1e3))))}});function zt(e){var{search:t,pathname:r}=e,n=r?window.btoa(encodeURIComponent(r)):"",a=t?window.btoa(encodeURIComponent(t)):"";document.cookie="SALOGINPATH=".concat(n,"; path=/"),document.cookie="SALOGINQUERY=".concat(a,"; path=/")}function Gt(e){if(e instanceof Event&&e.target instanceof HTMLScriptElement)return e.target.src;if(e instanceof Z.HttpFetchError)return d.i18n.t("".concat(Wt,":").concat(Dt.NETWORK_ERROR));if(e instanceof Z.HttpResponseError&&e.responseJson){if("string"==typeof e.responseJson.error)return e.responseJson.error;if("string"==typeof e.responseJson.msg)return e.responseJson.msg}return null==e?"Unknown error":e.toString()}function Jt(e){return e instanceof Z.HttpResponseError&&401===e.response.status&&!!e.responseJson&&100003===e.responseJson.code}var Yt,Qt,Xt=!1;function er(e){if(!(e instanceof Z.HttpAbortError)){if(Jt(e)&&!window.NO_AUTH_GUARD){if(Xt)return;return Xt=!0,void Kt.show({type:"confirm",content:d.i18n.t("".concat(Wt,":").concat(Dt.LOGIN_TIMEOUT_MESSAGE))}).then((()=>{var e,t;e=ka().getFeatureFlags()["sso-enabled"],zt((t=C()).location),t.push(e?"/sso-auth/login":"/auth/login",{from:(0,a.Z)((0,a.Z)({},t.location),{},{state:void 0})}),Xt=!1}),(()=>{Xt=!1}))}console.error(e);var t=Gt(e);t!==Yt&&(Yt=t,Kt.show({type:"error",title:d.i18n.t("".concat(Wt,":").concat(Dt.REQUEST_FAILED)),content:t,contentStyle:{whiteSpace:"pre-wrap",wordBreak:"break-word"}}).then((()=>{Yt=void 0})))}}var tr=Object.freeze({show:function(e){Qt?Qt.resolve(e):alert(e.message)}});function rr(e,t,r){t&&Object.entries(t).forEach((t=>{var[n,a]=t,o=sr(a,r,{element:e});for(var i of(e.addEventListener(n,o),e.$$listeners||(e.$$listeners=[]),e.$$listeners.push([n,o]),e.$$eventListeners||(e.$$eventListeners=[]),[].concat(a)))e.$$eventListeners.push([n,null,i])}))}function nr(e){return"string"==typeof e.action}function ar(e){return"string"==typeof e.useProvider}function or(e){return!(!e.target&&!e.targetRef||!e.method&&!e.properties)}function ir(e){return!!e.then}function sr(e,t,r){return function(n){var o,i;for(var s of[].concat(e))if(gt(s,(0,a.Z)((0,a.Z)({},t),{},{event:n})))if(ir(s))sr(s.then,t,r)(n);else if(nr(s)){var[l,c]=s.action.split(".");switch(s.action){case"history.push":case"history.replace":case"history.pushQuery":case"history.replaceQuery":case"history.pushAnchor":case"history.block":case"history.goBack":case"history.goForward":case"history.reload":case"history.unblock":fr(n,c,s.args,s.callback,t);break;case"window.open":vr(n,s.args,t);break;case"location.reload":case"location.assign":br(n,c,s.args,t);break;case"localStorage.setItem":case"localStorage.removeItem":case"sessionStorage.setItem":case"sessionStorage.removeItem":Er(n,l,c,s.args,t);break;case"event.preventDefault":n.preventDefault();break;case"console.log":case"console.error":case"console.warn":case"console.info":wr(n,c,s.args,t);break;case"message.success":case"message.error":case"message.info":case"message.warn":Sr(n,c,s.args,t);break;case"handleHttpError":er(n.detail);break;case"context.assign":case"context.replace":case"context.refresh":case"context.load":mr(n,c,s.args,null===(o=s.batch)||void 0===o||o,s.callback,t);break;case"state.update":case"state.refresh":case"state.load":gr(n,c,s.args,null===(i=s.batch)||void 0===i||i,s.callback,t);break;case"tpl.dispatchEvent":var[u,d]=Pr(s.args,t,n);Le(t,s.action,": ".concat(u)).dispatchEvent(new CustomEvent(u,d));break;case"formstate.update":yr(n,s.args,s.callback,t);break;case"message.subscribe":case"message.unsubscribe":kr(n,c,s.args,t,r,s.callback);break;case"theme.setDarkTheme":case"theme.setLightTheme":ne("theme.setDarkTheme"===s.action?"dark":"light");break;case"theme.setTheme":var[p]=Pr(s.args,t,n);ne(p);break;case"mode.setDashboardMode":case"mode.setDefaultMode":ce("mode.setDashboardMode"===s.action?"dashboard":"default");break;default:console.error("unknown event listener action:",s.action)}}else ar(s)?lr(n,s,t,r):or(s)?ur(n,s,t,r):console.error("unknown event handler:",s);else s.else&&sr(s.else,t,r)(n)}}function lr(e,t,r,n){return cr.apply(this,arguments)}function cr(){return(cr=(0,o.Z)((function*(e,t,r,n){try{dr(e,yield De(t.useProvider),t,"saveAs"!==t.method?"resolve":"saveAs",r,n)}catch(e){console.error(Gt(e))}}))).apply(this,arguments)}function ur(e,t,r,n){var o=[],i=t.target,s=t.targetRef,l=i;if(("string"==typeof i?(0,O.isEvaluable)(i):et(i))&&(l=pt(i,(0,a.Z)((0,a.Z)({},r),{},{event:e}))),"string"==typeof l)if("_self"===l)o.push(n.element);else if(t.multiple)o=Array.from(document.querySelectorAll(l));else{var c=document.querySelector(l);null!==c&&o.push(c)}else if(l)l instanceof HTMLElement?o.push(l):console.error("unexpected target:",l);else if(s){var u=s;("string"==typeof s?(0,O.isEvaluable)(s):et(s))&&(u=pt(s,(0,a.Z)((0,a.Z)({},r),{},{event:e})));var d=[].concat(u),p=Le(r,"targetRef",": ".concat(d.join(", ")));o.push(...d.map((e=>{var t;return null===(t=p.$$getElementByRef)||void 0===t?void 0:t.call(p,e)})).filter(Boolean))}0!==o.length?function(e){return!!e.method}(t)?o.forEach((a=>{dr(e,a,t,t.method,r,n,{useEventAsDefault:!0})})):function(e){return!!e.properties}(t)&&xt(o,t.properties,(0,a.Z)((0,a.Z)({},r),{},{event:e})):console.error("target not found:",i||s)}function dr(e,t,r,n,a,o,i){return pr.apply(this,arguments)}function pr(){return pr=(0,o.Z)((function*(e,t,r,n,i,s,l){var c;if("function"==typeof t[n]){var u=function(){var a=(0,o.Z)((function*(){var a,o=Pr(r.args,i,e,l);return ar(r)&&null!=ya&&null!==(a=ya.flowApi)&&void 0!==a&&a.isFlowApiProvider(r.useProvider)&&(o=yield ya.flowApi.getArgsOfFlowApi(r.useProvider,o,n)),t[n](...o)}));return function(){return a.apply(this,arguments)}}();if(r.callback){var d,p=Ir(r.callback,i,s),f={progress:p("progress"),success:p("success"),error:p("error"),finally:p("finally")};if(ar(r)&&(d=pt(r.poll,(0,a.Z)((0,a.Z)({},i),{},{event:e}))),null!==(c=d)&&void 0!==c&&c.enabled)!function(e,t,r){var n,{progress:a,success:i,error:s,finally:l}=t,{interval:c,leadingRequestDelay:u,continueOnError:d,delegateLoadingBar:p,expectPollEnd:f,expectPollStopImmediately:v}=r,h=Oa();function m(){return g.apply(this,arguments)}function g(){return(g=(0,o.Z)((function*(){var t;Vt.delete(n);try{if(!(t=null==v?void 0:v())){var r=yield e();(t=(null==v?void 0:v())||h!==Oa())||(null==a||a(r),null!=f&&f(r)?(p&&window.dispatchEvent(new Event("request.end")),null==i||i(r),null==l||l()):y(null!=c?c:3e3))}}catch(e){(t=(null==v?void 0:v())||h!==Oa())||(null==s||s(e),d?y(null!=c?c:3e3):null==l||l())}finally{p&&t&&window.dispatchEvent(new Event("request.end"))}}))).apply(this,arguments)}function y(e){n=setTimeout(m,e),Vt.add(n)}y(null!=u?u:0),p&&window.dispatchEvent(new Event("request.start"))}(u,f,d);else try{var v=yield u();f.success(v)}catch(e){f.error(e)}finally{f.finally()}}else u()}else console.error("target has no method:",{target:t,method:n})})),pr.apply(this,arguments)}function fr(e,t,r,n,a){var o=0,i=!1,s=t;switch(t){case"push":case"replace":case"pushQuery":case"replaceQuery":case"pushAnchor":o=2,i=!0;break;case"reload":i=!0;break;case"block":o=1,s="setBlockMessage"}var l=[];if(o>0&&((l=Pr(r,a,e,{useEventDetailAsDefault:!0})).length=o),i&&n){var c=Ir(n,a,void 0);l.push((e=>{c(e?"error":"success")({blocked:e}),c("finally")({blocked:e})}))}C()[s](...l)}function vr(e,t,r){var[n,a,o]=Pr(t,r,e);window.open(n,a||"_self",o)}function hr(e,t,r,n,a,o){t?n.updateValues(e,r,(e=>Pr(e,a,o)[0])):e.forEach((e=>{var{name:t,value:i}=Pr([e],a,o)[0];n.updateValue(t,i,r)}))}function mr(e,t,r,n,a,o){if(!Array.isArray(r)||!r.every(f.isObject)||"assign"!==t&&"replace"!==t){var[i,s]=Pr(r,o,e);o.ctxStore.updateValue(i,s,t,a,o)}else hr(r,n,t,o.ctxStore,o,e)}function gr(e,t,r,n,a,o){if(Array.isArray(r)&&r.every(f.isObject)&&"update"===t)hr(r,n,"replace",Be(o,"state.".concat(t),": ".concat(JSON.stringify(r))),o,e);else{var[i,s]=Pr(r,o,e);Be(o,"state.".concat(t),": ".concat(i)).updateValue(i,s,"update"===t?"replace":t,a,o)}}function yr(e,t,r,n){var[a,o]=Pr(t,n,e);je(n,"formstate.update",": ".concat(a)).updateValue(a,o,"replace",r,n)}function br(e,t,r,n){if("assign"===t){var[a]=Pr(r,n,e);location.assign(a)}else location[t]()}function Er(e,t,r,n,a){var o="localStorage"===t?localStorage:sessionStorage,[i,s]=Pr(n,a,e);"setItem"===r?void 0!==s&&o.setItem(i,JSON.stringify(s)):o.removeItem(i)}function wr(e,t,r,n){console[t](...Pr(r,n,e,{useEventAsDefault:!0}))}function Sr(e,t,r,n){var a=Pr(r,n,e,{useEventAsDefault:!0});tr.show({type:t,message:a[0]})}function kr(e,t,r,n,a,o){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,o.Z)((function*(e,t,r,n,a,o){var i=()=>{var a,o=Pr(r,n,e);return null==ya||null===(a=ya.messageDispatcher)||void 0===a?void 0:a[t](...o)};if(o){var s=Ir(o,n,a);try{var l=yield i();s("success")(l)}catch(e){s("error")(e)}finally{s("finally")()}}else i()}))).apply(this,arguments)}function Ir(e,t,r){return function(n){return function(a){var o=null==e?void 0:e[n];if(o)try{var i=new CustomEvent("callback.".concat(n),{detail:a});sr(o,t,r)(i)}catch(e){console.error(e)}else"error"===n&&console.error("Unhandled callback error:",a)}}}function Pr(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Array.isArray(e)?pt(e,(0,a.Z)((0,a.Z)({},t),{},{event:r})):n.useEventAsDefault?[r]:n.useEventDetailAsDefault?[r.detail]:[]}var xr=["onBeforePageLoad","onPageLoad","onBeforePageLeave","onPageLeave","onAnchorLoad","onAnchorUnload"];class Cr{constructor(e,t,r){(0,jt.Z)(this,"type",void 0),(0,jt.Z)(this,"data",new Map),(0,jt.Z)(this,"changeEventType",void 0),(0,jt.Z)(this,"pendingStack",[]),(0,jt.Z)(this,"hostBrick",void 0),(0,jt.Z)(this,"batchUpdate",!1),(0,jt.Z)(this,"batchUpdateContextsNames",[]),(0,jt.Z)(this,"rendererContext",void 0),(0,jt.Z)(this,"routeMap",new WeakMap),this.type=e,this.changeEventType="FORM_STATE"===this.type?"formstate.change":"STATE"===this.type?"state.change":"context.change",this.hostBrick=t,this.rendererContext=r}getAllValues(){return Object.fromEntries([...this.data.entries()].map((e=>{var[t,{value:r}]=e;return[t,r]})))}getValue(e){var t;return null===(t=this.data.get(e))||void 0===t?void 0:t.value}getAffectListByContext(e){var t=[e];return this.data.forEach(((e,r)=>{e.deps&&e.deps.some((e=>t.includes(e)))&&t.push(r)&&t.push(...this.getAffectListByContext(r))})),t.shift(),[...new Set(t)]}updateValues(e,t,r){if(this.batchUpdate=!0,this.batchUpdateContextsNames=e.map((e=>e.name)),[...new Set(this.batchUpdateContextsNames)].length!==this.batchUpdateContextsNames.length)throw new Error("Batch update not allow to update same item");var n={},a={},o=[];e.forEach((e=>{var{name:a,value:i}=r([e]),s=this.data.get(a);o.push(...this.getAffectListByContext(a)),s&&(n[a]=s),this.updateValue(a,i,t)})),o.filter((e=>!n[e])).forEach((e=>{var t=this.data.get(e);t&&(a[e]=t)}));var i=e=>{for(var t in e){var r,n=e[t];null===(r=n.eventTarget)||void 0===r||r.dispatchEvent(new CustomEvent(this.changeEventType,{detail:n.value}))}};i(n),i(a),this.batchUpdate=!1}updateValue(e,t,r,n,o){var i=this.data.get(e);if(!i)throw new Error("".concat(this.type," '").concat(e,"' is not defined"));if("refresh"!==r&&"load"!==r)"replace"===r?i.value=t:(0,f.isObject)(i.value)?Object.assign(i.value,t):(console.warn('Non-object current value of "'.concat(this.type,".").concat(e,'" for "context.assign", try "context.replace" instead.')),i.value=t),this.batchUpdate||i.eventTarget.dispatchEvent(new CustomEvent(this.changeEventType,{detail:i.value}));else{if(!i.load)throw new Error("You can not ".concat(r,' "').concat(this.type,".").concat(e,'" which has no resolve'));var s;"load"===r&&(i.loaded?s=Promise.resolve(i.value):i.loading&&(s=i.loading));var l=e=>{var t,r;return"FlowApiNotFoundError"===(null==e?void 0:e.name)&&!!(r=null===(t=this.rendererContext)||void 0===t?void 0:t.renderId)&&r!==Oa()};if(s||(s=i.loading=i.load((0,a.Z)({cache:"load"===r?"default":"reload"},t))).then((e=>{i.loaded=!0,i.value=e,i.eventTarget.dispatchEvent(new CustomEvent(this.changeEventType,{detail:i.value}))}),(e=>{l(e)||null!=n&&n.error||er(e)})),n){var c=Ir(n,o);s.then((e=>{c("success")({value:e}),c("finally")()}),(e=>{!l(e)&&n.error&&c("error")(e),c("finally")()}))}}}define(e,t,r,n){if(Array.isArray(e)&&e.length>0){var a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"CTX",n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CTX",r=new Map;for(var n of e){var a=(0,T.collectMemberUsage)([n.if,n.value,n.resolve],t);r.set(n,a)}return r}(e,r),a=new Map;for(var i of Array.from(n.keys()).map((e=>e.name))){var s;a.set(i,(null!==(s=a.get(i))&&void 0!==s?s:0)+1)}var l=Array.from(n.values()).some((e=>e.hasNonStaticUsage)),c=new WeakSet,u=new Map,d=new Map([...new Set(e.map((e=>e.name)))].map((e=>[e,new Promise(((t,r)=>{u.set(e,{resolve:t,reject:r})}))]))),p=function(){var e=(0,o.Z)((function*(e){var r;c.add(e);var o=yield t(e);n.delete(e);var i=null!==(r=a.get(e.name))&&void 0!==r?r:0;if(o){if(u.get(e.name).resolve(),a.delete(e.name),0===i)throw new Error("Duplicated context defined: ".concat(e.name))}else 1===i?(u.get(e.name).resolve(),a.delete(e.name)):a.set(e.name,i-1);yield v()}));return function(t){return e.apply(this,arguments)}}(),f=l;function v(){return h.apply(this,arguments)}function h(){return h=(0,o.Z)((function*(){var e=Array.from(n.entries()).filter(function(e,t){return(r,n)=>t?0===n:![...r[1].usedProperties].some((t=>e.has(t)))}(a,f)).map((e=>e[0])).filter((e=>!c.has(e)));yield Promise.all(e.map(p))})),h.apply(this,arguments)}return{pendingResult:v().then((0,o.Z)((function*(){for(var e of(n.size>0&&(function(e,t){var r=new Map(e),n=new Set(Array.from(r.keys()).map((e=>e.name))),a=()=>{var e=!1;for(var[t,o]of r.entries())[...o.usedProperties].some((e=>n.has(e)))||(r.delete(t),n.delete(t.name),e=!0);e&&a()};if(a(),r.size>0)throw new ReferenceError("Circular ".concat(t," detected: ").concat(Array.from(r.keys()).map((e=>e.name)).join(", ")))}(n,r),f=!0,yield v()),u.values()))e.resolve()}))).catch((e=>{for(var t of u.values())t.reject(e);throw e})),pendingContexts:d}}(e,(e=>this.resolve(e,t,r,n)),this.type);this.pendingStack.push(a)}}onChange(e,t){var r;null===(r=this.data.get(e))||void 0===r||r.eventTarget.addEventListener(this.changeEventType,t)}waitFor(e){var t=this;return(0,o.Z)((function*(){var r=function*(t){yield Promise.all([...e].map((e=>t.get(e))))};for(var{pendingContexts:n}of t.pendingStack)yield*r(n)}))()}waitForAll(){var e=this;return(0,o.Z)((function*(){for(var{pendingContexts:t}of e.pendingStack)for(var r of t.values())r.catch((()=>{}));for(var{pendingResult:n}of e.pendingStack)yield n}))()}mountAsyncData(e){this.data.forEach((t=>{var r;if(t.async&&(!e||null!==(r=this.routeMap.get(e))&&void 0!==r&&r.has(t.name))){if(t.asyncMounted)return void console.error('Async data "'.concat(t.name,'" already mounted. This is a bug of Brick Next, please report it.'));t.asyncMounted=!0,t.loading.then((e=>{t.loaded=!0,t.value=e,t.eventTarget.dispatchEvent(new CustomEvent(this.changeEventType,{detail:e}))}))}}))}resolve(e,t,r,n){var i=this;return(0,o.Z)((function*(){if(!(yield ht(e,t)))return!1;var s,l,c;r&&("STATE"===i.type?e.expose:"FORM_STATE"===i.type)&&(s=yield St(r,e.name));var u="eager";if(void 0===s){if(e.resolve){var d=(0,a.Z)({transform:"value"},e.resolve);if(yield ht(e.resolve,t))l=function(){var e=(0,o.Z)((function*(e){var r;return(yield ze(d,t,(0,a.Z)((0,a.Z)({},e),{},{renderId:null===(r=i.rendererContext)||void 0===r?void 0:r.renderId}))).value}));return function(t){return e.apply(this,arguments)}}(),"eager"==(u=e.resolve.async?"async":e.resolve.lazy?"lazy":"eager")?s=yield l():"async"===u&&(c=l());else if(!(0,f.hasOwnProperty)(e,"value"))return!1}l&&"eager"===u||void 0===e.value||(s=yield ut(e.value,t))}var p={name:e.name,value:s,eventTarget:new be.Z,load:l,loaded:"eager"===u,loading:c,async:"async"===u,deps:[]};if("lazy"===u){var v,{trigger:h}=e.resolve;h&&xr.includes(h)&&(null===(v=i.rendererContext)||void 0===v||v.registerArbitraryLifeCycle(h,(()=>{i.updateValue(e.name,void 0,"load")})))}if(e.onChange&&p.eventTarget.addEventListener(i.changeEventType,sr(e.onChange,t)),e.track){var m=(0,T.strictCollectMemberUsage)(l?e.resolve:e.value,i.type);for(var g of(!l&&(p.deps=[...m]),m))i.onChange(g,i.batchAddListener((()=>{l?i.updateValue(e.name,{cache:"default"},"refresh"):i.updateValue(e.name,pt(e.value,t),"replace")}),e))}if(i.data.has(e.name))throw new Error("".concat(i.type," '").concat(e.name,"' has already been declared"));if(i.data.set(e.name,p),Array.isArray(n))for(var y of n){var b=i.routeMap.get(y);b?b.add(e.name):i.routeMap.set(y,new Set([e.name]))}return!0}))()}disposeDataInRoutes(e){for(var t of e){var r=this.routeMap.get(t);if(void 0!==r)for(var n of r)this.data.delete(n)}}batchAddListener(e,t){return r=>{this.batchUpdate&&this.batchUpdateContextsNames.includes(t.name)||e(r)}}}function Zr(e,t,r){var n,a,{reversedProxies:o,asyncHostPropertyEntries:i,externalSlots:s,tplStateStoreId:l,hostBrick:c}=e;if(t&&o){var u=o.properties.get(t);u&&(a=i,n=u.map((e=>{var{from:t,to:r}=e,n=a.filter((e=>e[0]===t));if(n.length>0&&r.refProperty)return[r.refProperty,St(n,t),!0]})).filter(Boolean));var d=o.slots.get(t);if(d&&s){var p=new Map;for(var{from:v,to:h}of d){var m,g,b,E,w=null!==(m=null===(g=s[v])||void 0===g?void 0:g.bricks)&&void 0!==m?m:[];if(w.length){var S=null!==(b=h.refSlot)&&void 0!==b?b:v,k=p.get(S);if(!k){k=[];for(var A=(0,f.hasOwnProperty)(r,S)?r[S].bricks.length+1:1,I=0;I<A;I+=1)k.push([]);p.set(S,k)}var P=null!==(E=h.refPosition)&&void 0!==E?E:-1;k[(0,y.clamp)(P<0?k.length+P:P,0,k.length-1)].push(...(0,f.hasOwnProperty)(c.runtimeContext,"forEachItem")?Or(w,c.runtimeContext.forEachItem,c.runtimeContext.forEachIndex):w)}}var x=function(){(0,f.hasOwnProperty)(r,C)||(r[C]={type:"bricks",bricks:[]});var e=r[C];e.bricks=Z.flatMap(((t,r)=>r<e.bricks.length?t.concat(e.bricks[r]):t)),0===e.bricks.length&&delete r[C]};for(var[C,Z]of p.entries())x()}}return{[_t]:n,[Ft]:l}}function Or(e,t,r){return e.map((e=>{var n;return(0,a.Z)((0,a.Z)({},e),{},{[Ut]:t,[Nt]:r,slots:Object.fromEntries(Object.entries(null!==(n=e.slots)&&void 0!==n?n:{}).map((e=>{var n,[a,o]=e;return[a,"routes"===o.type?{type:"routes",routes:Tr(o.routes,t,r)}:{type:"bricks",bricks:Or(null!==(n=o.bricks)&&void 0!==n?n:[],t,r)}]})))})}))}function Tr(e,t,r){return e.map((e=>e.type&&"bricks"!==e.type?e:(0,a.Z)((0,a.Z)({},e),{},{bricks:Or(e.bricks,t,r)})))}var Rr=["properties","slots","children"];function Br(e,t){function r(e){return(0,f.isObject)(e)&&"function"!=typeof e?Array.isArray(e)?e.map(r):Object.fromEntries(Object.entries(e).map((e=>{var[t,a]=e;return(0,f.isObject)(a)&&"useBrick"===t?Array.isArray(a)?[t,a.map(n)]:[t,n(a)]:[t,r(a)]})).concat(Object.getOwnPropertySymbols(e).map((t=>[t,e[t]])))):e}function n(e){var{properties:o,slots:i,children:s}=e,l=(0,g.Z)(e,Rr),c=sn(s,i),u=Object.fromEntries(Object.entries(null!=c?c:{}).map((e=>{var t,[r,a]=e;return[r,{type:"bricks",bricks:(null!==(t=a.bricks)&&void 0!==t?t:[]).map(n)}]})));return(0,a.Z)((0,a.Z)({},l),{},{properties:r(o),slots:u},Zr(t,l.ref,u))}return r(e)}var Lr=["slots","children"],Mr=["properties","slots","children"];function _r(e,t,r,n,o){var i,s=(0,y.uniqueId)("tpl-state-"),l=(0,a.Z)((0,a.Z)({},r.runtimeContext),{},{tplStateStoreId:s});delete l.forEachItem,delete l.forEachIndex,delete l.formStateStoreId;var c=new Cr("STATE",r,o);l.tplStateStoreMap.set(s,c),l.tplStateStoreScope&&l.tplStateStoreScope.push(c);var{bricks:u,proxy:d,state:p,contracts:f}=Re.get(e);null==ya||null===(i=ya.flowApi)||void 0===i||i.collectWidgetContract(f),c.define(p,l,n);var{slots:v,children:h}=t,m=(0,g.Z)(t,Lr),b=(0,a.Z)((0,a.Z)({},m),{},{brick:e});r.tplHostMetadata={internalBricksByRef:new Map,tplStateStoreId:s,proxy:d};var E={properties:new Map,slots:new Map};if(null!=d&&d.properties)for(var[w,S]of Object.entries(d.properties)){var k=E.properties.get(S.ref);k||(k=[],E.properties.set(S.ref,k)),k.push({from:w,to:S})}if(null!=d&&d.slots)for(var[A,I]of Object.entries(d.slots)){var P=E.slots.get(I.ref);P||(P=[],E.slots.set(I.ref,P)),P.push({from:A,to:I})}var x={reversedProxies:E,asyncHostPropertyEntries:n,externalSlots:sn(h,v),tplStateStoreId:s,hostBrick:r};return b.slots={"":{type:"bricks",bricks:u.map((e=>Fr(e,x)))}},b}function Fr(e,t){null===e.if&&delete e.if;var{properties:r,slots:n,children:o}=e,i=(0,g.Z)(e,Mr),s=sn(o,n),l=Object.fromEntries(Object.entries(null!=s?s:{}).map((e=>{var r,[n,a]=e;return[n,{type:"bricks",bricks:(null!==(r=a.bricks)&&void 0!==r?r:[]).map((e=>Fr(e,t)))}]})));return(0,a.Z)((0,a.Z)({},i),{},{properties:Br(r,t),slots:l},Zr(t,i.ref,l))}var Ur=function(e){return e[e.ROOT=1]="ROOT",e[e.BRICK=2]="BRICK",e[e.PLACEHOLDER=3]="PLACEHOLDER",e}({}),Nr="form-renderer.form-renderer",jr=Symbol.for("form.stateStoreId"),Vr=["forms.general-form","form.general-form","eo-form"];function Dr(e,t,r){var{id:n,bricks:o,events:i,context:s,mountPoint:l,instanceId:c}=e,{brick:u,properties:d}=e,p=t.find((e=>e.fieldId===n));if(p){var v=function(e){var t,r={id:e.fieldId,name:e.fieldId,label:e.name,dataset:{testid:e.fieldId}},n=()=>{var t,r;return{readOnly:null===(t=e.limit)||void 0===t?void 0:t.includes("READONLY"),required:null===(r=e.limit)||void 0===r?void 0:r.includes("REQUIRED")}};switch(e.fieldType){case"INT":t={brick:"forms.general-input-number",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description,precision:0,inputBoxStyle:{width:"100%"}})};break;case"BOOLEAN":t={brick:"forms.general-switch",properties:(0,a.Z)((0,a.Z)({},r),n())};break;case"FLOAT":t={brick:"forms.general-input-number",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description,inputBoxStyle:{width:"100%"}})};break;case"ENUM":t={brick:"forms.general-select",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{options:[{label:"选项一",value:1},{label:"选项二",value:2}],placeholder:e.description,inputBoxStyle:{width:"100%"}})};break;case"ENUMS":t={brick:"forms.general-select",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{mode:"multiple",options:[{label:"选项一",value:1},{label:"选项二",value:2}],placeholder:e.description,inputBoxStyle:{width:"100%"}})};break;case"DATE":case"TIME":t={brick:"forms.general-date-picker",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description})};break;case"IP":t={brick:"forms.general-input",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description,pattern:"((^s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))s*$)|(^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*$))",message:{pattern:"输入字符不匹配IP格式"}})};break;case"JSON":t={brick:"forms.general-textarea",properties:(0,a.Z)({},r)};break;case"ARRAY":t={brick:"forms.general-select",properties:(0,a.Z)({},r)};break;case"STRUCTURE":case"STRUCTURE_ARRAY":t={brick:"forms.cmdb-instance-select-panel",properties:(0,a.Z)((0,a.Z)({},r),n())};break;default:t={brick:"forms.general-input",properties:(0,a.Z)((0,a.Z)((0,a.Z)({},r),n()),{},{placeholder:e.description})}}return t}(p);u||(u=v.brick),d=(0,a.Z)((0,a.Z)({},v.properties),d)}var h={brick:u,properties:d,iid:c,slot:l,events:i,context:s,children:$r(o,t,r),[jr]:r};return(0,f.hasOwnProperty)(e,"if")&&(h.if=e.if),h}function $r(e,t,r){if(Array.isArray(e))return e.map((e=>Dr(e,t,r)))}var Hr=["blockingList","node","menuRequests","hasTrackingControls"],Wr=["if","permissionsPreCheck"],qr=["formData"],Kr=["src"],zr=["href"];function Gr(e,t,r,n,a,o,i){return Jr.apply(this,arguments)}function Jr(){return Jr=(0,o.Z)((function*(e,t,r,n,o,i,s){var l=yield function(e,t){return Bt.apply(this,arguments)}(t,r),c={blockingList:[],menuRequests:[]};switch(l){case"missed":break;case"unauthenticated":c.unauthenticated=!0;break;default:var u,d=c.route=l.route;c.path=l.match.path;var f=(0,a.Z)((0,a.Z)({},r),{},{match:l.match});s&&f.ctxStore.disposeDataInRoutes(t);var v=o.concat(d);f.ctxStore.define(d.context,f,void 0,v),f.pendingPermissionsPreCheck.push(null==ya||null===(u=ya.checkPermissions)||void 0===u?void 0:u.preCheckPermissionsForBrickOrRoute(d,(e=>ut(e,f))));var{preLoadBricks:h}=d;if(Array.isArray(h)&&c.blockingList.push((0,p.loadBricksImperatively)(h,Za())),"redirect"===d.type){var m;if("string"!=typeof(m="string"==typeof d.redirect?yield ut(d.redirect,f):(yield ze((0,a.Z)({transform:"redirect"},d.redirect),f)).redirect))throw console.error("Unexpected redirect result:",m),new Error("Unexpected type of redirect result: ".concat(typeof m));c.redirect={path:m}}else{var g=function(e,t){if(e){if("brick"===e.type)throw console.error("Set menu with brick is dropped in v3:",e),new Error("Set menu with brick is dropped in v3");if("resolve"!==e.type)return ut(e,t);console.warn("Set menu with resolve is not supported in v3 yet:",e)}}(d.menu,f);g&&c.menuRequests.push(g),"routes"===d.type?on(c,yield Gr(e,d.routes,f,n,v,i)):on(c,yield Yr(e,d.bricks,f,n,v,i)),e.tag===Ur.BRICK&&n.memoizeMenuRequests(d,c.menuRequests)}}return c})),Jr.apply(this,arguments)}function Yr(e,t,r,n,a,o,i,s){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,o.Z)((function*(e,t,r,n,a,o,i,s){var l={blockingList:[],menuRequests:[]},c=null!=s?s:[];return(yield Promise.all(t.map(((t,s)=>Xr(e,t,r,n,a,o,c.concat(s),i&&new Map(i)))))).forEach(((t,r)=>{t.hasTrackingControls&&n.memoize(o,c.concat(r),t.node,e),on(l,t)})),l}))).apply(this,arguments)}function Xr(e,t,r,n,a,o){return en.apply(this,arguments)}function en(){return en=(0,o.Z)((function*(e,t,r,n,i,s){var l,c,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new Map,v={blockingList:[],menuRequests:[]};if(!t.brick)return t.template?console.error("Legacy templates are dropped in v3:",t):console.error("Invalid brick:",t),v;var{if:h,permissionsPreCheck:m}=t,b=(0,g.Z)(t,Wr);if(function(e){return"string"==typeof e?(0,O.isTrackAll)(e):et(e)&&(0,O.isTrackAll)(tt(e))}(h))return Xr(e,(0,a.Z)({brick:":if",dataSource:h,permissionsPreCheck:m,slots:{"":{type:"bricks",bricks:[b]}}},Object.getOwnPropertySymbols(t).reduce(((e,r)=>(0,a.Z)((0,a.Z)({},e),{},{[r]:t[r]})),{})),r,n,i,s,u,d);var w=t[Ft],S=t[jr],k=(0,a.Z)((0,a.Z)({},r),{},{tplStateStoreId:w,formStateStoreId:S});(0,f.hasOwnProperty)(t,Ut)&&(k.forEachItem=t[Ut],k.forEachIndex=t[Nt]);var{context:A}=t;if(Array.isArray(A)&&A.length>0){var I=Ce(k);Ze(I,"Defining context on bricks","check your brick:",t),I||k.ctxStore.define(A,k)}if(k.pendingPermissionsPreCheck.push(null==ya||null===(l=ya.checkPermissions)||void 0===l?void 0:l.preCheckPermissionsForBrickOrRoute(t,(e=>ut(e,k)))),!(yield function(e,t){return bt.apply(this,arguments)}(t,k)))return v;var P=t.brick;if(P.startsWith(":")){var x;!function(e){if(":forEach"!==e&&":if"!==e&&":switch"!==e)throw new Error('Unknown storyboard control node: "'.concat(e,'"'))}(P);var{dataSource:C}=t,Z=function(){var r=(0,o.Z)((function*(r){var a,o=yield ut(C,r),l=":forEach"===P?"":":switch"===P?String(o):o?"":"else",c=sn(t.children,t.slots),p=c&&(0,f.hasOwnProperty)(c,l)&&(null===(a=c[l])||void 0===a?void 0:a.bricks);if(!Array.isArray(p))return{blockingList:[],menuRequests:[]};switch(P){case":forEach":return Array.isArray(o)?function(e,t,r,n,a,o,i,s,l){return tn.apply(this,arguments)}(e,o,p,r,n,i,s,d,u):{blockingList:[],menuRequests:[]};case":if":case":switch":return Yr(e,p,r,n,i,s,d,u)}}));return function(e){return r.apply(this,arguments)}}(),R=function(){var t=(0,o.Z)((function*(t){var r,n=yield Z(t);return null!==(r=n.node)&&void 0!==r||(n.node={tag:Ur.PLACEHOLDER,return:e}),n}));return function(e){return t.apply(this,arguments)}}(),B=yield R(k),{onMount:L,onUnmount:M}=null!==(x=t.lifeCycle)&&void 0!==x?x:{},{contextNames:_,stateNames:F}=wt(C);if(_||F){B.hasTrackingControls=!0;var U=0,N=function(){var t=(0,o.Z)((function*(){var t=++U,[r,a,o]=an(k),i=yield R(r),l=[...a,...o];if(yield nn(i,r,l),U===t)for(var c of(M&&sr(M,k)(new CustomEvent("unmount",{detail:{rerender:!0}})),n.reRender(s,u,i.node,e),L&&sr(L,r)(new CustomEvent("mount",{detail:{rerender:!0}})),l))c.mountAsyncData()}));return function(){return t.apply(this,arguments)}}(),j=(0,y.debounce)(N);if(_)for(var V of _)k.ctxStore.onChange(V,j);if(F)for(var D of F)Be(k,"STATE",': "'.concat(C,'"')).onChange(D,j)}return L&&n.registerArbitraryLifeCycle("onMount",(()=>{sr(L,k)(new CustomEvent("mount",{detail:{rerender:!1}}))})),M&&n.registerArbitraryLifeCycle("onUnmount",(()=>{sr(M,k)(new CustomEvent("unmount",{detail:{rerender:!1}}))})),B}/\.tpl-/.test(P)&&!Re.get(P)&&(yield ln((0,p.loadBricksImperatively)([P],Za()),"brick",P,n.unknownBricks));var $,H,W=function(e,t){if(!e.includes(".")&&e.startsWith("tpl-")&&t){var r="".concat(t,".").concat(e);if(Re.get(r))return r}return!!Re.get(e)&&e}(P,null===(c=k.app)||void 0===c?void 0:c.id);if(W){var q,K=null!==(q=d.get(W))&&void 0!==q?q:0;if(K>=10)throw new Error('Maximum custom template stack overflowed: "'.concat(W,'"'));d.set(W,K+1)}else P.includes("-")&&!customElements.get(P)&&(P===Nr?customElements.define(Nr,class extends HTMLElement{get $$typeof(){return"form-renderer"}}):v.blockingList.push(ln((0,p.enqueueStableLoadBricks)([P],Za()),"brick",P,n.unknownBricks)));if(P===Nr){var z,G=null!==(z=t.properties)&&void 0!==z?z:{};({formData:$}=G),H=(0,g.Z)(G,qr)}else H=t.properties;var J=[],Y=function(e,t,r){return(0,f.isObject)(e)?Object.entries(e).map((e=>{var[n,a]=e,{contextNames:o,stateNames:i,formStateNames:s}=wt(a);return(o||i||s)&&r.push({contextNames:o,stateNames:i,formStateNames:s,propName:n,propValue:a}),[n,ut(a,t,{$$lazyForUseBrick:!0,$$stateOfUseBrick:"useBrick"===n?st.USE_BRICK:st.INITIAL})]})):[]}(H,k,J),Q=t[_t];Q&&Y.push(...Q);var X="script"===P;if(X||"link"===P){var ee=yield At(Y);if(X?ee.src:"stylesheet"===ee.rel&&ee.href){var te,re=null!==(te=window.PUBLIC_ROOT)&&void 0!==te?te:"";if(X){var{src:ne}=ee,ae=(0,g.Z)(ee,Kr);yield ln((0,p.loadScript)(ne,re,ae),"script",ne,"silent")}else{var{href:oe}=ee;ae=(0,g.Z)(ee,zr),yield ln((0,p.loadStyle)(oe,re,ae),"stylesheet",oe,"silent")}return v}}var ie={tag:Ur.BRICK,type:W||P,return:e,slotId:s,events:t.events,runtimeContext:k,portal:t.portal,iid:t.iid,ref:t.ref};v.node=ie;var se=(0,T.strictCollectMemberUsage)([t.events,t.lifeCycle],"PROCESSORS",2);se.size>0&&v.blockingList.push(ln((0,p.loadProcessorsImperatively)(se,Za()),"processors",[...se].join(", "),n.unknownBricks));var le=[],ce=function(){var e=(0,o.Z)((function*(){ie.properties=yield At(Y),function(e,t){var r=function(t){var r=()=>{e.element&&xt(e.element,{[t.propName]:t.propValue},e.runtimeContext)};if(t.contextNames)for(var n of t.contextNames)e.runtimeContext.ctxStore.onChange(n,r);if(t.stateNames){var a=Be(e.runtimeContext,"STATE",': "'.concat(t.propValue,'"'));for(var o of t.stateNames)a.onChange(o,r)}if(t.formStateNames){var i=je(e.runtimeContext,"FORM_STATE",': "'.concat(t.propValue,'"'));for(var s of t.formStateNames)i.onChange(s,r)}};for(var n of t)r(n)}(ie,J)}));return function(){return e.apply(this,arguments)}}();le.push(ce()),n.registerBrickLifeCycle(ie,t.lifeCycle);var ue,de=t;W?de=_r(W,t,ie,Y,n):P===Nr&&(de=function(e,t,r,n,o){var i,s,l="string"==typeof e?JSON.parse(e):e,c=(0,y.uniqueId)("form-state-"),u=(0,a.Z)((0,a.Z)({},r.runtimeContext),{},{formStateStoreId:c});delete u.forEachItem,delete u.forEachIndex,delete u.tplStateStoreId;var d=new Cr("FORM_STATE",void 0,o);u.formStateStoreMap.set(c,d),u.formStateStoreScope&&u.formStateStoreScope.push(d);var p=null!==(i=l.context)&&void 0!==i?i:[];p.some((e=>"params"===e.name))||p.push({name:"params"}),d.define(p,u,n);var v=Dr(l.formSchema,l.fields,c);return Vr.includes(v.brick)&&t.events&&(v.events=function(e,t){var r=null!=e?e:{};for(var[n,a]of Object.entries(t))r[n]=(0,f.hasOwnProperty)(r,n)?[r[n],a].flat():a;return r}(v.events,t.events)),"boolean"!=typeof(null===(s=t.properties)||void 0===s?void 0:s.renderRoot)||t.properties.renderRoot?(0,a.Z)((0,a.Z)({},t),{},{slots:void 0,children:[{brick:"eo-micro-view",properties:{style:{padding:"12px"}},children:[v]}]}):(0,a.Z)((0,a.Z)({},t),{},{slots:void 0,children:[v]})}($,t,ie,Y,n)),de.portal&&(ie.slotId=void 0),W?(delete(ue=(0,a.Z)({},k)).forEachItem,delete ue.forEachIndex):ue=k;var pe=function(){var e=(0,o.Z)((function*(){var e=sn(de.children,de.slots);if(e){var t=new Set,r=yield Promise.all(Object.entries(e).map(((e,r)=>{var[s,l]=e;return"routes"!==l.type?Yr(ie,l.bricks,ue,n,i,s,d):(k.flags["incremental-sub-route-rendering"]&&(t.add(r),n.performIncrementalRender(function(){var e=(0,o.Z)((function*(e){var{homepage:t}=ue.app,{pathname:r}=e;if(!E(t,r)||!i.every((e=>Lt(e,t,r))))return!1;var o,[c,u,d]=an((0,a.Z)((0,a.Z)({},ue),{},{location:e,query:new URLSearchParams(e.search)})),p=!1,f=[];try{if(!(o=yield Gr(ie,l.routes,c,n,i,s,!0)).route)return!1;if(n.reBailout(o))return!0;f=[...u,...d],yield nn(o,c,[c.ctxStore,...f]),yield n.reMergeMenuRequests(l.routes,o.route,o.menuRequests)}catch(e){console.error("Incremental sub-router failed:",e);var v=n.reCatch(e,ie);if(!v)return!0;({failed:p,output:o}=v),yield n.reMergeMenuRequests(l.routes,o.route,o.menuRequests)}if(n.reRender(s,[],o.node,ie),!p)for(var h of(c.ctxStore.mountAsyncData(o.route),f))h.mountAsyncData();return!0}));return function(t){return e.apply(this,arguments)}}())),Gr(ie,l.routes,ue,n,i,s))}))),l=(0,a.Z)((0,a.Z)({},v),{},{node:void 0,blockingList:[],menuRequests:[]});r.forEach(((e,r)=>{t.has(r)&&n.memoize(s,[],e.node,ie),on(l,e)})),l.node&&(ie.child=l.node),on(v,(0,a.Z)((0,a.Z)({},l),{},{node:void 0}))}}));return function(){return e.apply(this,arguments)}}();return le.push(pe()),yield Promise.all(le),v})),en.apply(this,arguments)}function tn(){return(tn=(0,o.Z)((function*(e,t,r,n,o,i,s,l,c){var u={blockingList:[],menuRequests:[]},d=t.length;return(yield Promise.all(t.map(((t,u)=>Promise.all(r.map(((r,p)=>Xr(e,r,(0,a.Z)((0,a.Z)({},n),{},{forEachItem:t,forEachIndex:u}),o,i,s,c.concat(u*d+p),l&&new Map(l))))))))).flat().forEach(((t,r)=>{t.hasTrackingControls&&o.memoize(s,c.concat(r),t.node,e),on(u,t)})),u}))).apply(this,arguments)}function rn(e){return[e.ctxStore,...e.tplStateStoreMap.values(),...e.formStateStoreMap.values()]}function nn(e,t,r){return(0,p.flushStableLoadBricks)(),Promise.all([...e.blockingList,...r.map((e=>e.waitForAll())),...t.pendingPermissionsPreCheck])}function an(e){var t=[],r=[];return[(0,a.Z)((0,a.Z)({},e),{},{tplStateStoreScope:t,formStateStoreScope:r}),t,r]}function on(e,t){var{blockingList:r,node:n,menuRequests:a,hasTrackingControls:o}=t,i=(0,g.Z)(t,Hr);if(e.blockingList.push(...r),e.menuRequests.push(...a),n)if(e.node){for(var s=e.node;s.sibling;)s=s.sibling;s.sibling=n}else e.node=n;Object.assign(e,i)}function sn(e,t){var r=t;if(Array.isArray(e)&&!r)for(var n of(r={},e)){var a,o=null!==(a=n.slot)&&void 0!==a?a:"";(0,f.hasOwnProperty)(r,o)||(r[o]={type:"bricks",bricks:[]}),r[o].bricks.push(n)}return r}function ln(e,t,r,n){return"silent"===n?e.catch((e=>{console.error("Load ".concat(t,' "').concat(r,'" failed:'),e)})):e}function cn(e){var t,{ref:r,runtimeContext:n,element:a}=e;if(r&&n.tplStateStoreId){var{hostBrick:o}=Be(n,"bindTemplateProxy"),i=o.tplHostMetadata;i.internalBricksByRef.set(r,e);var s=null===(t=i.proxy)||void 0===t?void 0:t.events;if(s){var l=function(e){if(u.ref===r){var t,n,i,s=t=>{t.bubbles&&t.stopPropagation(),o.element.dispatchEvent(new CustomEvent(e,{detail:t.detail,bubbles:t.bubbles,cancelable:t.cancelable,composed:t.composed}))},l=null!==(t=u.refEvent)&&void 0!==t?t:e;a.addEventListener(l,s),null!==(i=(n=a).$$proxyListeners)&&void 0!==i||(n.$$proxyListeners=[]),a.$$proxyListeners.push([l,s])}};for(var[c,u]of Object.entries(s))l(c)}}}function un(e){var{ref:t,runtimeContext:r,element:n}=e;if(null!=r&&r.tplStateStoreId&&t){var{hostBrick:a}=Be(r,"unbindTemplateProxy"),o=a.tplHostMetadata;for(var[i,s]of(o.internalBricksByRef.delete(t),null!==(l=n.$$proxyListeners)&&void 0!==l?l:[])){var l;n.removeEventListener(i,s)}delete n.$$proxyListeners}}function dn(e){e.replaceChildren()}function pn(e,t){for(var r=e.child,n=[];r;){if(r.tag===Ur.BRICK){var a,o=r.type;o.includes("-")&&!customElements.get(o)&&console.error("Undefined custom element: ".concat(o)),"basic-bricks.script-brick"===o&&console.warn("`basic-bricks.script-brick` is deprecated, please take caution when using it");var i=t&&r===e.child?t:document.createElement(o);r.element=i,r.slotId&&i.setAttribute("slot",r.slotId),r.iid&&(i.dataset.iid=r.iid),null!==(a=r.tplHostMetadata)&&void 0!==a&&a.tplStateStoreId&&(i.dataset.tplStateStoreId=r.tplHostMetadata.tplStateStoreId),Pt(i,r.properties),rr(i,r.events,r.runtimeContext),r.tplHostMetadata&&(i.$$tplStateStore=Be({tplStateStoreId:r.tplHostMetadata.tplStateStoreId,tplStateStoreMap:r.runtimeContext.tplStateStoreMap},"mount")),cn(r),r.portal?n.push(i):r.return&&(r.return.childElements||(r.return.childElements=[]),r.return.childElements.push(i))}if(r.child)r=r.child;else if(r.sibling)r=r.sibling;else{for(var s,l=r.return;l;){var c;if(l.childElements)l.tag===Ur.ROOT?null===(c=l.container)||void 0===c||c.append(...l.childElements):l.element.append(...l.childElements),l.childElements=void 0;if(l.tag===Ur.ROOT&&n.length>0&&("function"==typeof l.createPortal?l.createPortal():l.createPortal).append(...n),l.sibling)break;l=l.return}r=null===(s=l)||void 0===s?void 0:s.sibling}}}var fn,vn,hn=["onMount","onUnmount","onMediaChange","onScrollIntoView","onMessage","onMessageClose"],mn=["onBeforePageLoad","onPageLoad","onPageLeave","onBeforePageLeave","onAnchorLoad","onAnchorUnload"],gn=new WeakMap,yn=new WeakMap,bn=new WeakMap,En=new WeakMap,wn=new WeakMap,Sn=new WeakMap,kn=new WeakMap,An=new WeakMap,In=new WeakMap,Pn=new WeakSet,xn=new WeakSet,Cn=new WeakSet,Zn=new WeakSet;class On{constructor(e,t){var r;(0,i.Z)(this,Zn),(0,i.Z)(this,Cn),(0,i.Z)(this,xn),(0,i.Z)(this,Pn),(0,jt.Z)(this,"scope",void 0),(0,jt.Z)(this,"unknownBricks",void 0),(0,jt.Z)(this,"renderId",void 0),(0,s.Z)(this,gn,{writable:!0,value:void 0}),(0,s.Z)(this,yn,{writable:!0,value:{onBeforePageLoad:[],onPageLoad:[],onPageLeave:[],onBeforePageLeave:[],onAnchorLoad:[],onAnchorUnload:[],onMediaChange:[],onScrollIntoView:[],onMount:[],onUnmount:[],onMessage:[],onMessageClose:[]}}),(0,s.Z)(this,bn,{writable:!0,value:new Map}),(0,s.Z)(this,En,{writable:!0,value:void 0}),(0,s.Z)(this,wn,{writable:!0,value:new Map}),(0,s.Z)(this,Sn,{writable:!0,value:void 0}),(0,s.Z)(this,kn,{writable:!0,value:void 0}),(0,s.Z)(this,An,{writable:!0,value:void 0}),(0,s.Z)(this,In,{writable:!0,value:[]}),this.scope=e,this.unknownBricks=null!==(r=null==t?void 0:t.unknownBricks)&&void 0!==r?r:"throw",(0,c.Z)(this,gn,null==t?void 0:t.routeHelper),this.renderId=null==t?void 0:t.renderId}setInitialMenuRequests(e){(0,c.Z)(this,kn,e)}memoizeMenuRequests(e,t){(0,u.Z)(this,An)||(0,c.Z)(this,An,new WeakMap),(0,u.Z)(this,An).set(e,t[0])}reMergeMenuRequests(e,t,r){var n=this;return(0,o.Z)((function*(){var a,o;for(var i of e)if(a=(0,u.Z)(n,An).get(i)){o=i;break}var s=(0,u.Z)(n,kn),l=a?s.indexOf(a):-1;if(-1===l){if(!r.length)return;s.push(...r)}else s.splice(l,s.length-l,...r);o&&o!==t&&(0,u.Z)(n,An).delete(o),yield(0,u.Z)(n,gn).mergeMenus(s)}))()}reBailout(e){return(0,u.Z)(this,gn).bailout(e)}reCatch(e,t){return(0,u.Z)(this,gn).catch(e,t)}didPerformIncrementalRender(e){var t=this;return(0,o.Z)((function*(){return(yield Promise.all((0,u.Z)(t,In).map((t=>t(e))))).some((e=>e))}))()}performIncrementalRender(e){(0,u.Z)(this,In).push(e)}registerBrickLifeCycle(e,t){if(t){var r=[...hn,..."page"===this.scope?mn:[]];for(var n of r){var a=t[n];a&&(0,u.Z)(this,yn)[n].push({brick:e,handlers:a})}(0,y.isEmpty)(t.useResolves)||console.error("`lifeCycle.useResolves` is dropped in v3:",t)}}registerArbitraryLifeCycle(e,t){var r=(0,u.Z)(this,wn).get(e);r?r.add(t):(0,u.Z)(this,wn).set(e,new Set([t]))}memoize(e,t,r,n){(0,u.Z)(this,Sn)||(0,c.Z)(this,Sn,new WeakMap);var a=[null!=e?e:"",...t].join("."),o=(0,u.Z)(this,Sn).get(n);o||(o=new Map,(0,u.Z)(this,Sn).set(n,o)),o.set(a,{node:r,last:Mn(r),lastNormal:_n(r),lastPortal:Un(r)})}reRender(e,t,r,n){var a,o,i,s,c,d,p,f,v,h,m=[null!=e?e:"",...t].join("."),g=(0,u.Z)(this,Sn).get(n).get(m),{node:y,last:b,lastNormal:E,lastPortal:w}=g;(null==y?void 0:y.tag)===Ur.PLACEHOLDER?(a=null!==(i=null===(s=function(e){return Fn(e,!0)}(y))||void 0===s?void 0:s.element)&&void 0!==i?i:null,o=null!==(c=null===(d=function(e){return Nn(e,!0)}(y))||void 0===d?void 0:d.element)&&void 0!==c?c:null):(a=null!==(p=null==E||null===(f=E.element)||void 0===f?void 0:f.nextSibling)&&void 0!==p?p:null,o=null!==(v=null==w||null===(h=w.element)||void 0===h?void 0:h.nextSibling)&&void 0!==v?v:null);var S,k=Mn(r);g.node=r,g.last=k,g.lastNormal=_n(r),g.lastPortal=Un(r);for(var A=n.child;A&&A!==b;){if(A.sibling===y){S=A;break}A=A.sibling}var I=document.createDocumentFragment(),P=document.createDocumentFragment(),x={tag:Ur.ROOT,container:I,createPortal:P,child:r};for(A=r;A;)A.return=x,A=A.sibling;var C,Z,O=jn(y,b);for((0,l.Z)(this,Pn,Tn).call(this,O),pn(x),S?S.sibling=r:n.child=r,k&&(k.sibling=null==b?void 0:b.sibling),A=r;A;)A.return=n,A=A.sibling;if(n.tag===Ur.ROOT?null===(C=n.container)||void 0===C||C.insertBefore(I,a):null===(Z=n.element)||void 0===Z||Z.insertBefore(I,a),P.childNodes.length>0){for(var T,R=r;R&&R.return;)R=R.return;if((null===(T=R)||void 0===T?void 0:T.tag)!==Ur.ROOT)throw new Error("Cannot find render root node. This is a bug of Brick Next, please report it.");("function"==typeof R.createPortal?R.createPortal():R.createPortal).insertBefore(P,o)}var B=jn(r,k);(0,l.Z)(this,xn,Rn).call(this,B)}dispose(){for(var e of Object.values((0,u.Z)(this,yn)))e.length=0;for(var t of(0,u.Z)(this,bn).values()){for(var r of t)r.disconnect();t.length=0}(0,u.Z)(this,bn).clear(),(0,u.Z)(this,En)&&(Se.removeEventListener("change",(0,u.Z)(this,En)),(0,c.Z)(this,En,void 0)),(0,c.Z)(this,Sn,void 0),(0,c.Z)(this,kn,void 0),(0,c.Z)(this,An,void 0),(0,u.Z)(this,wn).clear(),(0,u.Z)(this,In).length=0}dispatchBeforePageLoad(){(0,l.Z)(this,Cn,Bn).call(this,"onBeforePageLoad",new CustomEvent("page.beforeLoad"))}dispatchPageLoad(){var e=new CustomEvent("page.load");(0,l.Z)(this,Cn,Bn).call(this,"onPageLoad",e),window.dispatchEvent(e)}dispatchBeforePageLeave(e){(0,l.Z)(this,Cn,Bn).call(this,"onBeforePageLeave",new CustomEvent("page.beforeLeave",{detail:e}))}dispatchPageLeave(){(0,l.Z)(this,Cn,Bn).call(this,"onPageLeave",new CustomEvent("page.leave"))}dispatchAnchorLoad(){var{hash:e}=C().location;e&&"#"!==e?(0,l.Z)(this,Cn,Bn).call(this,"onAnchorLoad",new CustomEvent("anchor.load",{detail:{hash:e,anchor:e.substring(1)}})):(0,l.Z)(this,Cn,Bn).call(this,"onAnchorUnload",new CustomEvent("anchor.unload"))}initializeScrollIntoView(){for(var{brick:e,handlers:t}of(0,u.Z)(this,yn).onScrollIntoView)(0,l.Z)(this,Zn,Ln).call(this,e,t)}initializeMediaChange(){(0,c.Z)(this,En,(e=>{(0,l.Z)(this,Cn,Bn).call(this,"onMediaChange",new CustomEvent("media.change",{detail:G(e.detail)}))})),Se.addEventListener("change",(0,u.Z)(this,En))}initializeMessageDispatcher(){var e,t=function(e){var t=function(t){var r;null==ya||null===(r=ya.messageDispatcher)||void 0===r||r.onMessage(t.channel,(r=>{sr(t.handlers,e.runtimeContext,e)(new CustomEvent("message.push",{detail:r}))}))};for(var r of[].concat(n))t(r)};for(var{brick:r,handlers:n}of(0,u.Z)(this,yn).onMessage)t(r);null==ya||null===(e=ya.messageDispatcher)||void 0===e||e.onClose((()=>{(0,l.Z)(this,Cn,Bn).call(this,"onMessageClose",new CustomEvent("message.close"))}))}dispatchOnMount(){(0,l.Z)(this,Cn,Bn).call(this,"onMount",new CustomEvent("mount"))}dispatchOnUnmount(){(0,l.Z)(this,Cn,Bn).call(this,"onUnmount",new CustomEvent("unmount"))}}function Tn(e){var t=[...hn,..."page"===this.scope?mn:[]],r=[];for(var n of t){var a=(0,y.remove)((0,u.Z)(this,yn)[n],(t=>e.has(t.brick)));"onUnmount"===n&&r.push(...a)}for(var o of e){var i,s,l=(0,u.Z)(this,bn).get(o);if(null!=l&&l.length){for(var c of l)c.disconnect();l.length=0,(0,u.Z)(this,bn).delete(o)}un(o),null===(i=o.element)||void 0===i||delete i.$$tplStateStore,null===(s=o.element)||void 0===s||s.remove()}var d=new CustomEvent("unmount");for(var{brick:p,handlers:f}of r)sr(f,p.runtimeContext,p)(d)}function Rn(e){var t=new CustomEvent("mount");for(var{brick:r,handlers:n}of(0,u.Z)(this,yn).onMount)e.has(r)&&sr(n,r.runtimeContext,r)(t);for(var{brick:a,handlers:o}of(0,u.Z)(this,yn).onScrollIntoView)e.has(a)&&(0,l.Z)(this,Zn,Ln).call(this,a,o)}function Bn(e,t){for(var{brick:r,handlers:n}of(0,u.Z)(this,yn)[e])sr(n,r.runtimeContext,r)(t);var a=(0,u.Z)(this,wn).get(e);if(a)for(var o of a)o()}function Ln(e,t){var r,n=null!==(r=t.threshold)&&void 0!==r?r:.1,a=new IntersectionObserver(((r,a)=>{r.forEach((r=>{r.isIntersecting&&r.intersectionRatio>=n&&(sr(t.handlers,e.runtimeContext,e)(new CustomEvent("scroll.into.view")),a.disconnect())}))}),{threshold:n});a.observe(e.element);var o=(0,u.Z)(this,bn).get(e);o||(o=[],(0,u.Z)(this,bn).set(e,o)),o.push(a)}function Mn(e){for(var t=e;null!==(r=t)&&void 0!==r&&r.sibling;){var r;t=t.sibling}return t}function _n(e){return Fn(e,!1)}function Fn(e,t){for(var r,n=e;n;){if(n.tag===Ur.BRICK&&!n.portal){if(t)return n;r=n}n=n.sibling}return r}function Un(e){return Nn(e,!1)}function Nn(e,t){for(var r,n=e;n;){if(n.tag===Ur.BRICK&&n.portal){if(t)return n;r=n}if(n.child)n=n.child;else if(n.sibling)n=n.sibling;else{for(var a,o=n.return;o&&!o.sibling;)o=o.return;n=null===(a=o)||void 0===a?void 0:a.sibling}}return r}function jn(e,t){for(var r=new Set,n=e;n;)if(n.tag===Ur.BRICK&&r.add(n),n.child)n=n.child;else{if(n===t)break;if(n.sibling)n=n.sibling;else{for(var a,o=n.return;o&&o!==t&&!o.sibling;)o=o.return;if(o===t)break;n=null===(a=o)||void 0===a?void 0:a.sibling}}return r}function Vn(){if(!fn){if(fn={isInIframe:!1,isInIframeOfSameSite:!1,isInIframeOfNext:!1,isInIframeOfVisualBuilder:!1,isInIframeOfLegacyConsole:!1},window!==window.parent){fn.isInIframe=!0;try{if(window.origin===window.parent.origin){fn.isInIframeOfSameSite=!0;var e="/next/"===m(),t=window.parent.location.pathname,r=t.startsWith("/next/");fn.isInIframeOfNext=0==(Number(e)^Number(r)),fn.isInIframeOfVisualBuilder=t.startsWith("".concat(r?"/next":"","/visual-builder/")),fn.isInIframeOfLegacyConsole=e&&!r}}catch(e){}}Object.freeze(fn)}return fn}function Dn(e){var t;if(!e.$$registerCustomTemplateProcessed){e.$$registerCustomTemplateProcessed=!0;var r=null===(t=e.meta)||void 0===t?void 0:t.customTemplates;if(Array.isArray(r))for(var n of r){var a=n.name.includes(".")?n.name:"".concat(e.app.id,".").concat(n.name);Re.define(a,n)}}}function $n(){return $n=(0,o.Z)((function*(e){if(!e.$$fulfilled)return e.$$fulfilling||(e.$$fulfilling=function(e){return Hn.apply(this,arguments)}(e)),e.$$fulfilling})),$n.apply(this,arguments)}function Hn(){return(Hn=(0,o.Z)((function*(e){var t;yield null==ya||null===(t=ya.fulfilStoryboard)||void 0===t?void 0:t.call(ya,e),_(e),Object.assign(e,{$$fulfilled:!0,$$fulfilling:null})}))).apply(this,arguments)}function Wn(e){var t;t="8.2"===e?"v8-2":"v8",document.documentElement.dataset.ui=t}var qn=new WeakMap,Kn=new WeakMap,zn=new WeakMap,Gn=new WeakMap,Jn=new WeakMap,Yn=new WeakMap,Qn=new WeakMap,Xn=new WeakMap,ea=new WeakMap,ta=new WeakMap,ra=new WeakMap,na=new WeakMap,aa=new WeakSet,oa=new WeakSet,ia=new WeakSet,sa=new WeakSet;class la{constructor(e){(0,i.Z)(this,sa),(0,i.Z)(this,ia),(0,i.Z)(this,oa),(0,i.Z)(this,aa),(0,s.Z)(this,qn,{writable:!0,value:void 0}),(0,s.Z)(this,Kn,{writable:!0,value:!1}),(0,s.Z)(this,zn,{writable:!0,value:void 0}),(0,s.Z)(this,Gn,{writable:!0,value:void 0}),(0,s.Z)(this,Jn,{writable:!0,value:void 0}),(0,s.Z)(this,Yn,{writable:!0,value:void 0}),(0,s.Z)(this,Qn,{writable:!0,value:new Set}),(0,s.Z)(this,Xn,{writable:!0,value:0}),(0,s.Z)(this,ea,{writable:!0,value:void 0}),(0,s.Z)(this,ta,{writable:!0,value:void 0}),(0,s.Z)(this,ra,{writable:!0,value:void 0}),(0,s.Z)(this,na,{writable:!0,value:void 0}),(0,c.Z)(this,qn,e);var t=C();window.addEventListener("beforeunload",(e=>{(0,l.Z)(this,aa,ca).call(this,{})?(e.preventDefault(),e.returnValue=""):delete e.returnValue})),t.block(((e,t)=>(0,l.Z)(this,aa,ca).call(this,{location:e,action:t})))}getRenderId(){return(0,u.Z)(this,ea)}getRuntimeContext(){return(0,u.Z)(this,Jn)}getRecentApps(){return{currentApp:(0,u.Z)(this,ta),previousApp:(0,u.Z)(this,ra)}}getNavConfig(){return(0,u.Z)(this,na)}bootstrap(){var e=this;window.AbortController&&(vn=new AbortController,Z.http.interceptors.request.use((e=>{var t;return(0,a.Z)((0,a.Z)({},e),{},{options:(0,a.Z)((0,a.Z)({},e.options),{},{signal:null!==(t=e.options)&&void 0!==t&&t.noAbortOnRouteChange?null:vn.signal})})})));var t=C();(0,c.Z)(this,zn,t.location);var r=0;return t.listen(function(){var t=(0,o.Z)((function*(t,n){var o,i,s,d,p,f=++r,v={hash:void 0,state:void 0};if(void 0!==t.key&&("POP"!==n||void 0!==(0,u.Z)(e,zn).key&&!1!==(null===(o=(0,u.Z)(e,zn).state)||void 0===o?void 0:o.notify))||(v.key=void 0),((0,h.locationsAreEqual)((0,a.Z)((0,a.Z)({},(0,u.Z)(e,zn)),v),(0,a.Z)((0,a.Z)({},t),v))||"POP"!==n&&!1===(null===(i=t.state)||void 0===i?void 0:i.notify))&&(d=!0),d||(d=yield null===(p=(0,u.Z)(e,Yn))||void 0===p?void 0:p.didPerformIncrementalRender(t)),r===f)if(d)(0,c.Z)(e,zn,t);else{if(vn&&(vn.abort(),vn=new AbortController),(0,c.Z)(e,zn,t),null===(s=(0,u.Z)(e,Yn))||void 0===s||s.dispatchPageLeave(),"POP"===n&&w(b((0,u.Z)(e,qn),t.pathname)))return void window.location.reload();(0,u.Z)(e,Kn)?(0,c.Z)(e,Gn,t):(W("locationChange"),(0,l.Z)(e,ia,da).call(e,t).catch(er))}}));return function(e,r){return t.apply(this,arguments)}}()),(0,l.Z)(this,ia,da).call(this,t.location)}}function ca(e){var t,r=C(),n=r.getBlockMessage();null===(t=(0,u.Z)(this,Yn))||void 0===t||t.dispatchBeforePageLeave(e);var a=r.getBlockMessage();return!n&&a&&r.unblock(),a}function ua(e,t,r){var n,a;if((0,c.Z)(this,Xn,(n=(0,u.Z)(this,Xn),a=n++,n)),a>10){var o='Infinite redirect detected: from "'.concat(r.pathname).concat(r.search).concat(r.hash,'" to "').concat(e,'"');throw new Error(o)}C().replace(e,t)}function da(e){return pa.apply(this,arguments)}function pa(){return(pa=(0,o.Z)((function*(e){(0,c.Z)(this,Kn,!0);try{yield(0,l.Z)(this,sa,fa).call(this,e)}finally{if((0,c.Z)(this,Kn,!1),(0,u.Z)(this,Gn)){var t=(0,u.Z)(this,Gn);(0,c.Z)(this,Gn,void 0),yield(0,l.Z)(this,ia,da).call(this,t)}}}))).apply(this,arguments)}function fa(e){return va.apply(this,arguments)}function va(){return va=(0,o.Z)((function*(e){var t,r,n,i=this,s=(0,c.Z)(this,ea,(0,y.uniqueId)("render-id-"));He=new WeakSet,Ke.clear(),null==ya||null===(t=ya.flowApi)||void 0===t||t.clearCollectWidgetContract(),C().unblock();var d=null==ya||null===(r=ya.pageView)||void 0===r?void 0:r.create(),p=b((0,u.Z)(this,qn),e.pathname),f=null===(n=(0,u.Z)(this,Jn))||void 0===n?void 0:n.app;null!=p&&p.app&&(yield function(e){return $n.apply(this,arguments)}(p));var v,h=(0,c.Z)(this,ta,null==p?void 0:p.app),m=f&&h?f.id!==h.id:f!==h,g=ka().getFeatureFlags(),E=(0,u.Z)(this,Yn),w=(t,r)=>{null==d||d({status:"redirected"}),(0,u.Z)(this,Qn).add(E),(0,l.Z)(this,oa,ua).call(this,t,r,e)},S=()=>{var t=g["sso-enabled"]?"/sso-auth/login":"/auth/login";zt(e),w(t,{from:e})},k=document.querySelector("#main-mount-point"),A=document.querySelector("#portal-mount-point"),I={tag:Ur.ROOT,container:k,createPortal:A},P=()=>{var e;for(var t of(dn(k),dn(A),(0,u.Z)(this,Qn).add(E),(0,u.Z)(this,Qn)))t&&(t.dispatchOnUnmount(),t.dispose());(0,u.Z)(this,Qn).clear(),null==ya||null===(e=ya.messageDispatcher)||void 0===e||e.reset(),m&&((0,c.Z)(this,ra,f),window.dispatchEvent(new CustomEvent("app.change",{detail:{previousApp:f,currentApp:h}})))};if(ee(h&&(oe()[h.id]||h.theme)||"light"),se("default"),h){var x,O,T,R,B,L;null==ya||null===(x=ya.checkInstalledApps)||void 0===x||x.preCheckInstalledApps(p,(e=>!!Ba(e)));var M={bailout:e=>e.unauthenticated?(S(),!0):e.redirect?(w(e.redirect.path,e.redirect.state),!0):void(0,c.Z)(this,Xn,0),mergeMenus:(v=(0,o.Z)((function*(e){var t=yield Promise.all(e);(0,c.Z)(i,na,function(e){var t={breadcrumb:[]};for(var r of e){var{breadcrumb:n}=r;n&&(n.overwrite?t.breadcrumb=n.items:t.breadcrumb.push(...n.items))}return t}(t))})),function(e){return v.apply(this,arguments)}),catch:(t,r)=>{if(!Jt(t)||window.NO_AUTH_GUARD){if(!(t instanceof Z.HttpAbortError)){var n=ka().getMiscSettings().noAuthGuardLoginPath;return Jt(t)&&n?void w(n,{from:e}):{failed:!0,output:{node:{tag:Ur.BRICK,type:"div",properties:{textContent:Gt(t)},runtimeContext:null,return:r},blockingList:[],menuRequests:[]}}}(0,u.Z)(this,Qn).add(E)}else S()}},_=(0,c.Z)(this,Yn,new On("page",{routeHelper:M,renderId:s})),F=(0,c.Z)(this,Jn,{app:h,location:e,query:new URLSearchParams(e.search),flags:g,sys:(0,a.Z)((0,a.Z)((0,a.Z)({},null==ya||null===(O=ya.auth)||void 0===O?void 0:O.getAuth()),Vn()),{},{settings:{brand:ka().getBrandSettings()}}),ctxStore:new Cr("CTX",void 0,_),pendingPermissionsPreCheck:[null==ya||null===(T=ya.checkPermissions)||void 0===T?void 0:T.preCheckPermissions(p)],tplStateStoreMap:new Map,formStateStoreMap:new Map});(0,c.Z)(this,na,void 0),Dn(p),ge(null===(R=p.meta)||void 0===R?void 0:R.functions,h),null==ya||null===(B=ya.flowApi)||void 0===B||B.collectContract(null===(L=p.meta)||void 0===L?void 0:L.contracts);var U,N=!1,j=[];try{if(U=yield Gr(I,function(e){if(window.parent===window)return e;var t=e,r=(0,y.findLastIndex)(t,(e=>e.path.startsWith("${APP.homepage}/_dev_only_/template-preview/")));t=[...t.slice(0,r+1),{path:"${APP.homepage}/_dev_only_/template-preview/:templateId",bricks:[{brick:"span"}],menu:!1,exact:!0},...t.slice(r+1)];var n=(0,y.findLastIndex)(t,(e=>e.path.startsWith("${APP.homepage}/_dev_only_/snippet-preview/")));return[...t.slice(0,n+1),{path:"${APP.homepage}/_dev_only_/snippet-preview/:snippetId",bricks:[{brick:"span"}],menu:!1,exact:!0},...t.slice(n+1)]}(p.routes),F,_,[]),M.bailout(U))return;j=rn(F),yield nn(U,F,j),yield M.mergeMenus(U.menuRequests),_.setInitialMenuRequests(U.menuRequests)}catch(e){console.error("Router failed:",e);var V=M.catch(e,I);if(!V)return;({failed:N,output:U}=V)}if(I.child=U.node,P(),U.route&&"routes"!==U.route.type||N){if(N||_.dispatchBeforePageLoad(),ne(),ce(),window.DISABLE_REACT_FLUSH_SYNC=!1,Wn(null==h?void 0:h.uiVersion),pn(I),setTimeout((()=>{window.DISABLE_REACT_FLUSH_SYNC=!0})),window.scrollTo(0,0),N)null==d||d({status:"failed"});else{for(var D of(_.dispatchPageLoad(),_.dispatchAnchorLoad(),_.dispatchOnMount(),_.initializeScrollIntoView(),_.initializeMediaChange(),_.initializeMessageDispatcher(),j))D.mountAsyncData();null==d||d({status:"ok",path:U.path,pageTitle:document.title})}return void W("rendered")}}else{if(!window.NO_AUTH_GUARD&&null!=ya&&ya.auth&&!ya.auth.isLoggedIn())return void S();P()}ne(),ce();var $={tag:Ur.BRICK,type:"div",properties:{textContent:"Page not found"},runtimeContext:null,return:I};I.child=$,pn(I),window.scrollTo(0,0),null==d||d({status:"not-found"}),W("rendered")})),va.apply(this,arguments)}var ha,ma,ga,ya,ba="undefined"!=typeof BRICK_PACKAGES?BRICK_PACKAGES:null,Ea=r(835);function wa(e){var t=[];if(["light","dark"].forEach((r=>{if(e[r])switch(e.type){case"brandColor":t.push((0,Ea.Ol)(r,e[r]));break;case"baseColors":t.push((0,Ea.cb)(r,e[r],e.backgroundColor));break;case"variables":t.push((0,Ea.BI)(r,e[r]))}})),t.length>0){var r=document.createElement("style");return r.textContent=t.join("\n\n"),document.head.appendChild(r),()=>{r.remove()}}}function Sa(e){if(ha)throw new Error("Cannot create multiple runtimes");return window.addEventListener("message",(e=>{var{data:t}=e;if((null==t?void 0:t.source)===V){var r=t.payload;switch(null==r?void 0:r.type){case D:H=r.active;break;case $:N=r.panel}}})),ya=null==e?void 0:e.hooks,(0,d.initializeI18n)(Wt,qt),v.locale(d.i18n.language),d.i18n.on("languageChanged",(()=>{v.locale(d.i18n.language)})),x(),ha=new xa}var ka=function(){var e=P();if(e)return function(){return new Proxy(e.getRuntime(),{get(){switch(arguments.length<=1?void 0:arguments[1]){case"getCurrentApp":case"getRecentApps":case"hasInstalledApp":case"getDesktops":case"getLaunchpadSettings":case"getLaunchpadSiteMap":case"toggleLaunchpadEffect":case"applyPageTitle":case"getNavConfig":case"getFeatureFlags":case"getMiscSettings":case"getBrandSettings":return Reflect.get(...arguments)}}})}}()||function(){return ha},Aa=new WeakMap,Ia=new WeakMap,Pa=new WeakSet;class xa{constructor(){(0,i.Z)(this,Pa),(0,s.Z)(this,Aa,{writable:!0,value:!1}),(0,s.Z)(this,Ia,{writable:!0,value:!1})}initialize(e){var t;if((0,u.Z)(this,Aa))throw new Error("The runtime cannot be initialized more than once");(0,c.Z)(this,Aa,!0),function(e){if(Array.isArray(e.storyboards)){var t=function(){if(r.locales){var e="tmp/".concat(r.id);Object.entries(r.locales).forEach((t=>{var[r,n]=t;d.i18n.addResourceBundle(r,e,n)})),r.localeName=d.i18n.getFixedT(null,e)("name",r.name),Object.keys(r.locales).forEach((t=>{d.i18n.removeResourceBundle(t,e)}))}else r.localeName=r.name};for(var{app:r}of e.storyboards)t()}(0,f.isObject)(e.settings)&&(0,f.deepFreeze)(e.settings),e.brickPackages&&(0,f.deepFreeze)(e.brickPackages)}(e),ma=e;var r,{notification:n,dialog:o}=(0,l.Z)(this,Pa,Ca).call(this);!1!==n&&(r=null!=n?n:"basic.show-notification",(0,this.loadBricks)([r]).then((()=>{Qt=document.createElement(r)}),(e=>{console.error("Load notification service failed:",e)}))),!1!==o&&function(e,t){t([e]).then((()=>{Mt=document.createElement(e)}),(e=>{console.error("Load dialog service failed:",e)}))}(null!=o?o:"basic.show-dialog",this.loadBricks),function(e){e&&(e.brandColor?wa((0,a.Z)({type:"brandColor"},e.brandColor)):e.baseColors?wa((0,a.Z)({type:"baseColors"},e.baseColors)):e.variables&&wa((0,a.Z)({type:"variables"},e.variables)))}(null===(t=e.settings)||void 0===t||null===(t=t.misc)||void 0===t?void 0:t.theme)}bootstrap(e){var t=this;return(0,o.Z)((function*(){if(e&&t.initialize(e),(0,u.Z)(t,Ia))throw new Error("The runtime cannot be bootstrapped more than once");(0,c.Z)(t,Ia,!0),ga=new la(ma.storyboards),yield ga.bootstrap()}))()}getRecentApps(){var e,t;return null!==(e=null===(t=ga)||void 0===t?void 0:t.getRecentApps())&&void 0!==e?e:{}}getCurrentApp(){var e;return null===(e=ga)||void 0===e?void 0:e.getRecentApps().currentApp}hasInstalledApp(e,t){return Ne(e,t)}getFeatureFlags(){var e,t;return(0,a.Z)((0,a.Z)((0,a.Z)({},null===(e=ma)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.featureFlags),null===(t=ga)||void 0===t||null===(t=t.getRecentApps().currentApp)||void 0===t||null===(t=t.config)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.featureFlags),{},{"migrate-to-brick-next-v3":!0})}getMiscSettings(){var e,t;return(0,a.Z)((0,a.Z)({},null===(e=ma)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.misc),null===(t=ga)||void 0===t||null===(t=t.getRecentApps().currentApp)||void 0===t||null===(t=t.config)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.misc)}getBrandSettings(){var e;return(0,a.Z)({base_title:"DevOps 管理专家"},null===(e=ma)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.brand)}getLaunchpadSettings(){var e;return(0,a.Z)({columns:7,rows:4},null===(e=ma)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.launchpad)}getDesktops(){var e,t;return null!==(e=null===(t=ma)||void 0===t?void 0:t.desktops)&&void 0!==e?e:[]}getLaunchpadSiteMap(){var e,t;return null!==(e=null===(t=ma)||void 0===t?void 0:t.siteSort)&&void 0!==e?e:[]}toggleLaunchpadEffect(e){document.body.classList.toggle("launchpad-open",e)}applyPageTitle(e){var t=this.getBrandSettings().base_title;document.title=e?"".concat(e," - ").concat(t):t}getNavConfig(){var e;return null===(e=ga)||void 0===e?void 0:e.getNavConfig()}loadBricks(e){return(0,p.loadBricksImperatively)(e,Za())}}function Ca(){var e,t;return null!==(e=null===(t=ma)||void 0===t||null===(t=t.settings)||void 0===t?void 0:t.presetBricks)&&void 0!==e?e:{}}function Za(){var e,t,r,n;return null!==(e=null!==(t=null!==(r=null===(n=ma)||void 0===n?void 0:n.brickPackages)&&void 0!==r?r:ba)&&void 0!==t?t:window.STANDALONE_BRICK_PACKAGES)&&void 0!==e?e:[]}function Oa(){var e;return null===(e=ga)||void 0===e?void 0:e.getRenderId()}function Ta(){var e;return null===(e=ga)||void 0===e?void 0:e.getRuntimeContext()}function Ra(e){var t;return null===(t=ma)||void 0===t||null===(t=t.storyboards)||void 0===t?void 0:t.find((t=>t.app.id===e))}function Ba(e){var t;return null===(t=Ra(e))||void 0===t?void 0:t.app}function La(){for(var e,t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];null==ya||null===(e=ya.auth)||void 0===e||null===(t=e.authenticate)||void 0===t||t.call(e,...n)}function Ma(){var e;return null==ya||null===(e=ya.auth)||void 0===e?void 0:e.getAuth()}function _a(){var e,t;return null==ya||null===(e=ya.auth)||void 0===e||null===(t=e.logout)||void 0===t?void 0:t.call(e)}function Fa(){var e;return null==ya||null===(e=ya.auth)||void 0===e?void 0:e.isLoggedIn()}function Ua(e,t,r){return Na.apply(this,arguments)}function Na(){return(Na=(0,o.Z)((function*(e,t,r){return Je(yield De(e),e,"resolve",t,r)}))).apply(this,arguments)}function ja(e){var t,{portal:r,scope:n="fragment",unknownBricks:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r;t=r||(()=>((i=document.createElement("div")).style.position="absolute",i.style.width=i.style.height="0",document.body.append(i),i));var s,l,c=!1;return{render(r){var u=arguments;return(0,o.Z)((function*(){var{theme:o,uiVersion:d,context:p,functions:f,templates:v,i18n:h}=u.length>1&&void 0!==u[1]?u[1]:{};if(c)throw new Error("The root is unmounted and cannot be rendered any more");var m=[].concat(r),g=s,b=(0,y.uniqueId)("render-id-");s=new On(n,{unknownBricks:a,renderId:b});var E={ctxStore:new Cr("CTX",void 0,s),pendingPermissionsPreCheck:[],tplStateStoreMap:new Map,formStateStoreMap:new Map},w={tag:Ur.ROOT,container:e,createPortal:t};if("page"===n){var S;ee(null!=o?o:"light"),se("default"),Wn(d);var k={id:"demo",homepage:"/demo"};E.app=k;var A={app:k,meta:{i18n:h,customTemplates:v}};null===(S=l)||void 0===S||S(),l=_(A),Dn(A),ge(f,k)}E.ctxStore.define(p,E);var I,P=!1,x=[];try{I=yield Yr(w,m,E,s,[]),x=rn(E),yield nn(I,E,x)}catch(e){P=!0,I={node:{tag:Ur.BRICK,type:"div",properties:{textContent:Gt(e)},return:w,runtimeContext:null},blockingList:[],menuRequests:[]}}if(w.child=I.node,null==g||g.dispatchOnUnmount(),null==g||g.dispose(),dn(e),i&&dn(i),"page"===n&&(P||s.dispatchBeforePageLoad(),ne(),ce()),pn(w),"page"===n&&window.scrollTo(0,0),!P){for(var C of x)C.mountAsyncData();"page"===n&&s.dispatchPageLoad(),s.dispatchOnMount(),s.initializeScrollIntoView(),s.initializeMediaChange(),s.initializeMessageDispatcher()}}))()},unmount(){c||(c=!0,dn(e),i&&(dn(i),r||i.remove()))}}}function Va(e,t){return Da.apply(this,arguments)}function Da(){return(Da=(0,o.Z)((function*(e,t){var r,n,o,i,[s,l,c]=an((0,a.Z)((0,a.Z)({},Ta()),{},{data:t,pendingPermissionsPreCheck:[]}));null!==(r=s.tplStateStoreMap)&&void 0!==r||(s.tplStateStoreMap=new Map),null!==(n=s.formStateStoreMap)&&void 0!==n||(s.formStateStoreMap=new Map);var u=new On("fragment"),d={tag:Ur.ROOT,createPortal:null},p=e.transform,f=Ce();p&&Ze(f,"`useBrick.transform`",'please use "properties" instead, check your useBrick:',e);var v=yield Xr(d,f?e:(0,a.Z)((0,a.Z)({},e),{},{properties:(0,a.Z)((0,a.Z)({},e.properties),p)}),s,u,[]),h=[...l,...c];if(yield nn(v,s,h),(null===(o=v.node)||void 0===o?void 0:o.tag)===Ur.PLACEHOLDER)throw new Error("The root brick of useBrick cannot be an ignored control node");if(null!==(i=v.node)&&void 0!==i&&i.portal)throw new Error("The root brick of useBrick cannot be a portal brick");return d.child=v.node,{tagName:v.node?v.node.type:null,renderRoot:d,rendererContext:u,scopedStores:h}}))).apply(this,arguments)}function $a(e,t){var r,{renderRoot:n,rendererContext:a,scopedStores:o}=e;for(var i of(n.createPortal=()=>{var e=document.querySelector("#portal-mount-point");return r=document.createElement("div"),e.appendChild(r),r},pn(n,t),a.dispatchOnMount(),a.initializeScrollIntoView(),a.initializeMediaChange(),a.initializeMessageDispatcher(),o))i.mountAsyncData();return{portal:r}}function Ha(e,t){var{rendererContext:r}=e;t.portal&&(dn(t.portal),t.portal.remove()),r.dispatchOnUnmount(),r.dispose()}function Wa(e,t,r){if(r)throw new Error("Legacy doTransform does not support options in v3");return pt(t,(0,a.Z)((0,a.Z)({},Ta()),{},{data:e}),{noInject:!0})}function qa(e,t){var r=Ra(e);Object.assign(r,(0,a.Z)((0,a.Z)({},t),{},{$$fulfilling:null,$$fulfilled:!0,$$registerCustomTemplateProcessed:!1})),_(r)}function Ka(e,t){var r=Ra(e),n=!1,a=e=>"".concat(e.path,".").concat(e.exact),o=(e,r)=>e.map((e=>{var i=a(e);return"routes"===e.type?(e.routes=o(e.routes,r),e):i===r?(n=!0,t):e}));r.routes=o(r.routes,a(t)),n||r.routes.unshift(t)}function za(e,t,r){var n="".concat(e,".").concat(t.name);Re.define(n,{bricks:t.bricks,proxy:t.proxy,state:t.state}),Ga(e,t.name,r)}function Ga(e,t,r){Xa(e,"${APP.homepage}/_dev_only_/template-preview/".concat(t),[(0,a.Z)({brick:t},(0,y.pick)(r,"properties","events","lifeCycle","context","slots","children"))])}function Ja(e){return"${APP.homepage}/_dev_only_/snippet-preview/".concat(e)}function Ya(e,t){var r;Xa(e,Ja(t.snippetId),null!==(r=t.bricks)&&void 0!==r&&r.length?t.bricks:[{brick:"span"}],t.context)}var Qa=Ya;function Xa(e,t,r,n){var{routes:a}=Ra(e),o=a.findIndex((e=>e.path===t)),i={path:t,bricks:r,context:n,menu:!1,exact:!0};-1===o?a.unshift(i):a.splice(o,1,i)}function eo(e,t){var{tplStateStoreId:r}=t,n=Ta();return r?Be((0,a.Z)((0,a.Z)({},n),{},{tplStateStoreId:r}),"STATE").getValue(e):n.ctxStore.getValue(e)}function to(e){var{tplStateStoreId:t}=e,r=Ta();return t?Be((0,a.Z)((0,a.Z)({},r),{},{tplStateStoreId:t}),"STATE").getAllValues():r.ctxStore.getAllValues()}function ro(e){return Za().find((t=>t.id?t.id===e:t.filePath.startsWith(e)))}function no(){return Oa()}function ao(e,t){return oo.apply(this,arguments)}function oo(){return(oo=(0,o.Z)((function*(e,t){var r,{appId:n,updateStoryboardType:a,collectUsedContracts:o}=t,i=Ra(n);if("route"===a)r={routes:[e]};else if("template"===a)r={meta:{customTemplates:[e]}};else if("snippet"===a){var s,l=Ja(e.snippetId);r={routes:[null==i||null===(s=i.routes)||void 0===s?void 0:s.find((e=>e.path===l))]}}var c=[];return r&&o&&(yield o(r)).forEach((e=>{var t,[r,n,a]=e.match(/(.*)@(.*):\d\.\d\.\d/);null!=i&&null!==(t=i.meta)&&void 0!==t&&null!==(t=t.contracts)&&void 0!==t&&t.some((e=>e.namespaceId===n&&e.name===a))||c.push(e)})),c}))).apply(this,arguments)}},9135:(e,t,r)=>{r.r(t),r.d(t,{supply:()=>s});var n=r(3028),a=r(5178),o=r(8874),i=r(4701);function s(e,t,r){var a=(0,n.Z)({},t);for(var o of(a[void 0]=void 0,e))if(!Object.prototype.hasOwnProperty.call(a,o)){var i=d(o,r);void 0!==i&&(a[o]=i)}return a}var l=new Set(["fill","pull","pullAll","pullAllBy","pullAllWith","pullAt","remove","reverse","assign","assignIn","assignInWith","assignWith","defaults","defaultsDeep","merge","mergeWith","set","setWith","unset","update","updateWith","after","ary","before","bind","bindKey","curry","curryRight","debounce","defer","delay","flip","memoize","negate","once","overArgs","partial","partialRight","rearg","rest","spread","throttle","unary","wrap"]),c=new Set(["lang","langData","locale","localeData","defineLocale","updateLocale","updateOffset"]),u=new Set(["Array","Boolean","Date","Infinity","JSON","Math","NaN","Number","String","RegExp","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","isFinite","isNaN","parseFloat","parseInt","Map","Set","URLSearchParams","WeakMap","WeakSet","atob","btoa"]);function d(e,t){switch(e){case"Object":return r=Object,n=["entries","fromEntries","keys","values"],Object.fromEntries(n.map((e=>[e,function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r[e].apply(r,n)}])));case"_":return Object.fromEntries(Object.entries(a).filter((e=>!l.has(e[0]))).concat(t?[["uniqueId",e=>"".concat(null!=e?e:"","42")]]:[]));case"moment":return Object.assign((function(){return o(...arguments)}),Object.fromEntries(Object.entries(o).filter((e=>!c.has(e[0])))));case"PIPES":return i.pipes;case"TAG_URL":return p(!0);case"SAFE_TAG_URL":return p();default:if(u.has(e))return window[e]}var r,n}function p(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var o=[];return t.forEach(((t,r)=>{o.push(t),r<n.length&&o.push(e?String(n[r]).replace(/[^/]+/g,(e=>encodeURIComponent(e))):encodeURIComponent(String(n[r])))})),o.join("")}}},1452:(e,t,r)=>{function n(e){return class extends HTMLElement{get $$typeof(){return"provider"}resolve(){return e(...arguments)}}}function a(e){var t=Object.getOwnPropertyNames(e);for(var r of t){var n=e[r];n&&"object"==typeof n&&a(n)}return Object.freeze(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function i(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}r.r(t),r.d(t,{JsonStorage:()=>s,createProviderClass:()=>n,deepFreeze:()=>a,hasOwnProperty:()=>o,isObject:()=>i,unwrapProvider:()=>c});class s{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"brick-next-";this.storage=e,this.prefix=t}setItem(e,t){this.storage.setItem(this.prefix+e,JSON.stringify(t))}getItem(e){var t;return JSON.parse(null!==(t=this.storage.getItem(this.prefix+e))&&void 0!==t?t:"null")}removeItem(e){return this.storage.removeItem(this.prefix+e)}clear(){return this.storage.clear()}}var l=new Map;function c(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=function(e){var t=l.get(e);return t||(t=document.createElement(e),l.set(e,t),t)}(e);return a.resolve(...r)}}},5472:(e,t,r)=>{function n(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(a,o){if("string"==typeof t?a.name===t:t.includes(a.name)){for(var i=[],s=1;s<=r;s++){var l=o[o.length-s];if("MemberExpression"===(null==l?void 0:l.node.type)&&"object"===l.key){var c=l.node;c.computed||"Identifier"!==c.property.type?c.computed&&"Literal"===c.property.type&&"string"==typeof c.property.value?i.push(n?"".concat(a.name,".").concat(c.property.value):c.property.value):e.hasNonStaticUsage=!0:i.push(n?"".concat(a.name,".").concat(c.property.name):c.property.name)}else e.hasNonStaticUsage=!0}i.length===r&&e.usedProperties.add(i.join("."))}}}function a(e,t){return function(r,n,a){if(n.name===e){var o=a[a.length-1],i=a[a.length-2];if("CallExpression"===(null==i?void 0:i.node.type)&&"callee"===(null==i?void 0:i.key)&&"MemberExpression"===(null==o?void 0:o.node.type)&&"object"===o.key&&(o.node.computed?"Literal"===o.node.property.type&&o.node.property.value===t:"Identifier"===o.node.property.type&&o.node.property.name===t)){var s=i.node.arguments;if(s.length>0){var l=s[0];"Literal"===l.type&&"string"==typeof l.value?r.usedArgs.add(l.value):r.hasNonStaticUsage=!0}}}}}r.r(t),r.d(t,{beforeVisitGlobalMember:()=>n,collectAppGetMenuUsage:()=>o,collectInstalledAppsHasUsage:()=>i,collectMemberUsage:()=>d,collectMemberUsageInFunction:()=>m,createProviderClass:()=>l.createProviderClass,scanPermissionActionsInAny:()=>E,scanPermissionActionsInStoryboard:()=>b,strictCollectMemberUsage:()=>u,track:()=>p,trackAll:()=>f,traverseStoryboardExpressions:()=>c,traverseStoryboardFunction:()=>h,traverseStoryboardFunctions:()=>v,unwrapProvider:()=>l.unwrapProvider});var o=a("APP","getMenu"),i=a("INSTALLED_APPS","has"),s=r(3647),l=r(5927);function c(e,t,r){var n=new WeakSet,{matchExpressionString:a,visitNotMatchedExpressionString:o,visitNonExpressionString:i,visitObject:c}="string"==typeof r?{matchExpressionString:e=>e.includes(r)}:r;!function e(r){if("string"==typeof r)if((0,s.isEvaluable)(r))if(a(r))try{(0,s.preevaluate)(r,{withParent:!0,hooks:{beforeVisitGlobal(e,n){t(e,n,r)}}})}catch(e){console.error("Parse storyboard expression failed:",e)}else null==o||o(r);else null==i||i(r);else if((0,l.isObject)(r)){if(n.has(r))return;for(var u of(n.add(r),null==c||c(r),Array.isArray(r)?r:Object.values(r)))e(u)}}(e)}function u(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{hasNonStaticUsage:n,nonStaticUsage:a,usedProperties:o}=d(e,t,r);if(n)throw new Error("Non-static usage of ".concat(t,' is prohibited, check your expression: "').concat(a,'"'));return o}function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a={usedProperties:new Set,hasNonStaticUsage:!1},o=n(a,t,r);return c(e,((e,t,r)=>{o(e,t),a.hasNonStaticUsage&&(a.nonStaticUsage=r)}),t),a}function p(e,t,r){if(e.includes(t)){var a,o={usedProperties:new Set,hasNonStaticUsage:!1},{expression:i}=(0,s.preevaluate)(e,{withParent:!0,hooks:{beforeVisitGlobal:n(o,r)}});if("SequenceExpression"===i.type&&(a=i.expressions[0])&&"Literal"===a.type&&a.value===t){if(o.usedProperties.size>0)return o.usedProperties;console.warn('You are using "'.concat(t,'" but no `').concat(r,"` usage found in your expression: ").concat(JSON.stringify(e)))}}return!1}function f(e){if(e){var t={usedProperties:new Set,hasNonStaticUsage:!1};if((0,s.preevaluate)(e,{withParent:!0,hooks:{beforeVisitGlobal:n(t,["CTX","STATE","FORM_STATE"],1,!0)}}),t.usedProperties.size>0){var r=[...t.usedProperties],a={context:!1,state:!1,formState:!1},o={CTX:"context",STATE:"state",FORM_STATE:"formState"};return r.forEach((e=>{var[t,r]=e.split(".");a[o[t]]||(a[o[t]]=[]),a[o[t]].push(r)})),a}console.warn('You are using track all but no "CTX" or "STATE" or "FORM_STATE" usage found in your expression: '.concat(JSON.stringify(e)))}return!1}function v(e,t){if(Array.isArray(e))for(var r of e)h(r,t)}function h(e,t,r){try{(0,s.precookFunction)(e.source,{typescript:e.typescript,withParent:!0,hooks:{beforeVisitGlobal:t}})}catch(t){r||console.error('Parse storyboard function "'.concat(e.name,'" failed:'),t)}}function m(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o={usedProperties:new Set,hasNonStaticUsage:!1};if(h(e,n(o,t,a),r),o.hasNonStaticUsage&&!r)throw new Error("Non-static usage of ".concat(t,' is prohibited, check your function: "').concat(e.name,'"'));return o.usedProperties.delete(e.name),o.usedProperties}var g="PERMISSIONS",y="check";function b(e){var t,r=new Set,n=w(r),{customTemplates:a,functions:o}=null!==(t=e.meta)&&void 0!==t?t:{};return c([e.routes,a],n,g),v(o,n),Array.from(r)}function E(e){var t=new Set;return c(e,w(t),g),Array.from(t)}function w(e){return function(t,r){if(t.name===g){var n=r[r.length-1],a=r[r.length-2];if("CallExpression"===(null==a?void 0:a.node.type)&&"callee"===(null==a?void 0:a.key)&&"MemberExpression"===(null==n?void 0:n.node.type)&&"object"===n.key&&(n.node.computed?"Literal"===n.node.property.type&&n.node.property.value===y:"Identifier"===n.node.property.type&&n.node.property.name===y))for(var o of a.node.arguments)"Literal"===o.type&&"string"==typeof o.value&&e.add(o.value)}}}}}]);
//# sourceMappingURL=core.991b57bb.js.map