"use strict";(self.webpackChunkbrick_docs=self.webpackChunkbrick_docs||[]).push([[6080],{86080:(e,t,r)=>{r.r(t),r.d(t,{default:()=>h});var n=r(67294),o=r(9200),c=r(43707),i=r(33788),s=r(80224),u=r(2243),a=r(91147),l=r(25150),d=r(7722);function h(e){let{code:t,type:r,className:s,automaticLayout:u,onChange:a}=e;const l=(0,n.useRef)(),h=(0,n.useRef)(),g=(0,n.useRef)({width:300,height:(0,d.Z)(t)}),y=(0,n.useRef)(u),{colorMode:p}=(0,o.I)();return(0,n.useEffect)((()=>{p&&c.editor.setTheme("dark"===p?"vs-dark":"vs")}),[p]),(0,n.useEffect)((()=>{if(h.current){const e=h.current.getModel();c.editor.setModelLanguage(e,r),e.setValue(t)}}),[t,r]),(0,n.useLayoutEffect)((()=>{if(y.current)return;g.current.width=l.current.getBoundingClientRect().width,h.current?.layout(g.current);const e=new ResizeObserver((e=>{for(const t of e)if(t.target===l.current){const e=t.contentBoxSize?t.contentBoxSize[0].inlineSize:t.contentRect.width;e!==g.current.width&&(g.current.width=e,h.current?.layout(g.current));break}}));return e.observe(l.current),()=>{e.disconnect()}}),[]),(0,n.useEffect)((()=>{if(h.current)return;const e=c.editor.createModel(t,r??"yaml");h.current=c.editor.create(l.current,{model:e,minimap:{enabled:!1},scrollBeyondLastLine:!1,tabSize:2,insertSpaces:!0,automaticLayout:y.current,fontSize:13,lineHeight:i.CZ,scrollbar:{horizontalScrollbarSize:i.sE,verticalScrollbarSize:i.sE,horizontalSliderSize:8,verticalSliderSize:8,alwaysConsumeMouseWheel:!1},padding:{top:i.z5},overviewRulerBorder:!1,mouseWheelScrollSensitivity:.5,renderLineHighlight:"none"}),h.current.onKeyDown((e=>{if(e.equals(c.KeyMod.CtrlCmd|c.KeyCode.KeyK)){const t=new KeyboardEvent("keydown",{ctrlKey:e.ctrlKey,metaKey:e.metaKey,key:"k"});document.dispatchEvent(t)}})),y.current||(h.current.onDidContentSizeChange((e=>{if(e.contentHeightChanged){const t=f(e.contentHeight);t!==g.current.height&&(g.current.height=t,h.current.layout(g.current))}})),g.current.height=f(h.current.getContentHeight()),h.current.layout(g.current))}),[t,r]),(0,n.useEffect)((()=>{const e=h.current.getModel(),t=e.onDidChangeContent((t=>{a?.(e.getValue(),t.isFlush)}));return()=>{t.dispose()}}),[a]),(0,n.useEffect)((()=>()=>{h.current.getModel().dispose(),h.current.dispose()}),[]),n.createElement("div",{ref:l,className:s})}function f(e){let t=e;return(e-i.z5)%i.CZ==0&&(t=e+i.sE),Math.max(t,i.lV)}(0,s.z2)(c),(0,u.z2)(c),(0,a.z2)(c),(0,l.z2)(c),c.languages.typescript.javascriptDefaults.setCompilerOptions({allowNonTsExtensions:!0,lib:[]}),c.languages.typescript.typescriptDefaults.setCompilerOptions({allowNonTsExtensions:!0,lib:[]})},33788:(e,t,r)=>{r.d(t,{CZ:()=>n,cP:()=>o,lV:()=>s,sE:()=>c,z5:()=>i});const n=22,o=88,c=12,i=12,s=3*n+i+c},7722:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(33788);function o(e){return Math.max(n.lV,e.split("\n").length*n.CZ+n.sE+n.z5)}}}]);