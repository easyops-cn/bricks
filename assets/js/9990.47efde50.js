"use strict";(globalThis.webpackChunkbrick_docs=globalThis.webpackChunkbrick_docs||[]).push([[9990],{237:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(7294),o=n(9507),s=n(6602),i=n(2748),c=n(224),u=n(2243),a=n(1147),l=n(5150),d=n(5785),h=n(5893);function f(e){let{code:t,type:n,className:c,automaticLayout:u,onChange:a}=e;const l=(0,r.useRef)(),f=(0,r.useRef)(),m=(0,r.useRef)({width:300,height:(0,d.Z)(t)}),C=(0,r.useRef)(u),{colorMode:p}=(0,o.I)();return(0,r.useEffect)((()=>{p&&s.editor.setTheme("dark"===p?"vs-dark":"vs")}),[p]),(0,r.useEffect)((()=>{if(f.current){const e=f.current.getModel();s.editor.setModelLanguage(e,n),e.setValue(t)}}),[t,n]),(0,r.useEffect)((()=>{var e;if(C.current)return;m.current.width=l.current.getBoundingClientRect().width,null==(e=f.current)||e.layout(m.current);const t=new ResizeObserver((e=>{for(const n of e)if(n.target===l.current){const e=n.contentBoxSize?n.contentBoxSize[0].inlineSize:n.contentRect.width;var t;if(e!==m.current.width)m.current.width=e,null==(t=f.current)||t.layout(m.current);break}}));return t.observe(l.current),()=>{t.disconnect()}}),[]),(0,r.useEffect)((()=>{if(f.current)return;const e=s.editor.createModel(t,n??"yaml");f.current=s.editor.create(l.current,{model:e,minimap:{enabled:!1},scrollBeyondLastLine:!1,tabSize:2,insertSpaces:!0,automaticLayout:C.current,fontSize:13,lineHeight:i.CZ,scrollbar:{horizontalScrollbarSize:i.sE,verticalScrollbarSize:i.sE,horizontalSliderSize:8,verticalSliderSize:8,alwaysConsumeMouseWheel:!1},padding:{top:i.z5},overviewRulerBorder:!1,mouseWheelScrollSensitivity:.5,renderLineHighlight:"none"}),f.current.onKeyDown((e=>{if(e.equals(s.KeyMod.CtrlCmd|s.KeyCode.KeyK)){const t=new KeyboardEvent("keydown",{ctrlKey:e.ctrlKey,metaKey:e.metaKey,key:"k"});document.dispatchEvent(t)}})),C.current||(f.current.onDidContentSizeChange((e=>{if(e.contentHeightChanged){const t=g(e.contentHeight);t!==m.current.height&&(m.current.height=t,f.current.layout(m.current))}})),m.current.height=g(f.current.getContentHeight()),f.current.layout(m.current))}),[t,n]),(0,r.useEffect)((()=>{const e=f.current.getModel(),t=e.onDidChangeContent((t=>{null==a||a(e.getValue(),t.isFlush)}));return()=>{t.dispose()}}),[a]),(0,r.useEffect)((()=>()=>{f.current.getModel().dispose(),f.current.dispose()}),[]),(0,h.jsx)("div",{ref:l,className:c})}function g(e){let t=e;return(e-i.z5)%i.CZ==0&&(t=e+i.sE),Math.max(t,i.lV)}(0,c.z2)(s),(0,u.z2)(s),(0,a.z2)(s),(0,l.z2)(s),s.languages.typescript.javascriptDefaults.setCompilerOptions({allowNonTsExtensions:!0,lib:[]}),s.languages.typescript.typescriptDefaults.setCompilerOptions({allowNonTsExtensions:!0,lib:[]})},2748:(e,t,n)=>{n.d(t,{CZ:()=>r,cP:()=>o,lV:()=>c,sE:()=>s,z5:()=>i});const r=22,o=88,s=12,i=12,c=3*r+i+s},5785:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(2748);function o(e){return Math.max(r.lV,e.split("\n").length*r.CZ+r.sE+r.z5)}},2846:(e,t,n)=>{n.d(t,{w:()=>s});const r=new RegExp("\\b(MARK:\\s*)(.*)$"),o=/^-+|-+$/g;function s(e,t){let n=[];if(t.findRegionSectionHeaders&&t.foldingRules?.markers){const r=function(e,t){const n=[],r=e.getLineCount();for(let o=1;o<=r;o++){const r=e.getLineContent(o),s=r.match(t.foldingRules.markers.start);if(s){const e={startLineNumber:o,startColumn:s[0].length+1,endLineNumber:o,endColumn:r.length+1};if(e.endColumn>e.startColumn){const t={range:e,...c(r.substring(s[0].length)),shouldBeInComments:!1};(t.text||t.hasSeparatorLine)&&n.push(t)}}}return n}(e,t);n=n.concat(r)}if(t.findMarkSectionHeaders){const t=function(e){const t=[],n=e.getLineCount();for(let r=1;r<=n;r++){i(e.getLineContent(r),r,t)}return t}(e);n=n.concat(t)}return n}function i(e,t,n){r.lastIndex=0;const o=r.exec(e);if(o){const e=o.index+o[1].length+1,r={startLineNumber:t,startColumn:e,endLineNumber:t,endColumn:e+o[2].length};if(r.endColumn>r.startColumn){const e={range:r,...c(o[1]),shouldBeInComments:!0};(e.text||e.hasSeparatorLine)&&n.push(e)}}}function c(e){const t=(e=e.trim()).startsWith("-");return{text:e=e.replace(o,""),hasSeparatorLine:t}}}}]);